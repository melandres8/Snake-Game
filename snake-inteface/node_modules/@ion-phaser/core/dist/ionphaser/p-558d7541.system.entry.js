var __awaiter=this&&this.__awaiter||function(e,t,i,r){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):n(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return l([e,t])}}function l(a){if(r)throw new TypeError("Generator is already executing.");while(i)try{if(r=1,n&&(s=a[0]&2?n["return"]:a[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;if(n=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;n=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(a[0]===6&&i.label<s[1]){i.label=s[1];s=a;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(a);break}if(s[2])i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(o){a=[6,o];n=0}finally{r=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-1b629fe8.system.js"],(function(exports){"use strict";var registerInstance,getElement;return{setters:[function(e){registerInstance=e.r;getElement=e.g}],execute:function(){var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}if(!Array.prototype.forEach){Array.prototype.forEach=function(e){if(this===void 0||this===null){throw new TypeError}var t=Object(this);var i=t.length>>>0;if(typeof e!=="function"){throw new TypeError}var r=arguments.length>=2?arguments[1]:void 0;for(var n=0;n<i;n++){if(n in t){e.call(r,t[n],n,t)}}}}if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}(function(){function e(e){if(!e)return;if(!e.setTargetAtTime)e.setTargetAtTime=e.setTargetValueAtTime}if(window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")){window.AudioContext=webkitAudioContext;if(!AudioContext.prototype.hasOwnProperty("createGain"))AudioContext.prototype.createGain=AudioContext.prototype.createGainNode;if(!AudioContext.prototype.hasOwnProperty("createDelay"))AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode;if(!AudioContext.prototype.hasOwnProperty("createScriptProcessor"))AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode;if(!AudioContext.prototype.hasOwnProperty("createPeriodicWave"))AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable;AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain;AudioContext.prototype.createGain=function(){var t=this.internal_createGain();e(t.gain);return t};AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay;AudioContext.prototype.createDelay=function(t){var i=t?this.internal_createDelay(t):this.internal_createDelay();e(i.delayTime);return i};AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource;AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();if(!t.start){t.start=function(e,t,i){if(t||i)this.noteGrainOn(e||0,t,i);else this.noteOn(e||0)}}else{t.internal_start=t.start;t.start=function(e,i,r){if(typeof r!=="undefined")t.internal_start(e||0,i,r);else t.internal_start(e||0,i||0)}}if(!t.stop){t.stop=function(e){this.noteOff(e||0)}}else{t.internal_stop=t.stop;t.stop=function(e){t.internal_stop(e||0)}}e(t.playbackRate);return t};AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor;AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();e(t.threshold);e(t.knee);e(t.ratio);e(t.reduction);e(t.attack);e(t.release);return t};AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter;AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();e(t.frequency);e(t.detune);e(t.Q);e(t.gain);return t};if(AudioContext.prototype.hasOwnProperty("createOscillator")){AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator;AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();if(!t.start){t.start=function(e){this.noteOn(e||0)}}else{t.internal_start=t.start;t.start=function(e){t.internal_start(e||0)}}if(!t.stop){t.stop=function(e){this.noteOff(e||0)}}else{t.internal_stop=t.stop;t.stop=function(e){t.internal_stop(e||0)}}if(!t.setPeriodicWave)t.setPeriodicWave=t.setWaveTable;e(t.frequency);e(t.detune);return t}}}if(window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")){window.OfflineAudioContext=webkitOfflineAudioContext}})();if(!window.console){window.console={};window.console.log=window.console.assert=function(){};window.console.warn=window.console.assert=function(){}}if(!Math.trunc){Math.trunc=function e(t){return t<0?Math.ceil(t):Math.floor(t)}}(function(){if("performance"in window===false){window.performance={}}Date.now=Date.now||function(){return(new Date).getTime()};if("now"in window.performance===false){var e=Date.now();if(performance.timing&&performance.timing.navigationStart){e=performance.timing.navigationStart}window.performance.now=function t(){return Date.now()-e}}})();if(!(Date.now&&Date.prototype.getTime)){Date.now=function e(){return(new Date).getTime()}}if(!(commonjsGlobal.performance&&commonjsGlobal.performance.now)){var startTime=Date.now();if(!commonjsGlobal.performance){commonjsGlobal.performance={}}commonjsGlobal.performance.now=function(){return Date.now()-startTime}}var lastTime=Date.now();var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!commonjsGlobal.requestAnimationFrame;++x){commonjsGlobal.requestAnimationFrame=commonjsGlobal[vendors[x]+"RequestAnimationFrame"];commonjsGlobal.cancelAnimationFrame=commonjsGlobal[vendors[x]+"CancelAnimationFrame"]||commonjsGlobal[vendors[x]+"CancelRequestAnimationFrame"]}if(!commonjsGlobal.requestAnimationFrame){commonjsGlobal.requestAnimationFrame=function(e){if(typeof e!=="function"){throw new TypeError(e+"is not a function")}var t=Date.now(),i=16+lastTime-t;if(i<0){i=0}lastTime=t;return setTimeout((function(){lastTime=Date.now();e(performance.now())}),i)}}if(!commonjsGlobal.cancelAnimationFrame){commonjsGlobal.cancelAnimationFrame=function(e){clearTimeout(e)}}if(typeof window.Uint32Array!=="function"&&typeof window.Uint32Array!=="object"){var CheapArray=function(e){var t=new Array;window[e]=function(e){if(typeof e==="number"){Array.call(this,e);this.length=e;for(var t=0;t<this.length;t++){this[t]=0}}else{Array.call(this,e.length);this.length=e.length;for(var t=0;t<this.length;t++){this[t]=e[t]}}};window[e].prototype=t;window[e].constructor=window[e]};CheapArray("Float32Array");CheapArray("Uint32Array");CheapArray("Uint16Array");CheapArray("Int16Array");CheapArray("ArrayBuffer")}
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BlendModes={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScaleModes={DEFAULT:0,LINEAR:0,NEAREST:1};var ScaleModes_1=ScaleModes;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONST={VERSION:"3.19.0",BlendModes:BlendModes,ScaleModes:ScaleModes_1,AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};var _const=CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsPlainObject=function(e){if(typeof e!=="object"||e.nodeType||e===e.window){return false}try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(t){return false}return true};var IsPlainObject_1=IsPlainObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Extend=function(){var e,t,i,r,n,s,a=arguments[0]||{},o=1,l=arguments.length,h=false;if(typeof a==="boolean"){h=a;a=arguments[1]||{};o=2}if(l===o){a=this;--o}for(;o<l;o++){if((e=arguments[o])!=null){for(t in e){i=a[t];r=e[t];if(a===r){continue}if(h&&r&&(IsPlainObject_1(r)||(n=Array.isArray(r)))){if(n){n=false;s=i&&Array.isArray(i)?i:[]}else{s=i&&IsPlainObject_1(i)?i:{}}a[t]=Extend(h,s,r)}else if(r!==undefined){a[t]=r}}}}return a};var Extend_1=Extend;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PropertyValueInc=function(e,t,i,r,n,s){if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=1}var a;var o=0;var l=e.length;if(s===1){for(a=n;a<l;a++){e[a][t]+=i+o*r;o++}}else{for(a=n;a>=0;a--){e[a][t]+=i+o*r;o++}}return e};var PropertyValueInc_1=PropertyValueInc;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Angle=function(e,t,i,r,n){return PropertyValueInc_1(e,"angle",t,i,r,n)};var Angle_1=Angle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Call=function(e,t,i){for(var r=0;r<e.length;r++){var n=e[r];t.call(i,n)}return e};var Call_1=Call;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetFirst=function(e,t,i){if(i===undefined){i=0}for(var r=i;r<e.length;r++){var n=e[r];var s=true;for(var a in t){if(n[a]!==t[a]){s=false}}if(s){return n}}return null};var GetFirst_1=GetFirst;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetLast=function(e,t,i){if(i===undefined){i=0}for(var r=i;r<e.length;r++){var n=e[r];var s=true;for(var a in t){if(n[a]!==t[a]){s=false}}if(s){return n}}return null};var GetLast_1=GetLast;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ALIGN_CONST={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};var _const$1=ALIGN_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBottom=function(e){return e.y+e.height-e.height*e.originY};var GetBottom_1=GetBottom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCenterX=function(e){return e.x-e.width*e.originX+e.width*.5};var GetCenterX_1=GetCenterX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetBottom=function(e,t){e.y=t-e.height+e.height*e.originY;return e};var SetBottom_1=SetBottom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCenterX=function(e,t){var i=e.width*e.originX;e.x=t+i-e.width*.5;return e};var SetCenterX_1=SetCenterX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomCenter=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetCenterX_1(e,GetCenterX_1(t)+i);SetBottom_1(e,GetBottom_1(t)+r);return e};var BottomCenter_1=BottomCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetLeft=function(e){return e.x-e.width*e.originX};var GetLeft_1=GetLeft;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetLeft=function(e,t){e.x=t+e.width*e.originX;return e};var SetLeft_1=SetLeft;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomLeft=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetLeft_1(t)-i);SetBottom_1(e,GetBottom_1(t)+r);return e};var BottomLeft_1=BottomLeft;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRight=function(e){return e.x+e.width-e.width*e.originX};var GetRight_1=GetRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetRight=function(e,t){e.x=t-e.width+e.width*e.originX;return e};var SetRight_1=SetRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomRight=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetRight_1(t)+i);SetBottom_1(e,GetBottom_1(t)+r);return e};var BottomRight_1=BottomRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCenterY=function(e,t){var i=e.height*e.originY;e.y=t+i-e.height*.5;return e};var SetCenterY_1=SetCenterY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CenterOn=function(e,t,i){SetCenterX_1(e,t);return SetCenterY_1(e,i)};var CenterOn_1=CenterOn;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCenterY=function(e){return e.y-e.height*e.originY+e.height*.5};var GetCenterY_1=GetCenterY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Center=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}CenterOn_1(e,GetCenterX_1(t)+i,GetCenterY_1(t)+r);return e};var Center_1=Center;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LeftCenter=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetLeft_1(t)-i);SetCenterY_1(e,GetCenterY_1(t)+r);return e};var LeftCenter_1=LeftCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RightCenter=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetRight_1(t)+i);SetCenterY_1(e,GetCenterY_1(t)+r);return e};var RightCenter_1=RightCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTop=function(e){return e.y-e.height*e.originY};var GetTop_1=GetTop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTop=function(e,t){e.y=t+e.height*e.originY;return e};var SetTop_1=SetTop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopCenter=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetCenterX_1(e,GetCenterX_1(t)+i);SetTop_1(e,GetTop_1(t)-r);return e};var TopCenter_1=TopCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopLeft=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetLeft_1(t)-i);SetTop_1(e,GetTop_1(t)-r);return e};var TopLeft_1=TopLeft;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopRight=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetRight_1(t)+i);SetTop_1(e,GetTop_1(t)-r);return e};var TopRight_1=TopRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AlignInMap=[];AlignInMap[_const$1.BOTTOM_CENTER]=BottomCenter_1;AlignInMap[_const$1.BOTTOM_LEFT]=BottomLeft_1;AlignInMap[_const$1.BOTTOM_RIGHT]=BottomRight_1;AlignInMap[_const$1.CENTER]=Center_1;AlignInMap[_const$1.LEFT_CENTER]=LeftCenter_1;AlignInMap[_const$1.RIGHT_CENTER]=RightCenter_1;AlignInMap[_const$1.TOP_CENTER]=TopCenter_1;AlignInMap[_const$1.TOP_LEFT]=TopLeft_1;AlignInMap[_const$1.TOP_RIGHT]=TopRight_1;var QuickSet=function(e,t,i,r,n){return AlignInMap[i](e,t,r,n)};var QuickSet_1=QuickSet;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetFastValue=function(e,t,i){var r=typeof e;if(!e||r==="number"||r==="string"){return i}else if(e.hasOwnProperty(t)&&e[t]!==undefined){return e[t]}else{return i}};var GetFastValue_1=GetFastValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NOOP=function(){};var NOOP_1=NOOP;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function hasGetterOrSetter(e){return!!e.get&&typeof e.get==="function"||!!e.set&&typeof e.set==="function"}function getProperty(e,t,i){var r=i?e[t]:Object.getOwnPropertyDescriptor(e,t);if(!i&&r.value&&typeof r.value==="object"){r=r.value}if(r&&hasGetterOrSetter(r)){if(typeof r.enumerable==="undefined"){r.enumerable=true}if(typeof r.configurable==="undefined"){r.configurable=true}return r}else{return false}}function hasNonConfigurable(e,t){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){return false}if(i.value&&typeof i.value==="object"){i=i.value}if(i.configurable===false){return true}return false}function extend(e,t,i,r){for(var n in t){if(!t.hasOwnProperty(n)){continue}var s=getProperty(t,n,i);if(s!==false){var a=r||e;if(hasNonConfigurable(a.prototype,n)){if(Class.ignoreFinals){continue}throw new Error("cannot override final property '"+n+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,n,s)}else{e.prototype[n]=t[n]}}}function mixin(e,t){if(!t){return}if(!Array.isArray(t)){t=[t]}for(var i=0;i<t.length;i++){extend(e,t[i].prototype||t[i])}}function Class(e){if(!e){e={}}var t;var i;if(e.initialize){if(typeof e.initialize!=="function"){throw new Error("initialize must be a function")}t=e.initialize;delete e.initialize}else if(e.Extends){var r=e.Extends;t=function(){r.apply(this,arguments)}}else{t=function(){}}if(e.Extends){t.prototype=Object.create(e.Extends.prototype);t.prototype.constructor=t;i=e.Extends;delete e.Extends}else{t.prototype.constructor=t}var n=null;if(e.Mixins){n=e.Mixins;delete e.Mixins}mixin(t,n);extend(t,e,true,i);return t}Class.extend=extend;Class.mixin=mixin;Class.ignoreFinals=false;var Class_1=Class;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Contains=function(e,t,i){if(e.radius>0&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom){var r=(e.x-t)*(e.x-t);var n=(e.y-i)*(e.y-i);return r+n<=e.radius*e.radius}else{return false}};var Contains_1=Contains;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GEOM_CONST={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};var _const$2=GEOM_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Point=new Class_1({initialize:function e(t,i){if(t===undefined){t=0}if(i===undefined){i=t}this.type=_const$2.POINT;this.x=t;this.y=i},setTo:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.x=e;this.y=t;return this}});var Point_1=Point;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CircumferencePoint=function(e,t,i){if(i===undefined){i=new Point_1}i.x=e.x+e.radius*Math.cos(t);i.y=e.y+e.radius*Math.sin(t);return i};var CircumferencePoint_1=CircumferencePoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clamp=function(e,t,i){return Math.max(t,Math.min(i,e))};var Clamp_1=Clamp;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FromPercent=function(e,t,i){e=Clamp_1(e,0,1);return(i-t)*e};var FromPercent_1=FromPercent;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MATH_CONST={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null};var _const$3=MATH_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoint=function(e,t,i){if(i===undefined){i=new Point_1}var r=FromPercent_1(t,0,_const$3.PI2);return CircumferencePoint_1(e,r,i)};var GetPoint_1=GetPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Circumference=function(e){return 2*(Math.PI*e.radius)};var Circumference_1=Circumference;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints=function(e,t,i,r){if(r===undefined){r=[]}if(!t){t=Circumference_1(e)/i}for(var n=0;n<t;n++){var s=FromPercent_1(n/t,0,_const$3.PI2);r.push(CircumferencePoint_1(e,s))}return r};var GetPoints_1=GetPoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Random=function(e,t){if(t===undefined){t=new Point_1}var i=2*Math.PI*Math.random();var r=Math.random()+Math.random();var n=r>1?2-r:r;var s=n*Math.cos(i);var a=n*Math.sin(i);t.x=e.x+s*e.radius;t.y=e.y+a*e.radius;return t};var Random_1=Random;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Circle=new Class_1({initialize:function e(t,i,r){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}this.type=_const$2.CIRCLE;this.x=t;this.y=i;this._radius=r;this._diameter=r*2},contains:function(e,t){return Contains_1(this,e,t)},getPoint:function(e,t){return GetPoint_1(this,e,t)},getPoints:function(e,t,i){return GetPoints_1(this,e,t,i)},getRandomPoint:function(e){return Random_1(this,e)},setTo:function(e,t,i){this.x=e;this.y=t;this._radius=i;this._diameter=i*2;return this},setEmpty:function(){this._radius=0;this._diameter=0;return this},setPosition:function(e,t){if(t===undefined){t=e}this.x=e;this.y=t;return this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(e){this._radius=e;this._diameter=e*2}},diameter:{get:function(){return this._diameter},set:function(e){this._diameter=e;this._radius=e*.5}},left:{get:function(){return this.x-this._radius},set:function(e){this.x=e+this._radius}},right:{get:function(){return this.x+this._radius},set:function(e){this.x=e-this._radius}},top:{get:function(){return this.y-this._radius},set:function(e){this.y=e+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(e){this.y=e-this._radius}}});var Circle_1=Circle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG=2;var Alpha={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e,t,i,r){if(e===undefined){e=1}if(t===undefined){this.alpha=e}else{this._alphaTL=Clamp_1(e,0,1);this._alphaTR=Clamp_1(t,0,1);this._alphaBL=Clamp_1(i,0,1);this._alphaBR=Clamp_1(r,0,1)}return this},alpha:{get:function(){return this._alpha},set:function(e){var t=Clamp_1(e,0,1);this._alpha=t;this._alphaTL=t;this._alphaTR=t;this._alphaBL=t;this._alphaBR=t;if(t===0){this.renderFlags&=~_FLAG}else{this.renderFlags|=_FLAG}}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(e){var t=Clamp_1(e,0,1);this._alphaTL=t;if(t!==0){this.renderFlags|=_FLAG}}},alphaTopRight:{get:function(){return this._alphaTR},set:function(e){var t=Clamp_1(e,0,1);this._alphaTR=t;if(t!==0){this.renderFlags|=_FLAG}}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(e){var t=Clamp_1(e,0,1);this._alphaBL=t;if(t!==0){this.renderFlags|=_FLAG}}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(e){var t=Clamp_1(e,0,1);this._alphaBR=t;if(t!==0){this.renderFlags|=_FLAG}}}};var Alpha_1=Alpha;var eventemitter3=createCommonjsModule((function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}if(Object.create){r.prototype=Object.create(null);if(!(new r).__proto__)i=false}function n(e,t,i){this.fn=e;this.context=t;this.once=i||false}function s(e,t,r,s,a){if(typeof r!=="function"){throw new TypeError("The listener must be a function")}var o=new n(r,s||e,a),l=i?i+t:t;if(!e._events[l])e._events[l]=o,e._eventsCount++;else if(!e._events[l].fn)e._events[l].push(o);else e._events[l]=[e._events[l],o];return e}function a(e,t){if(--e._eventsCount===0)e._events=new r;else delete e._events[t]}function o(){this._events=new r;this._eventsCount=0}o.prototype.eventNames=function e(){var r=[],n,s;if(this._eventsCount===0)return r;for(s in n=this._events){if(t.call(n,s))r.push(i?s.slice(1):s)}if(Object.getOwnPropertySymbols){return r.concat(Object.getOwnPropertySymbols(n))}return r};o.prototype.listeners=function e(t){var r=i?i+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,o=new Array(a);s<a;s++){o[s]=n[s].fn}return o};o.prototype.listenerCount=function e(t){var r=i?i+t:t,n=this._events[r];if(!n)return 0;if(n.fn)return 1;return n.length};o.prototype.emit=function e(t,r,n,s,a,o){var l=i?i+t:t;if(!this._events[l])return false;var h=this._events[l],u=arguments.length,c,f;if(h.fn){if(h.once)this.removeListener(t,h.fn,undefined,true);switch(u){case 1:return h.fn.call(h.context),true;case 2:return h.fn.call(h.context,r),true;case 3:return h.fn.call(h.context,r,n),true;case 4:return h.fn.call(h.context,r,n,s),true;case 5:return h.fn.call(h.context,r,n,s,a),true;case 6:return h.fn.call(h.context,r,n,s,a,o),true}for(f=1,c=new Array(u-1);f<u;f++){c[f-1]=arguments[f]}h.fn.apply(h.context,c)}else{var d=h.length,v;for(f=0;f<d;f++){if(h[f].once)this.removeListener(t,h[f].fn,undefined,true);switch(u){case 1:h[f].fn.call(h[f].context);break;case 2:h[f].fn.call(h[f].context,r);break;case 3:h[f].fn.call(h[f].context,r,n);break;case 4:h[f].fn.call(h[f].context,r,n,s);break;default:if(!c)for(v=1,c=new Array(u-1);v<u;v++){c[v-1]=arguments[v]}h[f].fn.apply(h[f].context,c)}}}return true};o.prototype.on=function e(t,i,r){return s(this,t,i,r,false)};o.prototype.once=function e(t,i,r){return s(this,t,i,r,true)};o.prototype.removeListener=function e(t,r,n,s){var o=i?i+t:t;if(!this._events[o])return this;if(!r){a(this,o);return this}var l=this._events[o];if(l.fn){if(l.fn===r&&(!s||l.once)&&(!n||l.context===n)){a(this,o)}}else{for(var h=0,u=[],c=l.length;h<c;h++){if(l[h].fn!==r||s&&!l[h].once||n&&l[h].context!==n){u.push(l[h])}}if(u.length)this._events[o]=u.length===1?u[0]:u;else a(this,o)}return this};o.prototype.removeAllListeners=function e(t){var n;if(t){n=i?i+t:t;if(this._events[n])a(this,n)}else{this._events=new r;this._eventsCount=0}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prefixed=i;o.EventEmitter=o;{e.exports=o}}));
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ADD_ANIMATION_EVENT="add";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANIMATION_COMPLETE_EVENT="complete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANIMATION_REPEAT_EVENT="repeat";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANIMATION_RESTART_EVENT="restart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANIMATION_START_EVENT="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_ALL_EVENT="pauseall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var REMOVE_ANIMATION_EVENT="remove";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_ALL_EVENT="resumeall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_COMPLETE_EVENT="animationcomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_KEY_COMPLETE_EVENT="animationcomplete-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_KEY_REPEAT_EVENT="animationrepeat-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_KEY_RESTART_EVENT="animationrestart-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_KEY_START_EVENT="animationstart-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_KEY_UPDATE_EVENT="animationupdate-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_REPEAT_EVENT="animationrepeat";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_RESTART_EVENT="animationrestart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_START_EVENT="animationstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SPRITE_ANIMATION_UPDATE_EVENT="animationupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events={ADD_ANIMATION:ADD_ANIMATION_EVENT,ANIMATION_COMPLETE:ANIMATION_COMPLETE_EVENT,ANIMATION_REPEAT:ANIMATION_REPEAT_EVENT,ANIMATION_RESTART:ANIMATION_RESTART_EVENT,ANIMATION_START:ANIMATION_START_EVENT,PAUSE_ALL:PAUSE_ALL_EVENT,REMOVE_ANIMATION:REMOVE_ANIMATION_EVENT,RESUME_ALL:RESUME_ALL_EVENT,SPRITE_ANIMATION_COMPLETE:SPRITE_ANIMATION_COMPLETE_EVENT,SPRITE_ANIMATION_KEY_COMPLETE:SPRITE_ANIMATION_KEY_COMPLETE_EVENT,SPRITE_ANIMATION_KEY_REPEAT:SPRITE_ANIMATION_KEY_REPEAT_EVENT,SPRITE_ANIMATION_KEY_RESTART:SPRITE_ANIMATION_KEY_RESTART_EVENT,SPRITE_ANIMATION_KEY_START:SPRITE_ANIMATION_KEY_START_EVENT,SPRITE_ANIMATION_KEY_UPDATE:SPRITE_ANIMATION_KEY_UPDATE_EVENT,SPRITE_ANIMATION_REPEAT:SPRITE_ANIMATION_REPEAT_EVENT,SPRITE_ANIMATION_RESTART:SPRITE_ANIMATION_RESTART_EVENT,SPRITE_ANIMATION_START:SPRITE_ANIMATION_START_EVENT,SPRITE_ANIMATION_UPDATE:SPRITE_ANIMATION_UPDATE_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FindClosestInSorted=function(e,t,i){if(!t.length){return NaN}else if(t.length===1){return t[0]}var r=1;var n;var s;if(i){if(e<t[0][i]){return t[0]}while(t[r][i]<e){r++}}else{while(t[r]<e){r++}}if(r>t.length){r=t.length}if(i){n=t[r-1][i];s=t[r][i];return s-e<=e-n?t[r]:t[r-1]}else{n=t[r-1];s=t[r];return s-e<=e-n?s:n}};var FindClosestInSorted_1=FindClosestInSorted;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AnimationFrame=new Class_1({initialize:function e(t,i,r,n){this.textureKey=t;this.textureFrame=i;this.index=r;this.frame=n;this.isFirst=false;this.isLast=false;this.prevFrame=null;this.nextFrame=null;this.duration=0;this.progress=0},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=undefined}});var AnimationFrame_1=AnimationFrame;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetValue=function(e,t,i){if(!e||typeof e==="number"){return i}else if(e.hasOwnProperty(t)){return e[t]}else if(t.indexOf(".")!==-1){var r=t.split(".");var n=e;var s=i;for(var a=0;a<r.length;a++){if(n.hasOwnProperty(r[a])){s=n[r[a]];n=n[r[a]]}else{s=i;break}}return s}else{return i}};var GetValue_1=GetValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Animation=new Class_1({Extends:eventemitter3,initialize:function e(t,i,r){eventemitter3.call(this);this.manager=t;this.key=i;this.type="frame";this.frames=this.getFrames(t.textureManager,GetValue_1(r,"frames",[]),GetValue_1(r,"defaultTextureKey",null));this.frameRate=GetValue_1(r,"frameRate",null);this.duration=GetValue_1(r,"duration",null);if(this.duration===null&&this.frameRate===null){this.frameRate=24;this.duration=this.frameRate/this.frames.length*1e3}else if(this.duration&&this.frameRate===null){this.frameRate=this.frames.length/(this.duration/1e3)}else{this.duration=this.frames.length/this.frameRate*1e3}this.msPerFrame=1e3/this.frameRate;this.skipMissedFrames=GetValue_1(r,"skipMissedFrames",true);this.delay=GetValue_1(r,"delay",0);this.repeat=GetValue_1(r,"repeat",0);this.repeatDelay=GetValue_1(r,"repeatDelay",0);this.yoyo=GetValue_1(r,"yoyo",false);this.showOnStart=GetValue_1(r,"showOnStart",false);this.hideOnComplete=GetValue_1(r,"hideOnComplete",false);this.paused=false;this.manager.on(events.PAUSE_ALL,this.pause,this);this.manager.on(events.RESUME_ALL,this.resume,this)},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var i=this.getFrames(this.manager.textureManager,t);if(i.length>0){if(e===0){this.frames=i.concat(this.frames)}else if(e===this.frames.length){this.frames=this.frames.concat(i)}else{var r=this.frames.slice(0,e);var n=this.frames.slice(e);this.frames=r.concat(i,n)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},completeAnimation:function(e){if(this.hideOnComplete){e.parent.visible=false}e.stop()},getFirstTick:function(e,t){if(t===undefined){t=true}e.accumulator=0;e.nextTick=e.msPerFrame+e.currentFrame.duration;if(t){e.nextTick+=e._delay}},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,i){var r=[];var n;var s;var a=1;var o;var l;if(typeof t==="string"){l=t;var h=e.get(l);var u=h.getFrameNames();t=[];u.forEach((function(e,i){t.push({key:l,frame:i})}))}if(!Array.isArray(t)||t.length===0){return r}for(o=0;o<t.length;o++){var c=t[o];var f=GetValue_1(c,"key",i);if(!f){continue}var d=GetValue_1(c,"frame",0);var v=e.getFrame(f,d);s=new AnimationFrame_1(f,d,a,v);s.duration=GetValue_1(c,"duration",0);s.isFirst=!n;if(n){n.nextFrame=s;s.prevFrame=n}r.push(s);n=s;a++}if(r.length>0){s.isLast=true;s.nextFrame=r[0];r[0].prevFrame=s;var p=1/(r.length-1);for(o=0;o<r.length;o++){r[o].progress=o*p}}return r},getNextTick:function(e){e.accumulator-=e.nextTick;e.nextTick=e.msPerFrame+e.currentFrame.duration},load:function(e,t){if(t>=this.frames.length){t=0}if(e.currentAnim!==this){e.currentAnim=this;e.frameRate=this.frameRate;e.duration=this.duration;e.msPerFrame=this.msPerFrame;e.skipMissedFrames=this.skipMissedFrames;e._delay=this.delay;e._repeat=this.repeat;e._repeatDelay=this.repeatDelay;e._yoyo=this.yoyo}var i=this.frames[t];if(t===0&&!e.forward){i=this.getLastFrame()}e.updateFrame(i)},getFrameByProgress:function(e){e=Clamp_1(e,0,1);return FindClosestInSorted_1(e,this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;if(t.isLast){if(e._yoyo){this.handleYoyoFrame(e,false)}else if(e.repeatCounter>0){if(e._reverse&&e.forward){e.forward=false}else{this.repeatAnimation(e)}}else{this.completeAnimation(e)}}else{this.updateAndGetNextTick(e,t.nextFrame)}},handleYoyoFrame:function(e,t){if(!t){t=false}if(e._reverse===!t&&e.repeatCounter>0){e.forward=t;this.repeatAnimation(e);return}if(e._reverse!==t&&e.repeatCounter===0){this.completeAnimation(e);return}e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;if(t.isFirst){if(e._yoyo){this.handleYoyoFrame(e,true)}else if(e.repeatCounter>0){if(e._reverse&&!e.forward){e.currentFrame=this.getLastFrame();this.repeatAnimation(e)}else{e.forward=true;this.repeatAnimation(e)}}else{this.completeAnimation(e)}}else{this.updateAndGetNextTick(e,t.prevFrame)}},updateAndGetNextTick:function(e,t){e.updateFrame(t);this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);if(t!==-1){this.removeFrameAt(t)}return this},removeFrameAt:function(e){this.frames.splice(e,1);this.updateFrameSequence();return this},repeatAnimation:function(e){if(e._pendingStop===2){return this.completeAnimation(e)}if(e._repeatDelay>0&&e.pendingRepeat===false){e.pendingRepeat=true;e.accumulator-=e.nextTick;e.nextTick+=e._repeatDelay}else{e.repeatCounter--;e.updateFrame(e.currentFrame[e.forward?"nextFrame":"prevFrame"]);if(e.isPlaying){this.getNextTick(e);e.pendingRepeat=false;var t=e.currentFrame;var i=e.parent;this.emit(events.ANIMATION_REPEAT,this,t);i.emit(events.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,t,e.repeatCounter,i);i.emit(events.SPRITE_ANIMATION_REPEAT,this,t,e.repeatCounter,i)}}},setFrame:function(e){if(e.forward){this.nextFrame(e)}else{this.previousFrame(e)}},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};this.frames.forEach((function(t){e.frames.push(t.toJSON())}));return e},updateFrameSequence:function(){var e=this.frames.length;var t=1/(e-1);var i;for(var r=0;r<e;r++){i=this.frames[r];i.index=r+1;i.isFirst=false;i.isLast=false;i.progress=r*t;if(r===0){i.isFirst=true;if(e===1){i.isLast=true;i.nextFrame=i;i.prevFrame=i}else{i.isLast=false;i.prevFrame=this.frames[e-1];i.nextFrame=this.frames[r+1]}}else if(r===e-1&&e>1){i.isLast=true;i.prevFrame=this.frames[e-2];i.nextFrame=this.frames[0]}else if(e>1){i.prevFrame=this.frames[r-1];i.nextFrame=this.frames[r+1]}}return this},pause:function(){this.paused=true;return this},resume:function(){this.paused=false;return this},destroy:function(){this.removeAllListeners();this.manager.off(events.PAUSE_ALL,this.pause,this);this.manager.off(events.RESUME_ALL,this.resume,this);this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++){this.frames[e].destroy()}this.frames=[];this.manager=null}});var Animation_1=Animation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Animation$1=new Class_1({initialize:function e(t){this.parent=t;this.animationManager=t.scene.sys.anims;this.animationManager.once(events.REMOVE_ANIMATION,this.remove,this);this.isPlaying=false;this.currentAnim=null;this.currentFrame=null;this.nextAnim=null;this._timeScale=1;this.frameRate=0;this.duration=0;this.msPerFrame=0;this.skipMissedFrames=true;this._delay=0;this._repeat=0;this._repeatDelay=0;this._yoyo=false;this.forward=true;this._reverse=false;this.accumulator=0;this.nextTick=0;this.repeatCounter=0;this.pendingRepeat=false;this._paused=false;this._wasPlaying=false;this._pendingStop=0},chain:function(e){if(e instanceof Animation_1){e=e.key}this.nextAnim=e;return this.parent},setDelay:function(e){if(e===undefined){e=0}this._delay=e;return this.parent},getDelay:function(){return this._delay},delayedPlay:function(e,t,i){this.play(t,true,i);this.nextTick+=e;return this.parent},getCurrentKey:function(){if(this.currentAnim){return this.currentAnim.key}},load:function(e,t){if(t===undefined){t=0}if(this.isPlaying){this.stop()}this.animationManager.load(this,e,t);return this.parent},pause:function(e){if(!this._paused){this._paused=true;this._wasPlaying=this.isPlaying;this.isPlaying=false}if(e!==undefined){this.updateFrame(e)}return this.parent},resume:function(e){if(this._paused){this._paused=false;this.isPlaying=this._wasPlaying}if(e!==undefined){this.updateFrame(e)}return this.parent},isPaused:{get:function(){return this._paused}},play:function(e,t,i){if(t===undefined){t=false}if(i===undefined){i=0}if(e instanceof Animation_1){e=e.key}if(t&&this.isPlaying&&this.currentAnim.key===e){return this.parent}this.forward=true;this._reverse=false;return this._startAnimation(e,i)},playReverse:function(e,t,i){if(t===undefined){t=false}if(i===undefined){i=0}if(e instanceof Animation_1){e=e.key}if(t&&this.isPlaying&&this.currentAnim.key===e){return this.parent}this.forward=false;this._reverse=true;return this._startAnimation(e,i)},_startAnimation:function(e,t){this.load(e,t);var i=this.currentAnim;var r=this.parent;if(!i){return r}this.repeatCounter=this._repeat===-1?Number.MAX_VALUE:this._repeat;i.getFirstTick(this);this.isPlaying=true;this.pendingRepeat=false;if(i.showOnStart){r.visible=true}var n=this.currentFrame;i.emit(events.ANIMATION_START,i,n,r);r.emit(events.SPRITE_ANIMATION_KEY_START+e,i,n,r);r.emit(events.SPRITE_ANIMATION_START,i,n,r);return r},reverse:function(){if(this.isPlaying){this._reverse=!this._reverse;this.forward=!this.forward}return this.parent},getProgress:function(){var e=this.currentFrame.progress;if(!this.forward){e=1-e}return e},setProgress:function(e){if(!this.forward){e=1-e}this.setCurrentFrame(this.currentAnim.getFrameByProgress(e));return this.parent},remove:function(e,t){if(t===undefined){t=this.currentAnim}if(this.isPlaying&&t.key===this.currentAnim.key){this.stop();this.setCurrentFrame(this.currentAnim.frames[0])}},getRepeat:function(){return this._repeat},setRepeat:function(e){this._repeat=e;this.repeatCounter=e===-1?Number.MAX_VALUE:e;return this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(e){this._repeatDelay=e;return this.parent},restart:function(e){if(e===undefined){e=false}var t=this.currentAnim;t.getFirstTick(this,e);this.forward=true;this.isPlaying=true;this.pendingRepeat=false;this._paused=false;this.updateFrame(t.frames[0]);var i=this.parent;var r=this.currentFrame;t.emit(events.ANIMATION_RESTART,t,r,i);i.emit(events.SPRITE_ANIMATION_KEY_RESTART+t.key,t,r,i);i.emit(events.SPRITE_ANIMATION_RESTART,t,r,i);return this.parent},stop:function(){this._pendingStop=0;this.isPlaying=false;var e=this.parent;var t=this.currentAnim;var i=this.currentFrame;if(t){t.emit(events.ANIMATION_COMPLETE,t,i,e);e.emit(events.SPRITE_ANIMATION_KEY_COMPLETE+t.key,t,i,e);e.emit(events.SPRITE_ANIMATION_COMPLETE,t,i,e)}if(this.nextAnim){var r=this.nextAnim;this.nextAnim=null;this.play(r)}return e},stopAfterDelay:function(e){this._pendingStop=1;this._pendingStopValue=e;return this.parent},stopOnRepeat:function(){this._pendingStop=2;return this.parent},stopOnFrame:function(e){this._pendingStop=3;this._pendingStopValue=e;return this.parent},setTimeScale:function(e){if(e===undefined){e=1}this._timeScale=e;return this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(e,t){if(!this.currentAnim||!this.isPlaying||this.currentAnim.paused){return}this.accumulator+=t*this._timeScale;if(this._pendingStop===1){this._pendingStopValue-=t;if(this._pendingStopValue<=0){return this.currentAnim.completeAnimation(this)}}if(this.accumulator>=this.nextTick){this.currentAnim.setFrame(this)}},setCurrentFrame:function(e){var t=this.parent;this.currentFrame=e;t.texture=e.frame.texture;t.frame=e.frame;if(t.isCropped){t.frame.updateCropUVs(t._crop,t.flipX,t.flipY)}t.setSizeToFrame();if(e.frame.customPivot){t.setOrigin(e.frame.pivotX,e.frame.pivotY)}else{t.updateDisplayOrigin()}return t},updateFrame:function(e){var t=this.setCurrentFrame(e);if(this.isPlaying){if(e.setAlpha){t.alpha=e.alpha}var i=this.currentAnim;t.emit(events.SPRITE_ANIMATION_KEY_UPDATE+i.key,i,e,t);t.emit(events.SPRITE_ANIMATION_UPDATE,i,e,t);if(this._pendingStop===3&&this._pendingStopValue===e){this.currentAnim.completeAnimation(this)}}},nextFrame:function(){if(this.currentAnim){this.currentAnim.nextFrame(this)}return this.parent},previousFrame:function(){if(this.currentAnim){this.currentAnim.previousFrame(this)}return this.parent},setYoyo:function(e){if(e===undefined){e=false}this._yoyo=e;return this.parent},getYoyo:function(){return this._yoyo},destroy:function(){this.animationManager.off(events.REMOVE_ANIMATION,this.remove,this);this.animationManager=null;this.parent=null;this.currentAnim=null;this.currentFrame=null}});var Animation_1$1=Animation$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BlendMode={_blendMode:BlendModes.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(e){if(typeof e==="string"){e=BlendModes[e]}e|=0;if(e>=-1){this._blendMode=e}}},setBlendMode:function(e){this.blendMode=e;return this}};var BlendMode_1=BlendMode;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ComputedSize={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){this.width=e;this.height=t;return this},setDisplaySize:function(e,t){this.displayWidth=e;this.displayHeight=t;return this}};var ComputedSize_1=ComputedSize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Crop={texture:null,frame:null,isCropped:false,setCrop:function(e,t,i,r){if(e===undefined){this.isCropped=false}else if(this.frame){if(typeof e==="number"){this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY)}else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=true}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:false,flipY:false,cx:0,cy:0,cw:0,ch:0}}};var Crop_1=Crop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Depth={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.scene.sys.queueDepthSort();this._depth=e}},setDepth:function(e){if(e===undefined){e=0}this.depth=e;return this}};var Depth_1=Depth;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Flip={flipX:false,flipY:false,toggleFlipX:function(){this.flipX=!this.flipX;return this},toggleFlipY:function(){this.flipY=!this.flipY;return this},setFlipX:function(e){this.flipX=e;return this},setFlipY:function(e){this.flipY=e;return this},setFlip:function(e,t){this.flipX=e;this.flipY=t;return this},resetFlip:function(){this.flipX=false;this.flipY=false;return this}};var Flip_1=Flip;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Contains$1=function(e,t,i){if(e.width<=0||e.height<=0){return false}return e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i};var Contains_1$1=Contains$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Perimeter=function(e){return 2*(e.width+e.height)};var Perimeter_1=Perimeter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoint$1=function(e,t,i){if(i===undefined){i=new Point_1}if(t<=0||t>=1){i.x=e.x;i.y=e.y;return i}var r=Perimeter_1(e)*t;if(t>.5){r-=e.width+e.height;if(r<=e.width){i.x=e.right-r;i.y=e.bottom}else{i.x=e.x;i.y=e.bottom-(r-e.width)}}else if(r<=e.width){i.x=e.x+r;i.y=e.y}else{i.x=e.right;i.y=e.y+(r-e.width)}return i};var GetPoint_1$1=GetPoint$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints$1=function(e,t,i,r){if(r===undefined){r=[]}if(!t){t=Perimeter_1(e)/i}for(var n=0;n<t;n++){var s=n/t;r.push(GetPoint_1$1(e,s))}return r};var GetPoints_1$1=GetPoints$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoint$2=function(e,t,i){if(i===undefined){i=new Point_1}i.x=e.x1+(e.x2-e.x1)*t;i.y=e.y1+(e.y2-e.y1)*t;return i};var GetPoint_1$2=GetPoint$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Length=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};var Length_1=Length;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints$2=function(e,t,i,r){if(r===undefined){r=[]}if(!t){t=Length_1(e)/i}var n=e.x1;var s=e.y1;var a=e.x2;var o=e.y2;for(var l=0;l<t;l++){var h=l/t;var u=n+(a-n)*h;var c=s+(o-s)*h;r.push(new Point_1(u,c))}return r};var GetPoints_1$2=GetPoints$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Random$1=function(e,t){if(t===undefined){t=new Point_1}var i=Math.random();t.x=e.x1+i*(e.x2-e.x1);t.y=e.y1+i*(e.y2-e.y1);return t};var Random_1$1=Random$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Vector2=new Class_1({initialize:function e(t,i){this.x=0;this.y=0;if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0}else{if(i===undefined){i=t}this.x=t||0;this.y=i||0}},clone:function(){return new Vector2(this.x,this.y)},copy:function(e){this.x=e.x||0;this.y=e.y||0;return this},setFromObject:function(e){this.x=e.x||0;this.y=e.y||0;return this},set:function(e,t){if(t===undefined){t=e}this.x=e;this.y=t;return this},setTo:function(e,t){return this.set(e,t)},setToPolar:function(e,t){if(t==null){t=1}this.x=Math.cos(e)*t;this.y=Math.sin(e)*t;return this},equals:function(e){return this.x===e.x&&this.y===e.y},angle:function(){var e=Math.atan2(this.y,this.x);if(e<0){e+=2*Math.PI}return e},add:function(e){this.x+=e.x;this.y+=e.y;return this},subtract:function(e){this.x-=e.x;this.y-=e.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},scale:function(e){if(isFinite(e)){this.x*=e;this.y*=e}else{this.x=0;this.y=0}return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},distance:function(e){var t=e.x-this.x;var i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function(e){var t=e.x-this.x;var i=e.y-this.y;return t*t+i*i},length:function(){var e=this.x;var t=this.y;return Math.sqrt(e*e+t*t)},lengthSq:function(){var e=this.x;var t=this.y;return e*e+t*t},normalize:function(){var e=this.x;var t=this.y;var i=e*e+t*t;if(i>0){i=1/Math.sqrt(i);this.x=e*i;this.y=t*i}return this},normalizeRightHand:function(){var e=this.x;this.x=this.y*-1;this.y=e;return this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lerp:function(e,t){if(t===undefined){t=0}var i=this.x;var r=this.y;this.x=i+t*(e.x-i);this.y=r+t*(e.y-r);return this},transformMat3:function(e){var t=this.x;var i=this.y;var r=e.val;this.x=r[0]*t+r[3]*i+r[6];this.y=r[1]*t+r[4]*i+r[7];return this},transformMat4:function(e){var t=this.x;var i=this.y;var r=e.val;this.x=r[0]*t+r[4]*i+r[12];this.y=r[1]*t+r[5]*i+r[13];return this},reset:function(){this.x=0;this.y=0;return this}});Vector2.ZERO=new Vector2;Vector2.RIGHT=new Vector2(1,0);Vector2.LEFT=new Vector2(-1,0);Vector2.UP=new Vector2(0,-1);Vector2.DOWN=new Vector2(0,1);Vector2.ONE=new Vector2(1,1);var Vector2_1=Vector2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Line=new Class_1({initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}this.type=_const$2.LINE;this.x1=t;this.y1=i;this.x2=r;this.y2=n},getPoint:function(e,t){return GetPoint_1$2(this,e,t)},getPoints:function(e,t,i){return GetPoints_1$2(this,e,t,i)},getRandomPoint:function(e){return Random_1$1(this,e)},setTo:function(e,t,i,r){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}this.x1=e;this.y1=t;this.x2=i;this.y2=r;return this},getPointA:function(e){if(e===undefined){e=new Vector2_1}e.set(this.x1,this.y1);return e},getPointB:function(e){if(e===undefined){e=new Vector2_1}e.set(this.x2,this.y2);return e},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(e){if(this.x1<=this.x2){this.x1=e}else{this.x2=e}}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(e){if(this.x1>this.x2){this.x1=e}else{this.x2=e}}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(e){if(this.y1<=this.y2){this.y1=e}else{this.y2=e}}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(e){if(this.y1>this.y2){this.y1=e}else{this.y2=e}}}});var Line_1=Line;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Random$2=function(e,t){if(t===undefined){t=new Point_1}t.x=e.x+Math.random()*e.width;t.y=e.y+Math.random()*e.height;return t};var Random_1$2=Random$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rectangle=new Class_1({initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}this.type=_const$2.RECTANGLE;this.x=t;this.y=i;this.width=r;this.height=n},contains:function(e,t){return Contains_1$1(this,e,t)},getPoint:function(e,t){return GetPoint_1$1(this,e,t)},getPoints:function(e,t,i){return GetPoints_1$1(this,e,t,i)},getRandomPoint:function(e){return Random_1$2(this,e)},setTo:function(e,t,i,r){this.x=e;this.y=t;this.width=i;this.height=r;return this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,t){if(t===undefined){t=e}this.x=e;this.y=t;return this},setSize:function(e,t){if(t===undefined){t=e}this.width=e;this.height=t;return this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){if(e===undefined){e=new Line_1}e.setTo(this.x,this.y,this.right,this.y);return e},getLineB:function(e){if(e===undefined){e=new Line_1}e.setTo(this.right,this.y,this.right,this.bottom);return e},getLineC:function(e){if(e===undefined){e=new Line_1}e.setTo(this.right,this.bottom,this.x,this.bottom);return e},getLineD:function(e){if(e===undefined){e=new Line_1}e.setTo(this.x,this.bottom,this.x,this.y);return e},left:{get:function(){return this.x},set:function(e){if(e>=this.right){this.width=0}else{this.width=this.right-e}this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){if(e<=this.x){this.width=0}else{this.width=e-this.x}}},top:{get:function(){return this.y},set:function(e){if(e>=this.bottom){this.height=0}else{this.height=this.bottom-e}this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){if(e<=this.y){this.height=0}else{this.height=e-this.y}}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});var Rectangle_1=Rectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAround=function(e,t,i,r){var n=Math.cos(r);var s=Math.sin(r);var a=e.x-t;var o=e.y-i;e.x=a*n-o*s+t;e.y=a*s+o*n+i;return e};var RotateAround_1=RotateAround;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBounds={prepareBoundsOutput:function(e,t){if(t===undefined){t=false}if(this.rotation!==0){RotateAround_1(e,this.x,this.y,this.rotation)}if(t&&this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix();i.transformPoint(e.x,e.y,e)}return e},getCenter:function(e){if(e===undefined){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return e},getTopLeft:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getTopCenter:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getTopRight:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getLeftCenter:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return this.prepareBoundsOutput(e,t)},getRightCenter:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return this.prepareBoundsOutput(e,t)},getBottomLeft:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBottomCenter:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBottomRight:function(e,t){if(!e){e=new Vector2_1}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBounds:function(e){if(e===undefined){e=new Rectangle_1}var t,i,r,n,s,a,o,l;if(this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e);h.transformPoint(e.x,e.y,e);t=e.x;i=e.y;this.getTopRight(e);h.transformPoint(e.x,e.y,e);r=e.x;n=e.y;this.getBottomLeft(e);h.transformPoint(e.x,e.y,e);s=e.x;a=e.y;this.getBottomRight(e);h.transformPoint(e.x,e.y,e);o=e.x;l=e.y}else{this.getTopLeft(e);t=e.x;i=e.y;this.getTopRight(e);r=e.x;n=e.y;this.getBottomLeft(e);s=e.x;a=e.y;this.getBottomRight(e);o=e.x;l=e.y}e.x=Math.min(t,r,s,o);e.y=Math.min(i,n,a,l);e.width=Math.max(t,r,s,o)-e.x;e.height=Math.max(i,n,a,l)-e.y;return e}};var GetBounds_1=GetBounds;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BLUR_EVENT="blur";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BOOT_EVENT="boot";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONTEXT_LOST_EVENT="contextlost";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONTEXT_RESTORED_EVENT="contextrestored";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT="destroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FOCUS_EVENT="focus";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HIDDEN_EVENT="hidden";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POST_RENDER_EVENT="postrender";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POST_STEP_EVENT="poststep";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PRE_RENDER_EVENT="prerender";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PRE_STEP_EVENT="prestep";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var READY_EVENT="ready";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var STEP_EVENT="step";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var VISIBLE_EVENT="visible";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$1={BLUR:BLUR_EVENT,BOOT:BOOT_EVENT,CONTEXT_LOST:CONTEXT_LOST_EVENT,CONTEXT_RESTORED:CONTEXT_RESTORED_EVENT,DESTROY:DESTROY_EVENT,FOCUS:FOCUS_EVENT,HIDDEN:HIDDEN_EVENT,PAUSE:PAUSE_EVENT,POST_RENDER:POST_RENDER_EVENT,POST_STEP:POST_STEP_EVENT,PRE_RENDER:PRE_RENDER_EVENT,PRE_STEP:PRE_STEP_EVENT,READY:READY_EVENT,RESUME:RESUME_EVENT,STEP:STEP_EVENT,VISIBLE:VISIBLE_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapMask=new Class_1({initialize:function e(t,i){var r=t.sys.game.renderer;this.renderer=r;this.bitmapMask=i;this.maskTexture=null;this.mainTexture=null;this.dirty=true;this.mainFramebuffer=null;this.maskFramebuffer=null;this.prevFramebuffer=null;this.invertAlpha=false;this.isStencil=false;if(r&&r.gl){var n=r.width;var s=r.height;var a=(n&n-1)===0&&(s&s-1)===0;var o=r.gl;var l=a?o.REPEAT:o.CLAMP_TO_EDGE;var h=o.LINEAR;this.mainTexture=r.createTexture2D(0,h,h,l,l,o.RGBA,null,n,s);this.maskTexture=r.createTexture2D(0,h,h,l,l,o.RGBA,null,n,s);this.mainFramebuffer=r.createFramebuffer(n,s,this.mainTexture,true);this.maskFramebuffer=r.createFramebuffer(n,s,this.maskTexture,true);t.sys.game.events.on(events$1.CONTEXT_RESTORED,(function(e){var t=e.width;var i=e.height;var r=(t&t-1)===0&&(i&i-1)===0;var n=e.gl;var s=r?n.REPEAT:n.CLAMP_TO_EDGE;var a=n.LINEAR;this.mainTexture=e.createTexture2D(0,a,a,s,s,n.RGBA,null,t,i);this.maskTexture=e.createTexture2D(0,a,a,s,s,n.RGBA,null,t,i);this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,true);this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,true)}),this)}},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BitmapMaskPipeline.beginMask(this,t,i)},postRenderWebGL:function(e,t){e.pipelines.BitmapMaskPipeline.endMask(this,t)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null;var e=this.renderer;if(e&&e.gl){e.deleteTexture(this.mainTexture);e.deleteTexture(this.maskTexture);e.deleteFramebuffer(this.mainFramebuffer);e.deleteFramebuffer(this.maskFramebuffer)}this.mainTexture=null;this.maskTexture=null;this.mainFramebuffer=null;this.maskFramebuffer=null;this.prevFramebuffer=null;this.renderer=null}});var BitmapMask_1=BitmapMask;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GeometryMask=new Class_1({initialize:function e(t,i){this.geometryMask=i;this.invertAlpha=false;this.isStencil=true;this.level=0},setShape:function(e){this.geometryMask=e;return this},setInvertAlpha:function(e){if(e===undefined){e=true}this.invertAlpha=e;return this},preRenderWebGL:function(e,t,i){var r=e.gl;e.flush();if(e.maskStack.length===0){r.enable(r.STENCIL_TEST);r.clear(r.STENCIL_BUFFER_BIT);e.maskCount=0}if(e.currentCameraMask.mask!==this){e.currentMask.mask=this}e.maskStack.push({mask:this,camera:i});this.applyStencil(e,i,true);e.maskCount++},applyStencil:function(e,t,i){var r=e.gl;var n=this.geometryMask;var s=e.maskCount;r.colorMask(false,false,false,false);if(i){r.stencilFunc(r.EQUAL,s,255);r.stencilOp(r.KEEP,r.KEEP,r.INCR)}else{r.stencilFunc(r.EQUAL,s+1,255);r.stencilOp(r.KEEP,r.KEEP,r.DECR)}n.renderWebGL(e,n,0,t);e.flush();r.colorMask(true,true,true,true);r.stencilOp(r.KEEP,r.KEEP,r.KEEP);if(i){if(this.invertAlpha){r.stencilFunc(r.NOTEQUAL,s+1,255)}else{r.stencilFunc(r.EQUAL,s+1,255)}}else if(this.invertAlpha){r.stencilFunc(r.NOTEQUAL,s,255)}else{r.stencilFunc(r.EQUAL,s,255)}},postRenderWebGL:function(e){var t=e.gl;e.maskStack.pop();e.maskCount--;if(e.maskStack.length===0){e.flush();e.currentMask.mask=null;t.disable(t.STENCIL_TEST)}else{e.flush();var i=e.maskStack[e.maskStack.length-1];i.mask.applyStencil(e,i.camera,false);if(e.currentCameraMask.mask!==i.mask){e.currentMask.mask=i.mask;e.currentMask.camera=i.camera}else{e.currentMask.mask=null}}},preRenderCanvas:function(e,t,i){var r=this.geometryMask;e.currentContext.save();r.renderCanvas(e,r,0,i,null,null,true);e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}});var GeometryMask_1=GeometryMask;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Mask={mask:null,setMask:function(e){this.mask=e;return this},clearMask:function(e){if(e===undefined){e=false}if(e&&this.mask){this.mask.destroy()}this.mask=null;return this},createBitmapMask:function(e){if(e===undefined&&(this.texture||this.shader)){e=this}return new BitmapMask_1(this.scene,e)},createGeometryMask:function(e){if(e===undefined&&this.type==="Graphics"){e=this}return new GeometryMask_1(this.scene,e)}};var Mask_1=Mask;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Origin={_originComponent:true,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e;this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e;this.originY=e/this.height}},setOrigin:function(e,t){if(e===undefined){e=.5}if(t===undefined){t=e}this.originX=e;this.originY=t;return this.updateDisplayOrigin()},setOriginFromFrame:function(){if(!this.frame||!this.frame.customPivot){return this.setOrigin()}else{this.originX=this.frame.pivotX;this.originY=this.frame.pivotY}return this.updateDisplayOrigin()},setDisplayOrigin:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.displayOriginX=e;this.displayOriginY=t;return this},updateDisplayOrigin:function(){this._displayOriginX=this.originX*this.width;this._displayOriginY=this.originY*this.height;return this}};var Origin_1=Origin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DegToRad=function(e){return e*_const$3.DEG_TO_RAD};var DegToRad_1=DegToRad;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBoolean=function(e,t,i){if(!e){return i}else if(e.hasOwnProperty(t)){return e[t]}else{return i}};var GetBoolean_1=GetBoolean;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_CONST={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};var _const$4=TWEEN_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PathFollower={path:null,rotateToPath:false,pathRotationOffset:0,pathOffset:null,pathVector:null,pathTween:null,pathConfig:null,_prevDirection:_const$4.PLAYING_FORWARD,setPath:function(e,t){if(t===undefined){t=this.pathConfig}var i=this.pathTween;if(i&&i.isPlaying()){i.stop()}this.path=e;if(t){this.startFollow(t)}return this},setRotateToPath:function(e,t){if(t===undefined){t=0}this.rotateToPath=e;this.pathRotationOffset=t;return this},isFollowing:function(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function(e,t){if(e===undefined){e={}}if(t===undefined){t=0}var i=this.pathTween;if(i&&i.isPlaying()){i.stop()}if(typeof e==="number"){e={duration:e}}e.from=GetValue_1(e,"from",0);e.to=GetValue_1(e,"to",1);var r=GetBoolean_1(e,"positionOnPath",false);this.rotateToPath=GetBoolean_1(e,"rotateToPath",false);this.pathRotationOffset=GetValue_1(e,"rotationOffset",0);var n=GetValue_1(e,"startAt",t);if(n){e.onStart=function(e){var t=e.data[0];t.progress=n;t.elapsed=t.duration*n;var i=t.ease(t.progress);t.current=t.start+(t.end-t.start)*i;t.target[t.key]=t.current}}if(!this.pathOffset){this.pathOffset=new Vector2_1(this.x,this.y)}if(!this.pathVector){this.pathVector=new Vector2_1}this.pathTween=this.scene.sys.tweens.addCounter(e);this.path.getStartPoint(this.pathOffset);if(r){this.x=this.pathOffset.x;this.y=this.pathOffset.y}this.pathOffset.x=this.x-this.pathOffset.x;this.pathOffset.y=this.y-this.pathOffset.y;this._prevDirection=_const$4.PLAYING_FORWARD;if(this.rotateToPath){var s=this.path.getPoint(.1);this.rotation=Math.atan2(s.y-this.y,s.x-this.x)+DegToRad_1(this.pathRotationOffset)}this.pathConfig=e;return this},pauseFollow:function(){var e=this.pathTween;if(e&&e.isPlaying()){e.pause()}return this},resumeFollow:function(){var e=this.pathTween;if(e&&e.isPaused()){e.resume()}return this},stopFollow:function(){var e=this.pathTween;if(e&&e.isPlaying()){e.stop()}return this},pathUpdate:function(){var e=this.pathTween;if(e){var t=e.data[0];if(t.state!==_const$4.PLAYING_FORWARD&&t.state!==_const$4.PLAYING_BACKWARD){return}var i=this.pathVector;this.path.getPoint(e.getValue(),i);i.add(this.pathOffset);var r=this.x;var n=this.y;this.setPosition(i.x,i.y);var s=this.x-r;var a=this.y-n;if(s===0&&a===0){return}if(t.state!==this._prevDirection){this._prevDirection=t.state;return}if(this.rotateToPath){this.rotation=Math.atan2(a,s)+DegToRad_1(this.pathRotationOffset)}}}};var PathFollower_1=PathFollower;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Pipeline={defaultPipeline:null,pipeline:null,initPipeline:function(e){if(e===undefined){e="TextureTintPipeline"}var t=this.scene.sys.game.renderer;if(t&&t.gl&&t.hasPipeline(e)){this.defaultPipeline=t.getPipeline(e);this.pipeline=this.defaultPipeline;return true}return false},setPipeline:function(e){var t=this.scene.sys.game.renderer;if(t&&t.gl&&t.hasPipeline(e)){this.pipeline=t.getPipeline(e)}return this},resetPipeline:function(){this.pipeline=this.defaultPipeline;return this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};var Pipeline_1=Pipeline;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScrollFactor={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,t){if(t===undefined){t=e}this.scrollFactorX=e;this.scrollFactorY=t;return this}};var ScrollFactor_1=ScrollFactor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Size={_sizeComponent:true,width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.frame.realWidth},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return this.scaleY*this.frame.realHeight},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){if(e===undefined){e=this.frame}this.width=e.realWidth;this.height=e.realHeight;return this},setSize:function(e,t){this.width=e;this.height=t;return this},setDisplaySize:function(e,t){this.displayWidth=e;this.displayHeight=t;return this}};var Size_1=Size;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$1=8;var Texture={texture:null,frame:null,isCropped:false,setTexture:function(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=true}this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=~_FLAG$1}else{this.renderFlags|=_FLAG$1}if(this._sizeComponent&&t){this.setSizeToFrame()}if(this._originComponent&&i){if(this.frame.customPivot){this.setOrigin(this.frame.pivotX,this.frame.pivotY)}else{this.updateDisplayOrigin()}}return this}};var Texture_1=Texture;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$2=8;var TextureCrop={texture:null,frame:null,isCropped:false,setCrop:function(e,t,i,r){if(e===undefined){this.isCropped=false}else if(this.frame){if(typeof e==="number"){this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY)}else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=true}return this},setTexture:function(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=true}this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=~_FLAG$2}else{this.renderFlags|=_FLAG$2}if(this._sizeComponent&&t){this.setSizeToFrame()}if(this._originComponent&&i){if(this.frame.customPivot){this.setOrigin(this.frame.pivotX,this.frame.pivotY)}else{this.updateDisplayOrigin()}}if(this.isCropped){this.frame.updateCropUVs(this._crop,this.flipX,this.flipY)}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:false,flipY:false,cx:0,cy:0,cw:0,ch:0}}};var TextureCrop_1=TextureCrop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetColor=function(e){return(e>>16)+(e&65280)+((e&255)<<16)};var Tint={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:false,tintFill:false,clearTint:function(){this.setTint(16777215);this._isTinted=false;return this},setTint:function(e,t,i,r){if(e===undefined){e=16777215}if(t===undefined){t=e;i=e;r=e}this._tintTL=GetColor(e);this._tintTR=GetColor(t);this._tintBL=GetColor(i);this._tintBR=GetColor(r);this._isTinted=true;this.tintFill=false;return this},setTintFill:function(e,t,i,r){this.setTint(e,t,i,r);this.tintFill=true;return this},tintTopLeft:{get:function(){return this._tintTL},set:function(e){this._tintTL=GetColor(e);this._isTinted=true}},tintTopRight:{get:function(){return this._tintTR},set:function(e){this._tintTR=GetColor(e);this._isTinted=true}},tintBottomLeft:{get:function(){return this._tintBL},set:function(e){this._tintBL=GetColor(e);this._isTinted=true}},tintBottomRight:{get:function(){return this._tintBR},set:function(e){this._tintBR=GetColor(e);this._isTinted=true}},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){return this._isTinted}}};var Tint_1=Tint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ToJSON=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,scaleMode:e.scaleMode,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};if(e.texture){t.textureKey=e.texture.key;t.frameKey=e.frame.name}return t};var ToJSON_1=ToJSON;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TransformMatrix=new Class_1({initialize:function e(t,i,r,n,s,a){if(t===undefined){t=1}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=1}if(s===undefined){s=0}if(a===undefined){a=0}this.matrix=new Float32Array([t,i,r,n,s,a,0,0,1]);this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix;var t=e[0];var i=e[1];var r=e[2];var n=e[3];if(t||i){return i>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX)}else if(r||n){return _const$3.TAU-(n>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY))}else{return 0}}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return this},translate:function(e,t){var i=this.matrix;i[4]=i[0]*e+i[2]*t+i[4];i[5]=i[1]*e+i[3]*t+i[5];return this},scale:function(e,t){var i=this.matrix;i[0]*=e;i[1]*=e;i[2]*=t;i[3]*=t;return this},rotate:function(e){var t=Math.sin(e);var i=Math.cos(e);var r=this.matrix;var n=r[0];var s=r[1];var a=r[2];var o=r[3];r[0]=n*i+a*t;r[1]=s*i+o*t;r[2]=n*-t+a*i;r[3]=s*-t+o*i;return this},multiply:function(e,t){var i=this.matrix;var r=e.matrix;var n=i[0];var s=i[1];var a=i[2];var o=i[3];var l=i[4];var h=i[5];var u=r[0];var c=r[1];var f=r[2];var d=r[3];var v=r[4];var p=r[5];var g=t===undefined?this:t;g.a=u*n+c*a;g.b=u*s+c*o;g.c=f*n+d*a;g.d=f*s+d*o;g.e=v*n+p*a+l;g.f=v*s+p*o+h;return g},multiplyWithOffset:function(e,t,i){var r=this.matrix;var n=e.matrix;var s=r[0];var a=r[1];var o=r[2];var l=r[3];var h=r[4];var u=r[5];var c=t*s+i*o+h;var f=t*a+i*l+u;var d=n[0];var v=n[1];var p=n[2];var g=n[3];var m=n[4];var _=n[5];r[0]=d*s+v*o;r[1]=d*a+v*l;r[2]=p*s+g*o;r[3]=p*a+g*l;r[4]=m*s+_*o+c;r[5]=m*a+_*l+f;return this},transform:function(e,t,i,r,n,s){var a=this.matrix;var o=a[0];var l=a[1];var h=a[2];var u=a[3];var c=a[4];var f=a[5];a[0]=e*o+t*h;a[1]=e*l+t*u;a[2]=i*o+r*h;a[3]=i*l+r*u;a[4]=n*o+s*h+c;a[5]=n*l+s*u+f;return this},transformPoint:function(e,t,i){if(i===undefined){i={x:0,y:0}}var r=this.matrix;var n=r[0];var s=r[1];var a=r[2];var o=r[3];var l=r[4];var h=r[5];i.x=e*n+t*a+l;i.y=e*s+t*o+h;return i},invert:function(){var e=this.matrix;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=t*n-i*r;e[0]=n/o;e[1]=-i/o;e[2]=-r/o;e[3]=t/o;e[4]=(r*a-n*s)/o;e[5]=-(t*a-i*s)/o;return this},copyFrom:function(e){var t=this.matrix;t[0]=e.a;t[1]=e.b;t[2]=e.c;t[3]=e.d;t[4]=e.e;t[5]=e.f;return this},copyFromArray:function(e){var t=this.matrix;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return this},copyToContext:function(e){var t=this.matrix;e.transform(t[0],t[1],t[2],t[3],t[4],t[5]);return e},setToContext:function(e){var t=this.matrix;e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]);return e},copyToArray:function(e){var t=this.matrix;if(e===undefined){e=[t[0],t[1],t[2],t[3],t[4],t[5]]}else{e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5]}return e},setTransform:function(e,t,i,r,n,s){var a=this.matrix;a[0]=e;a[1]=t;a[2]=i;a[3]=r;a[4]=n;a[5]=s;return this},decomposeMatrix:function(){var e=this.decomposedMatrix;var t=this.matrix;var i=t[0];var r=t[1];var n=t[2];var s=t[3];var a=i*s-r*n;e.translateX=t[4];e.translateY=t[5];if(i||r){var o=Math.sqrt(i*i+r*r);e.rotation=r>0?Math.acos(i/o):-Math.acos(i/o);e.scaleX=o;e.scaleY=a/o}else if(n||s){var l=Math.sqrt(n*n+s*s);e.rotation=Math.PI*.5-(s>0?Math.acos(-n/l):-Math.acos(n/l));e.scaleX=a/l;e.scaleY=l}else{e.rotation=0;e.scaleX=0;e.scaleY=0}return e},applyITRS:function(e,t,i,r,n){var s=this.matrix;var a=Math.sin(i);var o=Math.cos(i);s[4]=e;s[5]=t;s[0]=o*r;s[1]=a*r;s[2]=-a*n;s[3]=o*n;return this},applyInverse:function(e,t,i){if(i===undefined){i=new Vector2_1}var r=this.matrix;var n=r[0];var s=r[1];var a=r[2];var o=r[3];var l=r[4];var h=r[5];var u=1/(n*o+a*-s);i.x=o*u*e+-a*u*t+(h*a-l*o)*u;i.y=n*u*t+-s*u*e+(-h*n+l*s)*u;return i},getX:function(e,t){return e*this.a+t*this.c+this.e},getY:function(e,t){return e*this.b+t*this.d+this.f},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null;this.decomposedMatrix=null}});var TransformMatrix_1=TransformMatrix;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Wrap=function(e,t,i){var r=i-t;return t+((e-t)%r+r)%r};var Wrap_1=Wrap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Wrap$1=function(e){return Wrap_1(e,-Math.PI,Math.PI)};var Wrap_1$1=Wrap$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WrapDegrees=function(e){return Wrap_1(e,-180,180)};var WrapDegrees_1=WrapDegrees;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$3=4;var Transform={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleX=e;this._scaleY=e;if(e===0){this.renderFlags&=~_FLAG$3}else{this.renderFlags|=_FLAG$3}}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e;if(e===0){this.renderFlags&=~_FLAG$3}else{this.renderFlags|=_FLAG$3}}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e;if(e===0){this.renderFlags&=~_FLAG$3}else{this.renderFlags|=_FLAG$3}}},angle:{get:function(){return WrapDegrees_1(this._rotation*_const$3.RAD_TO_DEG)},set:function(e){this.rotation=WrapDegrees_1(e)*_const$3.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=Wrap_1$1(e)}},setPosition:function(e,t,i,r){if(e===undefined){e=0}if(t===undefined){t=e}if(i===undefined){i=0}if(r===undefined){r=0}this.x=e;this.y=t;this.z=i;this.w=r;return this},setRandomPosition:function(e,t,i,r){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.scene.sys.scale.width}if(r===undefined){r=this.scene.sys.scale.height}this.x=e+Math.random()*i;this.y=t+Math.random()*r;return this},setRotation:function(e){if(e===undefined){e=0}this.rotation=e;return this},setAngle:function(e){if(e===undefined){e=0}this.angle=e;return this},setScale:function(e,t){if(e===undefined){e=1}if(t===undefined){t=e}this.scaleX=e;this.scaleY=t;return this},setX:function(e){if(e===undefined){e=0}this.x=e;return this},setY:function(e){if(e===undefined){e=0}this.y=e;return this},setZ:function(e){if(e===undefined){e=0}this.z=e;return this},setW:function(e){if(e===undefined){e=0}this.w=e;return this},getLocalTransformMatrix:function(e){if(e===undefined){e=new TransformMatrix_1}return e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,t){if(e===undefined){e=new TransformMatrix_1}if(t===undefined){t=new TransformMatrix_1}var i=this.parentContainer;if(!i){return this.getLocalTransformMatrix(e)}e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);while(i){t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY);t.multiply(e,e);i=i.parentContainer}return e},getParentRotation:function(){var e=0;var t=this.parentContainer;while(t){e+=t.rotation;t=t.parentContainer}return e}};var Transform_1=Transform;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$4=1;var Visible={_visible:true,visible:{get:function(){return this._visible},set:function(e){if(e){this._visible=true;this.renderFlags|=_FLAG$4}else{this._visible=false;this.renderFlags&=~_FLAG$4}}},setVisible:function(e){this.visible=e;return this}};var Visible_1=Visible;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var components={Alpha:Alpha_1,Animation:Animation_1$1,BlendMode:BlendMode_1,ComputedSize:ComputedSize_1,Crop:Crop_1,Depth:Depth_1,Flip:Flip_1,GetBounds:GetBounds_1,Mask:Mask_1,Origin:Origin_1,PathFollower:PathFollower_1,Pipeline:Pipeline_1,ScrollFactor:ScrollFactor_1,Size:Size_1,Texture:Texture_1,TextureCrop:TextureCrop_1,Tint:Tint_1,ToJSON:ToJSON_1,Transform:Transform_1,TransformMatrix:TransformMatrix_1,Visible:Visible_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CHANGE_DATA_EVENT="changedata";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CHANGE_DATA_KEY_EVENT="changedata-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var REMOVE_DATA_EVENT="removedata";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SET_DATA_EVENT="setdata";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$2={CHANGE_DATA:CHANGE_DATA_EVENT,CHANGE_DATA_KEY:CHANGE_DATA_KEY_EVENT,REMOVE_DATA:REMOVE_DATA_EVENT,SET_DATA:SET_DATA_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DataManager=new Class_1({initialize:function e(t,i){this.parent=t;this.events=i;if(!i){this.events=t.events?t.events:t}this.list={};this.values={};this._frozen=false;if(!t.hasOwnProperty("sys")&&this.events){this.events.once("destroy",this.destroy,this)}},get:function(e){var t=this.list;if(Array.isArray(e)){var i=[];for(var r=0;r<e.length;r++){i.push(t[e[r]])}return i}else{return t[e]}},getAll:function(){var e={};for(var t in this.list){if(this.list.hasOwnProperty(t)){e[t]=this.list[t]}}return e},query:function(e){var t={};for(var i in this.list){if(this.list.hasOwnProperty(i)&&i.match(e)){t[i]=this.list[i]}}return t},set:function(e,t){if(this._frozen){return this}if(typeof e==="string"){return this.setValue(e,t)}else{for(var i in e){this.setValue(i,e[i])}}return this},setValue:function(e,t){if(this._frozen){return this}if(this.has(e)){this.values[e]=t}else{var i=this;var r=this.list;var n=this.events;var s=this.parent;Object.defineProperty(this.values,e,{enumerable:true,configurable:true,get:function(){return r[e]},set:function(t){if(!i._frozen){var a=r[e];r[e]=t;n.emit(events$2.CHANGE_DATA,s,e,t,a);n.emit(events$2.CHANGE_DATA_KEY+e,s,t,a)}}});r[e]=t;n.emit(events$2.SET_DATA,s,e,t)}return this},each:function(e,t){var i=[this.parent,null,undefined];for(var r=1;r<arguments.length;r++){i.push(arguments[r])}for(var n in this.list){i[1]=n;i[2]=this.list[n];e.apply(t,i)}return this},merge:function(e,t){if(t===undefined){t=true}for(var i in e){if(e.hasOwnProperty(i)&&(t||!t&&!this.has(i))){this.setValue(i,e[i])}}return this},remove:function(e){if(this._frozen){return this}if(Array.isArray(e)){for(var t=0;t<e.length;t++){this.removeValue(e[t])}}else{return this.removeValue(e)}return this},removeValue:function(e){if(this.has(e)){var t=this.list[e];delete this.list[e];delete this.values[e];this.events.emit(events$2.REMOVE_DATA,this.parent,e,t)}return this},pop:function(e){var t=undefined;if(!this._frozen&&this.has(e)){t=this.list[e];delete this.list[e];delete this.values[e];this.events.emit(events$2.REMOVE_DATA,this.parent,e,t)}return t},has:function(e){return this.list.hasOwnProperty(e)},setFreeze:function(e){this._frozen=e;return this},reset:function(){for(var e in this.list){delete this.list[e];delete this.values[e]}this._frozen=false;return this},destroy:function(){this.reset();this.events.off(events$2.CHANGE_DATA);this.events.off(events$2.SET_DATA);this.events.off(events$2.REMOVE_DATA);this.parent=null},freeze:{get:function(){return this._frozen},set:function(e){this._frozen=e?true:false}},count:{get:function(){var e=0;for(var t in this.list){if(this.list[t]!==undefined){e++}}return e}}});var DataManager_1=DataManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT$1="destroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$3={DESTROY:DESTROY_EVENT$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GameObject=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.scene=t;this.type=i;this.state=0;this.parentContainer=null;this.name="";this.active=true;this.tabIndex=-1;this.data=null;this.renderFlags=15;this.cameraFilter=0;this.input=null;this.body=null;this.ignoreDestroy=false;t.sys.queueDepthSort()},setActive:function(e){this.active=e;return this},setName:function(e){this.name=e;return this},setState:function(e){this.state=e;return this},setDataEnabled:function(){if(!this.data){this.data=new DataManager_1(this)}return this},setData:function(e,t){if(!this.data){this.data=new DataManager_1(this)}this.data.set(e,t);return this},getData:function(e){if(!this.data){this.data=new DataManager_1(this)}return this.data.get(e)},setInteractive:function(e,t,i){this.scene.sys.input.enable(this,e,t,i);return this},disableInteractive:function(){if(this.input){this.input.enabled=false}return this},removeInteractive:function(){this.scene.sys.input.clear(this);this.input=undefined;return this},update:function(){},toJSON:function(){return ToJSON_1(this)},willRender:function(e){return!(GameObject.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)},getIndexList:function(){var e=this;var t=this.parentContainer;var i=[];while(t){i.unshift(t.getIndex(e));e=t;if(!t.parentContainer){break}else{t=t.parentContainer}}i.unshift(this.scene.sys.displayList.getIndex(e));return i},destroy:function(e){if(e===undefined){e=false}if(!this.scene||this.ignoreDestroy){return}if(this.preDestroy){this.preDestroy.call(this)}this.emit(events$3.DESTROY,this);var t=this.scene.sys;if(!e){t.displayList.remove(this);t.updateList.remove(this)}if(this.input){t.input.clear(this);this.input=undefined}if(this.data){this.data.destroy();this.data=undefined}if(this.body){this.body.destroy();this.body=undefined}if(!e){t.queueDepthSort()}this.active=false;this.visible=false;this.scene=undefined;this.parentContainer=undefined;this.removeAllListeners()}});GameObject.RENDER_MASK=15;var GameObject_1=GameObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Zone=new Class_1({Extends:GameObject_1,Mixins:[components.Depth,components.GetBounds,components.Origin,components.Transform,components.ScrollFactor,components.Visible],initialize:function e(t,i,r,n,s){if(n===undefined){n=1}if(s===undefined){s=n}GameObject_1.call(this,t,"Zone");this.setPosition(i,r);this.width=n;this.height=s;this.blendMode=BlendModes.NORMAL;this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){if(i===undefined){i=true}this.width=e;this.height=t;this.updateDisplayOrigin();var r=this.input;if(i&&r&&!r.customHitArea){r.hitArea.width=e;r.hitArea.height=t}return this},setDisplaySize:function(e,t){this.displayWidth=e;this.displayHeight=t;return this},setCircleDropZone:function(e){return this.setDropZone(new Circle_1(0,0,e),Contains_1)},setRectangleDropZone:function(e,t){return this.setDropZone(new Rectangle_1(0,0,e,t),Contains_1$1)},setDropZone:function(e,t){if(e===undefined){this.setRectangleDropZone(this.width,this.height)}else if(!this.input){this.setInteractive(e,t,true)}return this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(){},renderWebGL:function(){}});var Zone_1=Zone;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tempZone=new Zone_1({sys:{queueDepthSort:NOOP_1,events:{once:NOOP_1}}},0,0,1,1);var GridAlign=function(e,t){if(t===undefined){t={}}var i=GetFastValue_1(t,"width",-1);var r=GetFastValue_1(t,"height",-1);var n=GetFastValue_1(t,"cellWidth",1);var s=GetFastValue_1(t,"cellHeight",n);var a=GetFastValue_1(t,"position",_const$1.TOP_LEFT);var o=GetFastValue_1(t,"x",0);var l=GetFastValue_1(t,"y",0);var h=0;var u=0;var c=i*n;var f=r*s;tempZone.setPosition(o,l);tempZone.setSize(n,s);for(var d=0;d<e.length;d++){QuickSet_1(e[d],tempZone,a);if(i===-1){u+=s;tempZone.y+=s;if(u===f){u=0;tempZone.x+=n;tempZone.y=l}}else if(r===-1){h+=n;tempZone.x+=n;if(h===c){h=0;tempZone.x=o;tempZone.y+=s}}else{h+=n;tempZone.x+=n;if(h===c){h=0;u+=s;tempZone.x=o;tempZone.y+=s;if(u===f){break}}}}return e};var GridAlign_1=GridAlign;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IncAlpha=function(e,t,i,r,n){return PropertyValueInc_1(e,"alpha",t,i,r,n)};var IncAlpha_1=IncAlpha;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IncX=function(e,t,i,r,n){return PropertyValueInc_1(e,"x",t,i,r,n)};var IncX_1=IncX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IncXY=function(e,t,i,r,n,s,a){if(i===undefined||i===null){i=t}PropertyValueInc_1(e,"x",t,r,s,a);return PropertyValueInc_1(e,"y",i,n,s,a)};var IncXY_1=IncXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IncY=function(e,t,i,r,n){return PropertyValueInc_1(e,"y",t,i,r,n)};var IncY_1=IncY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlaceOnCircle=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=6.28}var n=i;var s=(r-i)/e.length;for(var a=0;a<e.length;a++){e[a].x=t.x+t.radius*Math.cos(n);e[a].y=t.y+t.radius*Math.sin(n);n+=s}return e};var PlaceOnCircle_1=PlaceOnCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlaceOnEllipse=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=6.28}var n=i;var s=(r-i)/e.length;var a=t.width/2;var o=t.height/2;for(var l=0;l<e.length;l++){e[l].x=t.x+a*Math.cos(n);e[l].y=t.y+o*Math.sin(n);n+=s}return e};var PlaceOnEllipse_1=PlaceOnEllipse;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlaceOnLine=function(e,t){var i=GetPoints_1$2(t,e.length);for(var r=0;r<e.length;r++){var n=e[r];var s=i[r];n.x=s.x;n.y=s.y}return e};var PlaceOnLine_1=PlaceOnLine;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MarchingAnts=function(e,t,i,r){if(r===undefined){r=[]}if(!t&&!i){return r}if(!t){t=Perimeter_1(e)/i}else{i=Math.round(Perimeter_1(e)/t)}var n=e.x;var s=e.y;var a=0;for(var o=0;o<i;o++){r.push(new Point_1(n,s));switch(a){case 0:n+=t;if(n>=e.right){a=1;s+=n-e.right;n=e.right}break;case 1:s+=t;if(s>=e.bottom){a=2;n-=s-e.bottom;s=e.bottom}break;case 2:n-=t;if(n<=e.left){a=3;s-=e.left-n;n=e.left}break;case 3:s-=t;if(s<=e.top){a=0;s=e.top}break}}return r};var MarchingAnts_1=MarchingAnts;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateLeft=function(e,t){if(t===undefined){t=1}var i=null;for(var r=0;r<t;r++){i=e.shift();e.push(i)}return i};var RotateLeft_1=RotateLeft;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateRight=function(e,t){if(t===undefined){t=1}var i=null;for(var r=0;r<t;r++){i=e.pop();e.unshift(i)}return i};var RotateRight_1=RotateRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlaceOnRectangle=function(e,t,i){if(i===undefined){i=0}var r=MarchingAnts_1(t,false,e.length);if(i>0){RotateLeft_1(r,i)}else if(i<0){RotateRight_1(r,Math.abs(i))}for(var n=0;n<e.length;n++){e[n].x=r[n].x;e[n].y=r[n].y}return e};var PlaceOnRectangle_1=PlaceOnRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BresenhamPoints=function(e,t,i){if(t===undefined){t=1}if(i===undefined){i=[]}var r=Math.round(e.x1);var n=Math.round(e.y1);var s=Math.round(e.x2);var a=Math.round(e.y2);var o=Math.abs(s-r);var l=Math.abs(a-n);var h=r<s?1:-1;var u=n<a?1:-1;var c=o-l;i.push({x:r,y:n});var f=1;while(!(r===s&&n===a)){var d=c<<1;if(d>-l){c-=l;r+=h}if(d<o){c+=o;n+=u}if(f%t===0){i.push({x:r,y:n})}f++}return i};var BresenhamPoints_1=BresenhamPoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlaceOnTriangle=function(e,t,i){var r=BresenhamPoints_1({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},i);var n=BresenhamPoints_1({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},i);var s=BresenhamPoints_1({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},i);r.pop();n.pop();s.pop();r=r.concat(n,s);var a=r.length/e.length;var o=0;for(var l=0;l<e.length;l++){var h=e[l];var u=r[Math.floor(o)];h.x=u.x;h.y=u.y;o+=a}return e};var PlaceOnTriangle_1=PlaceOnTriangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PlayAnimation=function(e,t,i){for(var r=0;r<e.length;r++){e[r].anims.play(t,i)}return e};var PlayAnimation_1=PlayAnimation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PropertyValueSet=function(e,t,i,r,n,s){if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=1}var a;var o=0;var l=e.length;if(s===1){for(a=n;a<l;a++){e[a][t]=i+o*r;o++}}else{for(a=n;a>=0;a--){e[a][t]=i+o*r;o++}}return e};var PropertyValueSet_1=PropertyValueSet;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomCircle=function(e,t){for(var i=0;i<e.length;i++){Random_1(t,e[i])}return e};var RandomCircle_1=RandomCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Random$3=function(e,t){if(t===undefined){t=new Point_1}var i=Math.random()*Math.PI*2;var r=Math.sqrt(Math.random());t.x=e.x+r*Math.cos(i)*e.width/2;t.y=e.y+r*Math.sin(i)*e.height/2;return t};var Random_1$3=Random$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomEllipse=function(e,t){for(var i=0;i<e.length;i++){Random_1$3(t,e[i])}return e};var RandomEllipse_1=RandomEllipse;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomLine=function(e,t){for(var i=0;i<e.length;i++){Random_1$1(t,e[i])}return e};var RandomLine_1=RandomLine;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomRectangle=function(e,t){for(var i=0;i<e.length;i++){Random_1$2(t,e[i])}return e};var RandomRectangle_1=RandomRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Random$4=function(e,t){if(t===undefined){t=new Point_1}var i=e.x2-e.x1;var r=e.y2-e.y1;var n=e.x3-e.x1;var s=e.y3-e.y1;var a=Math.random();var o=Math.random();if(a+o>=1){a=1-a;o=1-o}t.x=e.x1+(i*a+n*o);t.y=e.y1+(r*a+s*o);return t};var Random_1$4=Random$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomTriangle=function(e,t){for(var i=0;i<e.length;i++){Random_1$4(t,e[i])}return e};var RandomTriangle_1=RandomTriangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rotate=function(e,t,i,r,n){return PropertyValueInc_1(e,"rotation",t,i,r,n)};var Rotate_1=Rotate;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundDistance=function(e,t,i,r,n){var s=r+Math.atan2(e.y-i,e.x-t);e.x=t+n*Math.cos(s);e.y=i+n*Math.sin(s);return e};var RotateAroundDistance_1=RotateAroundDistance;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DistanceBetween=function(e,t,i,r){var n=e-i;var s=t-r;return Math.sqrt(n*n+s*s)};var DistanceBetween_1=DistanceBetween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAround$1=function(e,t,i){var r=t.x;var n=t.y;for(var s=0;s<e.length;s++){var a=e[s];RotateAroundDistance_1(a,r,n,i,Math.max(1,DistanceBetween_1(a.x,a.y,r,n)))}return e};var RotateAround_1$1=RotateAround$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundDistance$1=function(e,t,i,r){var n=t.x;var s=t.y;if(r===0){return e}for(var a=0;a<e.length;a++){RotateAroundDistance_1(e[a],n,s,i,r)}return e};var RotateAroundDistance_1$1=RotateAroundDistance$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScaleX=function(e,t,i,r,n){return PropertyValueInc_1(e,"scaleX",t,i,r,n)};var ScaleX_1=ScaleX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScaleXY=function(e,t,i,r,n,s,a){if(i===undefined||i===null){i=t}PropertyValueInc_1(e,"scaleX",t,r,s,a);return PropertyValueInc_1(e,"scaleY",i,n,s,a)};var ScaleXY_1=ScaleXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScaleY=function(e,t,i,r,n){return PropertyValueInc_1(e,"scaleY",t,i,r,n)};var ScaleY_1=ScaleY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetAlpha=function(e,t,i,r,n){return PropertyValueSet_1(e,"alpha",t,i,r,n)};var SetAlpha_1=SetAlpha;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetBlendMode=function(e,t,i,r){return PropertyValueSet_1(e,"blendMode",t,0,i,r)};var SetBlendMode_1=SetBlendMode;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetDepth=function(e,t,i,r,n){return PropertyValueSet_1(e,"depth",t,i,r,n)};var SetDepth_1=SetDepth;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetHitArea=function(e,t,i){for(var r=0;r<e.length;r++){e[r].setInteractive(t,i)}return e};var SetHitArea_1=SetHitArea;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetOrigin=function(e,t,i,r,n,s,a){if(i===undefined||i===null){i=t}PropertyValueSet_1(e,"originX",t,r,s,a);return PropertyValueSet_1(e,"originY",i,n,s,a)};var SetOrigin_1=SetOrigin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetRotation=function(e,t,i,r,n){return PropertyValueSet_1(e,"rotation",t,i,r,n)};var SetRotation_1=SetRotation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetScale=function(e,t,i,r,n,s,a){if(i===undefined||i===null){i=t}PropertyValueSet_1(e,"scaleX",t,r,s,a);return PropertyValueSet_1(e,"scaleY",i,n,s,a)};var SetScale_1=SetScale;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetScaleX=function(e,t,i,r,n){return PropertyValueSet_1(e,"scaleX",t,i,r,n)};var SetScaleX_1=SetScaleX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetScaleY=function(e,t,i,r,n){return PropertyValueSet_1(e,"scaleY",t,i,r,n)};var SetScaleY_1=SetScaleY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTint=function(e,t,i,r,n){for(var s=0;s<e.length;s++){e[s].setTint(t,i,r,n)}return e};var SetTint_1=SetTint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetVisible=function(e,t,i,r){return PropertyValueSet_1(e,"visible",t,0,i,r)};var SetVisible_1=SetVisible;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetX=function(e,t,i,r,n){return PropertyValueSet_1(e,"x",t,i,r,n)};var SetX_1=SetX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetXY=function(e,t,i,r,n,s,a){if(i===undefined||i===null){i=t}PropertyValueSet_1(e,"x",t,r,s,a);return PropertyValueSet_1(e,"y",i,n,s,a)};var SetXY_1=SetXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetY=function(e,t,i,r,n){return PropertyValueSet_1(e,"y",t,i,r,n)};var SetY_1=SetY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ShiftPosition=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=new Vector2_1}var s;var a;if(e.length>1){var o;var l;var h;var u;if(r===0){var c=e.length-1;s=e[c].x;a=e[c].y;for(o=c-1;o>=0;o--){u=e[o];l=u.x;h=u.y;u.x=s;u.y=a;s=l;a=h}e[c].x=t;e[c].y=i}else{s=e[0].x;a=e[0].y;for(o=1;o<e.length;o++){u=e[o];l=u.x;h=u.y;u.x=s;u.y=a;s=l;a=h}e[0].x=t;e[0].y=i}}else{s=e[0].x;a=e[0].y;e[0].x=t;e[0].y=i}n.x=s;n.y=a;return n};var ShiftPosition_1=ShiftPosition;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1));var r=e[t];e[t]=e[i];e[i]=r}return e};var Shuffle_1=Shuffle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shuffle$1=function(e){return Shuffle_1(e)};var Shuffle_1$1=Shuffle$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmootherStep=function(e,t,i){e=Math.max(0,Math.min(1,(e-t)/(i-t)));return e*e*e*(e*(e*6-15)+10)};var SmootherStep_1=SmootherStep;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmootherStep$1=function(e,t,i,r,n){if(n===undefined){n=false}var s=Math.abs(r-i)/e.length;var a;if(n){for(a=0;a<e.length;a++){e[a][t]+=SmootherStep_1(a*s,i,r)}}else{for(a=0;a<e.length;a++){e[a][t]=SmootherStep_1(a*s,i,r)}}return e};var SmootherStep_1$1=SmootherStep$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmoothStep=function(e,t,i){if(e<=t){return 0}if(e>=i){return 1}e=(e-t)/(i-t);return e*e*(3-2*e)};var SmoothStep_1=SmoothStep;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmoothStep$1=function(e,t,i,r,n){if(n===undefined){n=false}var s=Math.abs(r-i)/e.length;var a;if(n){for(a=0;a<e.length;a++){e[a][t]+=SmoothStep_1(a*s,i,r)}}else{for(a=0;a<e.length;a++){e[a][t]=SmoothStep_1(a*s,i,r)}}return e};var SmoothStep_1$1=SmoothStep$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Spread=function(e,t,i,r,n){if(n===undefined){n=false}var s=Math.abs(r-i)/e.length;var a;if(n){for(a=0;a<e.length;a++){e[a][t]+=a*s+i}}else{for(a=0;a<e.length;a++){e[a][t]=a*s+i}}return e};var Spread_1=Spread;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ToggleVisible=function(e){for(var t=0;t<e.length;t++){e[t].visible=!e[t].visible}return e};var ToggleVisible_1=ToggleVisible;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       samme <samme.npm@gmail.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WrapInRectangle=function(e,t,i){if(i===undefined){i=0}for(var r=0;r<e.length;r++){var n=e[r];n.x=Wrap_1(n.x,t.left-i,t.right+i);n.y=Wrap_1(n.y,t.top-i,t.bottom+i)}return e};var WrapInRectangle_1=WrapInRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var actions={Angle:Angle_1,Call:Call_1,GetFirst:GetFirst_1,GetLast:GetLast_1,GridAlign:GridAlign_1,IncAlpha:IncAlpha_1,IncX:IncX_1,IncXY:IncXY_1,IncY:IncY_1,PlaceOnCircle:PlaceOnCircle_1,PlaceOnEllipse:PlaceOnEllipse_1,PlaceOnLine:PlaceOnLine_1,PlaceOnRectangle:PlaceOnRectangle_1,PlaceOnTriangle:PlaceOnTriangle_1,PlayAnimation:PlayAnimation_1,PropertyValueInc:PropertyValueInc_1,PropertyValueSet:PropertyValueSet_1,RandomCircle:RandomCircle_1,RandomEllipse:RandomEllipse_1,RandomLine:RandomLine_1,RandomRectangle:RandomRectangle_1,RandomTriangle:RandomTriangle_1,Rotate:Rotate_1,RotateAround:RotateAround_1$1,RotateAroundDistance:RotateAroundDistance_1$1,ScaleX:ScaleX_1,ScaleXY:ScaleXY_1,ScaleY:ScaleY_1,SetAlpha:SetAlpha_1,SetBlendMode:SetBlendMode_1,SetDepth:SetDepth_1,SetHitArea:SetHitArea_1,SetOrigin:SetOrigin_1,SetRotation:SetRotation_1,SetScale:SetScale_1,SetScaleX:SetScaleX_1,SetScaleY:SetScaleY_1,SetTint:SetTint_1,SetVisible:SetVisible_1,SetX:SetX_1,SetXY:SetXY_1,SetY:SetY_1,ShiftPosition:ShiftPosition_1,Shuffle:Shuffle_1$1,SmootherStep:SmootherStep_1$1,SmoothStep:SmoothStep_1$1,Spread:Spread_1,ToggleVisible:ToggleVisible_1,WrapInRectangle:WrapInRectangle_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Map=new Class_1({initialize:function e(t){this.entries={};this.size=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++){this.set(t[i][0],t[i][1])}}},set:function(e,t){if(!this.has(e)){this.size++}this.entries[e]=t;return this},get:function(e){if(this.has(e)){return this.entries[e]}},getArray:function(){var e=[];var t=this.entries;for(var i in t){e.push(t[i])}return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){if(this.has(e)){delete this.entries[e];this.size--}return this},clear:function(){Object.keys(this.entries).forEach((function(e){delete this.entries[e]}),this);this.size=0;return this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[];var t=this.entries;for(var i in t){e.push(t[i])}return e},dump:function(){var e=this.entries;console.group("Map");for(var t in e){console.log(t,e[t])}console.groupEnd()},each:function(e){var t=this.entries;for(var i in t){if(e(i,t[i])===false){break}}return this},contains:function(e){var t=this.entries;for(var i in t){if(t[i]===e){return true}}return false},merge:function(e,t){if(t===undefined){t=false}var i=this.entries;var r=e.entries;for(var n in r){if(i.hasOwnProperty(n)&&t){i[n]=r[n]}else{this.set(n,r[n])}}return this}});var _Map=Map;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Pad=function(e,t,i,r){if(t===undefined){t=0}if(i===undefined){i=" "}if(r===undefined){r=3}e=e.toString();var n=0;if(t+1>=e.length){switch(r){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var s=Math.ceil((n=t-e.length)/2);var a=n-s;e=new Array(a+1).join(i)+e+new Array(s+1).join(i);break;default:e=e+new Array(t+1-e.length).join(i);break}}return e};var Pad_1=Pad;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AnimationManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.textureManager=null;this.globalTimeScale=1;this.anims=new _Map;this.paused=false;this.name="AnimationManager";t.events.once(events$1.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures;this.game.events.once(events$1.DESTROY,this.destroy,this)},add:function(e,t){if(this.anims.has(e)){console.warn("Animation key exists: "+e);return}t.key=e;this.anims.set(e,t);this.emit(events.ADD_ANIMATION,e,t);return this},exists:function(e){return this.anims.has(e)},create:function(e){var t=e.key;var i=false;if(t){i=this.get(t);if(!i){i=new Animation_1(this,t,e);this.anims.set(t,i);this.emit(events.ADD_ANIMATION,t,i)}}return i},fromJSON:function(e,t){if(t===undefined){t=false}if(t){this.anims.clear()}if(typeof e==="string"){e=JSON.parse(e)}var i=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var r=0;r<e.anims.length;r++){i.push(this.create(e.anims[r]))}if(e.hasOwnProperty("globalTimeScale")){this.globalTimeScale=e.globalTimeScale}}else if(e.hasOwnProperty("key")&&e.type==="frame"){i.push(this.create(e))}return i},generateFrameNames:function(e,t){var i=GetValue_1(t,"prefix","");var r=GetValue_1(t,"start",0);var n=GetValue_1(t,"end",0);var s=GetValue_1(t,"suffix","");var a=GetValue_1(t,"zeroPad",0);var o=GetValue_1(t,"outputArray",[]);var l=GetValue_1(t,"frames",false);var h=this.textureManager.get(e);if(!h){return o}var u=r<n?1:-1;n+=u;var c;var f;if(!t){l=h.getFrameNames();for(c=0;c<l.length;c++){o.push({key:e,frame:l[c]})}}else if(Array.isArray(l)){for(c=0;c<l.length;c++){f=i+Pad_1(l[c],a,"0",1)+s;if(h.has(f)){o.push({key:e,frame:f})}}}else{for(c=r;c!==n;c+=u){f=i+Pad_1(c,a,"0",1)+s;if(h.has(f)){o.push({key:e,frame:f})}}}return o},generateFrameNumbers:function(e,t){var i=GetValue_1(t,"start",0);var r=GetValue_1(t,"end",-1);var n=GetValue_1(t,"first",false);var s=GetValue_1(t,"outputArray",[]);var a=GetValue_1(t,"frames",false);var o=this.textureManager.get(e);if(!o){return s}if(n&&o.has(n)){s.push({key:e,frame:n})}var l;if(Array.isArray(a)){for(l=0;l<a.length;l++){if(o.has(a[l])){s.push({key:e,frame:a[l]})}}}else{if(r===-1){r=o.frameTotal}var h=i<r?1:-1;r+=h;for(l=i;l!==r;l+=h){if(o.has(l)){s.push({key:e,frame:l})}}}return s},get:function(e){return this.anims.get(e)},load:function(e,t,i){var r=this.get(t);if(r){r.load(e,i)}else{console.warn("Missing animation: "+t)}return e},pauseAll:function(){if(!this.paused){this.paused=true;this.emit(events.PAUSE_ALL)}return this},play:function(e,t){if(!Array.isArray(t)){t=[t]}var i=this.get(e);if(!i){return}for(var r=0;r<t.length;r++){t[r].anims.play(e)}return this},remove:function(e){var t=this.get(e);if(t){this.emit(events.REMOVE_ANIMATION,e,t);this.anims.delete(e)}return t},resumeAll:function(){if(this.paused){this.paused=false;this.emit(events.RESUME_ALL)}return this},staggerPlay:function(e,t,i){if(i===undefined){i=0}if(!Array.isArray(t)){t=[t]}var r=this.get(e);if(!r){return}for(var n=0;n<t.length;n++){t[n].anims.delayedPlay(i*n,e)}return this},toJSON:function(e){if(e!==undefined&&e!==""){return this.anims.get(e).toJSON()}else{var t={anims:[],globalTimeScale:this.globalTimeScale};this.anims.each((function(e,i){t.anims.push(i.toJSON())}));return t}},destroy:function(){this.anims.clear();this.textureManager=null;this.game=null}});var AnimationManager_1=AnimationManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var animations={Animation:Animation_1,AnimationFrame:AnimationFrame_1,AnimationManager:AnimationManager_1,Events:events};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ADD_EVENT="add";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var REMOVE_EVENT="remove";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$4={ADD:ADD_EVENT,REMOVE:REMOVE_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BaseCache=new Class_1({initialize:function e(){this.entries=new _Map;this.events=new eventemitter3},add:function(e,t){this.entries.set(e,t);this.events.emit(events$4.ADD,this,e,t);return this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);if(t){this.entries.delete(e);this.events.emit(events$4.REMOVE,this,e,t.data)}return this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear();this.events.removeAllListeners();this.entries=null;this.events=null}});var BaseCache_1=BaseCache;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CacheManager=new Class_1({initialize:function e(t){this.game=t;this.binary=new BaseCache_1;this.bitmapFont=new BaseCache_1;this.json=new BaseCache_1;this.physics=new BaseCache_1;this.shader=new BaseCache_1;this.audio=new BaseCache_1;this.text=new BaseCache_1;this.html=new BaseCache_1;this.obj=new BaseCache_1;this.tilemap=new BaseCache_1;this.xml=new BaseCache_1;this.custom={};this.game.events.once(events$1.DESTROY,this.destroy,this)},addCustom:function(e){if(!this.custom.hasOwnProperty(e)){this.custom[e]=new BaseCache_1}return this.custom[e]},destroy:function(){var e=["binary","bitmapFont","json","physics","shader","audio","text","html","obj","tilemap","xml"];for(var t=0;t<e.length;t++){this[e[t]].destroy();this[e[t]]=null}for(var i in this.custom){this.custom[i].destroy()}this.custom=null;this.game=null}});var CacheManager_1=CacheManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var cache={BaseCache:BaseCache_1,CacheManager:CacheManager_1,Events:events$4};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FixedKeyControl=new Class_1({initialize:function e(t){this.camera=GetValue_1(t,"camera",null);this.left=GetValue_1(t,"left",null);this.right=GetValue_1(t,"right",null);this.up=GetValue_1(t,"up",null);this.down=GetValue_1(t,"down",null);this.zoomIn=GetValue_1(t,"zoomIn",null);this.zoomOut=GetValue_1(t,"zoomOut",null);this.zoomSpeed=GetValue_1(t,"zoomSpeed",.01);this.speedX=0;this.speedY=0;var i=GetValue_1(t,"speed",null);if(typeof i==="number"){this.speedX=i;this.speedY=i}else{this.speedX=GetValue_1(t,"speed.x",0);this.speedY=GetValue_1(t,"speed.y",0)}this._zoom=0;this.active=this.camera!==null},start:function(){this.active=this.camera!==null;return this},stop:function(){this.active=false;return this},setCamera:function(e){this.camera=e;return this},update:function(e){if(!this.active){return}if(e===undefined){e=1}var t=this.camera;if(this.up&&this.up.isDown){t.scrollY-=this.speedY*e|0}else if(this.down&&this.down.isDown){t.scrollY+=this.speedY*e|0}if(this.left&&this.left.isDown){t.scrollX-=this.speedX*e|0}else if(this.right&&this.right.isDown){t.scrollX+=this.speedX*e|0}if(this.zoomIn&&this.zoomIn.isDown){t.zoom-=this.zoomSpeed;if(t.zoom<.1){t.zoom=.1}}else if(this.zoomOut&&this.zoomOut.isDown){t.zoom+=this.zoomSpeed}},destroy:function(){this.camera=null;this.left=null;this.right=null;this.up=null;this.down=null;this.zoomIn=null;this.zoomOut=null}});var FixedKeyControl_1=FixedKeyControl;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmoothedKeyControl=new Class_1({initialize:function e(t){this.camera=GetValue_1(t,"camera",null);this.left=GetValue_1(t,"left",null);this.right=GetValue_1(t,"right",null);this.up=GetValue_1(t,"up",null);this.down=GetValue_1(t,"down",null);this.zoomIn=GetValue_1(t,"zoomIn",null);this.zoomOut=GetValue_1(t,"zoomOut",null);this.zoomSpeed=GetValue_1(t,"zoomSpeed",.01);this.accelX=0;this.accelY=0;var i=GetValue_1(t,"acceleration",null);if(typeof i==="number"){this.accelX=i;this.accelY=i}else{this.accelX=GetValue_1(t,"acceleration.x",0);this.accelY=GetValue_1(t,"acceleration.y",0)}this.dragX=0;this.dragY=0;var r=GetValue_1(t,"drag",null);if(typeof r==="number"){this.dragX=r;this.dragY=r}else{this.dragX=GetValue_1(t,"drag.x",0);this.dragY=GetValue_1(t,"drag.y",0)}this.maxSpeedX=0;this.maxSpeedY=0;var n=GetValue_1(t,"maxSpeed",null);if(typeof n==="number"){this.maxSpeedX=n;this.maxSpeedY=n}else{this.maxSpeedX=GetValue_1(t,"maxSpeed.x",0);this.maxSpeedY=GetValue_1(t,"maxSpeed.y",0)}this._speedX=0;this._speedY=0;this._zoom=0;this.active=this.camera!==null},start:function(){this.active=this.camera!==null;return this},stop:function(){this.active=false;return this},setCamera:function(e){this.camera=e;return this},update:function(e){if(!this.active){return}if(e===undefined){e=1}var t=this.camera;if(this._speedX>0){this._speedX-=this.dragX*e;if(this._speedX<0){this._speedX=0}}else if(this._speedX<0){this._speedX+=this.dragX*e;if(this._speedX>0){this._speedX=0}}if(this._speedY>0){this._speedY-=this.dragY*e;if(this._speedY<0){this._speedY=0}}else if(this._speedY<0){this._speedY+=this.dragY*e;if(this._speedY>0){this._speedY=0}}if(this.up&&this.up.isDown){this._speedY+=this.accelY;if(this._speedY>this.maxSpeedY){this._speedY=this.maxSpeedY}}else if(this.down&&this.down.isDown){this._speedY-=this.accelY;if(this._speedY<-this.maxSpeedY){this._speedY=-this.maxSpeedY}}if(this.left&&this.left.isDown){this._speedX+=this.accelX;if(this._speedX>this.maxSpeedX){this._speedX=this.maxSpeedX}}else if(this.right&&this.right.isDown){this._speedX-=this.accelX;if(this._speedX<-this.maxSpeedX){this._speedX=-this.maxSpeedX}}if(this.zoomIn&&this.zoomIn.isDown){this._zoom=-this.zoomSpeed}else if(this.zoomOut&&this.zoomOut.isDown){this._zoom=this.zoomSpeed}else{this._zoom=0}if(this._speedX!==0){t.scrollX-=this._speedX*e|0}if(this._speedY!==0){t.scrollY-=this._speedY*e|0}if(this._zoom!==0){t.zoom+=this._zoom;if(t.zoom<.001){t.zoom=.001}}},destroy:function(){this.camera=null;this.left=null;this.right=null;this.up=null;this.down=null;this.zoomIn=null;this.zoomOut=null}});var SmoothedKeyControl_1=SmoothedKeyControl;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var controls={FixedKeyControl:FixedKeyControl_1,SmoothedKeyControl:SmoothedKeyControl_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT$2="cameradestroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FADE_IN_COMPLETE_EVENT="camerafadeincomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FADE_IN_START_EVENT="camerafadeinstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FADE_OUT_COMPLETE_EVENT="camerafadeoutcomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FADE_OUT_START_EVENT="camerafadeoutstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FLASH_COMPLETE_EVENT="cameraflashcomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FLASH_START_EVENT="cameraflashstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAN_COMPLETE_EVENT="camerapancomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAN_START_EVENT="camerapanstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POST_RENDER_EVENT$1="postrender";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PRE_RENDER_EVENT$1="prerender";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SHAKE_COMPLETE_EVENT="camerashakecomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SHAKE_START_EVENT="camerashakestart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ZOOM_COMPLETE_EVENT="camerazoomcomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ZOOM_START_EVENT="camerazoomstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$5={DESTROY:DESTROY_EVENT$2,FADE_IN_COMPLETE:FADE_IN_COMPLETE_EVENT,FADE_IN_START:FADE_IN_START_EVENT,FADE_OUT_COMPLETE:FADE_OUT_COMPLETE_EVENT,FADE_OUT_START:FADE_OUT_START_EVENT,FLASH_COMPLETE:FLASH_COMPLETE_EVENT,FLASH_START:FLASH_START_EVENT,PAN_COMPLETE:PAN_COMPLETE_EVENT,PAN_START:PAN_START_EVENT,POST_RENDER:POST_RENDER_EVENT$1,PRE_RENDER:PRE_RENDER_EVENT$1,SHAKE_COMPLETE:SHAKE_COMPLETE_EVENT,SHAKE_START:SHAKE_START_EVENT,ZOOM_COMPLETE:ZOOM_COMPLETE_EVENT,ZOOM_START:ZOOM_START_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetColor$1=function(e,t,i){return e<<16|t<<8|i};var GetColor_1=GetColor$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetColor32=function(e,t,i,r){return r<<24|e<<16|t<<8|i};var GetColor32_1=GetColor32;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HSVToRGB=function(e,t,i,r){if(t===undefined){t=1}if(i===undefined){i=1}var n=Math.floor(e*6);var s=e*6-n;var a=Math.floor(i*(1-t)*255);var o=Math.floor(i*(1-s*t)*255);var l=Math.floor(i*(1-(1-s)*t)*255);i=Math.floor(i*=255);var h=i;var u=i;var c=i;var f=n%6;if(f===0){u=l;c=a}else if(f===1){h=o;c=a}else if(f===2){h=a;c=l}else if(f===3){h=a;u=o}else if(f===4){h=l;u=a}else if(f===5){u=a;c=o}if(!r){return{r:h,g:u,b:c,color:GetColor_1(h,u,c)}}else if(r.setTo){return r.setTo(h,u,c,r.alpha,false)}else{r.r=h;r.g=u;r.b=c;r.color=GetColor_1(h,u,c);return r}};var HSVToRGB_1=HSVToRGB;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RGBToHSV=function(e,t,i,r){if(r===undefined){r={h:0,s:0,v:0}}e/=255;t/=255;i/=255;var n=Math.min(e,t,i);var s=Math.max(e,t,i);var a=s-n;var o=0;var l=s===0?0:a/s;var h=s;if(s!==n){if(s===e){o=(t-i)/a+(t<i?6:0)}else if(s===t){o=(i-e)/a+2}else if(s===i){o=(e-t)/a+4}o/=6}if(r.hasOwnProperty("_h")){r._h=o;r._s=l;r._v=h}else{r.h=o;r.s=l;r.v=h}return r};var RGBToHSV_1=RGBToHSV;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Color=new Class_1({initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=255}this.r=0;this.g=0;this.b=0;this.a=255;this._h=0;this._s=0;this._v=0;this._locked=false;this.gl=[0,0,0,1];this._color=0;this._color32=0;this._rgba="";this.setTo(t,i,r,n)},transparent:function(){this._locked=true;this.red=0;this.green=0;this.blue=0;this.alpha=0;this._locked=false;return this.update(true)},setTo:function(e,t,i,r,n){if(r===undefined){r=255}if(n===undefined){n=true}this._locked=true;this.red=e;this.green=t;this.blue=i;this.alpha=r;this._locked=false;return this.update(n)},setGLTo:function(e,t,i,r){if(r===undefined){r=1}this._locked=true;this.redGL=e;this.greenGL=t;this.blueGL=i;this.alphaGL=r;this._locked=false;return this.update(true)},setFromRGB:function(e){this._locked=true;this.red=e.r;this.green=e.g;this.blue=e.b;if(e.hasOwnProperty("a")){this.alpha=e.a}this._locked=false;return this.update(true)},setFromHSV:function(e,t,i){return HSVToRGB_1(e,t,i,this)},update:function(e){if(e===undefined){e=false}if(this._locked){return this}var t=this.r;var i=this.g;var r=this.b;var n=this.a;this._color=GetColor_1(t,i,r);this._color32=GetColor32_1(t,i,r,n);this._rgba="rgba("+t+","+i+","+r+","+n/255+")";if(e){RGBToHSV_1(t,i,r,this)}return this},updateHSV:function(){var e=this.r;var t=this.g;var i=this.b;RGBToHSV_1(e,t,i,this);return this},clone:function(){return new Color(this.r,this.g,this.b,this.a)},gray:function(e){return this.setTo(e,e,e)},random:function(e,t){if(e===undefined){e=0}if(t===undefined){t=255}var i=Math.floor(e+Math.random()*(t-e));var r=Math.floor(e+Math.random()*(t-e));var n=Math.floor(e+Math.random()*(t-e));return this.setTo(i,r,n)},randomGray:function(e,t){if(e===undefined){e=0}if(t===undefined){t=255}var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function(e){this.s+=e/100;return this},desaturate:function(e){this.s-=e/100;return this},lighten:function(e){this.v+=e/100;return this},darken:function(e){this.v-=e/100;return this},brighten:function(e){var t=this.r;var i=this.g;var r=this.b;t=Math.max(0,Math.min(255,t-Math.round(255*-(e/100))));i=Math.max(0,Math.min(255,i-Math.round(255*-(e/100))));r=Math.max(0,Math.min(255,r-Math.round(255*-(e/100))));return this.setTo(t,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(e){this.gl[0]=Math.min(Math.abs(e),1);this.r=Math.floor(this.gl[0]*255);this.update(true)}},greenGL:{get:function(){return this.gl[1]},set:function(e){this.gl[1]=Math.min(Math.abs(e),1);this.g=Math.floor(this.gl[1]*255);this.update(true)}},blueGL:{get:function(){return this.gl[2]},set:function(e){this.gl[2]=Math.min(Math.abs(e),1);this.b=Math.floor(this.gl[2]*255);this.update(true)}},alphaGL:{get:function(){return this.gl[3]},set:function(e){this.gl[3]=Math.min(Math.abs(e),1);this.a=Math.floor(this.gl[3]*255);this.update()}},red:{get:function(){return this.r},set:function(e){e=Math.floor(Math.abs(e));this.r=Math.min(e,255);this.gl[0]=e/255;this.update(true)}},green:{get:function(){return this.g},set:function(e){e=Math.floor(Math.abs(e));this.g=Math.min(e,255);this.gl[1]=e/255;this.update(true)}},blue:{get:function(){return this.b},set:function(e){e=Math.floor(Math.abs(e));this.b=Math.min(e,255);this.gl[2]=e/255;this.update(true)}},alpha:{get:function(){return this.a},set:function(e){e=Math.floor(Math.abs(e));this.a=Math.min(e,255);this.gl[3]=e/255;this.update()}},h:{get:function(){return this._h},set:function(e){this._h=e;HSVToRGB_1(e,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(e){this._s=e;HSVToRGB_1(this._h,e,this._v,this)}},v:{get:function(){return this._v},set:function(e){this._v=e;HSVToRGB_1(this._h,this._s,e,this)}}});var Color_1=Color;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HexStringToColor=function(e){var t=new Color_1;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,r){return t+t+i+i+r+r}));var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var r=parseInt(i[1],16);var n=parseInt(i[2],16);var s=parseInt(i[3],16);t.setTo(r,n,s)}return t};var HexStringToColor_1=HexStringToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IntegerToRGB=function(e){if(e>16777215){return{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}}else{return{a:255,r:e>>16&255,g:e>>8&255,b:e&255}}};var IntegerToRGB_1=IntegerToRGB;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IntegerToColor=function(e){var t=IntegerToRGB_1(e);return new Color_1(t.r,t.g,t.b,t.a)};var IntegerToColor_1=IntegerToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ObjectToColor=function(e){return new Color_1(e.r,e.g,e.b,e.a)};var ObjectToColor_1=ObjectToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RGBStringToColor=function(e){var t=new Color_1;var i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var r=parseInt(i[1],10);var n=parseInt(i[2],10);var s=parseInt(i[3],10);var a=i[4]!==undefined?parseFloat(i[4]):1;t.setTo(r,n,s,a*255)}return t};var RGBStringToColor_1=RGBStringToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ValueToColor=function(e){var t=typeof e;switch(t){case"string":if(e.substr(0,3).toLowerCase()==="rgb"){return RGBStringToColor_1(e)}else{return HexStringToColor_1(e)}case"number":return IntegerToColor_1(e);case"object":return ObjectToColor_1(e)}};var ValueToColor_1=ValueToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BaseCamera=new Class_1({Extends:eventemitter3,Mixins:[components.Alpha,components.Visible],initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}eventemitter3.call(this);this.id=0;this.name="";this.resolution=1;this.roundPixels=false;this.useBounds=false;this.worldView=new Rectangle_1;this.dirty=true;this._x=t;this._y=i;this._cx=0;this._cy=0;this._cw=0;this._ch=0;this._width=r;this._height=n;this._bounds=new Rectangle_1;this._scrollX=0;this._scrollY=0;this._zoom=1;this._rotation=0;this.matrix=new TransformMatrix_1;this.transparent=true;this.backgroundColor=ValueToColor_1("rgba(0,0,0,0)");this.disableCull=false;this.culledObjects=[];this.midPoint=new Vector2_1(r/2,n/2);this.originX=.5;this.originY=.5;this._customViewport=false;this.mask=null;this._maskCamera=null},setOrigin:function(e,t){if(e===undefined){e=.5}if(t===undefined){t=e}this.originX=e;this.originY=t;return this},getScroll:function(e,t,i){if(i===undefined){i=new Vector2_1}var r=this.width*.5;var n=this.height*.5;i.x=e-r;i.y=t-n;if(this.useBounds){i.x=this.clampX(i.x);i.y=this.clampY(i.y)}return i},centerOnX:function(e){var t=this.width*.5;this.midPoint.x=e;this.scrollX=e-t;if(this.useBounds){this.scrollX=this.clampX(this.scrollX)}return this},centerOnY:function(e){var t=this.height*.5;this.midPoint.y=e;this.scrollY=e-t;if(this.useBounds){this.scrollY=this.clampY(this.scrollY)}return this},centerOn:function(e,t){this.centerOnX(e);this.centerOnY(t);return this},centerToBounds:function(){if(this.useBounds){var e=this._bounds;var t=this.width*.5;var i=this.height*.5;this.midPoint.set(e.centerX,e.centerY);this.scrollX=e.centerX-t;this.scrollY=e.centerY-i}return this},centerToSize:function(){this.scrollX=this.width*.5;this.scrollY=this.height*.5;return this},cull:function(e){if(this.disableCull){return e}var t=this.matrix.matrix;var i=t[0];var r=t[1];var n=t[2];var s=t[3];var a=i*s-r*n;if(!a){return e}var o=t[4];var l=t[5];var h=this.scrollX;var u=this.scrollY;var c=this.width;var f=this.height;var d=this.culledObjects;var v=e.length;a=1/a;d.length=0;for(var p=0;p<v;++p){var g=e[p];if(!g.hasOwnProperty("width")||g.parentContainer){d.push(g);continue}var m=g.width;var _=g.height;var y=g.x-h*g.scrollFactorX-m*g.originX;var T=g.y-u*g.scrollFactorY-_*g.originY;var x=y*i+T*n+o;var E=y*r+T*s+l;var C=(y+m)*i+(T+_)*n+o;var S=(y+m)*r+(T+_)*s+l;var A=this.y;var b=A+f;var w=this.x;var P=w+c;if(C>w&&x<P&&(S>A&&E<b)){d.push(g)}}return d},getWorldPoint:function(e,t,i){if(i===undefined){i=new Vector2_1}var r=this.matrix.matrix;var n=r[0];var s=r[1];var a=r[2];var o=r[3];var l=r[4];var h=r[5];var u=n*o-s*a;if(!u){i.x=e;i.y=t;return i}u=1/u;var c=o*u;var f=-s*u;var d=-a*u;var v=n*u;var p=(a*h-o*l)*u;var g=(s*l-n*h)*u;var m=Math.cos(this.rotation);var _=Math.sin(this.rotation);var y=this.zoom;var T=this.resolution;var x=this.scrollX;var E=this.scrollY;var C=e+(x*m-E*_)*y;var S=t+(x*_+E*m)*y;i.x=(C*c+S*d)*T+p;i.y=(C*f+S*v)*T+g;return i},ignore:function(e){var t=this.id;if(!Array.isArray(e)){e=[e]}for(var i=0;i<e.length;i++){var r=e[i];if(Array.isArray(r)){this.ignore(r)}else if(r.isParent){this.ignore(r.getChildren())}else{r.cameraFilter|=t}}return this},preRender:function(e){var t=this.width;var i=this.height;var r=t*.5;var n=i*.5;var s=this.zoom*e;var a=this.matrix;var o=t*this.originX;var l=i*this.originY;var h=this.scrollX;var u=this.scrollY;if(this.useBounds){h=this.clampX(h);u=this.clampY(u)}if(this.roundPixels){o=Math.round(o);l=Math.round(l)}this.scrollX=h;this.scrollY=u;var c=h+r;var f=u+n;this.midPoint.set(c,f);var d=t/s;var v=i/s;this.worldView.setTo(c-d/2,f-v/2,d,v);a.applyITRS(this.x+o,this.y+l,this.rotation,s,s);a.translate(-o,-l)},clampX:function(e){var t=this._bounds;var i=this.displayWidth;var r=t.x+(i-this.width)/2;var n=Math.max(r,r+t.width-i);if(e<r){e=r}else if(e>n){e=n}return e},clampY:function(e){var t=this._bounds;var i=this.displayHeight;var r=t.y+(i-this.height)/2;var n=Math.max(r,r+t.height-i);if(e<r){e=r}else if(e>n){e=n}return e},removeBounds:function(){this.useBounds=false;this.dirty=true;this._bounds.setEmpty();return this},setAngle:function(e){if(e===undefined){e=0}this.rotation=DegToRad_1(e);return this},setBackgroundColor:function(e){if(e===undefined){e="rgba(0,0,0,0)"}this.backgroundColor=ValueToColor_1(e);this.transparent=this.backgroundColor.alpha===0;return this},setBounds:function(e,t,i,r,n){if(n===undefined){n=false}this._bounds.setTo(e,t,i,r);this.dirty=true;this.useBounds=true;if(n){this.centerToBounds()}else{this.scrollX=this.clampX(this.scrollX);this.scrollY=this.clampY(this.scrollY)}return this},getBounds:function(e){if(e===undefined){e=new Rectangle_1}var t=this._bounds;e.setTo(t.x,t.y,t.width,t.height);return e},setName:function(e){if(e===undefined){e=""}this.name=e;return this},setPosition:function(e,t){if(t===undefined){t=e}this.x=e;this.y=t;return this},setRotation:function(e){if(e===undefined){e=0}this.rotation=e;return this},setRoundPixels:function(e){this.roundPixels=e;return this},setScene:function(e){if(this.scene&&this._customViewport){this.sceneManager.customViewports--}this.scene=e;var t=e.sys;this.sceneManager=t.game.scene;this.scaleManager=t.scale;this.cameraManager=t.cameras;var i=this.scaleManager.resolution;this.resolution=i;this._cx=this._x*i;this._cy=this._y*i;this._cw=this._width*i;this._ch=this._height*i;this.updateSystem();return this},setScroll:function(e,t){if(t===undefined){t=e}this.scrollX=e;this.scrollY=t;return this},setSize:function(e,t){if(t===undefined){t=e}this.width=e;this.height=t;return this},setViewport:function(e,t,i,r){this.x=e;this.y=t;this.width=i;this.height=r;return this},setZoom:function(e){if(e===undefined){e=1}if(e===0){e=.001}this.zoom=e;return this},setMask:function(e,t){if(t===undefined){t=true}this.mask=e;this._maskCamera=t?this.cameraManager.default:this;return this},clearMask:function(e){if(e===undefined){e=false}if(e&&this.mask){this.mask.destroy()}this.mask=null;return this},toJSON:function(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};if(this.useBounds){e["bounds"]={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}}return e},update:function(){},updateSystem:function(){if(!this.scaleManager){return}var e=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height;var t=this.sceneManager;if(e&&!this._customViewport){t.customViewports++}else if(!e&&this._customViewport){t.customViewports--}this.dirty=true;this._customViewport=e},destroy:function(){this.emit(events$5.DESTROY,this);this.removeAllListeners();this.matrix.destroy();this.culledObjects=[];if(this._customViewport){this.sceneManager.customViewports--}this._bounds=null;this.scene=null;this.scaleManager=null;this.sceneManager=null;this.cameraManager=null},x:{get:function(){return this._x},set:function(e){this._x=e;this._cx=e*this.resolution;this.updateSystem()}},y:{get:function(){return this._y},set:function(e){this._y=e;this._cy=e*this.resolution;this.updateSystem()}},width:{get:function(){return this._width},set:function(e){this._width=e;this._cw=e*this.resolution;this.updateSystem()}},height:{get:function(){return this._height},set:function(e){this._height=e;this._ch=e*this.resolution;this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX=e;this.dirty=true}},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY=e;this.dirty=true}},zoom:{get:function(){return this._zoom},set:function(e){this._zoom=e;this.dirty=true}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e;this.dirty=true}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});var BaseCamera_1=BaseCamera;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var prefix="";var Smoothing=function(){var e=function(e){var t=["i","webkitI","msI","mozI","oI"];for(var i=0;i<t.length;i++){var r=t[i]+"mageSmoothingEnabled";if(r in e){return r}}return null};var t=function(t){if(prefix===""){prefix=e(t)}if(prefix){t[prefix]=true}return t};var i=function(t){if(prefix===""){prefix=e(t)}if(prefix){t[prefix]=false}return t};var r=function(e){return prefix!==null?e[prefix]:null};return{disable:i,enable:t,getPrefix:e,isEnabled:r}};var Smoothing_1=Smoothing();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var pool=[];var _disableContextSmoothing=false;var CanvasPool=function(){var e=function(e,t,i,n,s){if(t===undefined){t=1}if(i===undefined){i=1}if(n===undefined){n=_const.CANVAS}if(s===undefined){s=false}var a;var o=r(n);if(o===null){o={parent:e,canvas:document.createElement("canvas"),type:n};if(n===_const.CANVAS){pool.push(o)}a=o.canvas}else{o.parent=e;a=o.canvas}if(s){o.parent=a}a.width=t;a.height=i;if(_disableContextSmoothing&&n===_const.CANVAS){Smoothing_1.disable(a.getContext("2d"))}return a};var t=function(t,i,r){return e(t,i,r,_const.CANVAS)};var i=function(t,i,r){return e(t,i,r,_const.WEBGL)};var r=function(e){if(e===undefined){e=_const.CANVAS}if(e===_const.WEBGL){return null}for(var t=0;t<pool.length;t++){var i=pool[t];if(!i.parent&&i.type===e){return i}}return null};var n=function(e){var t=e instanceof HTMLCanvasElement;pool.forEach((function(i){if(t&&i.canvas===e||!t&&i.parent===e){i.parent=null;i.canvas.width=1;i.canvas.height=1}}))};var s=function(){var e=0;pool.forEach((function(t){if(t.parent){e++}}));return e};var a=function(){return pool.length-s()};var o=function(){_disableContextSmoothing=true};var l=function(){_disableContextSmoothing=false};return{create2D:t,create:e,createWebGL:i,disableSmoothing:o,enableSmoothing:l,first:r,free:a,pool:pool,remove:n,total:s}};var CanvasPool_1=CanvasPool();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CenterOn$1=function(e,t,i){e.x=t-e.width/2;e.y=i-e.height/2;return e};var CenterOn_1$1=CenterOn$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Fade=new Class_1({initialize:function e(t){this.camera=t;this.isRunning=false;this.isComplete=false;this.direction=true;this.duration=0;this.red=0;this.green=0;this.blue=0;this.alpha=0;this.progress=0;this._elapsed=0},start:function(e,t,i,r,n,s,a,o){if(e===undefined){e=true}if(t===undefined){t=1e3}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=false}if(a===undefined){a=null}if(o===undefined){o=this.camera.scene}if(!s&&this.isRunning){return this.camera}this.isRunning=true;this.isComplete=false;this.duration=t;this.direction=e;this.progress=0;this.red=i;this.green=r;this.blue=n;this.alpha=e?Number.MIN_VALUE:1;this._elapsed=0;this._onUpdate=a;this._onUpdateScope=o;var l=e?events$5.FADE_OUT_START:events$5.FADE_IN_START;this.camera.emit(l,this.camera,this,t,i,r,n);return this.camera},update:function(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=Clamp_1(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){this.alpha=this.direction?this.progress:1-this.progress}else{this.alpha=this.direction?1:0;this.effectComplete()}},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete){return false}var t=this.camera;e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";e.fillRect(t._cx,t._cy,t._cw,t._ch);return true},postRenderWebGL:function(e,t){if(!this.isRunning&&!this.isComplete){return false}var i=this.camera;var r=this.red/255;var n=this.blue/255;var s=this.green/255;e.drawFillRect(i._cx,i._cy,i._cw,i._ch,t(r,s,n,1),this.alpha);return true},effectComplete:function(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=false;this.isComplete=true;var e=this.direction?events$5.FADE_OUT_COMPLETE:events$5.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=false;this.isComplete=false;this._onUpdate=null;this._onUpdateScope=null},destroy:function(){this.reset();this.camera=null}});var Fade_1=Fade;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Flash=new Class_1({initialize:function e(t){this.camera=t;this.isRunning=false;this.duration=0;this.red=0;this.green=0;this.blue=0;this.alpha=0;this.progress=0;this._elapsed=0},start:function(e,t,i,r,n,s,a){if(e===undefined){e=250}if(t===undefined){t=255}if(i===undefined){i=255}if(r===undefined){r=255}if(n===undefined){n=false}if(s===undefined){s=null}if(a===undefined){a=this.camera.scene}if(!n&&this.isRunning){return this.camera}this.isRunning=true;this.duration=e;this.progress=0;this.red=t;this.green=i;this.blue=r;this.alpha=1;this._elapsed=0;this._onUpdate=s;this._onUpdateScope=a;this.camera.emit(events$5.FLASH_START,this.camera,this,e,t,i,r);return this.camera},update:function(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=Clamp_1(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){this.alpha=1-this.progress}else{this.effectComplete()}},postRenderCanvas:function(e){if(!this.isRunning){return false}var t=this.camera;e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";e.fillRect(t._cx,t._cy,t._cw,t._ch);return true},postRenderWebGL:function(e,t){if(!this.isRunning){return false}var i=this.camera;var r=this.red/255;var n=this.blue/255;var s=this.green/255;e.drawFillRect(i._cx,i._cy,i._cw,i._ch,t(r,s,n,1),this.alpha);return true},effectComplete:function(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=false;this.camera.emit(events$5.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=false;this._onUpdate=null;this._onUpdateScope=null},destroy:function(){this.reset();this.camera=null}});var Flash_1=Flash;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In=function(e,t){if(t===undefined){t=1.70158}return e*e*((t+1)*e-t)};var In_1=In;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out=function(e,t){if(t===undefined){t=1.70158}return--e*e*((t+1)*e+t)+1};var Out_1=Out;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut=function(e,t){if(t===undefined){t=1.70158}var i=t*1.525;if((e*=2)<1){return.5*(e*e*((i+1)*e-i))}else{return.5*((e-=2)*e*((i+1)*e+i)+2)}};var InOut_1=InOut;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var back={In:In_1,Out:Out_1,InOut:InOut_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$1=function(e){e=1-e;if(e<1/2.75){return 1-7.5625*e*e}else if(e<2/2.75){return 1-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1-(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}};var In_1$1=In$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$1=function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}};var Out_1$1=Out$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$1=function(e){var t=false;if(e<.5){e=1-e*2;t=true}else{e=e*2-1}if(e<1/2.75){e=7.5625*e*e}else if(e<2/2.75){e=7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){e=7.5625*(e-=2.25/2.75)*e+.9375}else{e=7.5625*(e-=2.625/2.75)*e+.984375}if(t){return(1-e)*.5}else{return e*.5+.5}};var InOut_1$1=InOut$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var bounce={In:In_1$1,Out:Out_1$1,InOut:InOut_1$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$2=function(e){return 1-Math.sqrt(1-e*e)};var In_1$2=In$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$2=function(e){return Math.sqrt(1- --e*e)};var Out_1$2=Out$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$2=function(e){if((e*=2)<1){return-.5*(Math.sqrt(1-e*e)-1)}else{return.5*(Math.sqrt(1-(e-=2)*e)+1)}};var InOut_1$2=InOut$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var circular={In:In_1$2,Out:Out_1$2,InOut:InOut_1$2};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$3=function(e){return e*e*e};var In_1$3=In$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$3=function(e){return--e*e*e+1};var Out_1$3=Out$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$3=function(e){if((e*=2)<1){return.5*e*e*e}else{return.5*((e-=2)*e*e+2)}};var InOut_1$3=InOut$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var cubic={In:In_1$3,Out:Out_1$3,InOut:InOut_1$3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$4=function(e,t,i){if(t===undefined){t=.1}if(i===undefined){i=.1}if(e===0){return 0}else if(e===1){return 1}else{var r=i/4;if(t<1){t=1}else{r=i*Math.asin(1/t)/(2*Math.PI)}return-(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}};var In_1$4=In$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$4=function(e,t,i){if(t===undefined){t=.1}if(i===undefined){i=.1}if(e===0){return 0}else if(e===1){return 1}else{var r=i/4;if(t<1){t=1}else{r=i*Math.asin(1/t)/(2*Math.PI)}return t*Math.pow(2,-10*e)*Math.sin((e-r)*(2*Math.PI)/i)+1}};var Out_1$4=Out$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$4=function(e,t,i){if(t===undefined){t=.1}if(i===undefined){i=.1}if(e===0){return 0}else if(e===1){return 1}else{var r=i/4;if(t<1){t=1}else{r=i*Math.asin(1/t)/(2*Math.PI)}if((e*=2)<1){return-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i))}else{return t*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*(2*Math.PI)/i)*.5+1}}};var InOut_1$4=InOut$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var elastic={In:In_1$4,Out:Out_1$4,InOut:InOut_1$4};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$5=function(e){return Math.pow(2,10*(e-1))-.001};var In_1$5=In$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$5=function(e){return 1-Math.pow(2,-10*e)};var Out_1$5=Out$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$5=function(e){if((e*=2)<1){return.5*Math.pow(2,10*(e-1))}else{return.5*(2-Math.pow(2,-10*(e-1)))}};var InOut_1$5=InOut$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var expo={In:In_1$5,Out:Out_1$5,InOut:InOut_1$5};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Linear=function(e){return e};var Linear_1=Linear;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var linear=Linear_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$6=function(e){return e*e};var In_1$6=In$6;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$6=function(e){return e*(2-e)};var Out_1$6=Out$6;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$6=function(e){if((e*=2)<1){return.5*e*e}else{return-.5*(--e*(e-2)-1)}};var InOut_1$6=InOut$6;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var quadratic={In:In_1$6,Out:Out_1$6,InOut:InOut_1$6};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$7=function(e){return e*e*e*e};var In_1$7=In$7;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$7=function(e){return 1- --e*e*e*e};var Out_1$7=Out$7;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$7=function(e){if((e*=2)<1){return.5*e*e*e*e}else{return-.5*((e-=2)*e*e*e-2)}};var InOut_1$7=InOut$7;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var quartic={In:In_1$7,Out:Out_1$7,InOut:InOut_1$7};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$8=function(e){return e*e*e*e*e};var In_1$8=In$8;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$8=function(e){return--e*e*e*e*e+1};var Out_1$8=Out$8;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$8=function(e){if((e*=2)<1){return.5*e*e*e*e*e}else{return.5*((e-=2)*e*e*e*e+2)}};var InOut_1$8=InOut$8;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var quintic={In:In_1$8,Out:Out_1$8,InOut:InOut_1$8};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var In$9=function(e){if(e===0){return 0}else if(e===1){return 1}else{return 1-Math.cos(e*Math.PI/2)}};var In_1$9=In$9;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Out$9=function(e){if(e===0){return 0}else if(e===1){return 1}else{return Math.sin(e*Math.PI/2)}};var Out_1$9=Out$9;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InOut$9=function(e){if(e===0){return 0}else if(e===1){return 1}else{return.5*(1-Math.cos(Math.PI*e))}};var InOut_1$9=InOut$9;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var sine={In:In_1$9,Out:Out_1$9,InOut:InOut_1$9};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Stepped=function(e,t){if(t===undefined){t=1}if(e<=0){return 0}else if(e>=1){return 1}else{return((t*e|0)+1)*(1/t)}};var Stepped_1=Stepped;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var stepped=Stepped_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EaseMap={Power0:linear,Power1:quadratic.Out,Power2:cubic.Out,Power3:quartic.Out,Power4:quintic.Out,Linear:linear,Quad:quadratic.Out,Cubic:cubic.Out,Quart:quartic.Out,Quint:quintic.Out,Sine:sine.Out,Expo:expo.Out,Circ:circular.Out,Elastic:elastic.Out,Back:back.Out,Bounce:bounce.Out,Stepped:stepped,"Quad.easeIn":quadratic.In,"Cubic.easeIn":cubic.In,"Quart.easeIn":quartic.In,"Quint.easeIn":quintic.In,"Sine.easeIn":sine.In,"Expo.easeIn":expo.In,"Circ.easeIn":circular.In,"Elastic.easeIn":elastic.In,"Back.easeIn":back.In,"Bounce.easeIn":bounce.In,"Quad.easeOut":quadratic.Out,"Cubic.easeOut":cubic.Out,"Quart.easeOut":quartic.Out,"Quint.easeOut":quintic.Out,"Sine.easeOut":sine.Out,"Expo.easeOut":expo.Out,"Circ.easeOut":circular.Out,"Elastic.easeOut":elastic.Out,"Back.easeOut":back.Out,"Bounce.easeOut":bounce.Out,"Quad.easeInOut":quadratic.InOut,"Cubic.easeInOut":cubic.InOut,"Quart.easeInOut":quartic.InOut,"Quint.easeInOut":quintic.InOut,"Sine.easeInOut":sine.InOut,"Expo.easeInOut":expo.InOut,"Circ.easeInOut":circular.InOut,"Elastic.easeInOut":elastic.InOut,"Back.easeInOut":back.InOut,"Bounce.easeInOut":bounce.InOut};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Pan=new Class_1({initialize:function e(t){this.camera=t;this.isRunning=false;this.duration=0;this.source=new Vector2_1;this.current=new Vector2_1;this.destination=new Vector2_1;this.progress=0;this._elapsed=0},start:function(e,t,i,r,n,s,a){if(i===undefined){i=1e3}if(r===undefined){r=EaseMap.Linear}if(n===undefined){n=false}if(s===undefined){s=null}if(a===undefined){a=this.camera.scene}var o=this.camera;if(!n&&this.isRunning){return o}this.isRunning=true;this.duration=i;this.progress=0;this.source.set(o.scrollX,o.scrollY);this.destination.set(e,t);o.getScroll(e,t,this.current);if(typeof r==="string"&&EaseMap.hasOwnProperty(r)){this.ease=EaseMap[r]}else if(typeof r==="function"){this.ease=r}this._elapsed=0;this._onUpdate=s;this._onUpdateScope=a;this.camera.emit(events$5.PAN_START,this.camera,this,i,e,t);return o},update:function(e,t){if(!this.isRunning){return}this._elapsed+=t;var i=Clamp_1(this._elapsed/this.duration,0,1);this.progress=i;var r=this.camera;if(this._elapsed<this.duration){var n=this.ease(i);r.getScroll(this.destination.x,this.destination.y,this.current);var s=this.source.x+(this.current.x-this.source.x)*n;var a=this.source.y+(this.current.y-this.source.y)*n;r.setScroll(s,a);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,r,i,s,a)}}else{r.centerOn(this.destination.x,this.destination.y);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,r,i,r.scrollX,r.scrollY)}this.effectComplete()}},effectComplete:function(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=false;this.camera.emit(events$5.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=false;this._onUpdate=null;this._onUpdateScope=null},destroy:function(){this.reset();this.camera=null;this.source=null;this.destination=null}});var Pan_1=Pan;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shake=new Class_1({initialize:function e(t){this.camera=t;this.isRunning=false;this.duration=0;this.intensity=new Vector2_1;this.progress=0;this._elapsed=0;this._offsetX=0;this._offsetY=0},start:function(e,t,i,r,n){if(e===undefined){e=100}if(t===undefined){t=.05}if(i===undefined){i=false}if(r===undefined){r=null}if(n===undefined){n=this.camera.scene}if(!i&&this.isRunning){return this.camera}this.isRunning=true;this.duration=e;this.progress=0;if(typeof t==="number"){this.intensity.set(t)}else{this.intensity.set(t.x,t.y)}this._elapsed=0;this._offsetX=0;this._offsetY=0;this._onUpdate=r;this._onUpdateScope=n;this.camera.emit(events$5.SHAKE_START,this.camera,this,e,t);return this.camera},preRender:function(){if(this.isRunning){this.camera.matrix.translate(this._offsetX,this._offsetY)}},update:function(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=Clamp_1(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){var i=this.intensity;var r=this.camera._cw;var n=this.camera._ch;var s=this.camera.zoom;this._offsetX=(Math.random()*i.x*r*2-i.x*r)*s;this._offsetY=(Math.random()*i.y*n*2-i.y*n)*s;if(this.camera.roundPixels){this._offsetX=Math.round(this._offsetX);this._offsetY=Math.round(this._offsetY)}}else{this.effectComplete()}},effectComplete:function(){this._offsetX=0;this._offsetY=0;this._onUpdate=null;this._onUpdateScope=null;this.isRunning=false;this.camera.emit(events$5.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=false;this._offsetX=0;this._offsetY=0;this._onUpdate=null;this._onUpdateScope=null},destroy:function(){this.reset();this.camera=null;this.intensity=null}});var Shake_1=Shake;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Zoom=new Class_1({initialize:function e(t){this.camera=t;this.isRunning=false;this.duration=0;this.source=1;this.destination=1;this.progress=0;this._elapsed=0},start:function(e,t,i,r,n,s){if(t===undefined){t=1e3}if(i===undefined){i=EaseMap.Linear}if(r===undefined){r=false}if(n===undefined){n=null}if(s===undefined){s=this.camera.scene}var a=this.camera;if(!r&&this.isRunning){return a}this.isRunning=true;this.duration=t;this.progress=0;this.source=a.zoom;this.destination=e;if(typeof i==="string"&&EaseMap.hasOwnProperty(i)){this.ease=EaseMap[i]}else if(typeof i==="function"){this.ease=i}this._elapsed=0;this._onUpdate=n;this._onUpdateScope=s;this.camera.emit(events$5.ZOOM_START,this.camera,this,t,e);return a},update:function(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=Clamp_1(this._elapsed/this.duration,0,1);if(this._elapsed<this.duration){this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)}}else{this.camera.zoom=this.destination;if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination)}this.effectComplete()}},effectComplete:function(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=false;this.camera.emit(events$5.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=false;this._onUpdate=null;this._onUpdateScope=null},destroy:function(){this.reset();this.camera=null}});var Zoom_1=Zoom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var effects={Fade:Fade_1,Flash:Flash_1,Pan:Pan_1,Shake:Shake_1,Zoom:Zoom_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Linear$1=function(e,t,i){return(t-e)*i+e};var Linear_1$1=Linear$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Camera=new Class_1({Extends:BaseCamera_1,Mixins:[components.Flip,components.Tint],initialize:function e(t,i,r,n){BaseCamera_1.call(this,t,i,r,n);this.inputEnabled=true;this.fadeEffect=new effects.Fade(this);this.flashEffect=new effects.Flash(this);this.shakeEffect=new effects.Shake(this);this.panEffect=new effects.Pan(this);this.zoomEffect=new effects.Zoom(this);this.lerp=new Vector2_1(1,1);this.followOffset=new Vector2_1;this.deadzone=null;this._follow=null;this.renderToTexture=false;this.canvas=null;this.context=null;this.glTexture=null;this.framebuffer=null;this.pipeline=null},setRenderToTexture:function(e){var t=this.scene.sys.game.renderer;if(t.gl){this.glTexture=t.createTextureFromSource(null,this.width,this.height,0);this.framebuffer=t.createFramebuffer(this.width,this.height,this.glTexture,false)}else{this.canvas=CanvasPool_1.create2D(this,this.width,this.height);this.context=this.canvas.getContext("2d")}this.renderToTexture=true;if(e){this.setPipeline(e)}return this},setPipeline:function(e){if(typeof e==="string"){var t=this.scene.sys.game.renderer;if(t.gl&&t.hasPipeline(e)){this.pipeline=t.getPipeline(e)}}else{this.pipeline=e}return this},clearRenderToTexture:function(){if(!this.scene){return}var e=this.scene.sys.game.renderer;if(!e){return}if(e.gl){if(this.framebuffer){e.deleteFramebuffer(this.framebuffer)}if(this.glTexture){e.deleteTexture(this.glTexture)}this.framebuffer=null;this.glTexture=null;this.pipeline=null}else{CanvasPool_1.remove(this);this.canvas=null;this.context=null}this.renderToTexture=false;return this},setDeadzone:function(e,t){if(e===undefined){this.deadzone=null}else{if(this.deadzone){this.deadzone.width=e;this.deadzone.height=t}else{this.deadzone=new Rectangle_1(0,0,e,t)}if(this._follow){var i=this.width/2;var r=this.height/2;var n=this._follow.x-this.followOffset.x;var s=this._follow.y-this.followOffset.y;this.midPoint.set(n,s);this.scrollX=n-i;this.scrollY=s-r}CenterOn_1$1(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(e,t,i,r,n,s){return this.fadeEffect.start(false,e,t,i,r,true,n,s)},fadeOut:function(e,t,i,r,n,s){return this.fadeEffect.start(true,e,t,i,r,true,n,s)},fadeFrom:function(e,t,i,r,n,s,a){return this.fadeEffect.start(false,e,t,i,r,n,s,a)},fade:function(e,t,i,r,n,s,a){return this.fadeEffect.start(true,e,t,i,r,n,s,a)},flash:function(e,t,i,r,n,s,a){return this.flashEffect.start(e,t,i,r,n,s,a)},shake:function(e,t,i,r,n){return this.shakeEffect.start(e,t,i,r,n)},pan:function(e,t,i,r,n,s,a){return this.panEffect.start(e,t,i,r,n,s,a)},zoomTo:function(e,t,i,r,n,s){return this.zoomEffect.start(e,t,i,r,n,s)},preRender:function(e){var t=this.width;var i=this.height;var r=t*.5;var n=i*.5;var s=this.zoom*e;var a=this.matrix;var o=t*this.originX;var l=i*this.originY;var h=this._follow;var u=this.deadzone;var c=this.scrollX;var f=this.scrollY;if(u){CenterOn_1$1(u,this.midPoint.x,this.midPoint.y)}if(h&&!this.panEffect.isRunning){var d=h.x-this.followOffset.x;var v=h.y-this.followOffset.y;if(u){if(d<u.x){c=Linear_1$1(c,c-(u.x-d),this.lerp.x)}else if(d>u.right){c=Linear_1$1(c,c+(d-u.right),this.lerp.x)}if(v<u.y){f=Linear_1$1(f,f-(u.y-v),this.lerp.y)}else if(v>u.bottom){f=Linear_1$1(f,f+(v-u.bottom),this.lerp.y)}}else{c=Linear_1$1(c,d-o,this.lerp.x);f=Linear_1$1(f,v-l,this.lerp.y)}}if(this.useBounds){c=this.clampX(c);f=this.clampY(f)}if(this.roundPixels){o=Math.round(o);l=Math.round(l)}this.scrollX=c;this.scrollY=f;var p=c+r;var g=f+n;this.midPoint.set(p,g);var m=t/s;var _=i/s;this.worldView.setTo(p-m/2,g-_/2,m,_);a.applyITRS(this.x+o,this.y+l,this.rotation,s,s);a.translate(-o,-l);this.shakeEffect.preRender()},setLerp:function(e,t){if(e===undefined){e=1}if(t===undefined){t=e}this.lerp.set(e,t);return this},setFollowOffset:function(e,t){if(e===undefined){e=0}if(t===undefined){t=0}this.followOffset.set(e,t);return this},startFollow:function(e,t,i,r,n,s){if(t===undefined){t=false}if(i===undefined){i=1}if(r===undefined){r=i}if(n===undefined){n=0}if(s===undefined){s=n}this._follow=e;this.roundPixels=t;i=Clamp_1(i,0,1);r=Clamp_1(r,0,1);this.lerp.set(i,r);this.followOffset.set(n,s);var a=this.width/2;var o=this.height/2;var l=e.x-n;var h=e.y-s;this.midPoint.set(l,h);this.scrollX=l-a;this.scrollY=h-o;if(this.useBounds){this.scrollX=this.clampX(this.scrollX);this.scrollY=this.clampY(this.scrollY)}return this},stopFollow:function(){this._follow=null;return this},resetFX:function(){this.panEffect.reset();this.shakeEffect.reset();this.flashEffect.reset();this.fadeEffect.reset();return this},update:function(e,t){if(this.visible){this.panEffect.update(e,t);this.zoomEffect.update(e,t);this.shakeEffect.update(e,t);this.flashEffect.update(e,t);this.fadeEffect.update(e,t)}},destroy:function(){this.clearRenderToTexture();this.resetFX();BaseCamera_1.prototype.destroy.call(this);this._follow=null;this.deadzone=null}});var Camera_1=Camera;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var corePlugins={};var customPlugins={};var PluginCache={};PluginCache.register=function(e,t,i,r){if(r===undefined){r=false}corePlugins[e]={plugin:t,mapping:i,custom:r}};PluginCache.registerCustom=function(e,t,i,r){customPlugins[e]={plugin:t,mapping:i,data:r}};PluginCache.hasCore=function(e){return corePlugins.hasOwnProperty(e)};PluginCache.hasCustom=function(e){return customPlugins.hasOwnProperty(e)};PluginCache.getCore=function(e){return corePlugins[e]};PluginCache.getCustom=function(e){return customPlugins[e]};PluginCache.getCustomClass=function(e){return customPlugins.hasOwnProperty(e)?customPlugins[e].plugin:null};PluginCache.remove=function(e){if(corePlugins.hasOwnProperty(e)){delete corePlugins[e]}};PluginCache.removeCustom=function(e){if(customPlugins.hasOwnProperty(e)){delete customPlugins[e]}};PluginCache.destroyCorePlugins=function(){for(var e in corePlugins){if(corePlugins.hasOwnProperty(e)){delete corePlugins[e]}}};PluginCache.destroyCustomPlugins=function(){for(var e in customPlugins){if(customPlugins.hasOwnProperty(e)){delete customPlugins[e]}}};var PluginCache_1=PluginCache;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ENTER_FULLSCREEN_EVENT="enterfullscreen";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FULLSCREEN_FAILED_EVENT="fullscreenfailed";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FULLSCREEN_UNSUPPORTED_EVENT="fullscreenunsupported";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LEAVE_FULLSCREEN_EVENT="leavefullscreen";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ORIENTATION_CHANGE_EVENT="orientationchange";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESIZE_EVENT="resize";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$6={ENTER_FULLSCREEN:ENTER_FULLSCREEN_EVENT,FULLSCREEN_FAILED:FULLSCREEN_FAILED_EVENT,FULLSCREEN_UNSUPPORTED:FULLSCREEN_UNSUPPORTED_EVENT,LEAVE_FULLSCREEN:LEAVE_FULLSCREEN_EVENT,ORIENTATION_CHANGE:ORIENTATION_CHANGE_EVENT,RESIZE:RESIZE_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BOOT_EVENT$1="boot";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CREATE_EVENT="create";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT$3="destroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT$1="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POST_UPDATE_EVENT="postupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PRE_UPDATE_EVENT="preupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var READY_EVENT$1="ready";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RENDER_EVENT="render";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT$1="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SHUTDOWN_EVENT="shutdown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SLEEP_EVENT="sleep";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var START_EVENT="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TRANSITION_COMPLETE_EVENT="transitioncomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TRANSITION_INIT_EVENT="transitioninit";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TRANSITION_OUT_EVENT="transitionout";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TRANSITION_START_EVENT="transitionstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TRANSITION_WAKE_EVENT="transitionwake";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UPDATE_EVENT="update";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WAKE_EVENT="wake";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$7={BOOT:BOOT_EVENT$1,CREATE:CREATE_EVENT,DESTROY:DESTROY_EVENT$3,PAUSE:PAUSE_EVENT$1,POST_UPDATE:POST_UPDATE_EVENT,PRE_UPDATE:PRE_UPDATE_EVENT,READY:READY_EVENT$1,RENDER:RENDER_EVENT,RESUME:RESUME_EVENT$1,SHUTDOWN:SHUTDOWN_EVENT,SLEEP:SLEEP_EVENT,START:START_EVENT,TRANSITION_COMPLETE:TRANSITION_COMPLETE_EVENT,TRANSITION_INIT:TRANSITION_INIT_EVENT,TRANSITION_OUT:TRANSITION_OUT_EVENT,TRANSITION_START:TRANSITION_START_EVENT,TRANSITION_WAKE:TRANSITION_WAKE_EVENT,UPDATE:UPDATE_EVENT,WAKE:WAKE_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CameraManager=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.roundPixels=t.sys.game.config.roundPixels;this.cameras=[];t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){var e=this.systems;if(e.settings.cameras){this.fromJSON(e.settings.cameras)}else{this.add()}this.main=this.cameras[0];this.default=new Camera_1(0,0,e.scale.width,e.scale.height).setScene(this.scene);e.game.scale.on(events$6.RESIZE,this.onResize,this);this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;if(e.settings.cameras){this.fromJSON(e.settings.cameras)}else{this.add()}this.main=this.cameras[0]}var t=this.systems.events;t.on(events$7.UPDATE,this.update,this);t.once(events$7.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,r,n,s){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.scene.sys.scale.width}if(r===undefined){r=this.scene.sys.scale.height}if(n===undefined){n=false}if(s===undefined){s=""}var a=new Camera_1(e,t,i,r);a.setName(s);a.setScene(this.scene);a.setRoundPixels(this.roundPixels);a.id=this.getNextID();this.cameras.push(a);if(n){this.main=a}return a},addExisting:function(e,t){if(t===undefined){t=false}var i=this.cameras.indexOf(e);if(i===-1){e.id=this.getNextID();e.setRoundPixels(this.roundPixels);this.cameras.push(e);if(t){this.main=e}return e}return null},getNextID:function(){var e=this.cameras;var t=1;for(var i=0;i<32;i++){var r=false;for(var n=0;n<e.length;n++){var s=e[n];if(s&&s.id===t){r=true;continue}}if(r){t=t<<1}else{return t}}return 0},getTotal:function(e){if(e===undefined){e=false}var t=0;var i=this.cameras;for(var r=0;r<i.length;r++){var n=i[r];if(!e||e&&n.visible){t++}}return t},fromJSON:function(e){if(!Array.isArray(e)){e=[e]}var t=this.scene.sys.scale.width;var i=this.scene.sys.scale.height;for(var r=0;r<e.length;r++){var n=e[r];var s=GetFastValue_1(n,"x",0);var a=GetFastValue_1(n,"y",0);var o=GetFastValue_1(n,"width",t);var l=GetFastValue_1(n,"height",i);var h=this.add(s,a,o,l);h.name=GetFastValue_1(n,"name","");h.zoom=GetFastValue_1(n,"zoom",1);h.rotation=GetFastValue_1(n,"rotation",0);h.scrollX=GetFastValue_1(n,"scrollX",0);h.scrollY=GetFastValue_1(n,"scrollY",0);h.roundPixels=GetFastValue_1(n,"roundPixels",false);h.visible=GetFastValue_1(n,"visible",true);var u=GetFastValue_1(n,"backgroundColor",false);if(u){h.setBackgroundColor(u)}var c=GetFastValue_1(n,"bounds",null);if(c){var f=GetFastValue_1(c,"x",0);var d=GetFastValue_1(c,"y",0);var v=GetFastValue_1(c,"width",t);var p=GetFastValue_1(c,"height",i);h.setBounds(f,d,v,p)}}return this},getCamera:function(e){var t=this.cameras;for(var i=0;i<t.length;i++){if(t[i].name===e){return t[i]}}return null},getCamerasBelowPointer:function(e){var t=this.cameras;var i=e.x;var r=e.y;var n=[];for(var s=0;s<t.length;s++){var a=t[s];if(a.visible&&a.inputEnabled&&Contains_1$1(a,i,r)){n.unshift(a)}}return n},remove:function(e,t){if(t===undefined){t=true}if(!Array.isArray(e)){e=[e]}var i=0;var r=this.cameras;for(var n=0;n<e.length;n++){var s=r.indexOf(e[n]);if(s!==-1){if(t){r[s].destroy()}r.splice(s,1);i++}}if(!this.main&&r[0]){this.main=r[0]}return i},render:function(e,t,i){var r=this.scene;var n=this.cameras;for(var s=0;s<this.cameras.length;s++){var a=n[s];if(a.visible&&a.alpha>0){a.preRender(1);e.render(r,t,i,a)}}},resetAll:function(){for(var e=0;e<this.cameras.length;e++){this.cameras[e].destroy()}this.cameras=[];this.main=this.add();return this.main},update:function(e,t){for(var i=0;i<this.cameras.length;i++){this.cameras[i].update(e,t)}},onResize:function(e,t,i,r,n,s){for(var a=0;a<this.cameras.length;a++){var o=this.cameras[a];if(o._x===0&&o._y===0&&o._width===n&&o._height===s){o.setSize(t.width,t.height)}}},resize:function(e,t){for(var i=0;i<this.cameras.length;i++){this.cameras[i].setSize(e,t)}},shutdown:function(){this.main=undefined;for(var e=0;e<this.cameras.length;e++){this.cameras[e].destroy()}this.cameras=[];var t=this.systems.events;t.off(events$7.UPDATE,this.update,this);t.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.default.destroy();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("CameraManager",CameraManager,"cameras");var CameraManager_1=CameraManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _2d={Camera:Camera_1,CameraManager:CameraManager_1,Effects:effects,Events:events$5};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var cameras={Controls:controls,Scene2D:_2d};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var OS={android:false,chromeOS:false,cordova:false,crosswalk:false,desktop:false,ejecta:false,electron:false,iOS:false,iOSVersion:0,iPad:false,iPhone:false,kindle:false,linux:false,macOS:false,node:false,nodeWebkit:false,pixelRatio:1,webApp:false,windows:false,windowsPhone:false};function init(){var e=navigator.userAgent;if(/Windows/.test(e)){OS.windows=true}else if(/Mac OS/.test(e)&&!/like Mac OS/.test(e)){OS.macOS=true}else if(/Android/.test(e)){OS.android=true}else if(/Linux/.test(e)){OS.linux=true}else if(/iP[ao]d|iPhone/i.test(e)){OS.iOS=true;navigator.appVersion.match(/OS (\d+)/);OS.iOSVersion=parseInt(RegExp.$1,10);OS.iPhone=e.toLowerCase().indexOf("iphone")!==-1;OS.iPad=e.toLowerCase().indexOf("ipad")!==-1}else if(/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)){OS.kindle=true}else if(/CrOS/.test(e)){OS.chromeOS=true}if(/Windows Phone/i.test(e)||/IEMobile/i.test(e)){OS.android=false;OS.iOS=false;OS.macOS=false;OS.windows=true;OS.windowsPhone=true}var t=/Silk/.test(e);if(OS.windows||OS.macOS||OS.linux&&!t||OS.chromeOS){OS.desktop=true}if(OS.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e)){OS.desktop=false}if(navigator.standalone){OS.webApp=true}if(window.cordova!==undefined){OS.cordova=true}if(typeof process!=="undefined"&&process.versions&&process.versions.node){OS.node=true}if(OS.node&&typeof process.versions==="object"){OS.nodeWebkit=!!process.versions["node-webkit"];OS.electron=!!process.versions.electron}if(window.ejecta!==undefined){OS.ejecta=true}if(/Crosswalk/.test(e)){OS.crosswalk=true}OS.pixelRatio=window["devicePixelRatio"]||1;return OS}var OS_1=init();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Browser={chrome:false,chromeVersion:0,edge:false,firefox:false,firefoxVersion:0,ie:false,ieVersion:0,mobileSafari:false,opera:false,safari:false,safariVersion:0,silk:false,trident:false,tridentVersion:0};function init$1(){var e=navigator.userAgent;if(/Edge\/\d+/.test(e)){Browser.edge=true}else if(/Chrome\/(\d+)/.test(e)&&!OS_1.windowsPhone){Browser.chrome=true;Browser.chromeVersion=parseInt(RegExp.$1,10)}else if(/Firefox\D+(\d+)/.test(e)){Browser.firefox=true;Browser.firefoxVersion=parseInt(RegExp.$1,10)}else if(/AppleWebKit/.test(e)&&OS_1.iOS){Browser.mobileSafari=true}else if(/MSIE (\d+\.\d+);/.test(e)){Browser.ie=true;Browser.ieVersion=parseInt(RegExp.$1,10)}else if(/Opera/.test(e)){Browser.opera=true}else if(/Safari/.test(e)&&!OS_1.windowsPhone){Browser.safari=true}else if(/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)){Browser.ie=true;Browser.trident=true;Browser.tridentVersion=parseInt(RegExp.$1,10);Browser.ieVersion=parseInt(RegExp.$3,10)}if(/Silk/.test(e)){Browser.silk=true}return Browser}var Browser_1=init$1();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Features={canvas:false,canvasBitBltShift:null,file:false,fileSystem:false,getUserMedia:true,littleEndian:false,localStorage:false,pointerLock:false,support32bit:false,vibration:false,webGL:false,worker:false};function checkIsLittleEndian(){var e=new ArrayBuffer(4);var t=new Uint8Array(e);var i=new Uint32Array(e);t[0]=161;t[1]=178;t[2]=195;t[3]=212;if(i[0]===3569595041){return true}if(i[0]===2712847316){return false}else{return null}}function init$2(){Features.canvas=!!window["CanvasRenderingContext2D"];try{Features.localStorage=!!localStorage.getItem}catch(i){Features.localStorage=false}Features.file=!!window["File"]&&!!window["FileReader"]&&!!window["FileList"]&&!!window["Blob"];Features.fileSystem=!!window["requestFileSystem"];var e=false;var t=function(){if(window["WebGLRenderingContext"]){try{var t=CanvasPool_1.createWebGL(this);var i=t.getContext("webgl")||t.getContext("experimental-webgl");var r=CanvasPool_1.create2D(this);var n=r.getContext("2d");var s=n.createImageData(1,1);e=s.data instanceof Uint8ClampedArray;CanvasPool_1.remove(t);CanvasPool_1.remove(r);return!!i}catch(a){return false}}return false};Features.webGL=t();Features.worker=!!window["Worker"];Features.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;Features.getUserMedia=Features.getUserMedia&&!!navigator.getUserMedia&&!!window.URL;if(Browser_1.firefox&&Browser_1.firefoxVersion<21){Features.getUserMedia=false}if(!OS_1.iOS&&(Browser_1.ie||Browser_1.firefox||Browser_1.chrome)){Features.canvasBitBltShift=true}if(Browser_1.safari||Browser_1.mobileSafari){Features.canvasBitBltShift=false}navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(navigator.vibrate){Features.vibration=true}if(typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"&&typeof Uint32Array!=="undefined"){Features.littleEndian=checkIsLittleEndian()}Features.support32bit=typeof ArrayBuffer!=="undefined"&&typeof Uint8ClampedArray!=="undefined"&&typeof Int32Array!=="undefined"&&Features.littleEndian!==null&&e;return Features}var Features_1=init$2();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Input={gamepads:false,mspointer:false,touch:false,wheelEvent:null};function init$3(){if("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1){Input.touch=true}if(navigator.msPointerEnabled||navigator.pointerEnabled){Input.mspointer=true}if(navigator.getGamepads){Input.gamepads=true}if("onwheel"in window||Browser_1.ie&&"WheelEvent"in window){Input.wheelEvent="wheel"}else if("onmousewheel"in window){Input.wheelEvent="mousewheel"}else if(Browser_1.firefox&&"MouseScrollEvent"in window){Input.wheelEvent="DOMMouseScroll"}return Input}var Input_1=init$3();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Audio$1={audioData:false,dolby:false,m4a:false,mp3:false,ogg:false,opus:false,wav:false,webAudio:false,webm:false};function init$4(){Audio$1.audioData=!!window["Audio"];Audio$1.webAudio=!!(window["AudioContext"]||window["webkitAudioContext"]);var e=document.createElement("audio");var t=!!e.canPlayType;try{if(t){if(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")){Audio$1.ogg=true}if(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,"")){Audio$1.opus=true}if(e.canPlayType("audio/mpeg;").replace(/^no$/,"")){Audio$1.mp3=true}if(e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")){Audio$1.wav=true}if(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,"")){Audio$1.m4a=true}if(e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")){Audio$1.webm=true}if(e.canPlayType('audio/mp4;codecs="ec-3"')!==""){if(Browser_1.edge){Audio$1.dolby=true}else if(Browser_1.safari&&Browser_1.safariVersion>=9){if(/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10);var r=parseInt(RegExp.$2,10);if(i===10&&r>=11||i>10){Audio$1.dolby=true}}}}}}catch(n){}return Audio$1}var Audio_1=init$4();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Video={h264Video:false,hlsVideo:false,mp4Video:false,oggVideo:false,vp9Video:false,webmVideo:false};function init$5(){var e=document.createElement("video");var t=!!e.canPlayType;try{if(t){if(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")){Video.oggVideo=true}if(e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")){Video.h264Video=true;Video.mp4Video=true}if(e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")){Video.webmVideo=true}if(e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")){Video.vp9Video=true}if(e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")){Video.hlsVideo=true}}}catch(i){}return Video}var Video_1=init$5();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Fullscreen={available:false,cancel:"",keyboard:false,request:""};function init$6(){var e;var t="Fullscreen";var i="FullScreen";var r=["request"+t,"request"+i,"webkitRequest"+t,"webkitRequest"+i,"msRequest"+t,"msRequest"+i,"mozRequest"+i,"mozRequest"+t];for(e=0;e<r.length;e++){if(document.documentElement[r[e]]){Fullscreen.available=true;Fullscreen.request=r[e];break}}var n=["cancel"+i,"exit"+t,"webkitCancel"+i,"webkitExit"+t,"msCancel"+i,"msExit"+t,"mozCancel"+i,"mozExit"+t];if(Fullscreen.available){for(e=0;e<n.length;e++){if(document[n[e]]){Fullscreen.cancel=n[e];break}}}if(window["Element"]&&Element["ALLOW_KEYBOARD_INPUT"]&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)){Fullscreen.keyboard=true}Object.defineProperty(Fullscreen,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}});return Fullscreen}var Fullscreen_1=init$6();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CanvasFeatures={supportInverseAlpha:false,supportNewBlendModes:false};function checkBlendMode(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var i=new Image;i.onload=function(){var r=new Image;r.onload=function(){var e=CanvasPool_1.create(r,6,1);var t=e.getContext("2d");t.globalCompositeOperation="multiply";t.drawImage(i,0,0);t.drawImage(r,2,0);if(!t.getImageData(2,0,1,1)){return false}var n=t.getImageData(2,0,1,1).data;CanvasPool_1.remove(r);CanvasFeatures.supportNewBlendModes=n[0]===255&&n[1]===0&&n[2]===0};r.src=e+"/wCKxvRF"+t};i.src=e+"AP804Oa6"+t;return false}function checkInverseAlpha(){var e=CanvasPool_1.create(this,2,1);var t=e.getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)";t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(i===null){return false}t.putImageData(i,1,0);var r=t.getImageData(1,0,1,1);return r.data[0]===i.data[0]&&r.data[1]===i.data[1]&&r.data[2]===i.data[2]&&r.data[3]===i.data[3]}function init$7(){if(document!==undefined){CanvasFeatures.supportNewBlendModes=checkBlendMode();CanvasFeatures.supportInverseAlpha=checkInverseAlpha()}return CanvasFeatures}var CanvasFeatures_1=init$7();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var device={os:OS_1,browser:Browser_1,features:Features_1,input:Input_1,audio:Audio_1,video:Video_1,fullscreen:Fullscreen_1,canvasFeatures:CanvasFeatures_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Between=function(e,t,i,r){return Math.atan2(r-t,i-e)};var Between_1=Between;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BetweenPoints=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};var BetweenPoints_1=BetweenPoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BetweenPointsY=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)};var BetweenPointsY_1=BetweenPointsY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BetweenY=function(e,t,i,r){return Math.atan2(i-e,r-t)};var BetweenY_1=BetweenY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CounterClockwise=function(e){if(e>Math.PI){e-=_const$3.PI2}return Math.abs(((e+_const$3.TAU)%_const$3.PI2-_const$3.PI2)%_const$3.PI2)};var CounterClockwise_1=CounterClockwise;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Normalize=function(e){e=e%(2*Math.PI);if(e>=0){return e}else{return e+2*Math.PI}};var Normalize_1=Normalize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Reverse=function(e){return Normalize_1(e+Math.PI)};var Reverse_1=Reverse;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateTo=function(e,t,i){if(i===undefined){i=.05}if(e===t){return e}if(Math.abs(t-e)<=i||Math.abs(t-e)>=_const$3.PI2-i){e=t}else{if(Math.abs(t-e)>Math.PI){if(t<e){t+=_const$3.PI2}else{t-=_const$3.PI2}}if(t>e){e+=i}else if(t<e){e-=i}}return e};var RotateTo_1=RotateTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ShortestBetween=function(e,t){var i=t-e;if(i===0){return 0}var r=Math.floor((i- -180)/360);return i-r*360};var ShortestBetween_1=ShortestBetween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var angle={Between:Between_1,BetweenPoints:BetweenPoints_1,BetweenPointsY:BetweenPointsY_1,BetweenY:BetweenY_1,CounterClockwise:CounterClockwise_1,Normalize:Normalize_1,Reverse:Reverse_1,RotateTo:RotateTo_1,ShortestBetween:ShortestBetween_1,Wrap:Wrap_1$1,WrapDegrees:WrapDegrees_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DistancePower=function(e,t,i,r,n){if(n===undefined){n=2}return Math.sqrt(Math.pow(i-e,n)+Math.pow(r-t,n))};var DistancePower_1=DistancePower;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DistanceSquared=function(e,t,i,r){var n=e-i;var s=t-r;return n*n+s*s};var DistanceSquared_1=DistanceSquared;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var distance={Between:DistanceBetween_1,Power:DistancePower_1,Squared:DistanceSquared_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var easing={Back:back,Bounce:bounce,Circular:circular,Cubic:cubic,Elastic:elastic,Expo:expo,Linear:linear,Quadratic:quadratic,Quartic:quartic,Quintic:quintic,Sine:sine,Stepped:stepped};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Ceil=function(e,t){if(t===undefined){t=1e-4}return Math.ceil(e-t)};var Ceil_1=Ceil;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equal=function(e,t,i){if(i===undefined){i=1e-4}return Math.abs(e-t)<i};var Equal_1=Equal;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Floor=function(e,t){if(t===undefined){t=1e-4}return Math.floor(e+t)};var Floor_1=Floor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GreaterThan=function(e,t,i){if(i===undefined){i=1e-4}return e>t-i};var GreaterThan_1=GreaterThan;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LessThan=function(e,t,i){if(i===undefined){i=1e-4}return e<t+i};var LessThan_1=LessThan;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var fuzzy={Ceil:Ceil_1,Equal:Equal_1,Floor:Floor_1,GreaterThan:GreaterThan_1,LessThan:LessThan_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Factorial=function(e){if(e===0){return 1}var t=e;while(--e){t*=e}return t};var Factorial_1=Factorial;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Bernstein=function(e,t){return Factorial_1(e)/Factorial_1(t)/Factorial_1(e-t)};var Bernstein_1=Bernstein;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BezierInterpolation=function(e,t){var i=0;var r=e.length-1;for(var n=0;n<=r;n++){i+=Math.pow(1-t,r-n)*Math.pow(t,n)*e[n]*Bernstein_1(r,n)}return i};var BezierInterpolation_1=BezierInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CatmullRom=function(e,t,i,r,n){var s=(r-t)*.5;var a=(n-i)*.5;var o=e*e;var l=e*o;return(2*i-2*r+s+a)*l+(-3*i+3*r-2*s-a)*o+s*e+i};var CatmullRom_1=CatmullRom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CatmullRomInterpolation=function(e,t){var i=e.length-1;var r=i*t;var n=Math.floor(r);if(e[0]===e[i]){if(t<0){n=Math.floor(r=i*(1+t))}return CatmullRom_1(r-n,e[(n-1+i)%i],e[n],e[(n+1)%i],e[(n+2)%i])}else{if(t<0){return e[0]-(CatmullRom_1(-r,e[0],e[0],e[1],e[1])-e[0])}if(t>1){return e[i]-(CatmullRom_1(r-i,e[i],e[i],e[i-1],e[i-1])-e[i])}return CatmullRom_1(r-n,e[n?n-1:0],e[n],e[i<n+1?i:n+1],e[i<n+2?i:n+2])}};var CatmullRomInterpolation_1=CatmullRomInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function P0(e,t){var i=1-e;return i*i*i*t}function P1(e,t){var i=1-e;return 3*i*i*e*t}function P2(e,t){return 3*(1-e)*e*e*t}function P3(e,t){return e*e*e*t}var CubicBezierInterpolation=function(e,t,i,r,n){return P0(e,t)+P1(e,i)+P2(e,r)+P3(e,n)};var CubicBezierInterpolation_1=CubicBezierInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LinearInterpolation=function(e,t){var i=e.length-1;var r=i*t;var n=Math.floor(r);if(t<0){return Linear_1$1(e[0],e[1],r)}else if(t>1){return Linear_1$1(e[i],e[i-1],i-r)}else{return Linear_1$1(e[n],e[n+1>i?i:n+1],r-n)}};var LinearInterpolation_1=LinearInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function P0$1(e,t){var i=1-e;return i*i*t}function P1$1(e,t){return 2*(1-e)*e*t}function P2$1(e,t){return e*e*t}var QuadraticBezierInterpolation=function(e,t,i,r){return P0$1(e,t)+P1$1(e,i)+P2$1(e,r)};var QuadraticBezierInterpolation_1=QuadraticBezierInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmoothStepInterpolation=function(e,t,i){return t+(i-t)*SmoothStep_1(e,0,1)};var SmoothStepInterpolation_1=SmoothStepInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SmootherStepInterpolation=function(e,t,i){return t+(i-t)*SmootherStep_1(e,0,1)};var SmootherStepInterpolation_1=SmootherStepInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var interpolation={Bezier:BezierInterpolation_1,CatmullRom:CatmullRomInterpolation_1,CubicBezier:CubicBezierInterpolation_1,Linear:LinearInterpolation_1,QuadraticBezier:QuadraticBezierInterpolation_1,SmoothStep:SmoothStepInterpolation_1,SmootherStep:SmootherStepInterpolation_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPowerOfTwo=function(e){var t=Math.log(e)/.6931471805599453;return 1<<Math.ceil(t)};var GetPowerOfTwo_1=GetPowerOfTwo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsSizePowerOfTwo=function(e,t){return e>0&&(e&e-1)===0&&t>0&&(t&t-1)===0};var IsSizePowerOfTwo_1=IsSizePowerOfTwo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsValuePowerOfTwo=function(e){return e>0&&(e&e-1)===0};var IsValuePowerOfTwo_1=IsValuePowerOfTwo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var pow2={GetNext:GetPowerOfTwo_1,IsSize:IsSizePowerOfTwo_1,IsValue:IsValuePowerOfTwo_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SnapCeil=function(e,t,i,r){if(i===undefined){i=0}if(t===0){return e}e-=i;e=t*Math.ceil(e/t);return r?(i+e)/t:i+e};var SnapCeil_1=SnapCeil;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SnapFloor=function(e,t,i,r){if(i===undefined){i=0}if(t===0){return e}e-=i;e=t*Math.floor(e/t);return r?(i+e)/t:i+e};var SnapFloor_1=SnapFloor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SnapTo=function(e,t,i,r){if(i===undefined){i=0}if(t===0){return e}e-=i;e=t*Math.round(e/t);return r?(i+e)/t:i+e};var SnapTo_1=SnapTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var snap={Ceil:SnapCeil_1,Floor:SnapFloor_1,To:SnapTo_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomDataGenerator=new Class_1({initialize:function e(t){if(t===undefined){t=[(Date.now()*Math.random()).toString()]}this.c=1;this.s0=0;this.s1=0;this.s2=0;this.n=0;this.signs=[-1,1];if(t){this.init(t)}},rnd:function(){var e=2091639*this.s0+this.c*2.3283064365386963e-10;this.c=e|0;this.s0=this.s1;this.s1=this.s2;this.s2=e-this.c;return this.s2},hash:function(e){var t;var i=this.n;e=e.toString();for(var r=0;r<e.length;r++){i+=e.charCodeAt(r);t=.02519603282416938*i;i=t>>>0;t-=i;t*=i;i=t>>>0;t-=i;i+=t*4294967296}this.n=i;return(i>>>0)*2.3283064365386963e-10},init:function(e){if(typeof e==="string"){this.state(e)}else{this.sow(e)}},sow:function(e){this.n=4022871197;this.s0=this.hash(" ");this.s1=this.hash(" ");this.s2=this.hash(" ");this.c=1;if(!e){return}for(var t=0;t<e.length&&e[t]!=null;t++){var i=e[t];this.s0-=this.hash(i);this.s0+=~~(this.s0<0);this.s1-=this.hash(i);this.s1+=~~(this.s1<0);this.s2-=this.hash(i);this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="";var t="";for(t=e="";e++<36;t+=~e%5|e*3&4?(e^15?8^this.frac()*(e^20?16:4):4).toString(16):"-"){}return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){if(typeof e==="string"&&e.match(/^!rnd/)){e=e.split(",");this.c=parseFloat(e[1]);this.s0=parseFloat(e[2]);this.s1=parseFloat(e[3]);this.s2=parseFloat(e[4])}return["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){var t=e.length-1;for(var i=t;i>0;i--){var r=Math.floor(this.frac()*(i+1));var n=e[r];e[r]=e[i];e[i]=n}return e}});var RandomDataGenerator_1=RandomDataGenerator;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Average=function(e){var t=0;for(var i=0;i<e.length;i++){t+=+e[i]}return t/e.length};var Average_1=Average;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Between$1=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var Between_1$1=Between$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CeilTo=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=10}var r=Math.pow(i,-t);return Math.ceil(e*r)/r};var CeilTo_1=CeilTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Difference=function(e,t){return Math.abs(e-t)};var Difference_1=Difference;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FloatBetween=function(e,t){return Math.random()*(t-e)+e};var FloatBetween_1=FloatBetween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FloorTo=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=10}var r=Math.pow(i,-t);return Math.floor(e*r)/r};var FloorTo_1=FloorTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetSpeed=function(e,t){return e/t/1e3};var GetSpeed_1=GetSpeed;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsEven=function(e){return e==parseFloat(e)?!(e%2):void 0};var IsEven_1=IsEven;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsEvenStrict=function(e){return e===parseFloat(e)?!(e%2):void 0};var IsEvenStrict_1=IsEvenStrict;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MaxAdd=function(e,t,i){return Math.min(e+t,i)};var MaxAdd_1=MaxAdd;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MinSub=function(e,t,i){return Math.max(e-t,i)};var MinSub_1=MinSub;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Percent=function(e,t,i,r){if(i===undefined){i=t+1}var n=(e-t)/(i-t);if(n>1){if(r!==undefined){n=(r-e)/(r-i);if(n<0){n=0}}else{n=1}}else if(n<0){n=0}return n};var Percent_1=Percent;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RadToDeg=function(e){return e*_const$3.RAD_TO_DEG};var RadToDeg_1=RadToDeg;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomXY=function(e,t){if(t===undefined){t=1}var i=Math.random()*2*Math.PI;e.x=Math.cos(i)*t;e.y=Math.sin(i)*t;return e};var RandomXY_1=RandomXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomXYZ=function(e,t){if(t===undefined){t=1}var i=Math.random()*2*Math.PI;var r=Math.random()*2-1;var n=Math.sqrt(1-r*r)*t;e.x=Math.cos(i)*n;e.y=Math.sin(i)*n;e.z=r*t;return e};var RandomXYZ_1=RandomXYZ;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomXYZW=function(e,t){if(t===undefined){t=1}e.x=(Math.random()*2-1)*t;e.y=(Math.random()*2-1)*t;e.z=(Math.random()*2-1)*t;e.w=(Math.random()*2-1)*t;return e};var RandomXYZW_1=RandomXYZW;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rotate$1=function(e,t){var i=e.x;var r=e.y;e.x=i*Math.cos(t)-r*Math.sin(t);e.y=i*Math.sin(t)+r*Math.cos(t);return e};var Rotate_1$1=Rotate$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RoundAwayFromZero=function(e){return e>0?Math.ceil(e):Math.floor(e)};var RoundAwayFromZero_1=RoundAwayFromZero;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RoundTo=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=10}var r=Math.pow(i,-t);return Math.round(e*r)/r};var RoundTo_1=RoundTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SinCosTableGenerator=function(e,t,i,r){if(t===undefined){t=1}if(i===undefined){i=1}if(r===undefined){r=1}r*=Math.PI/e;var n=[];var s=[];for(var a=0;a<e;a++){i-=t*r;t+=i*r;n[a]=i;s[a]=t}return{sin:s,cos:n,length:e}};var SinCosTableGenerator_1=SinCosTableGenerator;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ToXY=function(e,t,i,r){if(r===undefined){r=new Vector2_1}var n=0;var s=0;var a=t*i;if(e>0&&e<=a){if(e>t-1){s=Math.floor(e/t);n=e-s*t}else{n=e}r.set(n,s)}return r};var ToXY_1=ToXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TransformXY=function(e,t,i,r,n,s,a,o){if(o===undefined){o=new Vector2_1}var l=Math.sin(n);var h=Math.cos(n);var u=h*s;var c=l*s;var f=-l*a;var d=h*a;var v=1/(u*d+f*-c);o.x=d*v*e+-f*v*t+(r*f-i*d)*v;o.y=u*v*t+-c*v*e+(-r*u+i*c)*v;return o};var TransformXY_1=TransformXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Within=function(e,t,i){return Math.abs(e-t)<=i};var Within_1=Within;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Vector3=new Class_1({initialize:function e(t,i,r){this.x=0;this.y=0;this.z=0;if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0}else{this.x=t||0;this.y=i||0;this.z=r||0}},up:function(){this.x=0;this.y=1;this.z=0;return this},clone:function(){return new Vector3(this.x,this.y,this.z)},crossVectors:function(e,t){var i=e.x;var r=e.y;var n=e.z;var s=t.x;var a=t.y;var o=t.z;this.x=r*o-n*a;this.y=n*s-i*o;this.z=i*a-r*s;return this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z||0;return this},set:function(e,t,i){if(typeof e==="object"){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0}else{this.x=e||0;this.y=t||0;this.z=i||0}return this},add:function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z||0;return this},subtract:function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z||0;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;this.z*=e.z||1;return this},scale:function(e){if(isFinite(e)){this.x*=e;this.y*=e;this.z*=e}else{this.x=0;this.y=0;this.z=0}return this},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z||1;return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},distance:function(e){var t=e.x-this.x;var i=e.y-this.y;var r=e.z-this.z||0;return Math.sqrt(t*t+i*i+r*r)},distanceSq:function(e){var t=e.x-this.x;var i=e.y-this.y;var r=e.z-this.z||0;return t*t+i*i+r*r},length:function(){var e=this.x;var t=this.y;var i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function(){var e=this.x;var t=this.y;var i=this.z;return e*e+t*t+i*i},normalize:function(){var e=this.x;var t=this.y;var i=this.z;var r=e*e+t*t+i*i;if(r>0){r=1/Math.sqrt(r);this.x=e*r;this.y=t*r;this.z=i*r}return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.x;var s=e.y;var a=e.z;this.x=i*a-r*s;this.y=r*n-t*a;this.z=t*s-i*n;return this},lerp:function(e,t){if(t===undefined){t=0}var i=this.x;var r=this.y;var n=this.z;this.x=i+t*(e.x-i);this.y=r+t*(e.y-r);this.z=n+t*(e.z-n);return this},transformMat3:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.val;this.x=t*n[0]+i*n[3]+r*n[6];this.y=t*n[1]+i*n[4]+r*n[7];this.z=t*n[2]+i*n[5]+r*n[8];return this},transformMat4:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.val;this.x=n[0]*t+n[4]*i+n[8]*r+n[12];this.y=n[1]*t+n[5]*i+n[9]*r+n[13];this.z=n[2]*t+n[6]*i+n[10]*r+n[14];return this},transformCoordinates:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.val;var s=t*n[0]+i*n[4]+r*n[8]+n[12];var a=t*n[1]+i*n[5]+r*n[9]+n[13];var o=t*n[2]+i*n[6]+r*n[10]+n[14];var l=t*n[3]+i*n[7]+r*n[11]+n[15];this.x=s/l;this.y=a/l;this.z=o/l;return this},transformQuat:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.x;var s=e.y;var a=e.z;var o=e.w;var l=o*t+s*r-a*i;var h=o*i+a*t-n*r;var u=o*r+n*i-s*t;var c=-n*t-s*i-a*r;this.x=l*o+c*-n+h*-a-u*-s;this.y=h*o+c*-s+u*-n-l*-a;this.z=u*o+c*-a+l*-s-h*-n;return this},project:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.val;var s=n[0];var a=n[1];var o=n[2];var l=n[3];var h=n[4];var u=n[5];var c=n[6];var f=n[7];var d=n[8];var v=n[9];var p=n[10];var g=n[11];var m=n[12];var _=n[13];var y=n[14];var T=n[15];var x=1/(t*l+i*f+r*g+T);this.x=(t*s+i*h+r*d+m)*x;this.y=(t*a+i*u+r*v+_)*x;this.z=(t*o+i*c+r*p+y)*x;return this},unproject:function(e,t){var i=e.x;var r=e.y;var n=e.z;var s=e.w;var a=this.x-i;var o=s-this.y-1-r;var l=this.z;this.x=2*a/n-1;this.y=2*o/s-1;this.z=2*l-1;return this.project(t)},reset:function(){this.x=0;this.y=0;this.z=0;return this}});Vector3.ZERO=new Vector3;Vector3.RIGHT=new Vector3(1,0,0);Vector3.LEFT=new Vector3(-1,0,0);Vector3.UP=new Vector3(0,-1,0);Vector3.DOWN=new Vector3(0,1,0);Vector3.FORWARD=new Vector3(0,0,1);Vector3.BACK=new Vector3(0,0,-1);Vector3.ONE=new Vector3(1,1,1);var Vector3_1=Vector3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Vector4=new Class_1({initialize:function e(t,i,r,n){this.x=0;this.y=0;this.z=0;this.w=0;if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0;this.w=t.w||0}else{this.x=t||0;this.y=i||0;this.z=r||0;this.w=n||0}},clone:function(){return new Vector4(this.x,this.y,this.z,this.w)},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z||0;this.w=e.w||0;return this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,t,i,r){if(typeof e==="object"){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=r||0}return this},add:function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z||0;this.w+=e.w||0;return this},subtract:function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z||0;this.w-=e.w||0;return this},scale:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},length:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;var n=e*e+t*t+i*i+r*r;if(n>0){n=1/Math.sqrt(n);this.x=e*n;this.y=t*n;this.z=i*n;this.w=r*n}return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){if(t===undefined){t=0}var i=this.x;var r=this.y;var n=this.z;var s=this.w;this.x=i+t*(e.x-i);this.y=r+t*(e.y-r);this.z=n+t*(e.z-n);this.w=s+t*(e.w-s);return this},multiply:function(e){this.x*=e.x;this.y*=e.y;this.z*=e.z||1;this.w*=e.w||1;return this},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z||1;this.w/=e.w||1;return this},distance:function(e){var t=e.x-this.x;var i=e.y-this.y;var r=e.z-this.z||0;var n=e.w-this.w||0;return Math.sqrt(t*t+i*i+r*r+n*n)},distanceSq:function(e){var t=e.x-this.x;var i=e.y-this.y;var r=e.z-this.z||0;var n=e.w-this.w||0;return t*t+i*i+r*r+n*n},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},transformMat4:function(e){var t=this.x;var i=this.y;var r=this.z;var n=this.w;var s=e.val;this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*n;this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*n;this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*n;this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*n;return this},transformQuat:function(e){var t=this.x;var i=this.y;var r=this.z;var n=e.x;var s=e.y;var a=e.z;var o=e.w;var l=o*t+s*r-a*i;var h=o*i+a*t-n*r;var u=o*r+n*i-s*t;var c=-n*t-s*i-a*r;this.x=l*o+c*-n+h*-a-u*-s;this.y=h*o+c*-s+u*-n-l*-a;this.z=u*o+c*-a+l*-s-h*-n;return this},reset:function(){this.x=0;this.y=0;this.z=0;this.w=0;return this}});Vector4.prototype.sub=Vector4.prototype.subtract;Vector4.prototype.mul=Vector4.prototype.multiply;Vector4.prototype.div=Vector4.prototype.divide;Vector4.prototype.dist=Vector4.prototype.distance;Vector4.prototype.distSq=Vector4.prototype.distanceSq;Vector4.prototype.len=Vector4.prototype.length;Vector4.prototype.lenSq=Vector4.prototype.lengthSq;var Vector4_1=Vector4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Matrix3=new Class_1({initialize:function e(t){this.val=new Float32Array(9);if(t){this.copy(t)}else{this.identity()}},clone:function(){return new Matrix3(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val;var i=e.val;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];return this},fromMat4:function(e){var t=e.val;var i=this.val;i[0]=t[0];i[1]=t[1];i[2]=t[2];i[3]=t[4];i[4]=t[5];i[5]=t[6];i[6]=t[8];i[7]=t[9];i[8]=t[10];return this},fromArray:function(e){var t=this.val;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return this},identity:function(){var e=this.val;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return this},transpose:function(){var e=this.val;var t=e[1];var i=e[2];var r=e[5];e[1]=e[3];e[2]=e[6];e[3]=t;e[5]=e[7];e[6]=i;e[7]=r;return this},invert:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];var u=h*s-a*l;var c=-h*n+a*o;var f=l*n-s*o;var d=t*u+i*c+r*f;if(!d){return null}d=1/d;e[0]=u*d;e[1]=(-h*i+r*l)*d;e[2]=(a*i-r*s)*d;e[3]=c*d;e[4]=(h*t-r*o)*d;e[5]=(-a*t+r*n)*d;e[6]=f*d;e[7]=(-l*t+i*o)*d;e[8]=(s*t-i*n)*d;return this},adjoint:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];e[0]=s*h-a*l;e[1]=r*l-i*h;e[2]=i*a-r*s;e[3]=a*o-n*h;e[4]=t*h-r*o;e[5]=r*n-t*a;e[6]=n*l-s*o;e[7]=i*o-t*l;e[8]=t*s-i*n;return this},determinant:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];return t*(h*s-a*l)+i*(-h*n+a*o)+r*(l*n-s*o)},multiply:function(e){var t=this.val;var i=t[0];var r=t[1];var n=t[2];var s=t[3];var a=t[4];var o=t[5];var l=t[6];var h=t[7];var u=t[8];var c=e.val;var f=c[0];var d=c[1];var v=c[2];var p=c[3];var g=c[4];var m=c[5];var _=c[6];var y=c[7];var T=c[8];t[0]=f*i+d*s+v*l;t[1]=f*r+d*a+v*h;t[2]=f*n+d*o+v*u;t[3]=p*i+g*s+m*l;t[4]=p*r+g*a+m*h;t[5]=p*n+g*o+m*u;t[6]=_*i+y*s+T*l;t[7]=_*r+y*a+T*h;t[8]=_*n+y*o+T*u;return this},translate:function(e){var t=this.val;var i=e.x;var r=e.y;t[6]=i*t[0]+r*t[3]+t[6];t[7]=i*t[1]+r*t[4]+t[7];t[8]=i*t[2]+r*t[5]+t[8];return this},rotate:function(e){var t=this.val;var i=t[0];var r=t[1];var n=t[2];var s=t[3];var a=t[4];var o=t[5];var l=Math.sin(e);var h=Math.cos(e);t[0]=h*i+l*s;t[1]=h*r+l*a;t[2]=h*n+l*o;t[3]=h*s-l*i;t[4]=h*a-l*r;t[5]=h*o-l*n;return this},scale:function(e){var t=this.val;var i=e.x;var r=e.y;t[0]=i*t[0];t[1]=i*t[1];t[2]=i*t[2];t[3]=r*t[3];t[4]=r*t[4];t[5]=r*t[5];return this},fromQuat:function(e){var t=e.x;var i=e.y;var r=e.z;var n=e.w;var s=t+t;var a=i+i;var o=r+r;var l=t*s;var h=t*a;var u=t*o;var c=i*a;var f=i*o;var d=r*o;var v=n*s;var p=n*a;var g=n*o;var m=this.val;m[0]=1-(c+d);m[3]=h+g;m[6]=u-p;m[1]=h-g;m[4]=1-(l+d);m[7]=f+v;m[2]=u+p;m[5]=f-v;m[8]=1-(l+c);return this},normalFromMat4:function(e){var t=e.val;var i=this.val;var r=t[0];var n=t[1];var s=t[2];var a=t[3];var o=t[4];var l=t[5];var h=t[6];var u=t[7];var c=t[8];var f=t[9];var d=t[10];var v=t[11];var p=t[12];var g=t[13];var m=t[14];var _=t[15];var y=r*l-n*o;var T=r*h-s*o;var x=r*u-a*o;var E=n*h-s*l;var C=n*u-a*l;var S=s*u-a*h;var A=c*g-f*p;var b=c*m-d*p;var w=c*_-v*p;var P=f*m-d*g;var R=f*_-v*g;var O=d*_-v*m;var M=y*O-T*R+x*P+E*w-C*b+S*A;if(!M){return null}M=1/M;i[0]=(l*O-h*R+u*P)*M;i[1]=(h*w-o*O-u*b)*M;i[2]=(o*R-l*w+u*A)*M;i[3]=(s*R-n*O-a*P)*M;i[4]=(r*O-s*w+a*b)*M;i[5]=(n*w-r*R-a*A)*M;i[6]=(g*S-m*C+_*E)*M;i[7]=(m*x-p*S-_*T)*M;i[8]=(p*C-g*x+_*y)*M;return this}});var Matrix3_1=Matrix3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EPSILON=1e-6;var Matrix4=new Class_1({initialize:function e(t){this.val=new Float32Array(16);if(t){this.copy(t)}else{this.identity()}},clone:function(){return new Matrix4(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val;var i=e.val;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return this},fromArray:function(e){var t=this.val;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return this},zero:function(){var e=this.val;e[0]=0;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=0;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=0;return this},xyz:function(e,t,i){this.identity();var r=this.val;r[12]=e;r[13]=t;r[14]=i;return this},scaling:function(e,t,i){this.zero();var r=this.val;r[0]=e;r[5]=t;r[10]=i;r[15]=1;return this},identity:function(){var e=this.val;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return this},transpose:function(){var e=this.val;var t=e[1];var i=e[2];var r=e[3];var n=e[6];var s=e[7];var a=e[11];e[1]=e[4];e[2]=e[8];e[3]=e[12];e[4]=t;e[6]=e[9];e[7]=e[13];e[8]=i;e[9]=n;e[11]=e[14];e[12]=r;e[13]=s;e[14]=a;return this},invert:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];var u=e[9];var c=e[10];var f=e[11];var d=e[12];var v=e[13];var p=e[14];var g=e[15];var m=t*a-i*s;var _=t*o-r*s;var y=t*l-n*s;var T=i*o-r*a;var x=i*l-n*a;var E=r*l-n*o;var C=h*v-u*d;var S=h*p-c*d;var A=h*g-f*d;var b=u*p-c*v;var w=u*g-f*v;var P=c*g-f*p;var R=m*P-_*w+y*b+T*A-x*S+E*C;if(!R){return null}R=1/R;e[0]=(a*P-o*w+l*b)*R;e[1]=(r*w-i*P-n*b)*R;e[2]=(v*E-p*x+g*T)*R;e[3]=(c*x-u*E-f*T)*R;e[4]=(o*A-s*P-l*S)*R;e[5]=(t*P-r*A+n*S)*R;e[6]=(p*y-d*E-g*_)*R;e[7]=(h*E-c*y+f*_)*R;e[8]=(s*w-a*A+l*C)*R;e[9]=(i*A-t*w-n*C)*R;e[10]=(d*x-v*y+g*m)*R;e[11]=(u*y-h*x-f*m)*R;e[12]=(a*S-s*b-o*C)*R;e[13]=(t*b-i*S+r*C)*R;e[14]=(v*_-d*T-p*m)*R;e[15]=(h*T-u*_+c*m)*R;return this},adjoint:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];var u=e[9];var c=e[10];var f=e[11];var d=e[12];var v=e[13];var p=e[14];var g=e[15];e[0]=a*(c*g-f*p)-u*(o*g-l*p)+v*(o*f-l*c);e[1]=-(i*(c*g-f*p)-u*(r*g-n*p)+v*(r*f-n*c));e[2]=i*(o*g-l*p)-a*(r*g-n*p)+v*(r*l-n*o);e[3]=-(i*(o*f-l*c)-a*(r*f-n*c)+u*(r*l-n*o));e[4]=-(s*(c*g-f*p)-h*(o*g-l*p)+d*(o*f-l*c));e[5]=t*(c*g-f*p)-h*(r*g-n*p)+d*(r*f-n*c);e[6]=-(t*(o*g-l*p)-s*(r*g-n*p)+d*(r*l-n*o));e[7]=t*(o*f-l*c)-s*(r*f-n*c)+h*(r*l-n*o);e[8]=s*(u*g-f*v)-h*(a*g-l*v)+d*(a*f-l*u);e[9]=-(t*(u*g-f*v)-h*(i*g-n*v)+d*(i*f-n*u));e[10]=t*(a*g-l*v)-s*(i*g-n*v)+d*(i*l-n*a);e[11]=-(t*(a*f-l*u)-s*(i*f-n*u)+h*(i*l-n*a));e[12]=-(s*(u*p-c*v)-h*(a*p-o*v)+d*(a*c-o*u));e[13]=t*(u*p-c*v)-h*(i*p-r*v)+d*(i*c-r*u);e[14]=-(t*(a*p-o*v)-s*(i*p-r*v)+d*(i*o-r*a));e[15]=t*(a*c-o*u)-s*(i*c-r*u)+h*(i*o-r*a);return this},determinant:function(){var e=this.val;var t=e[0];var i=e[1];var r=e[2];var n=e[3];var s=e[4];var a=e[5];var o=e[6];var l=e[7];var h=e[8];var u=e[9];var c=e[10];var f=e[11];var d=e[12];var v=e[13];var p=e[14];var g=e[15];var m=t*a-i*s;var _=t*o-r*s;var y=t*l-n*s;var T=i*o-r*a;var x=i*l-n*a;var E=r*l-n*o;var C=h*v-u*d;var S=h*p-c*d;var A=h*g-f*d;var b=u*p-c*v;var w=u*g-f*v;var P=c*g-f*p;return m*P-_*w+y*b+T*A-x*S+E*C},multiply:function(e){var t=this.val;var i=t[0];var r=t[1];var n=t[2];var s=t[3];var a=t[4];var o=t[5];var l=t[6];var h=t[7];var u=t[8];var c=t[9];var f=t[10];var d=t[11];var v=t[12];var p=t[13];var g=t[14];var m=t[15];var _=e.val;var y=_[0];var T=_[1];var x=_[2];var E=_[3];t[0]=y*i+T*a+x*u+E*v;t[1]=y*r+T*o+x*c+E*p;t[2]=y*n+T*l+x*f+E*g;t[3]=y*s+T*h+x*d+E*m;y=_[4];T=_[5];x=_[6];E=_[7];t[4]=y*i+T*a+x*u+E*v;t[5]=y*r+T*o+x*c+E*p;t[6]=y*n+T*l+x*f+E*g;t[7]=y*s+T*h+x*d+E*m;y=_[8];T=_[9];x=_[10];E=_[11];t[8]=y*i+T*a+x*u+E*v;t[9]=y*r+T*o+x*c+E*p;t[10]=y*n+T*l+x*f+E*g;t[11]=y*s+T*h+x*d+E*m;y=_[12];T=_[13];x=_[14];E=_[15];t[12]=y*i+T*a+x*u+E*v;t[13]=y*r+T*o+x*c+E*p;t[14]=y*n+T*l+x*f+E*g;t[15]=y*s+T*h+x*d+E*m;return this},multiplyLocal:function(e){var t=[];var i=this.val;var r=e.val;t[0]=i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12];t[1]=i[0]*r[1]+i[1]*r[5]+i[2]*r[9]+i[3]*r[13];t[2]=i[0]*r[2]+i[1]*r[6]+i[2]*r[10]+i[3]*r[14];t[3]=i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+i[3]*r[15];t[4]=i[4]*r[0]+i[5]*r[4]+i[6]*r[8]+i[7]*r[12];t[5]=i[4]*r[1]+i[5]*r[5]+i[6]*r[9]+i[7]*r[13];t[6]=i[4]*r[2]+i[5]*r[6]+i[6]*r[10]+i[7]*r[14];t[7]=i[4]*r[3]+i[5]*r[7]+i[6]*r[11]+i[7]*r[15];t[8]=i[8]*r[0]+i[9]*r[4]+i[10]*r[8]+i[11]*r[12];t[9]=i[8]*r[1]+i[9]*r[5]+i[10]*r[9]+i[11]*r[13];t[10]=i[8]*r[2]+i[9]*r[6]+i[10]*r[10]+i[11]*r[14];t[11]=i[8]*r[3]+i[9]*r[7]+i[10]*r[11]+i[11]*r[15];t[12]=i[12]*r[0]+i[13]*r[4]+i[14]*r[8]+i[15]*r[12];t[13]=i[12]*r[1]+i[13]*r[5]+i[14]*r[9]+i[15]*r[13];t[14]=i[12]*r[2]+i[13]*r[6]+i[14]*r[10]+i[15]*r[14];t[15]=i[12]*r[3]+i[13]*r[7]+i[14]*r[11]+i[15]*r[15];return this.fromArray(t)},translate:function(e){var t=e.x;var i=e.y;var r=e.z;var n=this.val;n[12]=n[0]*t+n[4]*i+n[8]*r+n[12];n[13]=n[1]*t+n[5]*i+n[9]*r+n[13];n[14]=n[2]*t+n[6]*i+n[10]*r+n[14];n[15]=n[3]*t+n[7]*i+n[11]*r+n[15];return this},translateXYZ:function(e,t,i){var r=this.val;r[12]=r[0]*e+r[4]*t+r[8]*i+r[12];r[13]=r[1]*e+r[5]*t+r[9]*i+r[13];r[14]=r[2]*e+r[6]*t+r[10]*i+r[14];r[15]=r[3]*e+r[7]*t+r[11]*i+r[15];return this},scale:function(e){var t=e.x;var i=e.y;var r=e.z;var n=this.val;n[0]=n[0]*t;n[1]=n[1]*t;n[2]=n[2]*t;n[3]=n[3]*t;n[4]=n[4]*i;n[5]=n[5]*i;n[6]=n[6]*i;n[7]=n[7]*i;n[8]=n[8]*r;n[9]=n[9]*r;n[10]=n[10]*r;n[11]=n[11]*r;return this},scaleXYZ:function(e,t,i){var r=this.val;r[0]=r[0]*e;r[1]=r[1]*e;r[2]=r[2]*e;r[3]=r[3]*e;r[4]=r[4]*t;r[5]=r[5]*t;r[6]=r[6]*t;r[7]=r[7]*t;r[8]=r[8]*i;r[9]=r[9]*i;r[10]=r[10]*i;r[11]=r[11]*i;return this},makeRotationAxis:function(e,t){var i=Math.cos(t);var r=Math.sin(t);var n=1-i;var s=e.x;var a=e.y;var o=e.z;var l=n*s;var h=n*a;this.fromArray([l*s+i,l*a-r*o,l*o+r*a,0,l*a+r*o,h*a+i,h*o-r*s,0,l*o-r*a,h*o+r*s,n*o*o+i,0,0,0,0,1]);return this},rotate:function(e,t){var i=this.val;var r=t.x;var n=t.y;var s=t.z;var a=Math.sqrt(r*r+n*n+s*s);if(Math.abs(a)<EPSILON){return null}a=1/a;r*=a;n*=a;s*=a;var o=Math.sin(e);var l=Math.cos(e);var h=1-l;var u=i[0];var c=i[1];var f=i[2];var d=i[3];var v=i[4];var p=i[5];var g=i[6];var m=i[7];var _=i[8];var y=i[9];var T=i[10];var x=i[11];var E=r*r*h+l;var C=n*r*h+s*o;var S=s*r*h-n*o;var A=r*n*h-s*o;var b=n*n*h+l;var w=s*n*h+r*o;var P=r*s*h+n*o;var R=n*s*h-r*o;var O=s*s*h+l;i[0]=u*E+v*C+_*S;i[1]=c*E+p*C+y*S;i[2]=f*E+g*C+T*S;i[3]=d*E+m*C+x*S;i[4]=u*A+v*b+_*w;i[5]=c*A+p*b+y*w;i[6]=f*A+g*b+T*w;i[7]=d*A+m*b+x*w;i[8]=u*P+v*R+_*O;i[9]=c*P+p*R+y*O;i[10]=f*P+g*R+T*O;i[11]=d*P+m*R+x*O;return this},rotateX:function(e){var t=this.val;var i=Math.sin(e);var r=Math.cos(e);var n=t[4];var s=t[5];var a=t[6];var o=t[7];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[4]=n*r+l*i;t[5]=s*r+h*i;t[6]=a*r+u*i;t[7]=o*r+c*i;t[8]=l*r-n*i;t[9]=h*r-s*i;t[10]=u*r-a*i;t[11]=c*r-o*i;return this},rotateY:function(e){var t=this.val;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[0]=n*r-l*i;t[1]=s*r-h*i;t[2]=a*r-u*i;t[3]=o*r-c*i;t[8]=n*i+l*r;t[9]=s*i+h*r;t[10]=a*i+u*r;t[11]=o*i+c*r;return this},rotateZ:function(e){var t=this.val;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[4];var h=t[5];var u=t[6];var c=t[7];t[0]=n*r+l*i;t[1]=s*r+h*i;t[2]=a*r+u*i;t[3]=o*r+c*i;t[4]=l*r-n*i;t[5]=h*r-s*i;t[6]=u*r-a*i;t[7]=c*r-o*i;return this},fromRotationTranslation:function(e,t){var i=this.val;var r=e.x;var n=e.y;var s=e.z;var a=e.w;var o=r+r;var l=n+n;var h=s+s;var u=r*o;var c=r*l;var f=r*h;var d=n*l;var v=n*h;var p=s*h;var g=a*o;var m=a*l;var _=a*h;i[0]=1-(d+p);i[1]=c+_;i[2]=f-m;i[3]=0;i[4]=c-_;i[5]=1-(u+p);i[6]=v+g;i[7]=0;i[8]=f+m;i[9]=v-g;i[10]=1-(u+d);i[11]=0;i[12]=t.x;i[13]=t.y;i[14]=t.z;i[15]=1;return this},fromQuat:function(e){var t=this.val;var i=e.x;var r=e.y;var n=e.z;var s=e.w;var a=i+i;var o=r+r;var l=n+n;var h=i*a;var u=i*o;var c=i*l;var f=r*o;var d=r*l;var v=n*l;var p=s*a;var g=s*o;var m=s*l;t[0]=1-(f+v);t[1]=u+m;t[2]=c-g;t[3]=0;t[4]=u-m;t[5]=1-(h+v);t[6]=d+p;t[7]=0;t[8]=c+g;t[9]=d-p;t[10]=1-(h+f);t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},frustum:function(e,t,i,r,n,s){var a=this.val;var o=1/(t-e);var l=1/(r-i);var h=1/(n-s);a[0]=n*2*o;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n*2*l;a[6]=0;a[7]=0;a[8]=(t+e)*o;a[9]=(r+i)*l;a[10]=(s+n)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=s*n*2*h;a[15]=0;return this},perspective:function(e,t,i,r){var n=this.val;var s=1/Math.tan(e/2);var a=1/(i-r);n[0]=s/t;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=s;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=(r+i)*a;n[11]=-1;n[12]=0;n[13]=0;n[14]=2*r*i*a;n[15]=0;return this},perspectiveLH:function(e,t,i,r){var n=this.val;n[0]=2*i/e;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=2*i/t;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=-r/(i-r);n[11]=1;n[12]=0;n[13]=0;n[14]=i*r/(i-r);n[15]=0;return this},ortho:function(e,t,i,r,n,s){var a=this.val;var o=e-t;var l=i-r;var h=n-s;o=o===0?o:1/o;l=l===0?l:1/l;h=h===0?h:1/h;a[0]=-2*o;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*h;a[11]=0;a[12]=(e+t)*o;a[13]=(r+i)*l;a[14]=(s+n)*h;a[15]=1;return this},lookAt:function(e,t,i){var r=this.val;var n=e.x;var s=e.y;var a=e.z;var o=i.x;var l=i.y;var h=i.z;var u=t.x;var c=t.y;var f=t.z;if(Math.abs(n-u)<EPSILON&&Math.abs(s-c)<EPSILON&&Math.abs(a-f)<EPSILON){return this.identity()}var d=n-u;var v=s-c;var p=a-f;var g=1/Math.sqrt(d*d+v*v+p*p);d*=g;v*=g;p*=g;var m=l*p-h*v;var _=h*d-o*p;var y=o*v-l*d;g=Math.sqrt(m*m+_*_+y*y);if(!g){m=0;_=0;y=0}else{g=1/g;m*=g;_*=g;y*=g}var T=v*y-p*_;var x=p*m-d*y;var E=d*_-v*m;g=Math.sqrt(T*T+x*x+E*E);if(!g){T=0;x=0;E=0}else{g=1/g;T*=g;x*=g;E*=g}r[0]=m;r[1]=T;r[2]=d;r[3]=0;r[4]=_;r[5]=x;r[6]=v;r[7]=0;r[8]=y;r[9]=E;r[10]=p;r[11]=0;r[12]=-(m*n+_*s+y*a);r[13]=-(T*n+x*s+E*a);r[14]=-(d*n+v*s+p*a);r[15]=1;return this},yawPitchRoll:function(e,t,i){this.zero();_tempMat1.zero();_tempMat2.zero();var r=this.val;var n=_tempMat1.val;var s=_tempMat2.val;var a=Math.sin(i);var o=Math.cos(i);r[10]=1;r[15]=1;r[0]=o;r[1]=a;r[4]=-a;r[5]=o;a=Math.sin(t);o=Math.cos(t);n[0]=1;n[15]=1;n[5]=o;n[10]=o;n[9]=-a;n[6]=a;a=Math.sin(e);o=Math.cos(e);s[5]=1;s[15]=1;s[0]=o;s[2]=-a;s[8]=a;s[10]=o;this.multiplyLocal(_tempMat1);this.multiplyLocal(_tempMat2);return this},setWorldMatrix:function(e,t,i,r,n){this.yawPitchRoll(e.y,e.x,e.z);_tempMat1.scaling(i.x,i.y,i.z);_tempMat2.xyz(t.x,t.y,t.z);this.multiplyLocal(_tempMat1);this.multiplyLocal(_tempMat2);if(r!==undefined){this.multiplyLocal(r)}if(n!==undefined){this.multiplyLocal(n)}return this}});var _tempMat1=new Matrix4;var _tempMat2=new Matrix4;var Matrix4_1=Matrix4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EPSILON$1=1e-6;var siNext=new Int8Array([1,2,0]);var tmp=new Float32Array([0,0,0]);var xUnitVec3=new Vector3_1(1,0,0);var yUnitVec3=new Vector3_1(0,1,0);var tmpvec=new Vector3_1;var tmpMat3=new Matrix3_1;var Quaternion=new Class_1({initialize:function e(t,i,r,n){if(typeof t==="object"){this.x=t.x||0;this.y=t.y||0;this.z=t.z||0;this.w=t.w||0}else{this.x=t||0;this.y=i||0;this.z=r||0;this.w=n||0}},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w;return this},set:function(e,t,i,r){if(typeof e==="object"){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=r||0}return this},add:function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},subtract:function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},scale:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},length:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;var n=e*e+t*t+i*i+r*r;if(n>0){n=1/Math.sqrt(n);this.x=e*n;this.y=t*n;this.z=i*n;this.w=r*n}return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){if(t===undefined){t=0}var i=this.x;var r=this.y;var n=this.z;var s=this.w;this.x=i+t*(e.x-i);this.y=r+t*(e.y-r);this.z=n+t*(e.z-n);this.w=s+t*(e.w-s);return this},rotationTo:function(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;if(i<-.999999){if(tmpvec.copy(xUnitVec3).cross(e).length()<EPSILON$1){tmpvec.copy(yUnitVec3).cross(e)}tmpvec.normalize();return this.setAxisAngle(tmpvec,Math.PI)}else if(i>.999999){this.x=0;this.y=0;this.z=0;this.w=1;return this}else{tmpvec.copy(e).cross(t);this.x=tmpvec.x;this.y=tmpvec.y;this.z=tmpvec.z;this.w=1+i;return this.normalize()}},setAxes:function(e,t,i){var r=tmpMat3.val;r[0]=t.x;r[3]=t.y;r[6]=t.z;r[1]=i.x;r[4]=i.y;r[7]=i.z;r[2]=-e.x;r[5]=-e.y;r[8]=-e.z;return this.fromMat3(tmpMat3).normalize()},identity:function(){this.x=0;this.y=0;this.z=0;this.w=1;return this},setAxisAngle:function(e,t){t=t*.5;var i=Math.sin(t);this.x=i*e.x;this.y=i*e.y;this.z=i*e.z;this.w=Math.cos(t);return this},multiply:function(e){var t=this.x;var i=this.y;var r=this.z;var n=this.w;var s=e.x;var a=e.y;var o=e.z;var l=e.w;this.x=t*l+n*s+i*o-r*a;this.y=i*l+n*a+r*s-t*o;this.z=r*l+n*o+t*a-i*s;this.w=n*l-t*s-i*a-r*o;return this},slerp:function(e,t){var i=this.x;var r=this.y;var n=this.z;var s=this.w;var a=e.x;var o=e.y;var l=e.z;var h=e.w;var u=i*a+r*o+n*l+s*h;if(u<0){u=-u;a=-a;o=-o;l=-l;h=-h}var c=1-t;var f=t;if(1-u>EPSILON$1){var d=Math.acos(u);var v=Math.sin(d);c=Math.sin((1-t)*d)/v;f=Math.sin(t*d)/v}this.x=c*i+f*a;this.y=c*r+f*o;this.z=c*n+f*l;this.w=c*s+f*h;return this},invert:function(){var e=this.x;var t=this.y;var i=this.z;var r=this.w;var n=e*e+t*t+i*i+r*r;var s=n?1/n:0;this.x=-e*s;this.y=-t*s;this.z=-i*s;this.w=r*s;return this},conjugate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},rotateX:function(e){e*=.5;var t=this.x;var i=this.y;var r=this.z;var n=this.w;var s=Math.sin(e);var a=Math.cos(e);this.x=t*a+n*s;this.y=i*a+r*s;this.z=r*a-i*s;this.w=n*a-t*s;return this},rotateY:function(e){e*=.5;var t=this.x;var i=this.y;var r=this.z;var n=this.w;var s=Math.sin(e);var a=Math.cos(e);this.x=t*a-r*s;this.y=i*a+n*s;this.z=r*a+t*s;this.w=n*a-i*s;return this},rotateZ:function(e){e*=.5;var t=this.x;var i=this.y;var r=this.z;var n=this.w;var s=Math.sin(e);var a=Math.cos(e);this.x=t*a+i*s;this.y=i*a-t*s;this.z=r*a+n*s;this.w=n*a-r*s;return this},calculateW:function(){var e=this.x;var t=this.y;var i=this.z;this.w=-Math.sqrt(1-e*e-t*t-i*i);return this},fromMat3:function(e){var t=e.val;var i=t[0]+t[4]+t[8];var r;if(i>0){r=Math.sqrt(i+1);this.w=.5*r;r=.5/r;this.x=(t[7]-t[5])*r;this.y=(t[2]-t[6])*r;this.z=(t[3]-t[1])*r}else{var n=0;if(t[4]>t[0]){n=1}if(t[8]>t[n*3+n]){n=2}var s=siNext[n];var a=siNext[s];r=Math.sqrt(t[n*3+n]-t[s*3+s]-t[a*3+a]+1);tmp[n]=.5*r;r=.5/r;tmp[s]=(t[s*3+n]+t[n*3+s])*r;tmp[a]=(t[a*3+n]+t[n*3+a])*r;this.x=tmp[0];this.y=tmp[1];this.z=tmp[2];this.w=(t[a*3+s]-t[s*3+a])*r}return this}});var Quaternion_1=Quaternion;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tmpMat4=new Matrix4_1;var tmpQuat=new Quaternion_1;var tmpVec3=new Vector3_1;var RotateVec3=function(e,t,i){tmpQuat.setAxisAngle(t,i);tmpMat4.fromRotationTranslation(tmpQuat,tmpVec3.set(0,0,0));return e.transformMat4(tmpMat4)};var RotateVec3_1=RotateVec3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PhaserMath={Angle:angle,Distance:distance,Easing:easing,Fuzzy:fuzzy,Interpolation:interpolation,Pow2:pow2,Snap:snap,RandomDataGenerator:RandomDataGenerator_1,Average:Average_1,Bernstein:Bernstein_1,Between:Between_1$1,CatmullRom:CatmullRom_1,CeilTo:CeilTo_1,Clamp:Clamp_1,DegToRad:DegToRad_1,Difference:Difference_1,Factorial:Factorial_1,FloatBetween:FloatBetween_1,FloorTo:FloorTo_1,FromPercent:FromPercent_1,GetSpeed:GetSpeed_1,IsEven:IsEven_1,IsEvenStrict:IsEvenStrict_1,Linear:Linear_1$1,MaxAdd:MaxAdd_1,MinSub:MinSub_1,Percent:Percent_1,RadToDeg:RadToDeg_1,RandomXY:RandomXY_1,RandomXYZ:RandomXYZ_1,RandomXYZW:RandomXYZW_1,Rotate:Rotate_1$1,RotateAround:RotateAround_1,RotateAroundDistance:RotateAroundDistance_1,RoundAwayFromZero:RoundAwayFromZero_1,RoundTo:RoundTo_1,SinCosTableGenerator:SinCosTableGenerator_1,SmootherStep:SmootherStep_1,SmoothStep:SmoothStep_1,ToXY:ToXY_1,TransformXY:TransformXY_1,Within:Within_1,Wrap:Wrap_1,Vector2:Vector2_1,Vector3:Vector3_1,Vector4:Vector4_1,Matrix3:Matrix3_1,Matrix4:Matrix4_1,Quaternion:Quaternion_1,RotateVec3:RotateVec3_1};PhaserMath=Extend_1(false,PhaserMath,_const$3);var math=PhaserMath;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DefaultPlugins={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};if(typeof PLUGIN_CAMERA3D){DefaultPlugins.DefaultScene.push("CameraManager3D")}if(typeof PLUGIN_FBINSTANT){DefaultPlugins.Global.push("facebook")}var DefaultPlugins_1=DefaultPlugins;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Config=new Class_1({initialize:function e(t){if(t===undefined){t={}}var i=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"];var r="#ffffff";this.width=GetValue_1(t,"width",1024);this.height=GetValue_1(t,"height",768);this.zoom=GetValue_1(t,"zoom",1);this.resolution=GetValue_1(t,"resolution",1);this.parent=GetValue_1(t,"parent",undefined);this.scaleMode=GetValue_1(t,"scaleMode",0);this.expandParent=GetValue_1(t,"expandParent",true);this.autoRound=GetValue_1(t,"autoRound",false);this.autoCenter=GetValue_1(t,"autoCenter",0);this.resizeInterval=GetValue_1(t,"resizeInterval",500);this.fullscreenTarget=GetValue_1(t,"fullscreenTarget",null);this.minWidth=GetValue_1(t,"minWidth",0);this.maxWidth=GetValue_1(t,"maxWidth",0);this.minHeight=GetValue_1(t,"minHeight",0);this.maxHeight=GetValue_1(t,"maxHeight",0);var n=GetValue_1(t,"scale",null);if(n){this.width=GetValue_1(n,"width",this.width);this.height=GetValue_1(n,"height",this.height);this.zoom=GetValue_1(n,"zoom",this.zoom);this.resolution=GetValue_1(n,"resolution",this.resolution);this.parent=GetValue_1(n,"parent",this.parent);this.scaleMode=GetValue_1(n,"mode",this.scaleMode);this.expandParent=GetValue_1(n,"expandParent",this.expandParent);this.autoRound=GetValue_1(n,"autoRound",this.autoRound);this.autoCenter=GetValue_1(n,"autoCenter",this.autoCenter);this.resizeInterval=GetValue_1(n,"resizeInterval",this.resizeInterval);this.fullscreenTarget=GetValue_1(n,"fullscreenTarget",this.fullscreenTarget);this.minWidth=GetValue_1(n,"min.width",this.minWidth);this.maxWidth=GetValue_1(n,"max.width",this.maxWidth);this.minHeight=GetValue_1(n,"min.height",this.minHeight);this.maxHeight=GetValue_1(n,"max.height",this.maxHeight)}this.renderType=GetValue_1(t,"type",_const.AUTO);this.canvas=GetValue_1(t,"canvas",null);this.context=GetValue_1(t,"context",null);this.canvasStyle=GetValue_1(t,"canvasStyle",null);this.customEnvironment=GetValue_1(t,"customEnvironment",false);this.sceneConfig=GetValue_1(t,"scene",null);this.seed=GetValue_1(t,"seed",[(Date.now()*Math.random()).toString()]);math.RND=new math.RandomDataGenerator(this.seed);this.gameTitle=GetValue_1(t,"title","");this.gameURL=GetValue_1(t,"url","https://phaser.io");this.gameVersion=GetValue_1(t,"version","");this.autoFocus=GetValue_1(t,"autoFocus",true);this.domCreateContainer=GetValue_1(t,"dom.createContainer",false);this.domBehindCanvas=GetValue_1(t,"dom.behindCanvas",false);this.inputKeyboard=GetValue_1(t,"input.keyboard",true);this.inputKeyboardEventTarget=GetValue_1(t,"input.keyboard.target",window);this.inputKeyboardCapture=GetValue_1(t,"input.keyboard.capture",[]);this.inputMouse=GetValue_1(t,"input.mouse",true);this.inputMouseEventTarget=GetValue_1(t,"input.mouse.target",null);this.inputMouseCapture=GetValue_1(t,"input.mouse.capture",true);this.inputTouch=GetValue_1(t,"input.touch",device.input.touch);this.inputTouchEventTarget=GetValue_1(t,"input.touch.target",null);this.inputTouchCapture=GetValue_1(t,"input.touch.capture",true);this.inputActivePointers=GetValue_1(t,"input.activePointers",1);this.inputSmoothFactor=GetValue_1(t,"input.smoothFactor",0);this.inputWindowEvents=GetValue_1(t,"input.windowEvents",true);this.inputGamepad=GetValue_1(t,"input.gamepad",false);this.inputGamepadEventTarget=GetValue_1(t,"input.gamepad.target",window);this.disableContextMenu=GetValue_1(t,"disableContextMenu",false);this.audio=GetValue_1(t,"audio");this.hideBanner=GetValue_1(t,"banner",null)===false;this.hidePhaser=GetValue_1(t,"banner.hidePhaser",false);this.bannerTextColor=GetValue_1(t,"banner.text",r);this.bannerBackgroundColor=GetValue_1(t,"banner.background",i);if(this.gameTitle===""&&this.hidePhaser){this.hideBanner=true}this.fps=GetValue_1(t,"fps",null);var s=GetValue_1(t,"render",t);this.antialias=GetValue_1(s,"antialias",true);this.desynchronized=GetValue_1(s,"desynchronized",false);this.roundPixels=GetValue_1(s,"roundPixels",false);this.pixelArt=GetValue_1(s,"pixelArt",this.zoom!==1);if(this.pixelArt){this.antialias=false;this.roundPixels=true}this.transparent=GetValue_1(s,"transparent",false);this.clearBeforeRender=GetValue_1(s,"clearBeforeRender",true);this.premultipliedAlpha=GetValue_1(s,"premultipliedAlpha",true);this.failIfMajorPerformanceCaveat=GetValue_1(s,"failIfMajorPerformanceCaveat",false);this.powerPreference=GetValue_1(s,"powerPreference","default");this.batchSize=GetValue_1(s,"batchSize",2e3);this.maxLights=GetValue_1(s,"maxLights",10);var a=GetValue_1(t,"backgroundColor",0);this.backgroundColor=ValueToColor_1(a);if(a===0&&this.transparent){this.backgroundColor.alpha=0}this.preBoot=GetValue_1(t,"callbacks.preBoot",NOOP_1);this.postBoot=GetValue_1(t,"callbacks.postBoot",NOOP_1);this.physics=GetValue_1(t,"physics",{});this.defaultPhysicsSystem=GetValue_1(this.physics,"default",false);this.loaderBaseURL=GetValue_1(t,"loader.baseURL","");this.loaderPath=GetValue_1(t,"loader.path","");this.loaderMaxParallelDownloads=GetValue_1(t,"loader.maxParallelDownloads",32);this.loaderCrossOrigin=GetValue_1(t,"loader.crossOrigin",undefined);this.loaderResponseType=GetValue_1(t,"loader.responseType","");this.loaderAsync=GetValue_1(t,"loader.async",true);this.loaderUser=GetValue_1(t,"loader.user","");this.loaderPassword=GetValue_1(t,"loader.password","");this.loaderTimeout=GetValue_1(t,"loader.timeout",0);this.installGlobalPlugins=[];this.installScenePlugins=[];var o=GetValue_1(t,"plugins",null);var l=DefaultPlugins_1.DefaultScene;if(o){if(Array.isArray(o)){this.defaultPlugins=o}else if(IsPlainObject_1(o)){this.installGlobalPlugins=GetFastValue_1(o,"global",[]);this.installScenePlugins=GetFastValue_1(o,"scene",[]);if(Array.isArray(o.default)){l=o.default}else if(Array.isArray(o.defaultMerge)){l=l.concat(o.defaultMerge)}}}this.defaultPlugins=l;var h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=GetValue_1(t,"images.default",h+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==");this.missingImage=GetValue_1(t,"images.missing",h+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==");if(window){if(window.FORCE_WEBGL){this.renderType=_const.WEBGL}else if(window.FORCE_CANVAS){this.renderType=_const.CANVAS}}}});var Config_1=Config;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CanvasInterpolation={setCrisp:function(e){var t=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"];t.forEach((function(t){e.style["image-rendering"]=t}));e.style.msInterpolationMode="nearest-neighbor";return e},setBicubic:function(e){e.style["image-rendering"]="auto";e.style.msInterpolationMode="bicubic";return e}};var CanvasInterpolation_1=CanvasInterpolation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CanvasSnapshot=function(e,t){var i=GetFastValue_1(t,"callback");var r=GetFastValue_1(t,"type","image/png");var n=GetFastValue_1(t,"encoder",.92);var s=Math.abs(Math.round(GetFastValue_1(t,"x",0)));var a=Math.abs(Math.round(GetFastValue_1(t,"y",0)));var o=GetFastValue_1(t,"width",e.width);var l=GetFastValue_1(t,"height",e.height);var h=GetFastValue_1(t,"getPixel",false);if(h){var u=e.getContext("2d");var c=u.getImageData(s,a,1,1);var f=c.data;i.call(null,new Color_1(f[0],f[1],f[2],f[3]/255))}else if(s!==0||a!==0||o!==e.width||l!==e.height){var d=CanvasPool_1.createWebGL(this,o,l);var v=d.getContext("2d");v.drawImage(e,s,a,o,l,0,0,o,l);var p=new Image;p.onerror=function(){i.call(null);CanvasPool_1.remove(d)};p.onload=function(){i.call(null,p);CanvasPool_1.remove(d)};p.src=d.toDataURL(r,n)}else{var g=new Image;g.onerror=function(){i.call(null)};g.onload=function(){i.call(null,g)};g.src=e.toDataURL(r,n)}};var CanvasSnapshot_1=CanvasSnapshot;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBlendModes=function(){var e=[];var t=CanvasFeatures_1.supportNewBlendModes;var i="source-over";e[BlendModes.NORMAL]=i;e[BlendModes.ADD]="lighter";e[BlendModes.MULTIPLY]=t?"multiply":i;e[BlendModes.SCREEN]=t?"screen":i;e[BlendModes.OVERLAY]=t?"overlay":i;e[BlendModes.DARKEN]=t?"darken":i;e[BlendModes.LIGHTEN]=t?"lighten":i;e[BlendModes.COLOR_DODGE]=t?"color-dodge":i;e[BlendModes.COLOR_BURN]=t?"color-burn":i;e[BlendModes.HARD_LIGHT]=t?"hard-light":i;e[BlendModes.SOFT_LIGHT]=t?"soft-light":i;e[BlendModes.DIFFERENCE]=t?"difference":i;e[BlendModes.EXCLUSION]=t?"exclusion":i;e[BlendModes.HUE]=t?"hue":i;e[BlendModes.SATURATION]=t?"saturation":i;e[BlendModes.COLOR]=t?"color":i;e[BlendModes.LUMINOSITY]=t?"luminosity":i;e[BlendModes.ERASE]="destination-out";e[BlendModes.SOURCE_IN]="source-in";e[BlendModes.SOURCE_OUT]="source-out";e[BlendModes.SOURCE_ATOP]="source-atop";e[BlendModes.DESTINATION_OVER]="destination-over";e[BlendModes.DESTINATION_IN]="destination-in";e[BlendModes.DESTINATION_OUT]="destination-out";e[BlendModes.DESTINATION_ATOP]="destination-atop";e[BlendModes.LIGHTER]="lighter";e[BlendModes.COPY]="copy";e[BlendModes.XOR]="xor";return e};var GetBlendModes_1=GetBlendModes;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CanvasRenderer=new Class_1({initialize:function e(t){this.game=t;this.type=_const.CANVAS;this.drawCount=0;this.width=0;this.height=0;this.config={clearBeforeRender:t.config.clearBeforeRender,backgroundColor:t.config.backgroundColor,resolution:t.config.resolution,antialias:t.config.antialias,roundPixels:t.config.roundPixels};this.scaleMode=t.config.antialias?ScaleModes_1.LINEAR:ScaleModes_1.NEAREST;this.gameCanvas=t.canvas;var i={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",i);this.currentContext=this.gameContext;this.blendModes=GetBlendModes_1();this.currentScaleMode=0;this.snapshotState={x:0,y:0,width:1,height:1,getPixel:false,callback:null,type:"image/png",encoder:.92};this._tempMatrix1=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempMatrix3=new TransformMatrix_1;this._tempMatrix4=new TransformMatrix_1;this.init()},init:function(){this.game.scale.on(events$6.RESIZE,this.onResize,this);var e=this.game.scale.baseSize;this.resize(e.width,e.height)},onResize:function(e,t){if(t.width!==this.width||t.height!==this.height){this.resize(t.width,t.height)}},resize:function(e,t){this.width=e;this.height=t;if(this.scaleMode===ScaleModes_1.NEAREST){Smoothing_1.disable(this.gameContext)}},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(e){this.currentContext.globalCompositeOperation=e;return this},setContext:function(e){this.currentContext=e?e:this.gameContext;return this},setAlpha:function(e){this.currentContext.globalAlpha=e;return this},preRender:function(){var e=this.gameContext;var t=this.config;var i=this.width;var r=this.height;e.globalAlpha=1;e.globalCompositeOperation="source-over";e.setTransform(1,0,0,1,0,0);if(t.clearBeforeRender){e.clearRect(0,0,i,r)}if(!t.transparent){e.fillStyle=t.backgroundColor.rgba;e.fillRect(0,0,i,r)}e.save();this.drawCount=0},render:function(e,t,i,r){var n=t.list;var s=n.length;var a=r._cx;var o=r._cy;var l=r._cw;var h=r._ch;var u=r.renderToTexture?r.context:e.sys.context;u.save();if(this.game.scene.customViewports){u.beginPath();u.rect(a,o,l,h);u.clip()}this.currentContext=u;var c=r.mask;if(c){c.preRenderCanvas(this,null,r._maskCamera)}if(!r.transparent){u.fillStyle=r.backgroundColor.rgba;u.fillRect(a,o,l,h)}u.globalAlpha=r.alpha;u.globalCompositeOperation="source-over";this.drawCount+=n.length;if(r.renderToTexture){r.emit(events$5.PRE_RENDER,r)}r.matrix.copyToContext(u);for(var f=0;f<s;f++){var d=n[f];if(!d.willRender(r)){continue}if(d.mask){d.mask.preRenderCanvas(this,d,r)}d.renderCanvas(this,d,i,r);if(d.mask){d.mask.postRenderCanvas(this,d,r)}}u.setTransform(1,0,0,1,0,0);u.globalCompositeOperation="source-over";u.globalAlpha=1;r.flashEffect.postRenderCanvas(u);r.fadeEffect.postRenderCanvas(u);r.dirty=false;if(c){c.postRenderCanvas(this)}u.restore();if(r.renderToTexture){r.emit(events$5.POST_RENDER,r);e.sys.context.drawImage(r.canvas,a,o)}},postRender:function(){var e=this.gameContext;e.restore();var t=this.snapshotState;if(t.callback){CanvasSnapshot_1(this.gameCanvas,t);t.callback=null}},snapshotCanvas:function(e,t,i,r,n,s,a,o,l){if(i===undefined){i=false}this.snapshotArea(r,n,s,a,t,o,l);var h=this.snapshotState;h.getPixel=i;CanvasSnapshot_1(this.canvas,h);h.callback=null;return this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function(e,t,i,r,n,s,a){var o=this.snapshotState;o.callback=n;o.type=s;o.encoder=a;o.getPixel=false;o.x=e;o.y=t;o.width=Math.min(i,this.gameCanvas.width);o.height=Math.min(r,this.gameCanvas.height);return this},snapshotPixel:function(e,t,i){this.snapshotArea(e,t,1,1,i);this.snapshotState.getPixel=true;return this},batchSprite:function(e,t,i,r){var n=i.alpha*e.alpha;if(n===0){return}var s=this.currentContext;var a=this._tempMatrix1;var o=this._tempMatrix2;var l=this._tempMatrix3;var h=t.canvasData;var u=h.x;var c=h.y;var f=t.cutWidth;var d=t.cutHeight;var v=t.customPivot;var p=t.source.resolution;var g=e.displayOriginX;var m=e.displayOriginY;var _=-g+t.x;var y=-m+t.y;if(e.isCropped){var T=e._crop;if(T.flipX!==e.flipX||T.flipY!==e.flipY){t.updateCropUVs(T,e.flipX,e.flipY)}f=T.cw;d=T.ch;u=T.cx;c=T.cy;_=-g+T.x;y=-m+T.y;if(e.flipX){if(_>=0){_=-(_+f)}else if(_<0){_=Math.abs(_)-f}}if(e.flipY){if(y>=0){y=-(y+d)}else if(y<0){y=Math.abs(y)-d}}}var x=1;var E=1;if(e.flipX){if(!v){_+=-t.realWidth+g*2}x=-1}if(e.flipY){if(!v){y+=-t.realHeight+m*2}E=-1}o.applyITRS(e.x,e.y,e.rotation,e.scaleX*x,e.scaleY*E);a.copyFrom(i.matrix);if(r){a.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY);o.e=e.x;o.f=e.y;a.multiply(o,l)}else{o.e-=i.scrollX*e.scrollFactorX;o.f-=i.scrollY*e.scrollFactorY;a.multiply(o,l)}s.save();l.setToContext(s);s.globalCompositeOperation=this.blendModes[e.blendMode];s.globalAlpha=n;s.drawImage(t.source.image,u,c,f,d,_,y,f/p,d/p);s.restore()},destroy:function(){this.gameCanvas=null;this.gameContext=null;this.game=null}});var CanvasRenderer_1=CanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpliceOne=function(e,t){if(t>=e.length){return}var i=e.length-1;var r=e[t];for(var n=t;n<i;n++){e[n]=e[n+1]}e.length=i;return r};var SpliceOne_1=SpliceOne;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ADD_EVENT$1="addtexture";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ERROR_EVENT="onerror";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LOAD_EVENT="onload";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var READY_EVENT$2="ready";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var REMOVE_EVENT$1="removetexture";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$8={ADD:ADD_EVENT$1,ERROR:ERROR_EVENT,LOAD:LOAD_EVENT,READY:READY_EVENT$2,REMOVE:REMOVE_EVENT$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Utils={getTintFromFloats:function(e,t,i,r){var n=(e*255|0)&255;var s=(t*255|0)&255;var a=(i*255|0)&255;var o=(r*255|0)&255;return(o<<24|n<<16|s<<8|a)>>>0},getTintAppendFloatAlpha:function(e,t){var i=(t*255|0)&255;return(i<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,t){var i=(e>>16|0)&255;var r=(e>>8|0)&255;var n=(e|0)&255;var s=(t*255|0)&255;return(s<<24|n<<16|r<<8|i)>>>0},getFloatsFromUintRGB:function(e){var t=(e>>16|0)&255;var i=(e>>8|0)&255;var r=(e|0)&255;return[t/255,i/255,r/255]},getComponentCount:function(e,t){var i=0;for(var r=0;r<e.length;++r){var n=e[r];if(n.type===t.FLOAT){i+=n.size}else{i+=1}}return i}};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WebGLSnapshot=function(e,t){var i=e.getContext("experimental-webgl");var r=GetFastValue_1(t,"callback");var n=GetFastValue_1(t,"type","image/png");var s=GetFastValue_1(t,"encoder",.92);var a=GetFastValue_1(t,"x",0);var o=GetFastValue_1(t,"y",0);var l=GetFastValue_1(t,"getPixel",false);var h=GetFastValue_1(t,"isFramebuffer",false);var u=h?GetFastValue_1(t,"bufferWidth",1):i.drawingBufferWidth;var c=h?GetFastValue_1(t,"bufferHeight",1):i.drawingBufferHeight;if(l){var f=new Uint8Array(4);var d=h?o:c-o;i.readPixels(a,d,1,1,i.RGBA,i.UNSIGNED_BYTE,f);r.call(null,new Color_1(f[0],f[1],f[2],f[3]/255))}else{var v=GetFastValue_1(t,"width",u);var p=GetFastValue_1(t,"height",c);var g=v*p*4;var m=new Uint8Array(g);i.readPixels(a,c-o-p,v,p,i.RGBA,i.UNSIGNED_BYTE,m);var _=CanvasPool_1.createWebGL(this,v,p);var y=_.getContext("2d");var T=y.getImageData(0,0,v,p);var x=T.data;for(var E=0;E<p;E++){for(var C=0;C<v;C++){var S=((p-E)*v+C)*4;var A=h?g-(E*v+(v-C))*4:(E*v+C)*4;x[A+0]=m[S+0];x[A+1]=m[S+1];x[A+2]=m[S+2];x[A+3]=m[S+3]}}y.putImageData(T,0,0);var b=new Image;b.onerror=function(){r.call(null);CanvasPool_1.remove(_)};b.onload=function(){r.call(null,b);CanvasPool_1.remove(_)};b.src=_.toDataURL(n,s)}};var WebGLSnapshot_1=WebGLSnapshot;var BitmapMaskFrag=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n");var BitmapMaskVert=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n");
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WebGLPipeline=new Class_1({initialize:function e(t){this.name="WebGLPipeline";this.game=t.game;this.view=t.game.canvas;this.resolution=1;this.width=0;this.height=0;this.gl=t.gl;this.vertexCount=0;this.vertexCapacity=t.vertexCapacity;this.renderer=t.renderer;this.vertexData=t.vertices?t.vertices:new ArrayBuffer(t.vertexCapacity*t.vertexSize);this.vertexBuffer=this.renderer.createVertexBuffer(t.vertices?t.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=this.renderer.createProgram(t.vertShader,t.fragShader);this.attributes=t.attributes;this.vertexSize=t.vertexSize;this.topology=t.topology;this.bytes=new Uint8Array(this.vertexData);this.vertexComponentCount=Utils.getComponentCount(t.attributes,this.gl);this.flushLocked=false;this.active=false},boot:function(){},addAttribute:function(e,t,i,r,n){this.attributes.push({name:e,size:t,type:this.renderer.glFormats[i],normalized:r,offset:n});return this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(e,t,i){this.width=e*i;this.height=t*i;this.resolution=i;return this},bind:function(){var e=this.gl;var t=this.vertexBuffer;var i=this.attributes;var r=this.program;var n=this.renderer;var s=this.vertexSize;n.setProgram(r);n.setVertexBuffer(t);for(var a=0;a<i.length;++a){var o=i[a];var l=e.getAttribLocation(r,o.name);if(l>=0){e.enableVertexAttribArray(l);e.vertexAttribPointer(l,o.size,o.type,o.normalized,s,o.offset)}else if(l!==-1){e.disableVertexAttribArray(l)}}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked){return this}this.flushLocked=true;var e=this.gl;var t=this.vertexCount;var i=this.topology;var r=this.vertexSize;if(t===0){this.flushLocked=false;return}e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,t*r));e.drawArrays(i,0,t);this.vertexCount=0;this.flushLocked=false;return this},destroy:function(){var e=this.gl;e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer);delete this.program;delete this.vertexBuffer;delete this.gl;return this},setFloat1:function(e,t){this.renderer.setFloat1(this.program,e,t);return this},setFloat2:function(e,t,i){this.renderer.setFloat2(this.program,e,t,i);return this},setFloat3:function(e,t,i,r){this.renderer.setFloat3(this.program,e,t,i,r);return this},setFloat4:function(e,t,i,r,n){this.renderer.setFloat4(this.program,e,t,i,r,n);return this},setFloat1v:function(e,t){this.renderer.setFloat1v(this.program,e,t);return this},setFloat2v:function(e,t){this.renderer.setFloat2v(this.program,e,t);return this},setFloat3v:function(e,t){this.renderer.setFloat3v(this.program,e,t);return this},setFloat4v:function(e,t){this.renderer.setFloat4v(this.program,e,t);return this},setInt1:function(e,t){this.renderer.setInt1(this.program,e,t);return this},setInt2:function(e,t,i){this.renderer.setInt2(this.program,e,t,i);return this},setInt3:function(e,t,i,r){this.renderer.setInt3(this.program,e,t,i,r);return this},setInt4:function(e,t,i,r,n){this.renderer.setInt4(this.program,e,t,i,r,n);return this},setMatrix2:function(e,t,i){this.renderer.setMatrix2(this.program,e,t,i);return this},setMatrix3:function(e,t,i){this.renderer.setMatrix3(this.program,e,t,i);return this},setMatrix4:function(e,t,i){this.renderer.setMatrix4(this.program,e,t,i);return this}});var WebGLPipeline_1=WebGLPipeline;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapMaskPipeline=new Class_1({Extends:WebGLPipeline_1,initialize:function e(t){WebGLPipeline_1.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.topology?t.topology:t.renderer.gl.TRIANGLES,vertShader:t.vertShader?t.vertShader:BitmapMaskVert,fragShader:t.fragShader?t.fragShader:BitmapMaskFrag,vertexCapacity:t.vertexCapacity?t.vertexCapacity:3,vertexSize:t.vertexSize?t.vertexSize:Float32Array.BYTES_PER_ELEMENT*2,vertices:new Float32Array([-1,+1,-1,-7,+7,+1]).buffer,attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:false,offset:0}]});this.vertexViewF32=new Float32Array(this.vertexData);this.maxQuads=1;this.resolutionDirty=true},onBind:function(){WebGLPipeline_1.prototype.onBind.call(this);var e=this.renderer;var t=this.program;if(this.resolutionDirty){e.setFloat2(t,"uResolution",this.width,this.height);e.setInt1(t,"uMainSampler",0);e.setInt1(t,"uMaskSampler",1);this.resolutionDirty=false}return this},resize:function(e,t,i){WebGLPipeline_1.prototype.resize.call(this,e,t,i);this.resolutionDirty=true;return this},beginMask:function(e,t,i){var r=this.renderer;var n=this.gl;var s=e.bitmapMask;if(s&&n){r.flush();e.prevFramebuffer=r.currentFramebuffer;r.setFramebuffer(e.mainFramebuffer);n.disable(n.STENCIL_TEST);n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT);if(r.currentCameraMask.mask!==e){r.currentMask.mask=e;r.currentMask.camera=i}}},endMask:function(e,t){var i=this.gl;var r=this.renderer;var n=e.bitmapMask;if(n&&i){r.flush();r.setFramebuffer(e.maskFramebuffer);i.clearColor(0,0,0,0);i.clear(i.COLOR_BUFFER_BIT);r.setBlendMode(0,true);n.renderWebGL(r,n,0,t);r.flush();r.setFramebuffer(e.prevFramebuffer);var s=r.getCurrentStencilMask();if(s){i.enable(i.STENCIL_TEST);s.mask.applyStencil(r,s.camera,true)}else{r.currentMask.mask=null}r.setPipeline(this);i.activeTexture(i.TEXTURE1);i.bindTexture(i.TEXTURE_2D,e.maskTexture);i.activeTexture(i.TEXTURE0);i.bindTexture(i.TEXTURE_2D,e.mainTexture);i.uniform1i(i.getUniformLocation(this.program,"uInvertMaskAlpha"),e.invertAlpha);i.drawArrays(this.topology,0,3)}}});var BitmapMaskPipeline_1=BitmapMaskPipeline;var ForwardDiffuseFrag=["#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","","}",""].join("\n");
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Earcut=earcut;function earcut(e,t,i){i=i||2;var r=t&&t.length,n=r?t[0]*i:e.length,s=linkedList(e,0,n,i,true),a=[];if(!s||s.next===s.prev)return a;var o,l,h,u,c,f,d;if(r)s=eliminateHoles(e,t,s,i);if(e.length>80*i){o=h=e[0];l=u=e[1];for(var v=i;v<n;v+=i){c=e[v];f=e[v+1];if(c<o)o=c;if(f<l)l=f;if(c>h)h=c;if(f>u)u=f}d=Math.max(h-o,u-l);d=d!==0?1/d:0}earcutLinked(s,a,i,o,l,d);return a}function linkedList(e,t,i,r,n){var s,a;if(n===signedArea(e,t,i,r)>0){for(s=t;s<i;s+=r)a=insertNode(s,e[s],e[s+1],a)}else{for(s=i-r;s>=t;s-=r)a=insertNode(s,e[s],e[s+1],a)}if(a&&equals(a,a.next)){removeNode(a);a=a.next}return a}function filterPoints(e,t){if(!e)return e;if(!t)t=e;var i=e,r;do{r=false;if(!i.steiner&&(equals(i,i.next)||area(i.prev,i,i.next)===0)){removeNode(i);i=t=i.prev;if(i===i.next)break;r=true}else{i=i.next}}while(r||i!==t);return t}function earcutLinked(e,t,i,r,n,s,a){if(!e)return;if(!a&&s)indexCurve(e,r,n,s);var o=e,l,h;while(e.prev!==e.next){l=e.prev;h=e.next;if(s?isEarHashed(e,r,n,s):isEar(e)){t.push(l.i/i);t.push(e.i/i);t.push(h.i/i);removeNode(e);e=h.next;o=h.next;continue}e=h;if(e===o){if(!a){earcutLinked(filterPoints(e),t,i,r,n,s,1)}else if(a===1){e=cureLocalIntersections(e,t,i);earcutLinked(e,t,i,r,n,s,2)}else if(a===2){splitEarcut(e,t,i,r,n,s)}break}}}function isEar(e){var t=e.prev,i=e,r=e.next;if(area(t,i,r)>=0)return false;var n=e.next.next;while(n!==e.prev){if(pointInTriangle(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return false;n=n.next}return true}function isEarHashed(e,t,i,r){var n=e.prev,s=e,a=e.next;if(area(n,s,a)>=0)return false;var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,l=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,h=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,u=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y;var c=zOrder(o,l,t,i,r),f=zOrder(h,u,t,i,r);var d=e.prevZ,v=e.nextZ;while(d&&d.z>=c&&v&&v.z<=f){if(d!==e.prev&&d!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return false;d=d.prevZ;if(v!==e.prev&&v!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return false;v=v.nextZ}while(d&&d.z>=c){if(d!==e.prev&&d!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,a.x,a.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return false;d=d.prevZ}while(v&&v.z<=f){if(v!==e.prev&&v!==e.next&&pointInTriangle(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return false;v=v.nextZ}return true}function cureLocalIntersections(e,t,i){var r=e;do{var n=r.prev,s=r.next.next;if(!equals(n,s)&&intersects(n,r,r.next,s)&&locallyInside(n,s)&&locallyInside(s,n)){t.push(n.i/i);t.push(r.i/i);t.push(s.i/i);removeNode(r);removeNode(r.next);r=e=s}r=r.next}while(r!==e);return r}function splitEarcut(e,t,i,r,n,s){var a=e;do{var o=a.next.next;while(o!==a.prev){if(a.i!==o.i&&isValidDiagonal(a,o)){var l=splitPolygon(a,o);a=filterPoints(a,a.next);l=filterPoints(l,l.next);earcutLinked(a,t,i,r,n,s);earcutLinked(l,t,i,r,n,s);return}o=o.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,i,r){var n=[],s,a,o,l,h;for(s=0,a=t.length;s<a;s++){o=t[s]*r;l=s<a-1?t[s+1]*r:e.length;h=linkedList(e,o,l,r,false);if(h===h.next)h.steiner=true;n.push(getLeftmost(h))}n.sort(compareX);for(s=0;s<n.length;s++){eliminateHole(n[s],i);i=filterPoints(i,i.next)}return i}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){t=findHoleBridge(e,t);if(t){var i=splitPolygon(t,e);filterPoints(i,i.next)}}function findHoleBridge(e,t){var i=t,r=e.x,n=e.y,s=-Infinity,a;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var o=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>s){s=o;if(o===r){if(n===i.y)return i;if(n===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!a)return null;if(r===s)return a.prev;var l=a,h=a.x,u=a.y,c=Infinity,f;i=a.next;while(i!==l){if(r>=i.x&&i.x>=h&&r!==i.x&&pointInTriangle(n<u?r:s,n,h,u,n<u?s:r,n,i.x,i.y)){f=Math.abs(n-i.y)/(r-i.x);if((f<c||f===c&&i.x>a.x)&&locallyInside(i,e)){a=i;c=f}}i=i.next}return a}function indexCurve(e,t,i,r){var n=e;do{if(n.z===null)n.z=zOrder(n.x,n.y,t,i,r);n.prevZ=n.prev;n.nextZ=n.next;n=n.next}while(n!==e);n.prevZ.nextZ=null;n.prevZ=null;sortLinked(n)}function sortLinked(e){var t,i,r,n,s,a,o,l,h=1;do{i=e;e=null;s=null;a=0;while(i){a++;r=i;o=0;for(t=0;t<h;t++){o++;r=r.nextZ;if(!r)break}l=h;while(o>0||l>0&&r){if(o!==0&&(l===0||!r||i.z<=r.z)){n=i;i=i.nextZ;o--}else{n=r;r=r.nextZ;l--}if(s)s.nextZ=n;else e=n;n.prevZ=s;s=n}i=r}s.nextZ=null;h*=2}while(a>1);return e}function zOrder(e,t,i,r,n){e=32767*(e-i)*n;t=32767*(t-r)*n;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function getLeftmost(e){var t=e,i=e;do{if(t.x<i.x)i=t;t=t.next}while(t!==e);return i}function pointInTriangle(e,t,i,r,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(r-o)-(i-a)*(t-o)>=0&&(i-a)*(s-o)-(n-a)*(r-o)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,i,r){if(equals(e,t)&&equals(i,r)||equals(e,r)&&equals(i,t))return true;return area(e,t,i)>0!==area(e,t,r)>0&&area(i,r,e)>0!==area(i,r,t)>0}function intersectsPolygon(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&intersects(i,i.next,e,t))return true;i=i.next}while(i!==e);return false}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var i=e,r=false,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do{if(i.y>s!==i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x)r=!r;i=i.next}while(i!==e);return r}function splitPolygon(e,t){var i=new Node(e.i,e.x,e.y),r=new Node(t.i,t.x,t.y),n=e.next,s=t.prev;e.next=t;t.prev=e;i.next=n;n.prev=i;r.next=i;i.prev=r;s.next=r;r.prev=s;return r}function insertNode(e,t,i,r){var n=new Node(e,t,i);if(!r){n.prev=n;n.next=n}else{n.next=r.next;n.prev=r;r.next.prev=n;r.next=n}return n}function removeNode(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function Node(e,t,i){this.i=e;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}earcut.deviation=function(e,t,i,r){var n=t&&t.length;var s=n?t[0]*i:e.length;var a=Math.abs(signedArea(e,0,s,i));if(n){for(var o=0,l=t.length;o<l;o++){var h=t[o]*i;var u=o<l-1?t[o+1]*i:e.length;a-=Math.abs(signedArea(e,h,u,i))}}var c=0;for(o=0;o<r.length;o+=3){var f=r[o]*i;var d=r[o+1]*i;var v=r[o+2]*i;c+=Math.abs((e[f]-e[v])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[v+1]-e[f+1]))}return a===0&&c===0?0:Math.abs((c-a)/a)};function signedArea(e,t,i,r){var n=0;for(var s=t,a=i-r;s<i;s+=r){n+=(e[a]-e[s])*(e[s+1]+e[a+1]);a=s}return n}earcut.flatten=function(e){var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0;for(var n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++){for(var a=0;a<t;a++)i.vertices.push(e[n][s][a])}if(n>0){r+=e[n-1].length;i.holes.push(r)}}return i};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ModelViewProjection={modelMatrixDirty:false,viewMatrixDirty:false,projectionMatrixDirty:false,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){this.modelMatrixDirty=true;this.viewMatrixDirty=true;this.projectionMatrixDirty=true;this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);return this},mvpUpdate:function(){var e=this.program;if(this.modelMatrixDirty){this.renderer.setMatrix4(e,"uModelMatrix",false,this.modelMatrix);this.modelMatrixDirty=false}if(this.viewMatrixDirty){this.renderer.setMatrix4(e,"uViewMatrix",false,this.viewMatrix);this.viewMatrixDirty=false}if(this.projectionMatrixDirty){this.renderer.setMatrix4(e,"uProjectionMatrix",false,this.projectionMatrix);this.projectionMatrixDirty=false}return this},modelIdentity:function(){var e=this.modelMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.modelMatrixDirty=true;return this},modelScale:function(e,t,i){var r=this.modelMatrix;r[0]=r[0]*e;r[1]=r[1]*e;r[2]=r[2]*e;r[3]=r[3]*e;r[4]=r[4]*t;r[5]=r[5]*t;r[6]=r[6]*t;r[7]=r[7]*t;r[8]=r[8]*i;r[9]=r[9]*i;r[10]=r[10]*i;r[11]=r[11]*i;this.modelMatrixDirty=true;return this},modelTranslate:function(e,t,i){var r=this.modelMatrix;r[12]=r[0]*e+r[4]*t+r[8]*i+r[12];r[13]=r[1]*e+r[5]*t+r[9]*i+r[13];r[14]=r[2]*e+r[6]*t+r[10]*i+r[14];r[15]=r[3]*e+r[7]*t+r[11]*i+r[15];this.modelMatrixDirty=true;return this},modelRotateX:function(e){var t=this.modelMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[4];var s=t[5];var a=t[6];var o=t[7];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[4]=n*r+l*i;t[5]=s*r+h*i;t[6]=a*r+u*i;t[7]=o*r+c*i;t[8]=l*r-n*i;t[9]=h*r-s*i;t[10]=u*r-a*i;t[11]=c*r-o*i;this.modelMatrixDirty=true;return this},modelRotateY:function(e){var t=this.modelMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[0]=n*r-l*i;t[1]=s*r-h*i;t[2]=a*r-u*i;t[3]=o*r-c*i;t[8]=n*i+l*r;t[9]=s*i+h*r;t[10]=a*i+u*r;t[11]=o*i+c*r;this.modelMatrixDirty=true;return this},modelRotateZ:function(e){var t=this.modelMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[4];var h=t[5];var u=t[6];var c=t[7];t[0]=n*r+l*i;t[1]=s*r+h*i;t[2]=a*r+u*i;t[3]=o*r+c*i;t[4]=l*r-n*i;t[5]=h*r-s*i;t[6]=u*r-a*i;t[7]=c*r-o*i;this.modelMatrixDirty=true;return this},viewIdentity:function(){var e=this.viewMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.viewMatrixDirty=true;return this},viewScale:function(e,t,i){var r=this.viewMatrix;r[0]=r[0]*e;r[1]=r[1]*e;r[2]=r[2]*e;r[3]=r[3]*e;r[4]=r[4]*t;r[5]=r[5]*t;r[6]=r[6]*t;r[7]=r[7]*t;r[8]=r[8]*i;r[9]=r[9]*i;r[10]=r[10]*i;r[11]=r[11]*i;this.viewMatrixDirty=true;return this},viewTranslate:function(e,t,i){var r=this.viewMatrix;r[12]=r[0]*e+r[4]*t+r[8]*i+r[12];r[13]=r[1]*e+r[5]*t+r[9]*i+r[13];r[14]=r[2]*e+r[6]*t+r[10]*i+r[14];r[15]=r[3]*e+r[7]*t+r[11]*i+r[15];this.viewMatrixDirty=true;return this},viewRotateX:function(e){var t=this.viewMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[4];var s=t[5];var a=t[6];var o=t[7];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[4]=n*r+l*i;t[5]=s*r+h*i;t[6]=a*r+u*i;t[7]=o*r+c*i;t[8]=l*r-n*i;t[9]=h*r-s*i;t[10]=u*r-a*i;t[11]=c*r-o*i;this.viewMatrixDirty=true;return this},viewRotateY:function(e){var t=this.viewMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[8];var h=t[9];var u=t[10];var c=t[11];t[0]=n*r-l*i;t[1]=s*r-h*i;t[2]=a*r-u*i;t[3]=o*r-c*i;t[8]=n*i+l*r;t[9]=s*i+h*r;t[10]=a*i+u*r;t[11]=o*i+c*r;this.viewMatrixDirty=true;return this},viewRotateZ:function(e){var t=this.viewMatrix;var i=Math.sin(e);var r=Math.cos(e);var n=t[0];var s=t[1];var a=t[2];var o=t[3];var l=t[4];var h=t[5];var u=t[6];var c=t[7];t[0]=n*r+l*i;t[1]=s*r+h*i;t[2]=a*r+u*i;t[3]=o*r+c*i;t[4]=l*r-n*i;t[5]=h*r-s*i;t[6]=u*r-a*i;t[7]=c*r-o*i;this.viewMatrixDirty=true;return this},viewLoad2D:function(e){var t=this.viewMatrix;t[0]=e[0];t[1]=e[1];t[2]=0;t[3]=0;t[4]=e[2];t[5]=e[3];t[6]=0;t[7]=0;t[8]=e[4];t[9]=e[5];t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;this.viewMatrixDirty=true;return this},viewLoad:function(e){var t=this.viewMatrix;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];this.viewMatrixDirty=true;return this},projIdentity:function(){var e=this.projectionMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.projectionMatrixDirty=true;return this},projOrtho:function(e,t,i,r,n,s){var a=this.projectionMatrix;var o=1/(e-t);var l=1/(i-r);var h=1/(n-s);a[0]=-2*o;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*h;a[11]=0;a[12]=(e+t)*o;a[13]=(r+i)*l;a[14]=(s+n)*h;a[15]=1;this.projectionMatrixDirty=true;return this},projPersp:function(e,t,i,r){var n=this.projectionMatrix;var s=1/Math.tan(e/2);var a=1/(i-r);n[0]=s/t;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=s;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=(r+i)*a;n[11]=-1;n[12]=0;n[13]=0;n[14]=2*r*i*a;n[15]=0;this.projectionMatrixDirty=true;return this}};var ModelViewProjection_1=ModelViewProjection;var TextureTintFrag=["#define SHADER_NAME PHASER_TEXTURE_TINT_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);","    vec4 color = texture;","","    if (outTintEffect == 0.0)","    {","        //  Multiply texture tint","        color = texture * texel;","    }","    else if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);","        color.a = texture.a * texel.a;","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n");var TextureTintVert=["#define SHADER_NAME PHASER_TEXTURE_TINT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform mat4 uModelMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}","",""].join("\n");
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextureTintPipeline=new Class_1({Extends:WebGLPipeline_1,Mixins:[ModelViewProjection_1],initialize:function e(t){var i=t.renderer.config;WebGLPipeline_1.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:GetFastValue_1(t,"topology",t.renderer.gl.TRIANGLES),vertShader:GetFastValue_1(t,"vertShader",TextureTintVert),fragShader:GetFastValue_1(t,"fragShader",TextureTintFrag),vertexCapacity:GetFastValue_1(t,"vertexCapacity",6*i.batchSize),vertexSize:GetFastValue_1(t,"vertexSize",Float32Array.BYTES_PER_ELEMENT*5+Uint8Array.BYTES_PER_ELEMENT*4),attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:false,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:false,offset:Float32Array.BYTES_PER_ELEMENT*2},{name:"inTintEffect",size:1,type:t.renderer.gl.FLOAT,normalized:false,offset:Float32Array.BYTES_PER_ELEMENT*4},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:true,offset:Float32Array.BYTES_PER_ELEMENT*5}]});this.vertexViewF32=new Float32Array(this.vertexData);this.vertexViewU32=new Uint32Array(this.vertexData);this.maxQuads=i.batchSize;this.batches=[];this._tempMatrix1=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempMatrix3=new TransformMatrix_1;this._tempMatrix4=new TransformMatrix_1;this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}];this.tintEffect=2;this.strokeTint={TL:0,TR:0,BL:0,BR:0};this.fillTint={TL:0,TR:0,BL:0,BR:0};this.currentFrame={u0:0,v0:0,u1:1,v1:1};this.firstQuad=[0,0,0,0,0];this.prevQuad=[0,0,0,0,0];this.polygonCache=[];this.mvpInit()},onBind:function(){WebGLPipeline_1.prototype.onBind.call(this);this.mvpUpdate();return this},resize:function(e,t,i){WebGLPipeline_1.prototype.resize.call(this,e,t,i);this.projOrtho(0,this.width,this.height,0,-1e3,1e3);return this},setTexture2D:function(e,t){if(e===undefined){e=this.renderer.blankTexture.glTexture}if(t===undefined){t=0}if(this.requireTextureBatch(e,t)){this.pushBatch(e,t)}return this},requireTextureBatch:function(e,t){var i=this.batches;var r=i.length;if(r>0){var n=t>0?i[r-1].textures[t-1]:i[r-1].texture;return!(n===e)}return true},pushBatch:function(e,t){if(t===0){this.batches.push({first:this.vertexCount,texture:e,textures:[]})}else{var i=[];i[t-1]=e;this.batches.push({first:this.vertexCount,texture:null,textures:i})}},flush:function(){if(this.flushLocked){return this}this.flushLocked=true;var e=this.gl;var t=this.vertexCount;var i=this.topology;var r=this.vertexSize;var n=this.renderer;var s=this.batches;var a=s.length;var o=0;var l=null;var h;var u;var c;if(a===0||t===0){this.flushLocked=false;return this}e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,t*r));for(var f=0;f<a-1;f++){l=s[f];h=s[f+1];if(l.textures.length>0){for(u=0;u<l.textures.length;++u){c=l.textures[u];if(c){n.setTexture2D(c,1+u,false)}}e.activeTexture(e.TEXTURE0)}o=h.first-l.first;if(l.texture===null||o<=0){continue}n.setTexture2D(l.texture,0,false);e.drawArrays(i,l.first,o)}l=s[a-1];if(l.textures.length>0){for(u=0;u<l.textures.length;++u){c=l.textures[u];if(c){n.setTexture2D(c,1+u,false)}}e.activeTexture(e.TEXTURE0)}o=t-l.first;if(l.texture&&o>0){n.setTexture2D(l.texture,0,false);e.drawArrays(i,l.first,o)}this.vertexCount=0;s.length=0;this.flushLocked=false;return this},batchSprite:function(e,t,i){this.renderer.setPipeline(this);var r=this._tempMatrix1;var n=this._tempMatrix2;var s=this._tempMatrix3;var a=e.frame;var o=a.glTexture;var l=a.u0;var h=a.v0;var u=a.u1;var c=a.v1;var f=a.x;var d=a.y;var v=a.cutWidth;var p=a.cutHeight;var g=a.customPivot;var m=e.displayOriginX;var _=e.displayOriginY;var y=-m+f;var T=-_+d;if(e.isCropped){var x=e._crop;if(x.flipX!==e.flipX||x.flipY!==e.flipY){a.updateCropUVs(x,e.flipX,e.flipY)}l=x.u0;h=x.v0;u=x.u1;c=x.v1;v=x.width;p=x.height;f=x.x;d=x.y;y=-m+f;T=-_+d}var E=1;var C=1;if(e.flipX){if(!g){y+=-a.realWidth+m*2}E=-1}if(e.flipY||a.source.isGLTexture&&!o.flipY){if(!g){T+=-a.realHeight+_*2}C=-1}n.applyITRS(e.x,e.y,e.rotation,e.scaleX*E,e.scaleY*C);r.copyFrom(t.matrix);if(i){r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY);n.e=e.x;n.f=e.y;r.multiply(n,s)}else{n.e-=t.scrollX*e.scrollFactorX;n.f-=t.scrollY*e.scrollFactorY;r.multiply(n,s)}var S=y+v;var A=T+p;var b=s.getX(y,T);var w=s.getY(y,T);var P=s.getX(y,A);var R=s.getY(y,A);var O=s.getX(S,A);var M=s.getY(S,A);var F=s.getX(S,T);var L=s.getY(S,T);var G=Utils.getTintAppendFloatAlpha(e._tintTL,t.alpha*e._alphaTL);var V=Utils.getTintAppendFloatAlpha(e._tintTR,t.alpha*e._alphaTR);var I=Utils.getTintAppendFloatAlpha(e._tintBL,t.alpha*e._alphaBL);var D=Utils.getTintAppendFloatAlpha(e._tintBR,t.alpha*e._alphaBR);if(t.roundPixels){b=Math.round(b);w=Math.round(w);P=Math.round(P);R=Math.round(R);O=Math.round(O);M=Math.round(M);F=Math.round(F);L=Math.round(L)}this.setTexture2D(o,0);var B=e._isTinted&&e.tintFill;this.batchQuad(b,w,P,R,O,M,F,L,l,h,u,c,G,V,I,D,B,o,0)},batchQuad:function(e,t,i,r,n,s,a,o,l,h,u,c,f,d,v,p,g,m,_){var y=false;if(this.vertexCount+6>this.vertexCapacity){this.flush();y=true;this.setTexture2D(m,_)}var T=this.vertexViewF32;var x=this.vertexViewU32;var E=this.vertexCount*this.vertexComponentCount-1;T[++E]=e;T[++E]=t;T[++E]=l;T[++E]=h;T[++E]=g;x[++E]=f;T[++E]=i;T[++E]=r;T[++E]=l;T[++E]=c;T[++E]=g;x[++E]=v;T[++E]=n;T[++E]=s;T[++E]=u;T[++E]=c;T[++E]=g;x[++E]=p;T[++E]=e;T[++E]=t;T[++E]=l;T[++E]=h;T[++E]=g;x[++E]=f;T[++E]=n;T[++E]=s;T[++E]=u;T[++E]=c;T[++E]=g;x[++E]=p;T[++E]=a;T[++E]=o;T[++E]=u;T[++E]=h;T[++E]=g;x[++E]=d;this.vertexCount+=6;return y},batchTri:function(e,t,i,r,n,s,a,o,l,h,u,c,f,d,v,p){var g=false;if(this.vertexCount+3>this.vertexCapacity){this.flush();this.setTexture2D(v,p);g=true}var m=this.vertexViewF32;var _=this.vertexViewU32;var y=this.vertexCount*this.vertexComponentCount-1;m[++y]=e;m[++y]=t;m[++y]=a;m[++y]=o;m[++y]=d;_[++y]=u;m[++y]=i;m[++y]=r;m[++y]=a;m[++y]=h;m[++y]=d;_[++y]=c;m[++y]=n;m[++y]=s;m[++y]=l;m[++y]=h;m[++y]=d;_[++y]=f;this.vertexCount+=3;return g},batchTexture:function(e,t,i,r,n,s,a,o,l,h,u,c,f,d,v,p,g,m,_,y,T,x,E,C,S,A,b,w,P,R,O){this.renderer.setPipeline(this,e);var M=this._tempMatrix1;var F=this._tempMatrix2;var L=this._tempMatrix3;var G=m/i+b;var V=_/r+w;var I=(m+y)/i+b;var D=(_+T)/r+w;var B=a;var N=o;var $=-p;var k=-g;if(e.isCropped){var Y=e._crop;B=Y.width;N=Y.height;a=Y.width;o=Y.height;m=Y.x;_=Y.y;var W=m;var X=_;if(c){W=y-Y.x-Y.width}if(f&&!t.isRenderTexture){X=T-Y.y-Y.height}G=W/i+b;V=X/r+w;I=(W+Y.width)/i+b;D=(X+Y.height)/r+w;$=-p+m;k=-g+_}f=f^(!O&&t.isRenderTexture?1:0);if(c){B*=-1;$+=a}if(f){N*=-1;k+=o}var U=$+B;var z=k+N;F.applyITRS(n,s,u,l,h);M.copyFrom(P.matrix);if(R){M.multiplyWithOffset(R,-P.scrollX*d,-P.scrollY*v);F.e=n;F.f=s;M.multiply(F,L)}else{F.e-=P.scrollX*d;F.f-=P.scrollY*v;M.multiply(F,L)}var H=L.getX($,k);var j=L.getY($,k);var q=L.getX($,z);var K=L.getY($,z);var J=L.getX(U,z);var Z=L.getY(U,z);var Q=L.getX(U,k);var ee=L.getY(U,k);if(P.roundPixels){H=Math.round(H);j=Math.round(j);q=Math.round(q);K=Math.round(K);J=Math.round(J);Z=Math.round(Z);Q=Math.round(Q);ee=Math.round(ee)}this.setTexture2D(t,0);this.batchQuad(H,j,q,K,J,Z,Q,ee,G,V,I,D,x,E,C,S,A,t,0)},batchTextureFrame:function(e,t,i,r,n,s,a){this.renderer.setPipeline(this);var o=this._tempMatrix1.copyFrom(s);var l=this._tempMatrix2;var h=t+e.width;var u=i+e.height;if(a){o.multiply(a,l)}else{l=o}var c=l.getX(t,i);var f=l.getY(t,i);var d=l.getX(t,u);var v=l.getY(t,u);var p=l.getX(h,u);var g=l.getY(h,u);var m=l.getX(h,i);var _=l.getY(h,i);this.setTexture2D(e.glTexture,0);r=Utils.getTintAppendFloatAlpha(r,n);this.batchQuad(c,f,d,v,p,g,m,_,e.u0,e.v0,e.u1,e.v1,r,r,r,r,0,e.glTexture,0)},drawFillRect:function(e,t,i,r,n,s){var a=e+i;var o=t+r;this.setTexture2D();var l=Utils.getTintAppendFloatAlphaAndSwap(n,s);this.batchQuad(e,t,e,o,a,o,a,t,0,0,1,1,l,l,l,l,2)},batchFillRect:function(e,t,i,r,n,s){this.renderer.setPipeline(this);var a=this._tempMatrix3;if(s){s.multiply(n,a)}var o=e+i;var l=t+r;var h=a.getX(e,t);var u=a.getY(e,t);var c=a.getX(e,l);var f=a.getY(e,l);var d=a.getX(o,l);var v=a.getY(o,l);var p=a.getX(o,t);var g=a.getY(o,t);var m=this.currentFrame;var _=m.u0;var y=m.v0;var T=m.u1;var x=m.v1;this.batchQuad(h,u,c,f,d,v,p,g,_,y,T,x,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(e,t,i,r,n,s,a,o){this.renderer.setPipeline(this);var l=this._tempMatrix3;if(o){o.multiply(a,l)}var h=l.getX(e,t);var u=l.getY(e,t);var c=l.getX(i,r);var f=l.getY(i,r);var d=l.getX(n,s);var v=l.getY(n,s);var p=this.currentFrame;var g=p.u0;var m=p.v0;var _=p.u1;var y=p.v1;this.batchTri(h,u,c,f,d,v,g,m,_,y,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(e,t,i,r,n,s,a,o,l){var h=this.tempTriangle;h[0].x=e;h[0].y=t;h[0].width=a;h[1].x=i;h[1].y=r;h[1].width=a;h[2].x=n;h[2].y=s;h[2].width=a;h[3].x=e;h[3].y=t;h[3].width=a;this.batchStrokePath(h,a,false,o,l)},batchFillPath:function(e,t,i){this.renderer.setPipeline(this);var r=this._tempMatrix3;if(i){i.multiply(t,r)}var n=e.length;var s=this.polygonCache;var a;var o;var l=this.fillTint.TL;var h=this.fillTint.TR;var u=this.fillTint.BL;var c=this.tintEffect;for(var f=0;f<n;++f){o=e[f];s.push(o.x,o.y)}a=Earcut(s);n=a.length;var d=this.currentFrame;for(var v=0;v<n;v+=3){var p=a[v+0]*2;var g=a[v+1]*2;var m=a[v+2]*2;var _=s[p+0];var y=s[p+1];var T=s[g+0];var x=s[g+1];var E=s[m+0];var C=s[m+1];var S=r.getX(_,y);var A=r.getY(_,y);var b=r.getX(T,x);var w=r.getY(T,x);var P=r.getX(E,C);var R=r.getY(E,C);var O=d.u0;var M=d.v0;var F=d.u1;var L=d.v1;this.batchTri(S,A,b,w,P,R,O,M,F,L,l,h,u,c)}s.length=0},batchStrokePath:function(e,t,i,r,n){this.renderer.setPipeline(this);this.prevQuad[4]=0;this.firstQuad[4]=0;var s=e.length-1;for(var a=0;a<s;a++){var o=e[a];var l=e[a+1];this.batchLine(o.x,o.y,l.x,l.y,o.width/2,l.width/2,t,a,!i&&a===s-1,r,n)}},batchLine:function(e,t,i,r,n,s,a,o,l,h,u){this.renderer.setPipeline(this);var c=this._tempMatrix3;if(u){u.multiply(h,c)}var f=i-e;var d=r-t;var v=Math.sqrt(f*f+d*d);var p=n*(r-t)/v;var g=n*(e-i)/v;var m=s*(r-t)/v;var _=s*(e-i)/v;var y=i-m;var T=r-_;var x=e-p;var E=t-g;var C=i+m;var S=r+_;var A=e+p;var b=t+g;var w=c.getX(y,T);var P=c.getY(y,T);var R=c.getX(x,E);var O=c.getY(x,E);var M=c.getX(C,S);var F=c.getY(C,S);var L=c.getX(A,b);var G=c.getY(A,b);var V=this.strokeTint;var I=this.tintEffect;var D=V.TL;var B=V.TR;var N=V.BL;var $=V.BR;var k=this.currentFrame;var Y=k.u0;var W=k.v0;var X=k.u1;var U=k.v1;this.batchQuad(L,G,R,O,w,P,M,F,Y,W,X,U,D,B,N,$,I);if(a<=2){return}var z=this.prevQuad;var H=this.firstQuad;if(o>0&&z[4]){this.batchQuad(L,G,R,O,z[0],z[1],z[2],z[3],Y,W,X,U,D,B,N,$,I)}else{H[0]=L;H[1]=G;H[2]=R;H[3]=O;H[4]=1}if(l&&H[4]){this.batchQuad(w,P,M,F,H[0],H[1],H[2],H[3],Y,W,X,U,D,B,N,$,I)}else{z[0]=w;z[1]=P;z[2]=M;z[3]=F;z[4]=1}}});var TextureTintPipeline_1=TextureTintPipeline;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LIGHT_COUNT=10;var ForwardDiffuseLightPipeline=new Class_1({Extends:TextureTintPipeline_1,initialize:function e(t){LIGHT_COUNT=t.maxLights;t.fragShader=ForwardDiffuseFrag.replace("%LIGHT_COUNT%",LIGHT_COUNT.toString());TextureTintPipeline_1.call(this,t);this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function(e){TextureTintPipeline_1.prototype.onBind.call(this);var t=this.renderer;var i=this.program;this.mvpUpdate();t.setInt1(i,"uNormSampler",1);t.setFloat2(i,"uResolution",this.width,this.height);if(e){this.setNormalMap(e)}return this},onRender:function(e,t){this.active=false;var i=e.sys.lights;if(!i||i.lights.length<=0||!i.active){return this}var r=i.cull(t);var n=Math.min(r.length,LIGHT_COUNT);if(n===0){return this}this.active=true;var s=this.renderer;var a=this.program;var o=t.matrix;var l={x:0,y:0};var h=s.height;var u;for(u=0;u<LIGHT_COUNT;++u){s.setFloat1(a,"uLights["+u+"].radius",0)}s.setFloat4(a,"uCamera",t.x,t.y,t.rotation,t.zoom);s.setFloat3(a,"uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b);for(u=0;u<n;++u){var c=r[u];var f="uLights["+u+"].";o.transformPoint(c.x,c.y,l);s.setFloat2(a,f+"position",l.x-t.scrollX*c.scrollFactorX*t.zoom,h-(l.y-t.scrollY*c.scrollFactorY*t.zoom));s.setFloat3(a,f+"color",c.r,c.g,c.b);s.setFloat1(a,f+"intensity",c.intensity);s.setFloat1(a,f+"radius",c.radius)}return this},batchTexture:function(e,t,i,r,n,s,a,o,l,h,u,c,f,d,v,p,g,m,_,y,T,x,E,C,S,A,b,w,P,R){if(!this.active){return}this.renderer.setPipeline(this);var O;if(e.displayTexture){O=e.displayTexture.dataSource[e.displayFrame.sourceIndex]}else if(e.texture){O=e.texture.dataSource[e.frame.sourceIndex]}else if(e.tileset){O=e.tileset.image.dataSource[0]}if(!O){console.warn("Normal map missing or invalid");return}this.setTexture2D(O.glTexture,1);this.setNormalMapRotation(u);var M=this._tempMatrix1;var F=this._tempMatrix2;var L=this._tempMatrix3;var G=m/i+b;var V=_/r+w;var I=(m+y)/i+b;var D=(_+T)/r+w;var B=a;var N=o;var $=-p;var k=-g;if(e.isCropped){var Y=e._crop;B=Y.width;N=Y.height;a=Y.width;o=Y.height;m=Y.x;_=Y.y;var W=m;var X=_;if(c){W=y-Y.x-Y.width}if(f&&!t.isRenderTexture){X=T-Y.y-Y.height}G=W/i+b;V=X/r+w;I=(W+Y.width)/i+b;D=(X+Y.height)/r+w;$=-p+m;k=-g+_}f=f^(t.isRenderTexture?1:0);if(c){B*=-1;$+=a}if(f){N*=-1;k+=o}var U=$+B;var z=k+N;F.applyITRS(n,s,u,l,h);M.copyFrom(P.matrix);if(R){M.multiplyWithOffset(R,-P.scrollX*d,-P.scrollY*v);F.e=n;F.f=s;M.multiply(F,L)}else{F.e-=P.scrollX*d;F.f-=P.scrollY*v;M.multiply(F,L)}var H=L.getX($,k);var j=L.getY($,k);var q=L.getX($,z);var K=L.getY($,z);var J=L.getX(U,z);var Z=L.getY(U,z);var Q=L.getX(U,k);var ee=L.getY(U,k);if(P.roundPixels){H=Math.round(H);j=Math.round(j);q=Math.round(q);K=Math.round(K);J=Math.round(J);Z=Math.round(Z);Q=Math.round(Q);ee=Math.round(ee)}this.setTexture2D(t,0);this.batchQuad(H,j,q,K,J,Z,Q,ee,G,V,I,D,x,E,C,S,A,t,0)},setNormalMap:function(e){if(!this.active||!e){return}var t;if(e.texture){t=e.texture.dataSource[e.frame.sourceIndex]}if(!t){t=this.defaultNormalMap}this.setTexture2D(t.glTexture,1);this.renderer.setPipeline(e.defaultPipeline)},setNormalMapRotation:function(e){var t=this.inverseRotationMatrix;if(e){var i=-e;var r=Math.cos(i);var n=Math.sin(i);t[1]=n;t[3]=-n;t[0]=t[4]=r}else{t[0]=t[4]=1;t[1]=t[3]=0}this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",false,t)},batchSprite:function(e,t,i){if(!this.active){return}var r=e.texture.dataSource[e.frame.sourceIndex];if(r){this.renderer.setPipeline(this);this.setTexture2D(r.glTexture,1);this.setNormalMapRotation(e.rotation);TextureTintPipeline_1.prototype.batchSprite.call(this,e,t,i)}}});ForwardDiffuseLightPipeline.LIGHT_COUNT=LIGHT_COUNT;var ForwardDiffuseLightPipeline_1=ForwardDiffuseLightPipeline;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WebGLRenderer=new Class_1({initialize:function e(t){var i=t.config;var r={alpha:i.transparent,desynchronized:i.desynchronized,depth:false,antialias:i.antialias,premultipliedAlpha:i.premultipliedAlpha,stencil:true,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:r,resolution:i.resolution,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights};this.game=t;this.type=_const.WEBGL;this.width=0;this.height=0;this.canvas=t.canvas;this.blendModes=[];this.nativeTextures=[];this.contextLost=false;this.pipelines=null;this.snapshotState={x:0,y:0,width:1,height:1,getPixel:false,callback:null,type:"image/png",encoder:.92,isFramebuffer:false,bufferWidth:0,bufferHeight:0};this.currentActiveTextureUnit=0;this.currentTextures=new Array(16);this.currentFramebuffer=null;this.currentPipeline=null;this.currentProgram=null;this.currentVertexBuffer=null;this.currentIndexBuffer=null;this.currentBlendMode=Infinity;this.currentScissorEnabled=false;this.currentScissor=null;this.scissorStack=[];this.contextLostHandler=NOOP_1;this.contextRestoredHandler=NOOP_1;this.gl=null;this.supportedExtensions=null;this.extensions={};this.glFormats=[];this.compression={ETC1:false,PVRTC:false,S3TC:false};this.drawingBufferHeight=0;this.blankTexture=null;this.defaultCamera=new BaseCamera_1(0,0,0,0);this._tempMatrix1=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempMatrix3=new TransformMatrix_1;this._tempMatrix4=new TransformMatrix_1;this.maskCount=0;this.maskStack=[];this.currentMask={mask:null,camera:null};this.currentCameraMask={mask:null,camera:null};this.glFuncMap=null;this.currentType="";this.newType=false;this.nextTypeMatch=false;this.init(this.config)},init:function(e){var t;var i=this.game;var r=this.canvas;var n=e.backgroundColor;if(i.config.context){t=i.config.context}else{t=r.getContext("webgl",e.contextCreation)||r.getContext("experimental-webgl",e.contextCreation)}if(!t||t.isContextLost()){this.contextLost=true;throw new Error("WebGL unsupported")}this.gl=t;var s=this;this.contextLostHandler=function(e){s.contextLost=true;s.game.events.emit(events$1.CONTEXT_LOST,s);e.preventDefault()};this.contextRestoredHandler=function(){s.contextLost=false;s.init(s.config);s.game.events.emit(events$1.CONTEXT_RESTORED,s)};r.addEventListener("webglcontextlost",this.contextLostHandler,false);r.addEventListener("webglcontextrestored",this.contextRestoredHandler,false);i.context=t;for(var a=0;a<=27;a++){this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD})}this.blendModes[1].func=[t.ONE,t.DST_ALPHA];this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA];this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR];this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT};this.glFormats[0]=t.BYTE;this.glFormats[1]=t.SHORT;this.glFormats[2]=t.UNSIGNED_BYTE;this.glFormats[3]=t.UNSIGNED_SHORT;this.glFormats[4]=t.FLOAT;this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:true},mat3:{func:t.uniformMatrix3fv,length:1,matrix:true},mat4:{func:t.uniformMatrix4fv,length:1,matrix:true},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var o=t.getSupportedExtensions();if(!e.maxTextures){e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}if(!e.maxTextureSize){e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}var l="WEBGL_compressed_texture_";var h="WEBKIT_"+l;this.compression.ETC1=t.getExtension(l+"etc1")||t.getExtension(h+"etc1");this.compression.PVRTC=t.getExtension(l+"pvrtc")||t.getExtension(h+"pvrtc");this.compression.S3TC=t.getExtension(l+"s3tc")||t.getExtension(h+"s3tc");this.supportedExtensions=o;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);t.enable(t.BLEND);t.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL);for(var u=0;u<this.currentTextures.length;++u){this.currentTextures[u]=null}this.pipelines={};this.addPipeline("TextureTintPipeline",new TextureTintPipeline_1({game:i,renderer:this}));this.addPipeline("BitmapMaskPipeline",new BitmapMaskPipeline_1({game:i,renderer:this}));this.addPipeline("Light2D",new ForwardDiffuseLightPipeline_1({game:i,renderer:this,maxLights:e.maxLights}));this.setBlendMode(_const.BlendModes.NORMAL);i.textures.once(events$8.READY,this.boot,this);return this},boot:function(){for(var e in this.pipelines){this.pipelines[e].boot()}var t=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=t;this.blankTexture=t;var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null);i.enable(i.SCISSOR_TEST);this.setPipeline(this.pipelines.TextureTintPipeline);this.game.scale.on(events$6.RESIZE,this.onResize,this);var r=this.game.scale.baseSize;this.resize(r.width,r.height,this.game.scale.resolution)},onResize:function(e,t,i,r){if(t.width!==this.width||t.height!==this.height||r!==this.resolution){this.resize(t.width,t.height,r)}},resize:function(e,t,i){var r=this.gl;var n=this.pipelines;this.width=e;this.height=t;this.resolution=i;r.viewport(0,0,e,t);for(var s in n){n[s].resize(e,t,i)}this.drawingBufferHeight=r.drawingBufferHeight;r.scissor(0,r.drawingBufferHeight-t,e,t);this.defaultCamera.setSize(e,t);return this},hasExtension:function(e){return this.supportedExtensions?this.supportedExtensions.indexOf(e):false},getExtension:function(e){if(!this.hasExtension(e)){return null}if(!(e in this.extensions)){this.extensions[e]=this.gl.getExtension(e)}return this.extensions[e]},flush:function(){if(this.currentPipeline){this.currentPipeline.flush()}},hasPipeline:function(e){return e in this.pipelines},getPipeline:function(e){return this.hasPipeline(e)?this.pipelines[e]:null},removePipeline:function(e){delete this.pipelines[e];return this},addPipeline:function(e,t){if(!this.hasPipeline(e)){this.pipelines[e]=t}else{console.warn("Pipeline exists: "+e)}t.name=e;this.pipelines[e].resize(this.width,this.height,this.config.resolution);return t},pushScissor:function(e,t,i,r,n){if(n===undefined){n=this.drawingBufferHeight}var s=this.scissorStack;var a=[e,t,i,r];s.push(a);this.setScissor(e,t,i,r,n);this.currentScissor=a;return a},setScissor:function(e,t,i,r,n){if(n===undefined){n=this.drawingBufferHeight}var s=this.gl;var a=this.currentScissor;var o=i>0&&r>0;if(a&&o){var l=a[0];var h=a[1];var u=a[2];var c=a[3];o=l!==e||h!==t||u!==i||c!==r}if(o){this.flush();s.scissor(e,n-t-r,i,r)}},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];if(t){this.setScissor(t[0],t[1],t[2],t[3])}this.currentScissor=t},setPipeline:function(e,t){if(this.currentPipeline!==e||this.currentPipeline.vertexBuffer!==this.currentVertexBuffer||this.currentPipeline.program!==this.currentProgram){this.flush();this.currentPipeline=e;this.currentPipeline.bind()}this.currentPipeline.onBind(t);return this.currentPipeline},hasActiveStencilMask:function(){var e=this.currentMask.mask;var t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},rebindPipeline:function(e){var t=this.gl;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);if(this.hasActiveStencilMask()){t.clear(t.DEPTH_BUFFER_BIT)}else{t.disable(t.STENCIL_TEST);t.clear(t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.viewport(0,0,this.width,this.height);this.setBlendMode(0,true);t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,this.blankTexture.glTexture);this.currentActiveTextureUnit=0;this.currentTextures[0]=this.blankTexture.glTexture;this.currentPipeline=e;this.currentPipeline.bind();this.currentPipeline.onBind()},clearPipeline:function(){this.flush();this.currentPipeline=null;this.currentProgram=null;this.currentVertexBuffer=null;this.currentIndexBuffer=null;this.setBlendMode(0,true)},setBlendMode:function(e,t){if(t===undefined){t=false}var i=this.gl;var r=this.blendModes[e];if(t||e!==_const.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e){this.flush();i.enable(i.BLEND);i.blendEquation(r.equation);if(r.func.length>2){i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3])}else{i.blendFunc(r.func[0],r.func[1])}this.currentBlendMode=e;return true}return false},addBlendMode:function(e,t){var i=this.blendModes.push({func:e,equation:t});return i-1},updateBlendMode:function(e,t,i){if(this.blendModes[e]){this.blendModes[e].func=t;if(i){this.blendModes[e].equation=i}}return this},removeBlendMode:function(e){if(e>17&&this.blendModes[e]){this.blendModes.splice(e,1)}return this},setBlankTexture:function(e){if(e===undefined){e=false}if(e||this.currentActiveTextureUnit!==0||!this.currentTextures[0]){this.setTexture2D(this.blankTexture.glTexture,0)}},setTexture2D:function(e,t,i){if(i===undefined){i=true}var r=this.gl;if(e!==this.currentTextures[t]){if(i){this.flush()}if(this.currentActiveTextureUnit!==t){r.activeTexture(r.TEXTURE0+t);this.currentActiveTextureUnit=t}r.bindTexture(r.TEXTURE_2D,e);this.currentTextures[t]=e}return this},setFramebuffer:function(e,t){if(t===undefined){t=false}var i=this.gl;var r=this.width;var n=this.height;if(e!==this.currentFramebuffer){if(e&&e.renderTexture){r=e.renderTexture.width;n=e.renderTexture.height}else{this.flush()}i.bindFramebuffer(i.FRAMEBUFFER,e);i.viewport(0,0,r,n);if(t){if(e){this.drawingBufferHeight=n;this.pushScissor(0,0,r,n)}else{this.drawingBufferHeight=this.height;this.popScissor()}}this.currentFramebuffer=e}return this},setProgram:function(e){var t=this.gl;if(e!==this.currentProgram){this.flush();t.useProgram(e);this.currentProgram=e}return this},setVertexBuffer:function(e){var t=this.gl;if(e!==this.currentVertexBuffer){this.flush();t.bindBuffer(t.ARRAY_BUFFER,e);this.currentVertexBuffer=e}return this},setIndexBuffer:function(e){var t=this.gl;if(e!==this.currentIndexBuffer){this.flush();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e);this.currentIndexBuffer=e}return this},createTextureFromSource:function(e,t,i,r){var n=this.gl;var s=n.NEAREST;var a=n.CLAMP_TO_EDGE;var o=null;t=e?e.width:t;i=e?e.height:i;if(IsSizePowerOfTwo_1(t,i)){a=n.REPEAT}if(r===_const.ScaleModes.LINEAR&&this.config.antialias){s=n.LINEAR}if(!e&&typeof t==="number"&&typeof i==="number"){o=this.createTexture2D(0,s,s,a,a,n.RGBA,null,t,i)}else{o=this.createTexture2D(0,s,s,a,a,n.RGBA,e)}return o},createTexture2D:function(e,t,i,r,n,s,a,o,l,h){h=h===undefined||h===null?true:h;var u=this.gl;var c=u.createTexture();this.setTexture2D(c,0);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,t);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,i);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,n);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r);u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h);if(a===null||a===undefined){u.texImage2D(u.TEXTURE_2D,e,s,o,l,0,s,u.UNSIGNED_BYTE,null)}else{u.texImage2D(u.TEXTURE_2D,e,s,s,u.UNSIGNED_BYTE,a);o=a.width;l=a.height}this.setTexture2D(null,0);c.isAlphaPremultiplied=h;c.isRenderTexture=false;c.width=o;c.height=l;this.nativeTextures.push(c);return c},createFramebuffer:function(e,t,i,r){var n=this.gl;var s=n.createFramebuffer();var a=0;this.setFramebuffer(s);if(r){var o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}i.isRenderTexture=true;i.isAlphaPremultiplied=false;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0);a=n.checkFramebufferStatus(n.FRAMEBUFFER);if(a!==n.FRAMEBUFFER_COMPLETE){var l={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer incomplete. Framebuffer status: "+l[a])}s.renderTexture=i;this.setFramebuffer(null);return s},createProgram:function(e,t){var i=this.gl;var r=i.createProgram();var n=i.createShader(i.VERTEX_SHADER);var s=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(n,e);i.shaderSource(s,t);i.compileShader(n);i.compileShader(s);if(!i.getShaderParameter(n,i.COMPILE_STATUS)){throw new Error("Failed to compile Vertex Shader:\n"+i.getShaderInfoLog(n))}if(!i.getShaderParameter(s,i.COMPILE_STATUS)){throw new Error("Failed to compile Fragment Shader:\n"+i.getShaderInfoLog(s))}i.attachShader(r,n);i.attachShader(r,s);i.linkProgram(r);if(!i.getProgramParameter(r,i.LINK_STATUS)){throw new Error("Failed to link program:\n"+i.getProgramInfoLog(r))}return r},createVertexBuffer:function(e,t){var i=this.gl;var r=i.createBuffer();this.setVertexBuffer(r);i.bufferData(i.ARRAY_BUFFER,e,t);this.setVertexBuffer(null);return r},createIndexBuffer:function(e,t){var i=this.gl;var r=i.createBuffer();this.setIndexBuffer(r);i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t);this.setIndexBuffer(null);return r},deleteTexture:function(e){var t=this.nativeTextures.indexOf(e);if(t!==-1){SpliceOne_1(this.nativeTextures,t)}this.gl.deleteTexture(e);if(this.currentTextures[0]===e&&!this.game.pendingDestroy){this.setBlankTexture(true)}return this},deleteFramebuffer:function(e){this.gl.deleteFramebuffer(e);return this},deleteProgram:function(e){this.gl.deleteProgram(e);return this},deleteBuffer:function(e){this.gl.deleteBuffer(e);return this},preRenderCamera:function(e){var t=e._cx;var i=e._cy;var r=e._cw;var n=e._ch;var s=this.pipelines.TextureTintPipeline;var a=e.backgroundColor;if(e.renderToTexture){this.flush();this.pushScissor(t,i,r,-n);this.setFramebuffer(e.framebuffer);var o=this.gl;o.clearColor(0,0,0,0);o.clear(o.COLOR_BUFFER_BIT);s.projOrtho(t,r+t,i,n+i,-1e3,1e3);if(e.mask){this.currentCameraMask.mask=e.mask;this.currentCameraMask.camera=e._maskCamera;e.mask.preRenderWebGL(this,e,e._maskCamera)}if(a.alphaGL>0){s.drawFillRect(t,i,r+t,n+i,Utils.getTintFromFloats(a.redGL,a.greenGL,a.blueGL,1),a.alphaGL)}e.emit(events$5.PRE_RENDER,e)}else{this.pushScissor(t,i,r,n);if(e.mask){this.currentCameraMask.mask=e.mask;this.currentCameraMask.camera=e._maskCamera;e.mask.preRenderWebGL(this,e,e._maskCamera)}if(a.alphaGL>0){s.drawFillRect(t,i,r,n,Utils.getTintFromFloats(a.redGL,a.greenGL,a.blueGL,1),a.alphaGL)}}},getCurrentStencilMask:function(){var e=null;var t=this.maskStack;var i=this.currentCameraMask;if(t.length>0){e=t[t.length-1]}else if(i.mask&&i.mask.isStencil){e=i}return e},postRenderCamera:function(e){var t=this.pipelines.TextureTintPipeline;e.flashEffect.postRenderWebGL(t,Utils.getTintFromFloats);e.fadeEffect.postRenderWebGL(t,Utils.getTintFromFloats);e.dirty=false;this.popScissor();if(e.renderToTexture){t.flush();this.setFramebuffer(null);e.emit(events$5.POST_RENDER,e);t.projOrtho(0,t.width,t.height,0,-1e3,1e3);var i=Utils.getTintAppendFloatAlpha;var r=e.pipeline?e.pipeline:t;r.batchTexture(e,e.glTexture,e.width,e.height,e.x,e.y,e.width,e.height,e.zoom,e.zoom,e.rotation,e.flipX,!e.flipY,1,1,0,0,0,0,e.width,e.height,i(e._tintTL,e._alphaTL),i(e._tintTR,e._alphaTR),i(e._tintBL,e._alphaBL),i(e._tintBR,e._alphaBR),e._isTinted&&e.tintFill,0,0,this.defaultCamera,null);this.setBlankTexture(true)}if(e.mask){this.currentCameraMask.mask=null;e.mask.postRenderWebGL(this,e._maskCamera)}},preRender:function(){if(this.contextLost){return}var e=this.gl;var t=this.pipelines;e.bindFramebuffer(e.FRAMEBUFFER,null);if(this.config.clearBeforeRender){var i=this.config.backgroundColor;e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST);for(var r in t){t[r].onPreRender()}this.currentScissor=[0,0,this.width,this.height];this.scissorStack=[this.currentScissor];if(this.game.scene.customViewports){e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height)}this.currentMask.mask=null;this.currentCameraMask.mask=null;this.maskStack.length=0;this.setPipeline(this.pipelines.TextureTintPipeline)},render:function(e,t,i,r){if(this.contextLost){return}var n=t.list;var s=n.length;var a=this.pipelines;for(var o in a){a[o].onRender(e,r)}this.preRenderCamera(r);if(s===0){this.setBlendMode(_const.BlendModes.NORMAL);this.postRenderCamera(r);return}this.currentType="";var l=this.currentMask;for(var h=0;h<s;h++){var u=n[h];if(!u.willRender(r)){continue}if(u.blendMode!==this.currentBlendMode){this.setBlendMode(u.blendMode)}var c=u.mask;l=this.currentMask;if(l.mask&&l.mask!==c){l.mask.postRenderWebGL(this,l.camera)}if(c&&l.mask!==c){c.preRenderWebGL(this,u,r)}var f=u.type;if(f!==this.currentType){this.newType=true;this.currentType=f}this.nextTypeMatch=h<s-1?n[h+1].type===this.currentType:false;u.renderWebGL(this,u,i,r);this.newType=false}l=this.currentMask;if(l.mask){l.mask.postRenderWebGL(this,l.camera)}this.setBlendMode(_const.BlendModes.NORMAL);this.postRenderCamera(r)},postRender:function(){if(this.contextLost){return}this.flush();var e=this.snapshotState;if(e.callback){WebGLSnapshot_1(this.canvas,e);e.callback=null}var t=this.pipelines;for(var i in t){t[i].onPostRender()}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,n,s,a){var o=this.snapshotState;o.callback=n;o.type=s;o.encoder=a;o.getPixel=false;o.x=e;o.y=t;o.width=Math.min(i,this.gl.drawingBufferWidth);o.height=Math.min(r,this.gl.drawingBufferHeight);return this},snapshotPixel:function(e,t,i){this.snapshotArea(e,t,1,1,i);this.snapshotState.getPixel=true;return this},snapshotFramebuffer:function(e,t,i,r,n,s,a,o,l,h,u){if(n===undefined){n=false}if(s===undefined){s=0}if(a===undefined){a=0}if(o===undefined){o=t}if(l===undefined){l=i}var c=this.currentFramebuffer;this.snapshotArea(s,a,o,l,r,h,u);var f=this.snapshotState;f.getPixel=n;f.isFramebuffer=true;f.bufferWidth=t;f.bufferHeight=i;this.setFramebuffer(e);WebGLSnapshot_1(this.canvas,f);this.setFramebuffer(c);f.callback=null;f.isFramebuffer=false;return this},canvasToTexture:function(e,t,i){if(i===undefined){i=false}var r=this.gl;if(!t){var n=r.CLAMP_TO_EDGE;if(!i&&IsSizePowerOfTwo_1(e.width,e.height)){n=r.REPEAT}var s=this.config.antialias?r.LINEAR:r.NEAREST;t=this.createTexture2D(0,s,s,n,n,r.RGBA,e,e.width,e.height,true)}else{this.setTexture2D(t,0);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);t.width=e.width;t.height=e.height;this.setTexture2D(null,0)}return t},setTextureFilter:function(e,t){var i=this.gl;var r=[i.LINEAR,i.NEAREST][t];this.setTexture2D(e,0);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r);this.setTexture2D(null,0);return this},setFloat1:function(e,t,i){this.setProgram(e);this.gl.uniform1f(this.gl.getUniformLocation(e,t),i);return this},setFloat2:function(e,t,i,r){this.setProgram(e);this.gl.uniform2f(this.gl.getUniformLocation(e,t),i,r);return this},setFloat3:function(e,t,i,r,n){this.setProgram(e);this.gl.uniform3f(this.gl.getUniformLocation(e,t),i,r,n);return this},setFloat4:function(e,t,i,r,n,s){this.setProgram(e);this.gl.uniform4f(this.gl.getUniformLocation(e,t),i,r,n,s);return this},setFloat1v:function(e,t,i){this.setProgram(e);this.gl.uniform1fv(this.gl.getUniformLocation(e,t),i);return this},setFloat2v:function(e,t,i){this.setProgram(e);this.gl.uniform2fv(this.gl.getUniformLocation(e,t),i);return this},setFloat3v:function(e,t,i){this.setProgram(e);this.gl.uniform3fv(this.gl.getUniformLocation(e,t),i);return this},setFloat4v:function(e,t,i){this.setProgram(e);this.gl.uniform4fv(this.gl.getUniformLocation(e,t),i);return this},setInt1:function(e,t,i){this.setProgram(e);this.gl.uniform1i(this.gl.getUniformLocation(e,t),i);return this},setInt2:function(e,t,i,r){this.setProgram(e);this.gl.uniform2i(this.gl.getUniformLocation(e,t),i,r);return this},setInt3:function(e,t,i,r,n){this.setProgram(e);this.gl.uniform3i(this.gl.getUniformLocation(e,t),i,r,n);return this},setInt4:function(e,t,i,r,n,s){this.setProgram(e);this.gl.uniform4i(this.gl.getUniformLocation(e,t),i,r,n,s);return this},setMatrix2:function(e,t,i,r){this.setProgram(e);this.gl.uniformMatrix2fv(this.gl.getUniformLocation(e,t),i,r);return this},setMatrix3:function(e,t,i,r){this.setProgram(e);this.gl.uniformMatrix3fv(this.gl.getUniformLocation(e,t),i,r);return this},setMatrix4:function(e,t,i,r){this.setProgram(e);this.gl.uniformMatrix4fv(this.gl.getUniformLocation(e,t),i,r);return this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var e=0;e<this.nativeTextures.length;e++){this.gl.deleteTexture(this.nativeTextures[e])}this.nativeTextures=[];for(var t in this.pipelines){this.pipelines[t].destroy();delete this.pipelines[t]}this.defaultCamera.destroy();this.currentMask=null;this.currentCameraMask=null;this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,false);this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,false);this.game=null;this.gl=null;this.canvas=null;this.maskStack=[];this.contextLost=true;this.extensions={}}});var WebGLRenderer_1=WebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CreateRenderer=function(e){var t=e.config;if((t.customEnvironment||t.canvas)&&t.renderType===_const.AUTO){throw new Error("Must set explicit renderType in custom environment")}if(!t.customEnvironment&&!t.canvas&&t.renderType!==_const.HEADLESS){if(t.renderType===_const.CANVAS||t.renderType!==_const.CANVAS&&!Features_1.webGL){if(Features_1.canvas){t.renderType=_const.CANVAS}else{throw new Error("Cannot create Canvas or WebGL context, aborting.")}}else{t.renderType=_const.WEBGL}}if(!t.antialias){CanvasPool_1.disableSmoothing()}var i=e.scale.baseSize;var r=i.width;var n=i.height;if(t.canvas){e.canvas=t.canvas;e.canvas.width=r;e.canvas.height=n}else{e.canvas=CanvasPool_1.create(e,r,n,t.renderType)}if(t.canvasStyle){e.canvas.style=t.canvasStyle}if(!t.antialias){CanvasInterpolation_1.setCrisp(e.canvas)}if(t.renderType===_const.HEADLESS){return}var s;var a;if(typeof WEBGL_RENDERER&&typeof CANVAS_RENDERER){s=CanvasRenderer_1;a=WebGLRenderer_1;if(t.renderType===_const.WEBGL){e.renderer=new a(e)}else{e.renderer=new s(e);e.context=e.renderer.gameContext}}if(typeof WEBGL_RENDERER&&!typeof CANVAS_RENDERER){a=WebGLRenderer_1;t.renderType=_const.WEBGL;e.renderer=new a(e)}if(!typeof WEBGL_RENDERER&&typeof CANVAS_RENDERER){s=CanvasRenderer_1;t.renderType=_const.CANVAS;e.renderer=new s(e);e.context=e.renderer.gameContext}};var CreateRenderer_1=CreateRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DebugHeader=function(e){var t=e.config;if(t.hideBanner){return}var i="WebGL";if(t.renderType===_const.CANVAS){i="Canvas"}else if(t.renderType===_const.HEADLESS){i="Headless"}var r=t.audio;var n=e.device.audio;var s;if(n.webAudio&&!(r&&r.disableWebAudio)){s="Web Audio"}else if(r&&r.noAudio||!n.webAudio&&!n.audioData){s="No Audio"}else{s="HTML5 Audio"}if(!e.device.browser.ie){var a="";var o=[a];if(Array.isArray(t.bannerBackgroundColor)){var l;t.bannerBackgroundColor.forEach((function(e){a=a.concat("%c ");o.push("background: "+e);l=e}));o[o.length-1]="color: "+t.bannerTextColor+"; background: "+l}else{a=a.concat("%c ");o.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor)}o.push("background: #fff");if(t.gameTitle){a=a.concat(t.gameTitle);if(t.gameVersion){a=a.concat(" v"+t.gameVersion)}if(!t.hidePhaser){a=a.concat(" / ")}}var h=typeof PLUGIN_FBINSTANT?"-FB":"";if(!t.hidePhaser){a=a.concat("Phaser v"+_const.VERSION+h+" ("+i+" | "+s+")")}a=a.concat(" %c "+t.gameURL);o[0]=a;console.log.apply(console,o)}else if(window["console"]){console.log("Phaser v"+_const.VERSION+" / https://phaser.io")}};var DebugHeader_1=DebugHeader;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RequestAnimationFrame=new Class_1({initialize:function e(){this.isRunning=false;this.callback=NOOP_1;this.tick=0;this.isSetTimeOut=false;this.timeOutID=null;this.lastTime=0;var t=this;this.step=function e(){var i=window.performance.now();t.lastTime=t.tick;t.tick=i;t.callback(i);t.timeOutID=window.requestAnimationFrame(e)};this.stepTimeout=function e(){var i=Date.now();var r=Math.max(16+t.lastTime-i,0);t.lastTime=t.tick;t.tick=i;t.callback(i);t.timeOutID=window.setTimeout(e,r)}},start:function(e,t){if(this.isRunning){return}this.callback=e;this.isSetTimeOut=t;this.isRunning=true;this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step)},stop:function(){this.isRunning=false;if(this.isSetTimeOut){clearTimeout(this.timeOutID)}else{window.cancelAnimationFrame(this.timeOutID)}},destroy:function(){this.stop();this.callback=NOOP_1}});var RequestAnimationFrame_1=RequestAnimationFrame;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TimeStep=new Class_1({initialize:function e(t,i){this.game=t;this.raf=new RequestAnimationFrame_1;this.started=false;this.running=false;this.minFps=GetValue_1(i,"min",5);this.targetFps=GetValue_1(i,"target",60);this._min=1e3/this.minFps;this._target=1e3/this.targetFps;this.actualFps=this.targetFps;this.nextFpsUpdate=0;this.framesThisSecond=0;this.callback=NOOP_1;this.forceSetTimeOut=GetValue_1(i,"forceSetTimeOut",false);this.time=0;this.startTime=0;this.lastTime=0;this.frame=0;this.inFocus=true;this._pauseTime=0;this._coolDown=0;this.delta=0;this.deltaIndex=0;this.deltaHistory=[];this.deltaSmoothingMax=GetValue_1(i,"deltaHistory",10);this.panicMax=GetValue_1(i,"panicMax",120);this.rawDelta=0;this.now=0},blur:function(){this.inFocus=false},focus:function(){this.inFocus=true;this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta();this.startTime+=this.time-this._pauseTime},resetDelta:function(){var e=window.performance.now();this.time=e;this.lastTime=e;this.nextFpsUpdate=e+1e3;this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++){this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t])}this.delta=0;this.deltaIndex=0;this._coolDown=this.panicMax},start:function(e){if(this.started){return this}this.started=true;this.running=true;for(var t=0;t<this.deltaSmoothingMax;t++){this.deltaHistory[t]=this._target}this.resetDelta();this.startTime=window.performance.now();this.callback=e;this.raf.start(this.step.bind(this),this.forceSetTimeOut)},step:function(){var e=window.performance.now();this.now=e;var t=e-this.lastTime;if(t<0){t=0}this.rawDelta=t;var i=this.deltaIndex;var r=this.deltaHistory;var n=this.deltaSmoothingMax;var s=t;if(this._coolDown>0||!this.inFocus){this._coolDown--;s=Math.min(s,this._target)}if(s>this._min){s=r[i];s=Math.min(s,this._min)}r[i]=s;this.deltaIndex++;if(this.deltaIndex>n){this.deltaIndex=0}var a=0;for(var o=0;o<n;o++){a+=r[o]}a/=n;this.delta=a;this.time+=this.rawDelta;if(e>this.nextFpsUpdate){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps;this.nextFpsUpdate=e+1e3;this.framesThisSecond=0}this.framesThisSecond++;var l=a/this._target;this.callback(e,a,l);this.lastTime=e;this.frame++},tick:function(){this.step()},sleep:function(){if(this.running){this.raf.stop();this.running=false}},wake:function(e){if(this.running){this.sleep()}else if(e){this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())}this.raf.start(this.step.bind(this),this.useRAF);this.running=true;this.step()},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){this.running=false;this.started=false;this.raf.stop();return this},destroy:function(){this.stop();this.callback=NOOP_1;this.raf=null;this.game=null}});var TimeStep_1=TimeStep;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var VisibilityHandler=function(e){var t;var i=e.events;if(document.hidden!==undefined){t="visibilitychange"}else{var r=["webkit","moz","ms"];r.forEach((function(e){if(document[e+"Hidden"]!==undefined){document.hidden=function(){return document[e+"Hidden"]};t=e+"visibilitychange"}}))}var n=function(e){if(document.hidden||e.type==="pause"){i.emit(events$1.HIDDEN)}else{i.emit(events$1.VISIBLE)}};if(t){document.addEventListener(t,n,false)}window.onblur=function(){i.emit(events$1.BLUR)};window.onfocus=function(){i.emit(events$1.FOCUS)};if(window.focus&&e.config.autoFocus){window.focus()}};var VisibilityHandler_1=VisibilityHandler;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var core={Config:Config_1,CreateRenderer:CreateRenderer_1,DebugHeader:DebugHeader_1,Events:events$1,TimeStep:TimeStep_1,VisibilityHandler:VisibilityHandler_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Arne16={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GenerateTexture=function(e){var t=GetValue_1(e,"data",[]);var i=GetValue_1(e,"canvas",null);var r=GetValue_1(e,"palette",Arne16);var n=GetValue_1(e,"pixelWidth",1);var s=GetValue_1(e,"pixelHeight",n);var a=GetValue_1(e,"resizeCanvas",true);var o=GetValue_1(e,"clearCanvas",true);var l=GetValue_1(e,"preRender",null);var h=GetValue_1(e,"postRender",null);var u=Math.floor(Math.abs(t[0].length*n));var c=Math.floor(Math.abs(t.length*s));if(!i){i=CanvasPool_1.create2D(this,u,c);a=false;o=false}if(a){i.width=u;i.height=c}var f=i.getContext("2d");if(o){f.clearRect(0,0,u,c)}if(l){l(i,f)}for(var d=0;d<t.length;d++){var v=t[d];for(var p=0;p<v.length;p++){var g=v[p];if(g!=="."&&g!==" "){f.fillStyle=r[g];f.fillRect(p*n,d*s,n,s)}}}if(h){h(i,f)}return i};var GenerateTexture_1=GenerateTexture;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var C64={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CGA={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JMP={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MSX={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var palettes={ARNE16:Arne16,C64:C64,CGA:CGA,JMP:JMP,MSX:MSX};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var create={GenerateTexture:GenerateTexture_1,Palettes:palettes};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FromPoints=function(e,t){if(t===undefined){t=new Rectangle_1}if(e.length===0){return t}var i=Number.MAX_VALUE;var r=Number.MAX_VALUE;var n=Number.MIN_SAFE_INTEGER;var s=Number.MIN_SAFE_INTEGER;var a;var o;var l;for(var h=0;h<e.length;h++){a=e[h];if(Array.isArray(a)){o=a[0];l=a[1]}else{o=a.x;l=a.y}i=Math.min(i,o);r=Math.min(r,l);n=Math.max(n,o);s=Math.max(s,l)}t.x=i;t.y=r;t.width=n-i;t.height=s-r;return t};var FromPoints_1=FromPoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Curve=new Class_1({initialize:function e(t){this.type=t;this.defaultDivisions=5;this.arcLengthDivisions=100;this.cacheArcLengths=[];this.needsUpdate=true;this.active=true;this._tmpVec2A=new Vector2_1;this._tmpVec2B=new Vector2_1},draw:function(e,t){if(t===undefined){t=32}return e.strokePoints(this.getPoints(t))},getBounds:function(e,t){if(!e){e=new Rectangle_1}if(t===undefined){t=16}var i=this.getLength();if(t>i){t=i/2}var r=Math.max(1,Math.round(i/t));return FromPoints_1(this.getSpacedPoints(r),e)},getDistancePoints:function(e){var t=this.getLength();var i=Math.max(1,t/e);return this.getSpacedPoints(i)},getEndPoint:function(e){if(e===undefined){e=new Vector2_1}return this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===undefined){e=this.arcLengthDivisions}if(this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var i;var r=this.getPoint(0,this._tmpVec2A);var n=0;t.push(0);for(var s=1;s<=e;s++){i=this.getPoint(s/e,this._tmpVec2B);n+=i.distance(r);t.push(n);r.copy(i)}this.cacheArcLengths=t;return t},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){if(e===undefined){e=this.defaultDivisions}var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}return t},getRandomPoint:function(e){if(e===undefined){e=new Vector2_1}return this.getPoint(Math.random(),e)},getSpacedPoints:function(e){if(e===undefined){e=this.defaultDivisions}var t=[];for(var i=0;i<=e;i++){var r=this.getUtoTmapping(i/e,null,e);t.push(this.getPoint(r))}return t},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return this.getPointAt(0,e)},getTangent:function(e,t){if(t===undefined){t=new Vector2_1}var i=1e-4;var r=e-i;var n=e+i;if(r<0){r=0}if(n>1){n=1}this.getPoint(r,this._tmpVec2A);this.getPoint(n,t);return t.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,t){var i=this.getUtoTmapping(e);return this.getTangent(i,t)},getTFromDistance:function(e,t){if(e<=0){return 0}return this.getUtoTmapping(0,e,t)},getUtoTmapping:function(e,t,i){var r=this.getLengths(i);var n=0;var s=r.length;var a;if(t){a=Math.min(t,r[s-1])}else{a=e*r[s-1]}var o=0;var l=s-1;var h;while(o<=l){n=Math.floor(o+(l-o)/2);h=r[n]-a;if(h<0){o=n+1}else if(h>0){l=n-1}else{l=n;break}}n=l;if(r[n]===a){return n/(s-1)}var u=r[n];var c=r[n+1];var f=c-u;var d=(a-u)/f;return(n+d)/(s-1)},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()}});var Curve_1=Curve;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CubicBezierCurve=new Class_1({Extends:Curve_1,initialize:function e(t,i,r,n){Curve_1.call(this,"CubicBezierCurve");if(Array.isArray(t)){n=new Vector2_1(t[6],t[7]);r=new Vector2_1(t[4],t[5]);i=new Vector2_1(t[2],t[3]);t=new Vector2_1(t[0],t[1])}this.p0=t;this.p1=i;this.p2=r;this.p3=n},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}var i=this.p0;var r=this.p1;var n=this.p2;var s=this.p3;return t.set(CubicBezierInterpolation_1(e,i.x,r.x,n.x,s.x),CubicBezierInterpolation_1(e,i.y,r.y,n.y,s.y))},draw:function(e,t){if(t===undefined){t=32}var i=this.getPoints(t);e.beginPath();e.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++){e.lineTo(i[r].x,i[r].y)}e.strokePath();return e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});CubicBezierCurve.fromJSON=function(e){var t=e.points;var i=new Vector2_1(t[0],t[1]);var r=new Vector2_1(t[2],t[3]);var n=new Vector2_1(t[4],t[5]);var s=new Vector2_1(t[6],t[7]);return new CubicBezierCurve(i,r,n,s)};var CubicBezierCurve_1=CubicBezierCurve;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EllipseCurve=new Class_1({Extends:Curve_1,initialize:function e(t,i,r,n,s,a,o,l){if(typeof t==="object"){var h=t;t=GetValue_1(h,"x",0);i=GetValue_1(h,"y",0);r=GetValue_1(h,"xRadius",0);n=GetValue_1(h,"yRadius",r);s=GetValue_1(h,"startAngle",0);a=GetValue_1(h,"endAngle",360);o=GetValue_1(h,"clockwise",false);l=GetValue_1(h,"rotation",0)}else{if(n===undefined){n=r}if(s===undefined){s=0}if(a===undefined){a=360}if(o===undefined){o=false}if(l===undefined){l=0}}Curve_1.call(this,"EllipseCurve");this.p0=new Vector2_1(t,i);this._xRadius=r;this._yRadius=n;this._startAngle=DegToRad_1(s);this._endAngle=DegToRad_1(a);this._clockwise=o;this._rotation=DegToRad_1(l)},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return this.getPoint(0,e)},getResolution:function(e){return e*2},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}var i=Math.PI*2;var r=this._endAngle-this._startAngle;var n=Math.abs(r)<Number.EPSILON;while(r<0){r+=i}while(r>i){r-=i}if(r<Number.EPSILON){if(n){r=0}else{r=i}}if(this._clockwise&&!n){if(r===i){r=-i}else{r=r-i}}var s=this._startAngle+e*r;var a=this.p0.x+this._xRadius*Math.cos(s);var o=this.p0.y+this._yRadius*Math.sin(s);if(this._rotation!==0){var l=Math.cos(this._rotation);var h=Math.sin(this._rotation);var u=a-this.p0.x;var c=o-this.p0.y;a=u*l-c*h+this.p0.x;o=u*h+c*l+this.p0.y}return t.set(a,o)},setXRadius:function(e){this.xRadius=e;return this},setYRadius:function(e){this.yRadius=e;return this},setWidth:function(e){this.xRadius=e*2;return this},setHeight:function(e){this.yRadius=e*2;return this},setStartAngle:function(e){this.startAngle=e;return this},setEndAngle:function(e){this.endAngle=e;return this},setClockwise:function(e){this.clockwise=e;return this},setRotation:function(e){this.rotation=e;return this},x:{get:function(){return this.p0.x},set:function(e){this.p0.x=e}},y:{get:function(){return this.p0.y},set:function(e){this.p0.y=e}},xRadius:{get:function(){return this._xRadius},set:function(e){this._xRadius=e}},yRadius:{get:function(){return this._yRadius},set:function(e){this._yRadius=e}},startAngle:{get:function(){return RadToDeg_1(this._startAngle)},set:function(e){this._startAngle=DegToRad_1(e)}},endAngle:{get:function(){return RadToDeg_1(this._endAngle)},set:function(e){this._endAngle=DegToRad_1(e)}},clockwise:{get:function(){return this._clockwise},set:function(e){this._clockwise=e}},angle:{get:function(){return RadToDeg_1(this._rotation)},set:function(e){this._rotation=DegToRad_1(e)}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:RadToDeg_1(this._startAngle),endAngle:RadToDeg_1(this._endAngle),clockwise:this._clockwise,rotation:RadToDeg_1(this._rotation)}}});EllipseCurve.fromJSON=function(e){return new EllipseCurve(e)};var EllipseCurve_1=EllipseCurve;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GameObjectFactory=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(events$7.SHUTDOWN,this.shutdown,this)},existing:function(e){if(e.renderCanvas||e.renderWebGL){this.displayList.add(e)}if(e.preUpdate){this.updateList.add(e)}return e},shutdown:function(){this.systems.events.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null;this.displayList=null;this.updateList=null}});GameObjectFactory.register=function(e,t){if(!GameObjectFactory.prototype.hasOwnProperty(e)){GameObjectFactory.prototype[e]=t}};GameObjectFactory.remove=function(e){if(GameObjectFactory.prototype.hasOwnProperty(e)){delete GameObjectFactory.prototype[e]}};PluginCache_1.register("GameObjectFactory",GameObjectFactory,"add");var GameObjectFactory_1=GameObjectFactory;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tmpVec2=new Vector2_1;var LineCurve=new Class_1({Extends:Curve_1,initialize:function e(t,i){Curve_1.call(this,"LineCurve");if(Array.isArray(t)){i=new Vector2_1(t[2],t[3]);t=new Vector2_1(t[0],t[1])}this.p0=t;this.p1=i},getBounds:function(e){if(e===undefined){e=new Rectangle_1}return FromPoints_1([this.p0,this.p1],e)},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return e.copy(this.p0)},getResolution:function(e){if(e===undefined){e=1}return e},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}if(e===1){return t.copy(this.p1)}t.copy(this.p1).subtract(this.p0).scale(e).add(this.p0);return t},getPointAt:function(e,t){return this.getPoint(e,t)},getTangent:function(){var e=tmpVec2.copy(this.p1).subtract(this.p0);return e.normalize()},draw:function(e){e.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y);return e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});LineCurve.fromJSON=function(e){var t=e.points;var i=new Vector2_1(t[0],t[1]);var r=new Vector2_1(t[2],t[3]);return new LineCurve(i,r)};var LineCurve_1=LineCurve;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MoveTo=new Class_1({initialize:function e(t,i){this.active=false;this.p0=new Vector2_1(t,i)},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}return t.copy(this.p0)},getPointAt:function(e,t){return this.getPoint(e,t)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});var MoveTo_1=MoveTo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var QuadraticBezier=new Class_1({Extends:Curve_1,initialize:function e(t,i,r){Curve_1.call(this,"QuadraticBezier");if(Array.isArray(t)){r=new Vector2_1(t[4],t[5]);i=new Vector2_1(t[2],t[3]);t=new Vector2_1(t[0],t[1])}this.p0=t;this.p1=i;this.p2=r},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}var i=this.p0;var r=this.p1;var n=this.p2;return t.set(QuadraticBezierInterpolation_1(e,i.x,r.x,n.x),QuadraticBezierInterpolation_1(e,i.y,r.y,n.y))},draw:function(e,t){if(t===undefined){t=32}var i=this.getPoints(t);e.beginPath();e.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++){e.lineTo(i[r].x,i[r].y)}e.strokePath();return e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});QuadraticBezier.fromJSON=function(e){var t=e.points;var i=new Vector2_1(t[0],t[1]);var r=new Vector2_1(t[2],t[3]);var n=new Vector2_1(t[4],t[5]);return new QuadraticBezier(i,r,n)};var QuadraticBezierCurve=QuadraticBezier;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SplineCurve=new Class_1({Extends:Curve_1,initialize:function e(t){if(t===undefined){t=[]}Curve_1.call(this,"SplineCurve");this.points=[];this.addPoints(t)},addPoints:function(e){for(var t=0;t<e.length;t++){var i=new Vector2_1;if(typeof e[t]==="number"){i.x=e[t];i.y=e[t+1];t++}else if(Array.isArray(e[t])){i.x=e[t][0];i.y=e[t][1]}else{i.x=e[t].x;i.y=e[t].y}this.points.push(i)}return this},addPoint:function(e,t){var i=new Vector2_1(e,t);this.points.push(i);return i},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}var i=this.points;var r=(i.length-1)*e;var n=Math.floor(r);var s=r-n;var a=i[n===0?n:n-1];var o=i[n];var l=i[n>i.length-2?i.length-1:n+1];var h=i[n>i.length-3?i.length-1:n+2];return t.set(CatmullRom_1(s,a.x,o.x,l.x,h.x),CatmullRom_1(s,a.y,o.y,l.y,h.y))},toJSON:function(){var e=[];for(var t=0;t<this.points.length;t++){e.push(this.points[t].x);e.push(this.points[t].y)}return{type:this.type,points:e}}});SplineCurve.fromJSON=function(e){return new SplineCurve(e.points)};var SplineCurve_1=SplineCurve;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Path=new Class_1({initialize:function e(t,i){if(t===undefined){t=0}if(i===undefined){i=0}this.name="";this.curves=[];this.cacheLengths=[];this.autoClose=false;this.startPoint=new Vector2_1;this._tmpVec2A=new Vector2_1;this._tmpVec2B=new Vector2_1;if(typeof t==="object"){this.fromJSON(t)}else{this.startPoint.set(t,i)}},add:function(e){this.curves.push(e);return this},circleTo:function(e,t,i){if(t===undefined){t=false}return this.ellipseTo(e,e,0,360,t,i)},closePath:function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new LineCurve_1(t,e))}return this},cubicBezierTo:function(e,t,i,r,n,s){var a=this.getEndPoint();var o;var l;var h;if(e instanceof Vector2_1){o=e;l=t;h=i}else{o=new Vector2_1(i,r);l=new Vector2_1(n,s);h=new Vector2_1(e,t)}return this.add(new CubicBezierCurve_1(a,o,l,h))},quadraticBezierTo:function(e,t,i,r){var n=this.getEndPoint();var s;var a;if(e instanceof Vector2_1){s=e;a=t}else{s=new Vector2_1(i,r);a=new Vector2_1(e,t)}return this.add(new QuadraticBezierCurve(n,s,a))},draw:function(e,t){for(var i=0;i<this.curves.length;i++){var r=this.curves[i];if(!r.active){continue}r.draw(e,t)}return e},ellipseTo:function(e,t,i,r,n,s){var a=new EllipseCurve_1(0,0,e,t,i,r,n,s);var o=this.getEndPoint(this._tmpVec2A);var l=a.getStartPoint(this._tmpVec2B);o.subtract(l);a.x=o.x;a.y=o.y;return this.add(a)},fromJSON:function(e){this.curves=[];this.cacheLengths=[];this.startPoint.set(e.x,e.y);this.autoClose=e.autoClose;for(var t=0;t<e.curves.length;t++){var i=e.curves[t];switch(i.type){case"LineCurve":this.add(LineCurve_1.fromJSON(i));break;case"EllipseCurve":this.add(EllipseCurve_1.fromJSON(i));break;case"SplineCurve":this.add(SplineCurve_1.fromJSON(i));break;case"CubicBezierCurve":this.add(CubicBezierCurve_1.fromJSON(i));break;case"QuadraticBezierCurve":this.add(QuadraticBezierCurve.fromJSON(i));break}}return this},getBounds:function(e,t){if(e===undefined){e=new Rectangle_1}if(t===undefined){t=16}e.x=Number.MAX_VALUE;e.y=Number.MAX_VALUE;var i=new Rectangle_1;var r=Number.MIN_SAFE_INTEGER;var n=Number.MIN_SAFE_INTEGER;for(var s=0;s<this.curves.length;s++){var a=this.curves[s];if(!a.active){continue}a.getBounds(i,t);e.x=Math.min(e.x,i.x);e.y=Math.min(e.y,i.y);r=Math.max(r,i.right);n=Math.max(n,i.bottom)}e.right=r;e.bottom=n;return e},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length){return this.cacheLengths}var e=[];var t=0;for(var i=0;i<this.curves.length;i++){t+=this.curves[i].getLength();e.push(t)}this.cacheLengths=e;return e},getEndPoint:function(e){if(e===undefined){e=new Vector2_1}if(this.curves.length>0){this.curves[this.curves.length-1].getPoint(1,e)}else{e.copy(this.startPoint)}return e},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},getPoint:function(e,t){if(t===undefined){t=new Vector2_1}var i=e*this.getLength();var r=this.getCurveLengths();var n=0;while(n<r.length){if(r[n]>=i){var s=r[n]-i;var a=this.curves[n];var o=a.getLength();var l=o===0?0:1-s/o;return a.getPointAt(l,t)}n++}return null},getPoints:function(e){if(e===undefined){e=12}var t=[];var i;for(var r=0;r<this.curves.length;r++){var n=this.curves[r];if(!n.active){continue}var s=n.getResolution(e);var a=n.getPoints(s);for(var o=0;o<a.length;o++){var l=a[o];if(i&&i.equals(l)){continue}t.push(l);i=l}}if(this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},getRandomPoint:function(e){if(e===undefined){e=new Vector2_1}return this.getPoint(Math.random(),e)},getSpacedPoints:function(e){if(e===undefined){e=40}var t=[];for(var i=0;i<=e;i++){t.push(this.getPoint(i/e))}if(this.autoClose){t.push(t[0])}return t},getStartPoint:function(e){if(e===undefined){e=new Vector2_1}return e.copy(this.startPoint)},lineTo:function(e,t){if(e instanceof Vector2_1){this._tmpVec2B.copy(e)}else{this._tmpVec2B.set(e,t)}var i=this.getEndPoint(this._tmpVec2A);return this.add(new LineCurve_1([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(e){e.unshift(this.getEndPoint());return this.add(new SplineCurve_1(e))},moveTo:function(e,t){return this.add(new MoveTo_1(e,t))},toJSON:function(){var e=[];for(var t=0;t<this.curves.length;t++){e.push(this.curves[t].toJSON())}return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:e}},updateArcLengths:function(){this.cacheLengths=[];this.getCurveLengths()},destroy:function(){this.curves.length=0;this.cacheLengths.length=0;this.startPoint=undefined}});GameObjectFactory_1.register("path",(function(e,t){return new Path(e,t)}));var Path_1=Path;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var curves={Path:Path_1,CubicBezier:CubicBezierCurve_1,Curve:Curve_1,Ellipse:EllipseCurve_1,Line:LineCurve_1,QuadraticBezier:QuadraticBezierCurve,Spline:SplineCurve_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DataManagerPlugin=new Class_1({Extends:DataManager_1,initialize:function e(t){DataManager_1.call(this,t,t.sys.events);this.scene=t;this.systems=t.sys;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.events=this.systems.events;this.events.once(events$7.DESTROY,this.destroy,this)},start:function(){this.events.once(events$7.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){DataManager_1.prototype.destroy.call(this);this.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("DataManagerPlugin",DataManagerPlugin,"data");var DataManagerPlugin_1=DataManagerPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var data={DataManager:DataManager_1,DataManagerPlugin:DataManagerPlugin_1,Events:events$2};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _in={BottomCenter:BottomCenter_1,BottomLeft:BottomLeft_1,BottomRight:BottomRight_1,Center:Center_1,LeftCenter:LeftCenter_1,QuickSet:QuickSet_1,RightCenter:RightCenter_1,TopCenter:TopCenter_1,TopLeft:TopLeft_1,TopRight:TopRight_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomCenter$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetCenterX_1(e,GetCenterX_1(t)+i);SetTop_1(e,GetBottom_1(t)+r);return e};var BottomCenter_1$1=BottomCenter$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomLeft$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetLeft_1(t)-i);SetTop_1(e,GetBottom_1(t)+r);return e};var BottomLeft_1$1=BottomLeft$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BottomRight$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetRight_1(t)+i);SetTop_1(e,GetBottom_1(t)+r);return e};var BottomRight_1$1=BottomRight$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LeftBottom=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetLeft_1(t)-i);SetBottom_1(e,GetBottom_1(t)+r);return e};var LeftBottom_1=LeftBottom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LeftCenter$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetLeft_1(t)-i);SetCenterY_1(e,GetCenterY_1(t)+r);return e};var LeftCenter_1$1=LeftCenter$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LeftTop=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetLeft_1(t)-i);SetTop_1(e,GetTop_1(t)-r);return e};var LeftTop_1=LeftTop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RightBottom=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetRight_1(t)+i);SetBottom_1(e,GetBottom_1(t)+r);return e};var RightBottom_1=RightBottom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RightCenter$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetRight_1(t)+i);SetCenterY_1(e,GetCenterY_1(t)+r);return e};var RightCenter_1$1=RightCenter$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RightTop=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetRight_1(t)+i);SetTop_1(e,GetTop_1(t)-r);return e};var RightTop_1=RightTop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopCenter$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetCenterX_1(e,GetCenterX_1(t)+i);SetBottom_1(e,GetTop_1(t)-r);return e};var TopCenter_1$1=TopCenter$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopLeft$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetLeft_1(e,GetLeft_1(t)-i);SetBottom_1(e,GetTop_1(t)-r);return e};var TopLeft_1$1=TopLeft$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TopRight$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}SetRight_1(e,GetRight_1(t)+i);SetBottom_1(e,GetTop_1(t)-r);return e};var TopRight_1$1=TopRight$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var to={BottomCenter:BottomCenter_1$1,BottomLeft:BottomLeft_1$1,BottomRight:BottomRight_1$1,LeftBottom:LeftBottom_1,LeftCenter:LeftCenter_1$1,LeftTop:LeftTop_1,RightBottom:RightBottom_1,RightCenter:RightCenter_1$1,RightTop:RightTop_1,TopCenter:TopCenter_1$1,TopLeft:TopLeft_1$1,TopRight:TopRight_1$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Align={In:_in,To:to};Align=Extend_1(false,Align,_const$1);var align=Align;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BaseShader=new Class_1({initialize:function e(t,i,r,n){if(!i||i===""){i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")}if(!r||r===""){r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","void main () {","gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","}"].join("\n")}if(n===undefined){n=null}this.key=t;this.fragmentSrc=i;this.vertexSrc=r;this.uniforms=n}});var BaseShader_1=BaseShader;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetOffsetX=function(e){return e.width*e.originX};var GetOffsetX_1=GetOffsetX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetOffsetY=function(e){return e.height*e.originY};var GetOffsetY_1=GetOffsetY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var bounds={CenterOn:CenterOn_1,GetBottom:GetBottom_1,GetCenterX:GetCenterX_1,GetCenterY:GetCenterY_1,GetLeft:GetLeft_1,GetOffsetX:GetOffsetX_1,GetOffsetY:GetOffsetY_1,GetRight:GetRight_1,GetTop:GetTop_1,SetBottom:SetBottom_1,SetCenterX:SetCenterX_1,SetCenterY:SetCenterY_1,SetLeft:SetLeft_1,SetRight:SetRight_1,SetTop:SetTop_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TouchAction=function(e,t){if(t===undefined){t="none"}e.style["msTouchAction"]=t;e.style["ms-touch-action"]=t;e.style["touch-action"]=t;return e};var TouchAction_1=TouchAction;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UserSelect=function(e,t){if(t===undefined){t="none"}var i=["-webkit-","-khtml-","-moz-","-ms-",""];i.forEach((function(i){e.style[i+"user-select"]=t}));e.style["-webkit-touch-callout"]=t;e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";return e};var UserSelect_1=UserSelect;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var canvas={CanvasInterpolation:CanvasInterpolation_1,CanvasPool:CanvasPool_1,Smoothing:Smoothing_1,TouchAction:TouchAction_1,UserSelect:UserSelect_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ColorToRGBA=function(e){var t={r:e>>16&255,g:e>>8&255,b:e&255,a:255};if(e>16777215){t.a=e>>>24}return t};var ColorToRGBA_1=ColorToRGBA;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ComponentToHex=function(e){var t=e.toString(16);return t.length===1?"0"+t:t};var ComponentToHex_1=ComponentToHex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HueToComponent=function(e,t,i){if(i<0){i+=1}if(i>1){i-=1}if(i<1/6){return e+(t-e)*6*i}if(i<1/2){return t}if(i<2/3){return e+(t-e)*(2/3-i)*6}return e};var HueToComponent_1=HueToComponent;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HSLToColor=function(e,t,i){var r=i;var n=i;var s=i;if(t!==0){var a=i<.5?i*(1+t):i+t-i*t;var o=2*i-a;r=HueToComponent_1(o,a,e+1/3);n=HueToComponent_1(o,a,e);s=HueToComponent_1(o,a,e-1/3)}var l=new Color_1;return l.setGLTo(r,n,s,1)};var HSLToColor_1=HSLToColor;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HSVColorWheel=function(e,t){if(e===undefined){e=1}if(t===undefined){t=1}var i=[];for(var r=0;r<=359;r++){i.push(HSVToRGB_1(r/359,e,t))}return i};var HSVColorWheel_1=HSVColorWheel;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RGBWithRGB=function(e,t,i,r,n,s,a,o){if(a===undefined){a=100}if(o===undefined){o=0}var l=o/a;return{r:Linear_1$1(e,r,l),g:Linear_1$1(t,n,l),b:Linear_1$1(i,s,l)}};var ColorWithColor=function(e,t,i,r){if(i===undefined){i=100}if(r===undefined){r=0}return RGBWithRGB(e.r,e.g,e.b,t.r,t.g,t.b,i,r)};var ColorWithRGB=function(e,t,i,r,n,s){if(n===undefined){n=100}if(s===undefined){s=0}return RGBWithRGB(e.r,e.g,e.b,t,i,r,n,s)};var Interpolate={RGBWithRGB:RGBWithRGB,ColorWithRGB:ColorWithRGB,ColorWithColor:ColorWithColor};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomRGB=function(e,t){if(e===undefined){e=0}if(t===undefined){t=255}return new Color_1(Between_1$1(e,t),Between_1$1(e,t),Between_1$1(e,t))};var RandomRGB_1=RandomRGB;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RGBToString=function(e,t,i,r,n){if(r===undefined){r=255}if(n===undefined){n="#"}if(n==="#"){return"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)}else{return"0x"+ComponentToHex_1(r)+ComponentToHex_1(e)+ComponentToHex_1(t)+ComponentToHex_1(i)}};var RGBToString_1=RGBToString;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Color_1.ColorToRGBA=ColorToRGBA_1;Color_1.ComponentToHex=ComponentToHex_1;Color_1.GetColor=GetColor_1;Color_1.GetColor32=GetColor32_1;Color_1.HexStringToColor=HexStringToColor_1;Color_1.HSLToColor=HSLToColor_1;Color_1.HSVColorWheel=HSVColorWheel_1;Color_1.HSVToRGB=HSVToRGB_1;Color_1.HueToComponent=HueToComponent_1;Color_1.IntegerToColor=IntegerToColor_1;Color_1.IntegerToRGB=IntegerToRGB_1;Color_1.Interpolate=Interpolate;Color_1.ObjectToColor=ObjectToColor_1;Color_1.RandomRGB=RandomRGB_1;Color_1.RGBStringToColor=RGBStringToColor_1;Color_1.RGBToHSV=RGBToHSV_1;Color_1.RGBToString=RGBToString_1;Color_1.ValueToColor=ValueToColor_1;var color=Color_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var mask={BitmapMask:BitmapMask_1,GeometryMask:GeometryMask_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var display={Align:align,BaseShader:BaseShader_1,Bounds:bounds,Canvas:canvas,Color:color,Masks:mask};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AddToDOM=function(e,t){var i;if(t){if(typeof t==="string"){i=document.getElementById(t)}else if(typeof t==="object"&&t.nodeType===1){i=t}}else if(e.parentElement){return e}if(!i){i=document.body}i.appendChild(e);return e};var AddToDOM_1=AddToDOM;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DOMContentLoaded=function(e){if(document.readyState==="complete"||document.readyState==="interactive"){e();return}var t=function(){document.removeEventListener("deviceready",t,true);document.removeEventListener("DOMContentLoaded",t,true);window.removeEventListener("load",t,true);e()};if(!document.body){window.setTimeout(t,20)}else if(OS_1.cordova){document.addEventListener("deviceready",t,false)}else{document.addEventListener("DOMContentLoaded",t,true);window.addEventListener("load",t,true)}};var DOMContentLoaded_1=DOMContentLoaded;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CENTER_CONST={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ORIENTATION_CONST={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SCALE_MODE_CONST={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ZOOM_CONST={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONST$1={CENTER:CENTER_CONST,ORIENTATION:ORIENTATION_CONST,SCALE_MODE:SCALE_MODE_CONST,ZOOM:ZOOM_CONST};var _const$5=CONST$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetScreenOrientation=function(e,t){var i=window.screen;var r=i?i.orientation||i.mozOrientation||i.msOrientation:false;if(r&&typeof r.type==="string"){return r.type}else if(typeof r==="string"){return r}if(i){return i.height>i.width?_const$5.PORTRAIT:_const$5.LANDSCAPE}else if(typeof window.orientation==="number"){return window.orientation===0||window.orientation===180?_const$5.PORTRAIT:_const$5.LANDSCAPE}else if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches){return _const$5.PORTRAIT}else if(window.matchMedia("(orientation: landscape)").matches){return _const$5.LANDSCAPE}}return t>e?_const$5.PORTRAIT:_const$5.LANDSCAPE};var GetScreenOrientation_1=GetScreenOrientation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTarget=function(e){var t;if(e!==""){if(typeof e==="string"){t=document.getElementById(e)}else if(e&&e.nodeType===1){t=e}}if(!t){t=document.body}return t};var GetTarget_1=GetTarget;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseXML=function(e){var t="";try{if(window["DOMParser"]){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else{t=new ActiveXObject("Microsoft.XMLDOM");t.loadXML(e)}}catch(r){t=null}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){return null}else{return t}};var ParseXML_1=ParseXML;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveFromDOM=function(e){if(e.parentNode){e.parentNode.removeChild(e)}};var RemoveFromDOM_1=RemoveFromDOM;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Dom={AddToDOM:AddToDOM_1,DOMContentLoaded:DOMContentLoaded_1,GetScreenOrientation:GetScreenOrientation_1,GetTarget:GetTarget_1,ParseXML:ParseXML_1,RemoveFromDOM:RemoveFromDOM_1,RequestAnimationFrame:RequestAnimationFrame_1};var dom=Dom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EventEmitter=new Class_1({Extends:eventemitter3,initialize:function e(){eventemitter3.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});PluginCache_1.register("EventEmitter",EventEmitter,"events");var EventEmitter_1=EventEmitter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$9={EventEmitter:EventEmitter_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CreateDOMContainer=function(e){var t=e.config;if(!t.parent||!t.domCreateContainer){return}var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" ");e.domContainer=i;AddToDOM_1(i,t.parent)};var CreateDOMContainer_1=CreateDOMContainer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var INPUT_CONST={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};var _const$6=INPUT_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BOOT_EVENT$2="boot";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT$4="destroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_END_EVENT="dragend";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_ENTER_EVENT="dragenter";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_EVENT="drag";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_LEAVE_EVENT="dragleave";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_OVER_EVENT="dragover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_START_EVENT="dragstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DROP_EVENT="drop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAME_OUT_EVENT="gameout";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAME_OVER_EVENT="gameover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DOWN_EVENT="gameobjectdown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_END_EVENT="dragend";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_ENTER_EVENT="dragenter";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_EVENT="drag";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_LEAVE_EVENT="dragleave";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_OVER_EVENT="dragover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DRAG_START_EVENT="dragstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_DROP_EVENT="drop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_MOVE_EVENT="gameobjectmove";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_OUT_EVENT="gameobjectout";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_OVER_EVENT="gameobjectover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_DOWN_EVENT="pointerdown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_MOVE_EVENT="pointermove";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_OUT_EVENT="pointerout";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_OVER_EVENT="pointerover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_UP_EVENT="pointerup";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_POINTER_WHEEL_EVENT="wheel";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_UP_EVENT="gameobjectup";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEOBJECT_WHEEL_EVENT="gameobjectwheel";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MANAGER_BOOT_EVENT="boot";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MANAGER_PROCESS_EVENT="process";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MANAGER_UPDATE_EVENT="update";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_DOWN_EVENT="pointerdown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_DOWN_OUTSIDE_EVENT="pointerdownoutside";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_MOVE_EVENT="pointermove";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_OUT_EVENT="pointerout";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_OVER_EVENT="pointerover";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_UP_EVENT="pointerup";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_UP_OUTSIDE_EVENT="pointerupoutside";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTER_WHEEL_EVENT="wheel";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POINTERLOCK_CHANGE_EVENT="pointerlockchange";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PRE_UPDATE_EVENT$1="preupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SHUTDOWN_EVENT$1="shutdown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var START_EVENT$1="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UPDATE_EVENT$1="update";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$a={BOOT:BOOT_EVENT$2,DESTROY:DESTROY_EVENT$4,DRAG_END:DRAG_END_EVENT,DRAG_ENTER:DRAG_ENTER_EVENT,DRAG:DRAG_EVENT,DRAG_LEAVE:DRAG_LEAVE_EVENT,DRAG_OVER:DRAG_OVER_EVENT,DRAG_START:DRAG_START_EVENT,DROP:DROP_EVENT,GAME_OUT:GAME_OUT_EVENT,GAME_OVER:GAME_OVER_EVENT,GAMEOBJECT_DOWN:GAMEOBJECT_DOWN_EVENT,GAMEOBJECT_DRAG_END:GAMEOBJECT_DRAG_END_EVENT,GAMEOBJECT_DRAG_ENTER:GAMEOBJECT_DRAG_ENTER_EVENT,GAMEOBJECT_DRAG:GAMEOBJECT_DRAG_EVENT,GAMEOBJECT_DRAG_LEAVE:GAMEOBJECT_DRAG_LEAVE_EVENT,GAMEOBJECT_DRAG_OVER:GAMEOBJECT_DRAG_OVER_EVENT,GAMEOBJECT_DRAG_START:GAMEOBJECT_DRAG_START_EVENT,GAMEOBJECT_DROP:GAMEOBJECT_DROP_EVENT,GAMEOBJECT_MOVE:GAMEOBJECT_MOVE_EVENT,GAMEOBJECT_OUT:GAMEOBJECT_OUT_EVENT,GAMEOBJECT_OVER:GAMEOBJECT_OVER_EVENT,GAMEOBJECT_POINTER_DOWN:GAMEOBJECT_POINTER_DOWN_EVENT,GAMEOBJECT_POINTER_MOVE:GAMEOBJECT_POINTER_MOVE_EVENT,GAMEOBJECT_POINTER_OUT:GAMEOBJECT_POINTER_OUT_EVENT,GAMEOBJECT_POINTER_OVER:GAMEOBJECT_POINTER_OVER_EVENT,GAMEOBJECT_POINTER_UP:GAMEOBJECT_POINTER_UP_EVENT,GAMEOBJECT_POINTER_WHEEL:GAMEOBJECT_POINTER_WHEEL_EVENT,GAMEOBJECT_UP:GAMEOBJECT_UP_EVENT,GAMEOBJECT_WHEEL:GAMEOBJECT_WHEEL_EVENT,MANAGER_BOOT:MANAGER_BOOT_EVENT,MANAGER_PROCESS:MANAGER_PROCESS_EVENT,MANAGER_UPDATE:MANAGER_UPDATE_EVENT,POINTER_DOWN:POINTER_DOWN_EVENT,POINTER_DOWN_OUTSIDE:POINTER_DOWN_OUTSIDE_EVENT,POINTER_MOVE:POINTER_MOVE_EVENT,POINTER_OUT:POINTER_OUT_EVENT,POINTER_OVER:POINTER_OVER_EVENT,POINTER_UP:POINTER_UP_EVENT,POINTER_UP_OUTSIDE:POINTER_UP_OUTSIDE_EVENT,POINTER_WHEEL:POINTER_WHEEL_EVENT,POINTERLOCK_CHANGE:POINTERLOCK_CHANGE_EVENT,PRE_UPDATE:PRE_UPDATE_EVENT$1,SHUTDOWN:SHUTDOWN_EVENT$1,START:START_EVENT$1,UPDATE:UPDATE_EVENT$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Remove=function(e,t,i,r){if(r===undefined){r=e}var n;if(!Array.isArray(t)){n=e.indexOf(t);if(n!==-1){SpliceOne_1(e,n);if(i){i.call(r,t)}return t}else{return null}}var s=t.length-1;while(s>=0){var a=t[s];n=e.indexOf(a);if(n!==-1){SpliceOne_1(e,n);if(i){i.call(r,a)}}else{t.pop()}s--}return t};var Remove_1=Remove;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KeyCodes={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};var KeyCodes_1=KeyCodes;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NOOP$1=Class_1;var KeyboardManager=new Class_1({initialize:function e(t){this.manager=t;this.queue=[];this.preventDefault=true;this.captures=[];this.enabled=false;this.onKeyDown=NOOP$1;this.onKeyUp=NOOP$1;t.events.once(events$a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard;this.target=e.inputKeyboardEventTarget;this.addCapture(e.inputKeyboardCapture);if(!this.target&&window){this.target=window}if(this.enabled&&this.target){this.startListeners()}this.manager.game.events.on(events$1.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(t){if(t.defaultPrevented||!e.enabled||!e.manager){return}e.queue.push(t);if(!e.manager.useQueue){e.manager.events.emit(events$a.MANAGER_PROCESS)}var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;if(e.preventDefault&&!i&&e.captures.indexOf(t.keyCode)>-1){t.preventDefault()}};this.onKeyUp=function(t){if(t.defaultPrevented||!e.enabled||!e.manager){return}e.queue.push(t);if(!e.manager.useQueue){e.manager.events.emit(events$a.MANAGER_PROCESS)}var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;if(e.preventDefault&&!i&&e.captures.indexOf(t.keyCode)>-1){t.preventDefault()}};var t=this.target;if(t){t.addEventListener("keydown",this.onKeyDown,false);t.addEventListener("keyup",this.onKeyUp,false);this.enabled=true}},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,false);e.removeEventListener("keyup",this.onKeyUp,false);this.enabled=false},postUpdate:function(){this.queue=[]},addCapture:function(e){if(typeof e==="string"){e=e.split(",")}if(!Array.isArray(e)){e=[e]}var t=this.captures;for(var i=0;i<e.length;i++){var r=e[i];if(typeof r==="string"){r=KeyCodes_1[r.trim().toUpperCase()]}if(t.indexOf(r)===-1){t.push(r)}}this.preventDefault=t.length>0},removeCapture:function(e){if(typeof e==="string"){e=e.split(",")}if(!Array.isArray(e)){e=[e]}var t=this.captures;for(var i=0;i<e.length;i++){var r=e[i];if(typeof r==="string"){r=KeyCodes_1[r.toUpperCase()]}Remove_1(t,r)}this.preventDefault=t.length>0},clearCaptures:function(){this.captures=[];this.preventDefault=false},destroy:function(){this.stopListeners();this.clearCaptures();this.queue=[];this.manager.game.events.off(events$1.POST_RENDER,this.postUpdate,this);this.target=null;this.enabled=false;this.manager=null}});var KeyboardManager_1=KeyboardManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NOOP$2=Class_1;var MouseManager=new Class_1({initialize:function e(t){this.manager=t;this.capture=true;this.enabled=false;this.locked=false;this.onMouseMove=NOOP$2;this.onMouseDown=NOOP$2;this.onMouseUp=NOOP$2;this.onMouseDownWindow=NOOP$2;this.onMouseUpWindow=NOOP$2;this.onMouseOver=NOOP$2;this.onMouseOut=NOOP$2;this.onMouseWheel=NOOP$2;this.pointerLockChange=NOOP$2;t.events.once(events$a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse;this.target=e.inputMouseEventTarget;this.capture=e.inputMouseCapture;if(!this.target){this.target=this.manager.game.canvas}if(e.disableContextMenu){this.disableContextMenu()}if(this.enabled&&this.target){this.startListeners()}},disableContextMenu:function(){document.body.addEventListener("contextmenu",(function(e){e.preventDefault();return false}));return this},requestPointerLock:function(){if(Features_1.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock;e.requestPointerLock()}},releasePointerLock:function(){if(Features_1.pointerLock){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock;document.exitPointerLock()}},startListeners:function(){var e=this;var t=this.manager.canvas;var i=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseMove(t);if(e.capture){t.preventDefault()}}};this.onMouseDown=function(r){if(i){window.focus()}if(!r.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseDown(r);if(e.capture&&r.target===t){r.preventDefault()}}};this.onMouseDownWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onMouseDown(i)}};this.onMouseUp=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseUp(i);if(e.capture&&i.target===t){i.preventDefault()}}};this.onMouseUpWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onMouseUp(i)}};this.onMouseOver=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOver(t)}};this.onMouseOut=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOut(t)}};this.onMouseWheel=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseWheel(t)}};var r=this.target;if(!r){return}var n={passive:true};var s={passive:false};r.addEventListener("mousemove",this.onMouseMove,this.capture?s:n);r.addEventListener("mousedown",this.onMouseDown,this.capture?s:n);r.addEventListener("mouseup",this.onMouseUp,this.capture?s:n);r.addEventListener("mouseover",this.onMouseOver,this.capture?s:n);r.addEventListener("mouseout",this.onMouseOut,this.capture?s:n);r.addEventListener("wheel",this.onMouseWheel,this.capture?s:n);if(window&&this.manager.game.config.inputWindowEvents){window.addEventListener("mousedown",this.onMouseDownWindow,s);window.addEventListener("mouseup",this.onMouseUpWindow,s)}if(Features_1.pointerLock){this.pointerLockChange=function(t){var i=e.target;e.locked=document.pointerLockElement===i||document.mozPointerLockElement===i||document.webkitPointerLockElement===i?true:false;e.manager.onPointerLockChange(t)};document.addEventListener("pointerlockchange",this.pointerLockChange,true);document.addEventListener("mozpointerlockchange",this.pointerLockChange,true);document.addEventListener("webkitpointerlockchange",this.pointerLockChange,true)}this.enabled=true},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove);e.removeEventListener("mousedown",this.onMouseDown);e.removeEventListener("mouseup",this.onMouseUp);e.removeEventListener("mouseover",this.onMouseOver);e.removeEventListener("mouseout",this.onMouseOut);if(window){window.removeEventListener("mousedown",this.onMouseDownWindow);window.removeEventListener("mouseup",this.onMouseUpWindow)}if(Features_1.pointerLock){document.removeEventListener("pointerlockchange",this.pointerLockChange,true);document.removeEventListener("mozpointerlockchange",this.pointerLockChange,true);document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,true)}},destroy:function(){this.stopListeners();this.target=null;this.enabled=false;this.manager=null}});var MouseManager_1=MouseManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Pointer=new Class_1({initialize:function e(t,i){this.manager=t;this.id=i;this.camera=null;this.button=0;this.buttons=0;this.position=new Vector2_1;this.prevPosition=new Vector2_1;this.midPoint=new Vector2_1(-1,-1);this.velocity=new Vector2_1;this.angle=0;this.distance=0;this.smoothFactor=0;this.motionFactor=.2;this.worldX=0;this.worldY=0;this.moveTime=0;this.downX=0;this.downY=0;this.downTime=0;this.upX=0;this.upY=0;this.upTime=0;this.primaryDown=false;this.isDown=false;this.wasTouch=false;this.wasCanceled=false;this.movementX=0;this.movementY=0;this.identifier=0;this.pointerId=null;this.active=i===0?true:false;this.locked=false;this.deltaX=0;this.deltaY=0;this.deltaZ=0},updateWorldPoint:function(e){var t=this.x;var i=this.y;if(e.resolution!==1){t+=e._x;i+=e._y}var r=e.getWorldPoint(t,i);this.worldX=r.x;this.worldY=r.y;return this},positionToCamera:function(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function(){var e=this.position.x;var t=this.position.y;var i=this.midPoint.x;var r=this.midPoint.y;if(e===i&&t===r){return}var n=SmoothStepInterpolation_1(this.motionFactor,i,e);var s=SmoothStepInterpolation_1(this.motionFactor,r,t);if(Equal_1(n,e,.1)){n=e}if(Equal_1(s,t,.1)){s=t}this.midPoint.set(n,s);var a=e-n;var o=t-s;this.velocity.set(a,o);this.angle=Between_1(n,s,e,t);this.distance=Math.sqrt(a*a+o*o)},up:function(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.button=e.button;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,false);if(e.button===0){this.primaryDown=false;this.upX=this.x;this.upY=this.y;this.upTime=e.timeStamp}this.isDown=false;this.wasTouch=false},down:function(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.button=e.button;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,false);if(e.button===0){this.primaryDown=true;this.downX=this.x;this.downY=this.y;this.downTime=e.timeStamp}this.isDown=true;this.wasTouch=false},move:function(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,true);if(this.locked){this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0;this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0}this.moveTime=e.timeStamp;this.wasTouch=false},wheel:function(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,false);this.deltaX=e.deltaX;this.deltaY=e.deltaY;this.deltaZ=e.deltaZ;this.wasTouch=false},touchstart:function(e,t){if(e["pointerId"]){this.pointerId=e.pointerId}this.identifier=e.identifier;this.target=e.target;this.active=true;this.buttons=1;this.event=t;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,false);this.primaryDown=true;this.downX=this.x;this.downY=this.y;this.downTime=t.timeStamp;this.isDown=true;this.wasTouch=true;this.wasCanceled=false;this.updateMotion()},touchmove:function(e,t){this.event=t;this.manager.transformPointer(this,e.pageX,e.pageY,true);this.moveTime=t.timeStamp;this.wasTouch=true;this.updateMotion()},touchend:function(e,t){this.buttons=0;this.event=t;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,false);this.primaryDown=false;this.upX=this.x;this.upY=this.y;this.upTime=t.timeStamp;this.isDown=false;this.wasTouch=true;this.wasCanceled=false;this.active=false;this.updateMotion()},touchcancel:function(e,t){this.buttons=0;this.event=t;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,false);this.primaryDown=false;this.upX=this.x;this.upY=this.y;this.upTime=t.timeStamp;this.isDown=false;this.wasTouch=true;this.wasCanceled=true;this.active=false},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return this.buttons&1?true:false},rightButtonDown:function(){return this.buttons&2?true:false},middleButtonDown:function(){return this.buttons&4?true:false},backButtonDown:function(){return this.buttons&8?true:false},forwardButtonDown:function(){return this.buttons&16?true:false},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){if(this.isDown){return DistanceBetween_1(this.downX,this.downY,this.x,this.y)}else{return DistanceBetween_1(this.downX,this.downY,this.upX,this.upY)}},getDistanceX:function(){if(this.isDown){return Math.abs(this.downX-this.x)}else{return Math.abs(this.downX-this.upX)}},getDistanceY:function(){if(this.isDown){return Math.abs(this.downY-this.y)}else{return Math.abs(this.downY-this.upY)}},getDuration:function(){if(this.isDown){return this.manager.time-this.downTime}else{return this.upTime-this.downTime}},getAngle:function(){if(this.isDown){return Between_1(this.downX,this.downY,this.x,this.y)}else{return Between_1(this.downX,this.downY,this.upX,this.upY)}},getInterpolatedPosition:function(e,t){if(e===undefined){e=10}if(t===undefined){t=[]}var i=this.prevPosition.x;var r=this.prevPosition.y;var n=this.position.x;var s=this.position.y;for(var a=0;a<e;a++){var o=1/e*a;t[a]={x:SmoothStepInterpolation_1(o,i,n),y:SmoothStepInterpolation_1(o,r,s)}}return t},destroy:function(){this.camera=null;this.manager=null;this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}});var Pointer_1=Pointer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TouchManager=new Class_1({initialize:function e(t){this.manager=t;this.capture=true;this.enabled=false;this.onTouchStart=NOOP_1;this.onTouchStartWindow=NOOP_1;this.onTouchMove=NOOP_1;this.onTouchEnd=NOOP_1;this.onTouchEndWindow=NOOP_1;this.onTouchCancel=NOOP_1;this.onTouchCancelWindow=NOOP_1;this.onTouchOver=NOOP_1;this.onTouchOut=NOOP_1;t.events.once(events$a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch;this.target=e.inputTouchEventTarget;this.capture=e.inputTouchCapture;if(!this.target){this.target=this.manager.game.canvas}if(this.enabled&&this.target){this.startListeners()}},startListeners:function(){var e=this;var t=this.manager.canvas;var i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){if(i){window.focus()}if(!r.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchStart(r);if(e.capture&&r.target===t){r.preventDefault()}}};this.onTouchStartWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onTouchStart(i)}};this.onTouchMove=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchMove(t);if(e.capture){t.preventDefault()}}};this.onTouchEnd=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchEnd(i);if(e.capture&&i.target===t){i.preventDefault()}}};this.onTouchEndWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onTouchEnd(i)}};this.onTouchCancel=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchCancel(t);if(e.capture){t.preventDefault()}}};this.onTouchCancelWindow=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchCancel(t)}};this.onTouchOver=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOver(t)}};this.onTouchOut=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOut(t)}};var r=this.target;if(!r){return}var n={passive:true};var s={passive:false};r.addEventListener("touchstart",this.onTouchStart,this.capture?s:n);r.addEventListener("touchmove",this.onTouchMove,this.capture?s:n);r.addEventListener("touchend",this.onTouchEnd,this.capture?s:n);r.addEventListener("touchcancel",this.onTouchCancel,this.capture?s:n);r.addEventListener("touchover",this.onTouchOver,this.capture?s:n);r.addEventListener("touchout",this.onTouchOut,this.capture?s:n);if(window&&this.manager.game.config.inputWindowEvents){window.addEventListener("touchstart",this.onTouchStartWindow,s);window.addEventListener("touchend",this.onTouchEndWindow,s);window.addEventListener("touchcancel",this.onTouchCancelWindow,s)}this.enabled=true},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart);e.removeEventListener("touchmove",this.onTouchMove);e.removeEventListener("touchend",this.onTouchEnd);e.removeEventListener("touchcancel",this.onTouchCancel);e.removeEventListener("touchover",this.onTouchOver);e.removeEventListener("touchout",this.onTouchOut);if(window){window.removeEventListener("touchstart",this.onTouchStartWindow);window.removeEventListener("touchend",this.onTouchEndWindow)}},destroy:function(){this.stopListeners();this.target=null;this.enabled=false;this.manager=null}});var TouchManager_1=TouchManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InputManager=new Class_1({initialize:function e(t,i){this.game=t;this.config=i;this.enabled=true;this.events=new eventemitter3;this.isOver=true;this.defaultCursor="";this.keyboard=i.inputKeyboard?new KeyboardManager_1(this):null;this.mouse=i.inputMouse?new MouseManager_1(this):null;this.touch=i.inputTouch?new TouchManager_1(this):null;this.pointers=[];this.pointersTotal=i.inputActivePointers;if(i.inputTouch&&this.pointersTotal===1){this.pointersTotal=2}for(var r=0;r<=this.pointersTotal;r++){var n=new Pointer_1(this,r);n.smoothFactor=i.inputSmoothFactor;this.pointers.push(n)}this.mousePointer=i.inputMouse?this.pointers[0]:null;this.activePointer=this.pointers[0];this.globalTopOnly=true;this.time=0;this._tempPoint={x:0,y:0};this._tempHitTest=[];this._tempMatrix=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempSkip=false;this.mousePointerContainer=[this.mousePointer];t.events.once(events$1.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas;this.scaleManager=this.game.scale;this.events.emit(events$a.MANAGER_BOOT);this.game.events.on(events$1.PRE_RENDER,this.preRender,this);this.game.events.once(events$1.DESTROY,this.destroy,this)},setCanvasOver:function(e){this.isOver=true;this.events.emit(events$a.GAME_OVER,e)},setCanvasOut:function(e){this.isOver=false;this.events.emit(events$a.GAME_OUT,e)},preRender:function(){var e=this.game.loop.now;var t=this.game.loop.delta;var i=this.game.scene.getScenes(true,true);this.time=e;this.events.emit(events$a.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&n.sys.input.updatePoll(e,t)&&this.globalTopOnly){return}}},setDefaultCursor:function(e){this.defaultCursor=e;if(this.canvas.style.cursor!==e){this.canvas.style.cursor=e}},setCursor:function(e){if(e.cursor){this.canvas.style.cursor=e.cursor}},resetCursor:function(e){if(e.cursor&&this.canvas){this.canvas.style.cursor=this.defaultCursor}},addPointer:function(e){if(e===undefined){e=1}var t=[];if(this.pointersTotal+e>10){e=10-this.pointersTotal}for(var i=0;i<e;i++){var r=this.pointers.length;var n=new Pointer_1(this,r);n.smoothFactor=this.config.inputSmoothFactor;this.pointers.push(n);this.pointersTotal++;t.push(n)}return t},updateInputPlugins:function(e,t){var i=this.game.scene.getScenes(true,true);this._tempSkip=false;for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input){var s=n.sys.input.update(e,t);if(s&&this.globalTopOnly||this._tempSkip){return}}}},onTouchStart:function(e){var t=this.pointers;var i=[];for(var r=0;r<e.changedTouches.length;r++){var n=e.changedTouches[r];for(var s=1;s<this.pointersTotal;s++){var a=t[s];if(!a.active){a.touchstart(n,e);this.activePointer=a;i.push(a);break}}}this.updateInputPlugins(_const$6.TOUCH_START,i)},onTouchMove:function(e){var t=this.pointers;var i=[];for(var r=0;r<e.changedTouches.length;r++){var n=e.changedTouches[r];for(var s=1;s<this.pointersTotal;s++){var a=t[s];if(a.active&&a.identifier===n.identifier){a.touchmove(n,e);this.activePointer=a;i.push(a);break}}}this.updateInputPlugins(_const$6.TOUCH_MOVE,i)},onTouchEnd:function(e){var t=this.pointers;var i=[];for(var r=0;r<e.changedTouches.length;r++){var n=e.changedTouches[r];for(var s=1;s<this.pointersTotal;s++){var a=t[s];if(a.active&&a.identifier===n.identifier){a.touchend(n,e);i.push(a);break}}}this.updateInputPlugins(_const$6.TOUCH_END,i)},onTouchCancel:function(e){var t=this.pointers;var i=[];for(var r=0;r<e.changedTouches.length;r++){var n=e.changedTouches[r];for(var s=1;s<this.pointersTotal;s++){var a=t[s];if(a.active&&a.identifier===n.identifier){a.touchcancel(n,e);i.push(a);break}}}this.updateInputPlugins(_const$6.TOUCH_CANCEL,i)},onMouseDown:function(e){this.mousePointer.down(e);this.mousePointer.updateMotion();this.updateInputPlugins(_const$6.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(e){this.mousePointer.move(e);this.mousePointer.updateMotion();this.updateInputPlugins(_const$6.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(e){this.mousePointer.up(e);this.mousePointer.updateMotion();this.updateInputPlugins(_const$6.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(e){this.mousePointer.wheel(e);this.updateInputPlugins(_const$6.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(e){var t=this.mouse.locked;this.mousePointer.locked=t;this.events.emit(events$a.POINTERLOCK_CHANGE,e,t)},inputCandidate:function(e,t){var i=e.input;if(!i||!i.enabled||!e.willRender(t)){return false}var r=true;var n=e.parentContainer;if(n){do{if(!n.willRender(t)){r=false;break}n=n.parentContainer}while(n)}return r},hitTest:function(e,t,i,r){if(r===undefined){r=this._tempHitTest}var n=this._tempPoint;var s=i.scrollX;var a=i.scrollY;r.length=0;var o=e.x;var l=e.y;if(i.resolution!==1){o+=i._x;l+=i._y}i.getWorldPoint(o,l,n);e.worldX=n.x;e.worldY=n.y;var h={x:0,y:0};var u=this._tempMatrix;var c=this._tempMatrix2;for(var f=0;f<t.length;f++){var d=t[f];if(!this.inputCandidate(d,i)){continue}var v=n.x+s*d.scrollFactorX-s;var p=n.y+a*d.scrollFactorY-a;if(d.parentContainer){d.getWorldTransformMatrix(u,c);u.applyInverse(v,p,h)}else{TransformXY_1(v,p,d.x,d.y,d.rotation,d.scaleX,d.scaleY,h)}if(this.pointWithinHitArea(d,h.x,h.y)){r.push(d)}}return r},pointWithinHitArea:function(e,t,i){t+=e.displayOriginX;i+=e.displayOriginY;var r=e.input;if(r&&r.hitAreaCallback(r.hitArea,t,i,e)){r.localX=t;r.localY=i;return true}else{return false}},pointWithinInteractiveObject:function(e,t,i){if(!e.hitArea){return false}t+=e.gameObject.displayOriginX;i+=e.gameObject.displayOriginY;e.localX=t;e.localY=i;return e.hitAreaCallback(e.hitArea,t,i,e)},transformPointer:function(e,t,i,r){var n=e.position;var s=e.prevPosition;s.x=n.x;s.y=n.y;var a=this.scaleManager.transformX(t);var o=this.scaleManager.transformY(i);var l=e.smoothFactor;if(!r||l===0){n.x=a;n.y=o}else{n.x=a*l+s.x*(1-l);n.y=o*l+s.y*(1-l)}},destroy:function(){this.events.removeAllListeners();this.game.events.off(events$1.PRE_RENDER);if(this.keyboard){this.keyboard.destroy()}if(this.mouse){this.mouse.destroy()}if(this.touch){this.touch.destroy()}for(var e=0;e<this.pointers.length;e++){this.pointers[e].destroy()}this.pointers=[];this._tempHitTest=[];this._tempMatrix.destroy();this.canvas=null;this.game=null}});var InputManager_1=InputManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var types={};var FileTypesManager={install:function(e){for(var t in types){e[t]=types[t]}},register:function(e,t){types[e]=t},destroy:function(){types={}}};var FileTypesManager_1=FileTypesManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GameObjectCreator=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(events$7.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null;this.displayList=null;this.updateList=null}});GameObjectCreator.register=function(e,t){if(!GameObjectCreator.prototype.hasOwnProperty(e)){GameObjectCreator.prototype[e]=t}};GameObjectCreator.remove=function(e){if(GameObjectCreator.prototype.hasOwnProperty(e)){delete GameObjectCreator.prototype[e]}};PluginCache_1.register("GameObjectCreator",GameObjectCreator,"make");var GameObjectCreator_1=GameObjectCreator;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PluginManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.plugins=[];this.scenePlugins=[];this._pendingGlobal=[];this._pendingScene=[];if(t.isBooted){this.boot()}else{t.events.once(events$1.BOOT,this.boot,this)}},boot:function(){var e;var t;var i;var r;var n;var s;var a;var o=this.game.config;var l=o.installGlobalPlugins;l=l.concat(this._pendingGlobal);for(e=0;e<l.length;e++){t=l[e];i=GetFastValue_1(t,"key",null);r=GetFastValue_1(t,"plugin",null);n=GetFastValue_1(t,"start",false);s=GetFastValue_1(t,"mapping",null);a=GetFastValue_1(t,"data",null);if(i){if(r){this.install(i,r,n,s,a)}else{console.warn("Missing `plugin` for key: "+i)}}}l=o.installScenePlugins;l=l.concat(this._pendingScene);for(e=0;e<l.length;e++){t=l[e];i=GetFastValue_1(t,"key",null);r=GetFastValue_1(t,"plugin",null);s=GetFastValue_1(t,"mapping",null);if(i){if(r){this.installScenePlugin(i,r,s)}else{console.warn("Missing `plugin` for key: "+i)}}}this._pendingGlobal=[];this._pendingScene=[];this.game.events.once(events$1.DESTROY,this.destroy,this)},addToScene:function(e,t,i){var r;var n;var s;var a=this.game;var o=e.scene;var l=e.settings.map;var h=e.settings.isBooted;for(r=0;r<t.length;r++){n=t[r];if(a[n]){e[n]=a[n];if(l.hasOwnProperty(n)){o[l[n]]=e[n]}}else if(n==="game"&&l.hasOwnProperty(n)){o[l[n]]=a}}for(var u=0;u<i.length;u++){s=i[u];for(r=0;r<s.length;r++){n=s[r];if(!PluginCache_1.hasCore(n)){continue}var c=PluginCache_1.getCore(n);var f=new c.plugin(o,this);e[c.mapping]=f;if(c.custom){o[c.mapping]=f}else if(l.hasOwnProperty(c.mapping)){o[l[c.mapping]]=f}if(h){f.boot()}}}s=this.plugins;for(r=0;r<s.length;r++){var d=s[r];if(d.mapping){o[d.mapping]=d.plugin}}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;e=e.concat(this.scenePlugins);return e},installScenePlugin:function(e,t,i,r,n){if(n===undefined){n=false}if(typeof t!=="function"){console.warn("Invalid Scene Plugin: "+e);return}if(!PluginCache_1.hasCore(e)){PluginCache_1.register(e,t,i,true);this.scenePlugins.push(e)}else if(!n&&PluginCache_1.hasCore(e)){console.warn("Scene Plugin key in use: "+e);return}if(r){var s=new t(r,this);r.sys[e]=s;if(i&&i!==""){r[i]=s}s.boot()}},install:function(e,t,i,r,n){if(i===undefined){i=false}if(r===undefined){r=null}if(n===undefined){n=null}if(typeof t!=="function"){console.warn("Invalid Plugin: "+e);return null}if(PluginCache_1.hasCustom(e)){console.warn("Plugin key in use: "+e);return null}if(r!==null){i=true}if(!this.game.isBooted){this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:r,data:n})}else{PluginCache_1.registerCustom(e,t,r,n);if(i){return this.start(e)}}return null},getIndex:function(e){var t=this.plugins;for(var i=0;i<t.length;i++){var r=t[i];if(r.key===e){return i}}return-1},getEntry:function(e){var t=this.getIndex(e);if(t!==-1){return this.plugins[t]}},isActive:function(e){var t=this.getEntry(e);return t&&t.active},start:function(e,t){if(t===undefined){t=e}var i=this.getEntry(t);if(i&&!i.active){i.active=true;i.plugin.start()}else if(!i){i=this.createEntry(e,t)}return i?i.plugin:null},createEntry:function(e,t){var i=PluginCache_1.getCustom(e);if(i){var r=new i.plugin(this);i={key:t,plugin:r,active:true,mapping:i.mapping,data:i.data};this.plugins.push(i);r.init(i.data);r.start()}return i},stop:function(e){var t=this.getEntry(e);if(t&&t.active){t.active=false;t.plugin.stop()}return this},get:function(e,t){if(t===undefined){t=true}var i=this.getEntry(e);if(i){return i.plugin}else{var r=this.getClass(e);if(r&&t){i=this.createEntry(e,e);return i?i.plugin:null}else if(r){return r}}return null},getClass:function(e){return PluginCache_1.getCustomClass(e)},removeGlobalPlugin:function(e){var t=this.getEntry(e);if(t){Remove_1(this.plugins,t)}PluginCache_1.removeCustom(e)},removeScenePlugin:function(e){Remove_1(this.scenePlugins,e);PluginCache_1.remove(e)},registerGameObject:function(e,t,i){if(t){GameObjectFactory_1.register(e,t)}if(i){GameObjectCreator_1.register(e,i)}return this},removeGameObject:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=true}if(t){GameObjectFactory_1.remove(e)}if(i){GameObjectCreator_1.remove(e)}return this},registerFileType:function(e,t,i){FileTypesManager_1.register(e,t);if(i&&i.sys.load){i.sys.load[e]=t}},destroy:function(){for(var e=0;e<this.plugins.length;e++){this.plugins[e].plugin.destroy()}PluginCache_1.destroyCustomPlugins();if(this.game.noReturn){PluginCache_1.destroyCorePlugins()}this.game=null;this.plugins=[];this.scenePlugins=[]}});var PluginManager_1=PluginManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetInnerHeight=function(e){if(!e){return window.innerHeight}var t=Math.abs(window.orientation);var i={w:0,h:0};var r=document.createElement("div");r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0");document.documentElement.appendChild(r);i.w=t===90?r.offsetHeight:window.innerWidth;i.h=t===90?window.innerWidth:r.offsetHeight;document.documentElement.removeChild(r);r=null;if(Math.abs(window.orientation)!==90){return i.h}else{return i.w}};var GetInnerHeight_1=GetInnerHeight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Size$1=new Class_1({initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=t}if(r===undefined){r=0}if(n===undefined){n=null}this._width=t;this._height=i;this._parent=n;this.aspectMode=r;this.aspectRatio=i===0?1:t/i;this.minWidth=0;this.minHeight=0;this.maxWidth=Number.MAX_VALUE;this.maxHeight=Number.MAX_VALUE;this.snapTo=new Vector2_1},setAspectMode:function(e){if(e===undefined){e=0}this.aspectMode=e;return this.setSize(this._width,this._height)},setSnap:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.snapTo.set(e,t);return this.setSize(this._width,this._height)},setParent:function(e){this._parent=e;return this.setSize(this._width,this._height)},setMin:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.minWidth=Clamp_1(e,0,this.maxWidth);this.minHeight=Clamp_1(t,0,this.maxHeight);return this.setSize(this._width,this._height)},setMax:function(e,t){if(e===undefined){e=Number.MAX_VALUE}if(t===undefined){t=e}this.maxWidth=Clamp_1(e,this.minWidth,Number.MAX_VALUE);this.maxHeight=Clamp_1(t,this.minHeight,Number.MAX_VALUE);return this.setSize(this._width,this._height)},setSize:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}switch(this.aspectMode){case Size$1.NONE:this._width=this.getNewWidth(SnapFloor_1(e,this.snapTo.x));this._height=this.getNewHeight(SnapFloor_1(t,this.snapTo.y));this.aspectRatio=this._height===0?1:this._width/this._height;break;case Size$1.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(SnapFloor_1(e,this.snapTo.x));this._height=this.getNewHeight(this._width*(1/this.aspectRatio),false);break;case Size$1.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(SnapFloor_1(t,this.snapTo.y));this._width=this.getNewWidth(this._height*this.aspectRatio,false);break;case Size$1.FIT:this.constrain(e,t,true);break;case Size$1.ENVELOP:this.constrain(e,t,false);break}return this},setAspectRatio:function(e){this.aspectRatio=e;return this.setSize(this._width,this._height)},resize:function(e,t){this._width=this.getNewWidth(SnapFloor_1(e,this.snapTo.x));this._height=this.getNewHeight(SnapFloor_1(t,this.snapTo.y));this.aspectRatio=this._height===0?1:this._width/this._height;return this},getNewWidth:function(e,t){if(t===undefined){t=true}e=Clamp_1(e,this.minWidth,this.maxWidth);if(t&&this._parent&&e>this._parent.width){e=Math.max(this.minWidth,this._parent.width)}return e},getNewHeight:function(e,t){if(t===undefined){t=true}e=Clamp_1(e,this.minHeight,this.maxHeight);if(t&&this._parent&&e>this._parent.height){e=Math.max(this.minHeight,this._parent.height)}return e},constrain:function(e,t,i){if(e===undefined){e=0}if(t===undefined){t=e}if(i===undefined){i=true}e=this.getNewWidth(e);t=this.getNewHeight(t);var r=this.snapTo;var n=t===0?1:e/t;if(i&&this.aspectRatio>n||!i&&this.aspectRatio<n){e=SnapFloor_1(e,r.x);t=e/this.aspectRatio;if(r.y>0){t=SnapFloor_1(t,r.y);e=t*this.aspectRatio}}else if(i&&this.aspectRatio<n||!i&&this.aspectRatio>n){t=SnapFloor_1(t,r.y);e=t*this.aspectRatio;if(r.x>0){e=SnapFloor_1(e,r.x);t=e*(1/this.aspectRatio)}}this._width=e;this._height=t;return this},fitTo:function(e,t){return this.constrain(e,t,true)},envelop:function(e,t){return this.constrain(e,t,false)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){if(e&&e.style){e.style.width=this._width+"px";e.style.height=this._height+"px"}},copy:function(e){e.setAspectMode(this.aspectMode);e.aspectRatio=this.aspectRatio;return e.setSize(this.width,this.height)},destroy:function(){this._parent=null;this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});Size$1.NONE=0;Size$1.WIDTH_CONTROLS_HEIGHT=1;Size$1.HEIGHT_CONTROLS_WIDTH=2;Size$1.FIT=3;Size$1.ENVELOP=4;var Size_1$1=Size$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScaleManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.canvasBounds=new Rectangle_1;this.parent=null;this.parentIsWindow=false;this.parentSize=new Size_1$1;this.gameSize=new Size_1$1;this.baseSize=new Size_1$1;this.displaySize=new Size_1$1;this.scaleMode=_const$5.SCALE_MODE.NONE;this.resolution=1;this.zoom=1;this._resetZoom=false;this.displayScale=new Vector2_1(1,1);this.autoRound=false;this.autoCenter=_const$5.CENTER.NO_CENTER;this.orientation=_const$5.ORIENTATION.LANDSCAPE;this.fullscreenTarget=null;this._createdFullscreenTarget=false;this._requestedFullscreenChange=false;this.dirty=false;this.resizeInterval=500;this._lastCheck=0;this._checkOrientation=false;this.listeners={orientationChange:NOOP_1,windowResize:NOOP_1,fullScreenChange:NOOP_1,fullScreenError:NOOP_1}},preBoot:function(){this.parseConfig(this.game.config);this.game.events.once("boot",this.boot,this)},boot:function(){var e=this.game;this.canvas=e.canvas;this.fullscreen=e.device.fullscreen;if(this.scaleMode!==_const$5.SCALE_MODE.RESIZE){this.displaySize.setAspectMode(this.scaleMode)}if(this.scaleMode===_const$5.SCALE_MODE.NONE){this.resize(this.width,this.height)}else{this.getParentBounds();if(this.parentSize.width>0&&this.parentSize.height>0){this.displaySize.setParent(this.parentSize)}this.refresh()}e.events.on(events$1.PRE_STEP,this.step,this);this.startListeners()},parseConfig:function(e){this.getParent(e);this.getParentBounds();var t=e.width;var i=e.height;var r=e.scaleMode;var n=e.resolution;var s=e.zoom;var a=e.autoRound;if(typeof t==="string"){var o=this.parentSize.width;if(o===0){o=window.innerWidth}var l=parseInt(t,10)/100;t=Math.floor(o*l)}if(typeof i==="string"){var h=this.parentSize.height;if(h===0){h=window.innerHeight}var u=parseInt(i,10)/100;i=Math.floor(h*u)}this.resolution=1;this.scaleMode=r;this.autoRound=a;this.autoCenter=e.autoCenter;this.resizeInterval=e.resizeInterval;if(a){t=Math.floor(t);i=Math.floor(i)}this.gameSize.setSize(t,i);if(s===_const$5.ZOOM.MAX_ZOOM){s=this.getMaxZoom()}this.zoom=s;if(s!==1){this._resetZoom=true}this.baseSize.setSize(t*n,i*n);if(a){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}if(e.minWidth>0){this.displaySize.setMin(e.minWidth*s,e.minHeight*s)}if(e.maxWidth>0){this.displaySize.setMax(e.maxWidth*s,e.maxHeight*s)}this.displaySize.setSize(t,i);this.orientation=GetScreenOrientation_1(t,i)},getParent:function(e){var t=e.parent;if(t===null){return}this.parent=GetTarget_1(t);this.parentIsWindow=this.parent===document.body;if(e.expandParent&&e.scaleMode!==_const$5.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();if(this.parentIsWindow||i.height===0){document.documentElement.style.height="100%";document.body.style.height="100%";i=this.parent.getBoundingClientRect();if(!this.parentIsWindow&&i.height===0){this.parent.style.overflow="hidden";this.parent.style.width="100%";this.parent.style.height="100%"}}}if(e.fullscreenTarget&&!this.fullscreenTarget){this.fullscreenTarget=GetTarget_1(e.fullscreenTarget)}},getParentBounds:function(){if(!this.parent){return false}var e=this.parentSize;var t=this.parent.getBoundingClientRect();if(this.parentIsWindow&&this.game.device.os.iOS){t.height=GetInnerHeight_1(true)}var i=this.resolution;var r=t.width*i;var n=t.height*i;if(e.width!==r||e.height!==n){e.setSize(r,n);return true}else{return false}},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;if(t){return t(e)}return false},setParentSize:function(e,t){this.parentSize.setSize(e,t);return this.refresh()},setGameSize:function(e,t){var i=this.autoRound;var r=this.resolution;if(i){e=Math.floor(e);t=Math.floor(t)}var n=this.width;var s=this.height;this.gameSize.resize(e,t);this.baseSize.resize(e*r,t*r);if(i){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}this.displaySize.setSize(e,t);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;return this.refresh(n,s)},resize:function(e,t){var i=this.zoom;var r=this.resolution;var n=this.autoRound;if(n){e=Math.floor(e);t=Math.floor(t)}var s=this.width;var a=this.height;this.gameSize.resize(e,t);this.baseSize.resize(e*r,t*r);if(n){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}this.displaySize.setSize(e*i*r,t*i*r);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;var o=this.canvas.style;var l=e*i;var h=t*i;if(n){l=Math.floor(l);h=Math.floor(h)}if(l!==e||h!==t){o.width=l+"px";o.height=h+"px"}return this.refresh(s,a)},setZoom:function(e){this.zoom=e;this._resetZoom=true;return this.refresh()},setMaxZoom:function(){this.zoom=this.getMaxZoom();this._resetZoom=true;return this.refresh()},refresh:function(e,t){if(e===undefined){e=this.width}if(t===undefined){t=this.height}this.updateScale();this.updateBounds();this.updateOrientation();this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style;var n=i.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")";n.marginLeft=r.marginLeft;n.marginTop=r.marginTop}this.emit(events$6.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,e,t);return this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=false;var e=GetScreenOrientation_1(this.width,this.height);if(e!==this.orientation){this.orientation=e;this.emit(events$6.ORIENTATION_CHANGE,e)}}},updateScale:function(){var e=this.canvas.style;var t=this.gameSize.width;var i=this.gameSize.height;var r;var n;var s=this.zoom;var a=this.autoRound;var o=1;if(this.scaleMode===_const$5.SCALE_MODE.NONE){this.displaySize.setSize(t*s*o,i*s*o);r=this.displaySize.width/o;n=this.displaySize.height/o;if(a){r=Math.floor(r);n=Math.floor(n)}if(this._resetZoom){e.width=r+"px";e.height=n+"px";this._resetZoom=false}}else if(this.scaleMode===_const$5.SCALE_MODE.RESIZE){this.displaySize.setSize(this.parentSize.width,this.parentSize.height);this.gameSize.setSize(this.displaySize.width,this.displaySize.height);this.baseSize.setSize(this.displaySize.width*o,this.displaySize.height*o);r=this.displaySize.width/o;n=this.displaySize.height/o;if(a){r=Math.floor(r);n=Math.floor(n)}this.canvas.width=r;this.canvas.height=n}else{this.displaySize.setSize(this.parentSize.width,this.parentSize.height);r=this.displaySize.width/o;n=this.displaySize.height/o;if(a){r=Math.floor(r);n=Math.floor(n)}e.width=r+"px";e.height=n+"px"}this.getParentBounds();this.updateCenter()},getMaxZoom:function(){var e=SnapFloor_1(this.parentSize.width,this.gameSize.width,0,true);var t=SnapFloor_1(this.parentSize.height,this.gameSize.height,0,true);return Math.max(Math.min(e,t),1)},updateCenter:function(){var e=this.autoCenter;if(e===_const$5.CENTER.NO_CENTER){return}var t=this.canvas;var i=t.style;var r=t.getBoundingClientRect();var n=r.width;var s=r.height;var a=Math.floor((this.parentSize.width-n)/2);var o=Math.floor((this.parentSize.height-s)/2);if(e===_const$5.CENTER.CENTER_HORIZONTALLY){o=0}else if(e===_const$5.CENTER.CENTER_VERTICALLY){a=0}i.marginLeft=a+"px";i.marginTop=o+"px"},updateBounds:function(){var e=this.canvasBounds;var t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0);e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0);e.width=t.width;e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){if(e===undefined){e={navigationUI:"hide"}}var t=this.fullscreen;if(!t.available){this.emit(events$6.FULLSCREEN_UNSUPPORTED);return}if(!t.active){var i=this.getFullscreenTarget();this._requestedFullscreenChange=true;if(typeof Promise!=="undefined"){if(t.keyboard){i[t.request](Element.ALLOW_KEYBOARD_INPUT).then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this))}else{i[t.request](e).then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this))}}else{if(t.keyboard){i[t.request](Element.ALLOW_KEYBOARD_INPUT)}else{i[t.request](e)}if(t.active){this.fullscreenSuccessHandler()}else{this.fullscreenErrorHandler()}}}},fullscreenSuccessHandler:function(){this.getParentBounds();this.refresh();this.emit(events$6.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget();this.emit(events$6.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0";e.style.padding="0";e.style.width="100%";e.style.height="100%";this.fullscreenTarget=e;this._createdFullscreenTarget=true}if(this._createdFullscreenTarget){var t=this.canvas.parentNode;t.insertBefore(this.fullscreenTarget,this.canvas);this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e);t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available){this.emit(events$6.FULLSCREEN_UNSUPPORTED);return false}if(e.active){this._requestedFullscreenChange=true;document[e.cancel]()}this.removeFullscreenTarget();this.getParentBounds();this.emit(events$6.LEAVE_FULLSCREEN);this.refresh()},toggleFullscreen:function(e){if(this.fullscreen.active){this.stopFullscreen()}else{this.startFullscreen(e)}},startListeners:function(){var e=this;var t=this.listeners;t.orientationChange=function(){e._checkOrientation=true;e.dirty=true};t.windowResize=function(){e.dirty=true};window.addEventListener("orientationchange",t.orientationChange,false);window.addEventListener("resize",t.windowResize,false);if(this.fullscreen.available){t.fullScreenChange=function(t){return e.onFullScreenChange(t)};t.fullScreenError=function(t){return e.onFullScreenError(t)};var i=["webkit","moz",""];i.forEach((function(e){document.addEventListener(e+"fullscreenchange",t.fullScreenChange,false);document.addEventListener(e+"fullscreenerror",t.fullScreenError,false)}));document.addEventListener("MSFullscreenChange",t.fullScreenChange,false);document.addEventListener("MSFullscreenError",t.fullScreenError,false)}},onFullScreenChange:function(){if(!this._requestedFullscreenChange){this.stopFullscreen()}this._requestedFullscreenChange=false},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(e,t){if(!this.parent){return}this._lastCheck+=t;if(this.dirty||this._lastCheck>this.resizeInterval){if(this.getParentBounds()){this.refresh()}this.dirty=false;this._lastCheck=0}},stopListeners:function(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,false);window.removeEventListener("resize",e.windowResize,false);var t=["webkit","moz",""];t.forEach((function(t){document.removeEventListener(t+"fullscreenchange",e.fullScreenChange,false);document.removeEventListener(t+"fullscreenerror",e.fullScreenError,false)}));document.removeEventListener("MSFullscreenChange",e.fullScreenChange,false);document.removeEventListener("MSFullscreenError",e.fullScreenError,false)},destroy:function(){this.removeAllListeners();this.stopListeners();this.game=null;this.canvas=null;this.canvasBounds=null;this.parent=null;this.fullscreenTarget=null;this.parentSize.destroy();this.gameSize.destroy();this.baseSize.destroy();this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===_const$5.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===_const$5.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});var ScaleManager_1=ScaleManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONST$2={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};var _const$7=CONST$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ADD_EVENT$2="addfile";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COMPLETE_EVENT="complete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_COMPLETE_EVENT="filecomplete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_KEY_COMPLETE_EVENT="filecomplete-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_LOAD_ERROR_EVENT="loaderror";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_LOAD_EVENT="load";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_PROGRESS_EVENT="fileprogress";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var POST_PROCESS_EVENT="postprocess";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PROGRESS_EVENT="progress";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var START_EVENT$2="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$b={ADD:ADD_EVENT$2,COMPLETE:COMPLETE_EVENT,FILE_COMPLETE:FILE_COMPLETE_EVENT,FILE_KEY_COMPLETE:FILE_KEY_COMPLETE_EVENT,FILE_LOAD_ERROR:FILE_LOAD_ERROR_EVENT,FILE_LOAD:FILE_LOAD_EVENT,FILE_PROGRESS:FILE_PROGRESS_EVENT,POST_PROCESS:POST_PROCESS_EVENT,PROGRESS:PROGRESS_EVENT,START:START_EVENT$2};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UppercaseFirst=function(e){return e&&e[0].toUpperCase()+e.slice(1)};var UppercaseFirst_1=UppercaseFirst;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPhysicsPlugins=function(e){var t=e.game.config.defaultPhysicsSystem;var i=GetFastValue_1(e.settings,"physics",false);if(!t&&!i){return}var r=[];if(t){r.push(UppercaseFirst_1(t+"Physics"))}if(i){for(var n in i){n=UppercaseFirst_1(n.concat("Physics"));if(r.indexOf(n)===-1){r.push(n)}}}return r};var GetPhysicsPlugins_1=GetPhysicsPlugins;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetScenePlugins=function(e){var t=e.plugins.getDefaultScenePlugins();var i=GetFastValue_1(e.settings,"plugins",false);if(Array.isArray(i)){return i}else if(t){return t}else{return[]}};var GetScenePlugins_1=GetScenePlugins;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone=function(e){var t={};for(var i in e){if(Array.isArray(e[i])){t[i]=e[i].slice(0)}else{t[i]=e[i]}}return t};var Clone_1=Clone;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Merge=function(e,t){var i=Clone_1(e);for(var r in t){if(!i.hasOwnProperty(r)){i[r]=t[r]}}return i};var Merge_1=Merge;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InjectionMap={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};if(typeof PLUGIN_CAMERA3D){InjectionMap.cameras3d="cameras3d"}if(typeof PLUGIN_FBINSTANT){InjectionMap.facebook="facebook"}var InjectionMap_1=InjectionMap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Settings={create:function(e){if(typeof e==="string"){e={key:e}}else if(e===undefined){e={}}return{status:_const$7.PENDING,key:GetValue_1(e,"key",""),active:GetValue_1(e,"active",false),visible:GetValue_1(e,"visible",true),isBooted:false,isTransition:false,transitionFrom:null,transitionDuration:0,transitionAllowInput:true,data:{},pack:GetValue_1(e,"pack",false),cameras:GetValue_1(e,"cameras",null),map:GetValue_1(e,"map",Merge_1(InjectionMap_1,GetValue_1(e,"mapAdd",{}))),physics:GetValue_1(e,"physics",{}),loader:GetValue_1(e,"loader",{}),plugins:GetValue_1(e,"plugins",false),input:GetValue_1(e,"input",{})}}};var Settings_1=Settings;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Systems=new Class_1({initialize:function e(t,i){this.scene=t;this.config=i;this.settings=Settings_1.create(i);this.sceneUpdate=NOOP_1},init:function(e){this.settings.status=_const$7.INIT;this.sceneUpdate=NOOP_1;this.game=e;this.renderer=e.renderer;this.canvas=e.canvas;this.context=e.context;var t=e.plugins;this.plugins=t;t.addToScene(this,DefaultPlugins_1.Global,[DefaultPlugins_1.CoreScene,GetScenePlugins_1(this),GetPhysicsPlugins_1(this)]);this.events.emit(events$7.BOOT,this);this.settings.isBooted=true},install:function(e){if(!Array.isArray(e)){e=[e]}this.plugins.installLocal(this,e)},step:function(e,t){this.events.emit(events$7.PRE_UPDATE,e,t);this.events.emit(events$7.UPDATE,e,t);this.sceneUpdate.call(this.scene,e,t);this.events.emit(events$7.POST_UPDATE,e,t)},render:function(e){var t=this.displayList;t.depthSort();this.cameras.render(e,t);this.events.emit(events$7.RENDER,e)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(e){if(this.settings.active){this.settings.status=_const$7.PAUSED;this.settings.active=false;this.events.emit(events$7.PAUSE,this,e)}return this},resume:function(e){if(!this.settings.active){this.settings.status=_const$7.RUNNING;this.settings.active=true;this.events.emit(events$7.RESUME,this,e)}return this},sleep:function(e){this.settings.status=_const$7.SLEEPING;this.settings.active=false;this.settings.visible=false;this.events.emit(events$7.SLEEP,this,e);return this},wake:function(e){var t=this.settings;t.status=_const$7.RUNNING;t.active=true;t.visible=true;this.events.emit(events$7.WAKE,this,e);if(t.isTransition){this.events.emit(events$7.TRANSITION_WAKE,t.transitionFrom,t.transitionDuration)}return this},isSleeping:function(){return this.settings.status===_const$7.SLEEPING},isActive:function(){return this.settings.status===_const$7.RUNNING},isPaused:function(){return this.settings.status===_const$7.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(e){this.settings.visible=e;return this},setActive:function(e,t){if(e){return this.resume(t)}else{return this.pause(t)}},start:function(e){if(e){this.settings.data=e}this.settings.status=_const$7.START;this.settings.active=true;this.settings.visible=true;this.events.emit(events$7.START,this);this.events.emit(events$7.READY,this,e)},shutdown:function(e){this.events.off(events$7.TRANSITION_INIT);this.events.off(events$7.TRANSITION_START);this.events.off(events$7.TRANSITION_COMPLETE);this.events.off(events$7.TRANSITION_OUT);this.settings.status=_const$7.SHUTDOWN;this.settings.active=false;this.settings.visible=false;this.events.emit(events$7.SHUTDOWN,this,e)},destroy:function(){this.settings.status=_const$7.DESTROYED;this.settings.active=false;this.settings.visible=false;this.events.emit(events$7.DESTROY,this);this.events.removeAllListeners();var e=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"];for(var t=0;t<e.length;t++){this[e[t]]=null}}});var Systems_1=Systems;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Scene=new Class_1({initialize:function e(t){this.sys=new Systems_1(this,t)},update:function(){}});var Scene_1=Scene;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SceneManager=new Class_1({initialize:function e(t,i){this.game=t;this.keys={};this.scenes=[];this._pending=[];this._start=[];this._queue=[];this._data={};this.isProcessing=false;this.isBooted=false;this.customViewports=0;if(i){if(!Array.isArray(i)){i=[i]}for(var r=0;r<i.length;r++){this._pending.push({key:"default",scene:i[r],autoStart:r===0,data:{}})}}t.events.once(events$1.READY,this.bootQueue,this)},bootQueue:function(){if(this.isBooted){return}var e;var t;var i;var r;for(e=0;e<this._pending.length;e++){t=this._pending[e];i=t.key;r=t.scene;var n;if(r instanceof Scene_1){n=this.createSceneFromInstance(i,r)}else if(typeof r==="object"){n=this.createSceneFromObject(i,r)}else if(typeof r==="function"){n=this.createSceneFromFunction(i,r)}i=n.sys.settings.key;this.keys[i]=n;this.scenes.push(n);if(this._data[i]){n.sys.settings.data=this._data[i].data;if(this._data[i].autoStart){t.autoStart=true}}if(t.autoStart||n.sys.settings.active){this._start.push(i)}}this._pending.length=0;this._data={};this.isBooted=true;for(e=0;e<this._start.length;e++){t=this._start[e];this.start(t)}this._start.length=0},processQueue:function(){var e=this._pending.length;var t=this._queue.length;if(e===0&&t===0){return}var i;var r;if(e){for(i=0;i<e;i++){r=this._pending[i];this.add(r.key,r.scene,r.autoStart,r.data)}for(i=0;i<this._start.length;i++){r=this._start[i];this.start(r)}this._start.length=0;this._pending.length=0;return}for(i=0;i<this._queue.length;i++){r=this._queue[i];this[r.op](r.keyA,r.keyB)}this._queue.length=0},add:function(e,t,i,r){if(i===undefined){i=false}if(r===undefined){r={}}if(this.isProcessing||!this.isBooted){this._pending.push({key:e,scene:t,autoStart:i,data:r});if(!this.isBooted){this._data[e]={data:r}}return null}e=this.getKey(e,t);var n;if(t instanceof Scene_1){n=this.createSceneFromInstance(e,t)}else if(typeof t==="object"){t.key=e;n=this.createSceneFromObject(e,t)}else if(typeof t==="function"){n=this.createSceneFromFunction(e,t)}n.sys.settings.data=r;e=n.sys.settings.key;this.keys[e]=n;this.scenes.push(n);if(i||n.sys.settings.active){if(this._pending.length){this._start.push(e)}else{this.start(e)}}return n},remove:function(e){if(this.isProcessing){this._queue.push({op:"remove",keyA:e,keyB:null})}else{var t=this.getScene(e);if(!t||t.sys.isTransitioning()){return this}var i=this.scenes.indexOf(t);var r=t.sys.settings.key;if(i>-1){delete this.keys[r];this.scenes.splice(i,1);if(this._start.indexOf(r)>-1){i=this._start.indexOf(r);this._start.splice(i,1)}t.sys.destroy()}}return this},bootScene:function(e){var t=e.sys;var i=t.settings;if(e.init){e.init.call(e,i.data);i.status=_const$7.INIT;if(i.isTransition){t.events.emit(events$7.TRANSITION_INIT,i.transitionFrom,i.transitionDuration)}}var r;if(t.load){r=t.load;r.reset()}if(r&&e.preload){e.preload.call(e);if(r.list.size===0){this.create(e)}else{i.status=_const$7.LOADING;r.once(events$b.COMPLETE,this.loadComplete,this);r.start()}}else{this.create(e)}},loadComplete:function(e){var t=e.scene;if(this.game.sound&&this.game.sound.onBlurPausedSounds){this.game.sound.unlock()}this.create(t)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue();this.isProcessing=true;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;if(r.settings.status>_const$7.START&&r.settings.status<=_const$7.RUNNING){r.step(e,t)}}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;if(i.settings.visible&&i.settings.status>=_const$7.LOADING&&i.settings.status<_const$7.SLEEPING){i.render(e)}}this.isProcessing=false},create:function(e){var t=e.sys;var i=t.settings;if(e.create){i.status=_const$7.CREATING;e.create.call(e,i.data);if(i.status===_const$7.DESTROYED){return}}if(i.isTransition){t.events.emit(events$7.TRANSITION_START,i.transitionFrom,i.transitionDuration)}if(e.update){t.sceneUpdate=e.update}i.status=_const$7.RUNNING;t.events.emit(events$7.CREATE,e)},createSceneFromFunction:function(e,t){var i=new t;if(i instanceof Scene_1){var r=i.sys.settings.key;if(r!==""){e=r}if(this.keys.hasOwnProperty(e)){throw new Error("Cannot add a Scene with duplicate key: "+e)}return this.createSceneFromInstance(e,i)}else{i.sys=new Systems_1(i);i.sys.settings.key=e;i.sys.init(this.game);return i}},createSceneFromInstance:function(e,t){var i=t.sys.settings.key;if(i!==""){e=i}else{t.sys.settings.key=e}t.sys.init(this.game);return t},createSceneFromObject:function(e,t){var i=new Scene_1(t);var r=i.sys.settings.key;if(r!==""){e=r}else{i.sys.settings.key=e}i.sys.init(this.game);var n=["init","preload","create","update","render"];for(var s=0;s<n.length;s++){var a=GetValue_1(t,n[s],null);if(a){i[n[s]]=a}}if(t.hasOwnProperty("extend")){for(var o in t.extend){var l=t.extend[o];if(o==="data"&&i.hasOwnProperty("data")&&typeof l==="object"){i.data.merge(l)}else if(o!=="sys"){i[o]=l}}}return i},getKey:function(e,t){if(!e){e="default"}if(typeof t==="function"){return e}else if(t instanceof Scene_1){e=t.sys.settings.key}else if(typeof t==="object"&&t.hasOwnProperty("key")){e=t.key}if(this.keys.hasOwnProperty(e)){throw new Error("Cannot add a Scene with duplicate key: "+e)}else{return e}},getScenes:function(e,t){if(e===undefined){e=true}if(t===undefined){t=false}var i=[];var r=this.scenes;for(var n=0;n<r.length;n++){var s=r[n];if(s&&(!e||e&&s.sys.isActive())){i.push(s)}}return t?i.reverse():i},getScene:function(e){if(typeof e==="string"){if(this.keys[e]){return this.keys[e]}}else{for(var t=0;t<this.scenes.length;t++){if(e===this.scenes[t]){return e}}}return null},isActive:function(e){var t=this.getScene(e);if(t){return t.sys.isActive()}return null},isPaused:function(e){var t=this.getScene(e);if(t){return t.sys.isPaused()}return null},isVisible:function(e){var t=this.getScene(e);if(t){return t.sys.isVisible()}return null},isSleeping:function(e){var t=this.getScene(e);if(t){return t.sys.isSleeping()}return null},pause:function(e,t){var i=this.getScene(e);if(i){i.sys.pause(t)}return this},resume:function(e,t){var i=this.getScene(e);if(i){i.sys.resume(t)}return this},sleep:function(e,t){var i=this.getScene(e);if(i&&!i.sys.isTransitioning()){i.sys.sleep(t)}return this},wake:function(e,t){var i=this.getScene(e);if(i){i.sys.wake(t)}return this},run:function(e,t){var i=this.getScene(e);if(!i){for(var r=0;r<this._pending.length;r++){if(this._pending[r].key===e){this.queueOp("start",e,t);break}}return this}if(i.sys.isSleeping()){i.sys.wake(t)}else if(i.sys.isBooted&&!i.sys.isActive()){i.sys.resume(t)}else{this.start(e,t)}},start:function(e,t){if(!this.isBooted){this._data[e]={autoStart:true,data:t};return this}var i=this.getScene(e);if(i){if(i.sys.isActive()||i.sys.isPaused()){i.sys.shutdown();i.sys.start(t)}else{i.sys.start(t);var r;if(i.sys.load){r=i.sys.load}if(r&&i.sys.settings.hasOwnProperty("pack")){r.reset();if(r.addPack({payload:i.sys.settings.pack})){i.sys.settings.status=_const$7.LOADING;r.once(events$b.COMPLETE,this.payloadComplete,this);r.start();return this}}}this.bootScene(i)}return this},stop:function(e){var t=this.getScene(e);if(t&&!t.sys.isTransitioning()){t.sys.shutdown()}return this},switch:function(e,t){var i=this.getScene(e);var r=this.getScene(t);if(i&&r&&i!==r){this.sleep(e);if(this.isSleeping(t)){this.wake(t)}else{this.start(t)}}return this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function(e){if(this.isProcessing){this._queue.push({op:"bringToTop",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(t!==-1&&t<this.scenes.length){var i=this.getScene(e);this.scenes.splice(t,1);this.scenes.push(i)}}return this},sendToBack:function(e){if(this.isProcessing){this._queue.push({op:"sendToBack",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(t!==-1&&t>0){var i=this.getScene(e);this.scenes.splice(t,1);this.scenes.unshift(i)}}return this},moveDown:function(e){if(this.isProcessing){this._queue.push({op:"moveDown",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(t>0){var i=t-1;var r=this.getScene(e);var n=this.getAt(i);this.scenes[t]=n;this.scenes[i]=r}}return this},moveUp:function(e){if(this.isProcessing){this._queue.push({op:"moveUp",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1;var r=this.getScene(e);var n=this.getAt(i);this.scenes[t]=n;this.scenes[i]=r}}return this},moveAbove:function(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"moveAbove",keyA:e,keyB:t})}else{var i=this.getIndex(e);var r=this.getIndex(t);if(i!==-1&&r!==-1){var n=this.getAt(r);this.scenes.splice(r,1);this.scenes.splice(i+1,0,n)}}return this},moveBelow:function(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"moveBelow",keyA:e,keyB:t})}else{var i=this.getIndex(e);var r=this.getIndex(t);if(i!==-1&&r!==-1){var n=this.getAt(r);this.scenes.splice(r,1);if(i===0){this.scenes.unshift(n)}else{this.scenes.splice(i,0,n)}}}return this},queueOp:function(e,t,i){this._queue.push({op:e,keyA:t,keyB:i});return this},swapPosition:function(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"swapPosition",keyA:e,keyB:t})}else{var i=this.getIndex(e);var r=this.getIndex(t);if(i!==r&&i!==-1&&r!==-1){var n=this.getAt(i);this.scenes[i]=this.scenes[r];this.scenes[r]=n}}return this},dump:function(){var e=[];var t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"];for(var i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys;var n=r.settings.visible&&(r.settings.status===_const$7.RUNNING||r.settings.status===_const$7.PAUSED)?"[*] ":"[-] ";n+=r.settings.key+" ("+t[r.settings.status]+")";e.push(n)}console.log(e.join("\n"))},destroy:function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e].sys;t.destroy()}this.update=NOOP_1;this.scenes=[];this._pending=[];this._start=[];this._queue=[];this.game=null}});var SceneManager_1=SceneManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Frame=new Class_1({initialize:function e(t,i,r,n,s,a,o){this.texture=t;this.name=i;this.source=t.source[r];this.sourceIndex=r;this.glTexture=this.source.glTexture;this.x=0;this.y=0;this.pivotX=0;this.pivotY=0;this.customPivot=false;this.rotated=false;this.autoRound=-1;this.customData={};this.u0=0;this.v0=0;this.u1=0;this.v1=0;this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:false,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}};this.setSize(a,o,n,s)},setSize:function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}this.cutX=i;this.cutY=r;this.cutWidth=e;this.cutHeight=t;this.width=e;this.height=t;this.halfWidth=Math.floor(e*.5);this.halfHeight=Math.floor(t*.5);this.centerX=Math.floor(e/2);this.centerY=Math.floor(t/2);var n=this.data;var s=n.cut;s.x=i;s.y=r;s.w=e;s.h=t;s.r=i+e;s.b=r+t;n.sourceSize.w=e;n.sourceSize.h=t;n.spriteSourceSize.w=e;n.spriteSourceSize.h=t;n.radius=.5*Math.sqrt(e*e+t*t);var a=n.drawImage;a.x=i;a.y=r;a.width=e;a.height=t;return this.updateUVs()},setTrim:function(e,t,i,r,n,s){var a=this.data;var o=a.spriteSourceSize;a.trim=true;a.sourceSize.w=e;a.sourceSize.h=t;o.x=i;o.y=r;o.w=n;o.h=s;o.r=i+n;o.b=r+s;this.x=i;this.y=r;this.width=n;this.height=s;this.halfWidth=n*.5;this.halfHeight=s*.5;this.centerX=Math.floor(n/2);this.centerY=Math.floor(s/2);return this.updateUVs()},setCropUVs:function(e,t,i,r,n,s,a){var o=this.cutX;var l=this.cutY;var h=this.cutWidth;var u=this.cutHeight;var c=this.realWidth;var f=this.realHeight;t=Clamp_1(t,0,c);i=Clamp_1(i,0,f);r=Clamp_1(r,0,c-t);n=Clamp_1(n,0,f-i);var d=o+t;var v=l+i;var p=r;var g=n;var m=this.data;if(m.trim){var _=m.spriteSourceSize;r=Clamp_1(r,0,h-t);n=Clamp_1(n,0,u-i);var y=t+r;var T=i+n;var x=!(_.r<t||_.b<i||_.x>y||_.y>T);if(x){var E=Math.max(_.x,t);var C=Math.max(_.y,i);var S=Math.min(_.r,y)-E;var A=Math.min(_.b,T)-C;p=S;g=A;if(s){d=o+(h-(E-_.x)-S)}else{d=o+(E-_.x)}if(a){v=l+(u-(C-_.y)-A)}else{v=l+(C-_.y)}t=E;i=C;r=S;n=A}else{d=0;v=0;p=0;g=0}}else{if(s){d=o+(h-t-r)}if(a){v=l+(u-i-n)}}var b=this.source.width;var w=this.source.height;e.u0=Math.max(0,d/b);e.v0=Math.max(0,v/w);e.u1=Math.min(1,(d+p)/b);e.v1=Math.min(1,(v+g)/w);e.x=t;e.y=i;e.cx=d;e.cy=v;e.cw=p;e.ch=g;e.width=r;e.height=n;e.flipX=s;e.flipY=a;return e},updateCropUVs:function(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},updateUVs:function(){var e=this.cutX;var t=this.cutY;var i=this.cutWidth;var r=this.cutHeight;var n=this.data.drawImage;n.width=i;n.height=r;var s=this.source.width;var a=this.source.height;this.u0=e/s;this.v0=t/a;this.u1=(e+i)/s;this.v1=(t+r)/a;return this},updateUVsInverted:function(){var e=this.source.width;var t=this.source.height;this.u0=(this.cutX+this.cutHeight)/e;this.v0=this.cutY/t;this.u1=this.cutX/e;this.v1=(this.cutY+this.cutWidth)/t;return this},clone:function(){var e=new Frame(this.texture,this.name,this.sourceIndex);e.cutX=this.cutX;e.cutY=this.cutY;e.cutWidth=this.cutWidth;e.cutHeight=this.cutHeight;e.x=this.x;e.y=this.y;e.width=this.width;e.height=this.height;e.halfWidth=this.halfWidth;e.halfHeight=this.halfHeight;e.centerX=this.centerX;e.centerY=this.centerY;e.rotated=this.rotated;e.data=Extend_1(true,e.data,this.data);e.updateUVs();return e},destroy:function(){this.source=null;this.texture=null;this.glTexture=null;this.customData=null;this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});var Frame_1=Frame;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextureSource=new Class_1({initialize:function e(t,i,r,n){var s=t.manager.game;this.renderer=s.renderer;this.texture=t;this.source=i;this.image=i;this.compressionAlgorithm=null;this.resolution=1;this.width=r||i.naturalWidth||i.width||0;this.height=n||i.naturalHeight||i.height||0;this.scaleMode=ScaleModes_1.DEFAULT;this.isCanvas=i instanceof HTMLCanvasElement;this.isRenderTexture=i.type==="RenderTexture";this.isGLTexture=i instanceof WebGLTexture;this.isPowerOf2=IsSizePowerOfTwo_1(this.width,this.height);this.glTexture=null;this.init(s)},init:function(e){if(this.renderer){if(this.renderer.gl){if(this.isCanvas){this.glTexture=this.renderer.canvasToTexture(this.image)}else if(this.isRenderTexture){this.image=this.source.canvas;this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)}else if(this.isGLTexture){this.glTexture=this.source}else{this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode)}}else if(this.isRenderTexture){this.image=this.source.canvas}}if(!e.config.antialias){this.setFilter(1)}},setFilter:function(e){if(this.renderer.gl){this.renderer.setTextureFilter(this.glTexture,e)}},update:function(){if(this.renderer.gl&&this.isCanvas){this.glTexture=this.renderer.canvasToTexture(this.image,this.glTexture)}},destroy:function(){if(this.glTexture){this.renderer.deleteTexture(this.glTexture)}if(this.isCanvas){CanvasPool_1.remove(this.image)}this.renderer=null;this.texture=null;this.source=null;this.image=null;this.glTexture=null}});var TextureSource_1=TextureSource;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TEXTURE_MISSING_ERROR="Texture.frame missing: ";var Texture$1=new Class_1({initialize:function e(t,i,r,n,s){if(!Array.isArray(r)){r=[r]}this.manager=t;this.key=i;this.source=[];this.dataSource=[];this.frames={};this.customData={};this.firstFrame="__BASE";this.frameTotal=0;for(var a=0;a<r.length;a++){this.source.push(new TextureSource_1(this,r[a],n,s))}},add:function(e,t,i,r,n,s){if(this.has(e)){return null}var a=new Frame_1(this,e,t,i,r,n,s);this.frames[e]=a;if(this.firstFrame==="__BASE"){this.firstFrame=e}this.frameTotal++;return a},remove:function(e){if(this.has(e)){var t=this.get(e);t.destroy();delete this.frames[e];return true}return false},has:function(e){return this.frames[e]},get:function(e){if(!e){e=this.firstFrame}var t=this.frames[e];if(!t){console.warn(TEXTURE_MISSING_ERROR+e);t=this.frames[this.firstFrame]}return t},getTextureSourceIndex:function(e){for(var t=0;t<this.source.length;t++){if(this.source[t]===e){return t}}return-1},getFramesFromTextureSource:function(e,t){if(t===undefined){t=false}var i=[];for(var r in this.frames){if(r==="__BASE"&&!t){continue}var n=this.frames[r];if(n.sourceIndex===e){i.push(n)}}return i},getFrameNames:function(e){if(e===undefined){e=false}var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");if(i!==-1){t.splice(i,1)}}return t},getSourceImage:function(e){if(e===undefined||e===null||this.frameTotal===1){e="__BASE"}var t=this.frames[e];if(t){return t.source.image}else{console.warn(TEXTURE_MISSING_ERROR+e);return this.frames["__BASE"].source.image}},getDataSourceImage:function(e){if(e===undefined||e===null||this.frameTotal===1){e="__BASE"}var t=this.frames[e];var i;if(!t){console.warn(TEXTURE_MISSING_ERROR+e);i=this.frames["__BASE"].sourceIndex}else{i=t.sourceIndex}return this.dataSource[i].image},setDataSource:function(e){if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){var i=this.source[t];this.dataSource.push(new TextureSource_1(this,e[t],i.width,i.height))}},setFilter:function(e){var t;for(t=0;t<this.source.length;t++){this.source[t].setFilter(e)}for(t=0;t<this.dataSource.length;t++){this.dataSource[t].setFilter(e)}},destroy:function(){var e;for(e=0;e<this.source.length;e++){this.source[e].destroy()}for(e=0;e<this.dataSource.length;e++){this.dataSource[e].destroy()}for(var t in this.frames){var i=this.frames[t];i.destroy()}this.source=[];this.dataSource=[];this.frames={};this.manager.removeKey(this.key);this.manager=null}});var Texture_1$1=Texture$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CanvasTexture=new Class_1({Extends:Texture_1$1,initialize:function e(t,i,r,n,s){Texture_1$1.call(this,t,i,r,n,s);this.add("__BASE",0,0,0,n,s);this._source=this.frames["__BASE"].source;this.canvas=this._source.image;this.context=this.canvas.getContext("2d");this.width=n;this.height=s;this.imageData=this.context.getImageData(0,0,n,s);this.data=null;if(this.imageData){this.data=this.imageData.data}this.pixels=null;if(this.data){if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}}},update:function(){this.imageData=this.context.getImageData(0,0,this.width,this.height);this.data=this.imageData.data;if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}if(this.manager.game.config.renderType===_const.WEBGL){this.refresh()}return this},draw:function(e,t,i){this.context.drawImage(i,e,t);return this.update()},drawFrame:function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}var n=this.manager.getFrame(e,t);if(n){var s=n.canvasData;var a=n.cutWidth;var o=n.cutHeight;var l=n.source.resolution;this.context.drawImage(n.source.image,s.x,s.y,a,o,i,r,a/l,o/l);return this.update()}else{return this}},setPixel:function(e,t,i,r,n,s){if(s===undefined){s=255}e=Math.abs(Math.floor(e));t=Math.abs(Math.floor(t));var a=this.getIndex(e,t);if(a>-1){var o=this.context.getImageData(e,t,1,1);o.data[0]=i;o.data[1]=r;o.data[2]=n;o.data[3]=s;this.context.putImageData(o,e,t)}return this},putData:function(e,t,i,r,n,s,a){if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=e.width}if(a===undefined){a=e.height}this.context.putImageData(e,t,i,r,n,s,a);return this},getData:function(e,t,i,r){e=Clamp_1(Math.floor(e),0,this.width-1);t=Clamp_1(Math.floor(t),0,this.height-1);i=Clamp_1(i,1,this.width-e);r=Clamp_1(r,1,this.height-t);var n=this.context.getImageData(e,t,i,r);return n},getPixel:function(e,t,i){if(!i){i=new Color_1}var r=this.getIndex(e,t);if(r>-1){var n=this.data;var s=n[r+0];var a=n[r+1];var o=n[r+2];var l=n[r+3];i.setTo(s,a,o,l)}return i},getPixels:function(e,t,i,r){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.width}if(r===undefined){r=i}e=Math.abs(Math.round(e));t=Math.abs(Math.round(t));var n=Clamp_1(e,0,this.width);var s=Clamp_1(e+i,0,this.width);var a=Clamp_1(t,0,this.height);var o=Clamp_1(t+r,0,this.height);var l=new Color_1;var h=[];for(var u=a;u<o;u++){var c=[];for(var f=n;f<s;f++){l=this.getPixel(f,u,l);c.push({x:f,y:u,color:l.color,alpha:l.alphaGL})}h.push(c)}return h},getIndex:function(e,t){e=Math.abs(Math.round(e));t=Math.abs(Math.round(t));if(e<this.width&&t<this.height){return(e+t*this.width)*4}else{return-1}},refresh:function(){this._source.update();return this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(e,t,i,r){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.width}if(r===undefined){r=this.height}this.context.clearRect(e,t,i,r);return this.update()},setSize:function(e,t){if(t===undefined){t=e}if(e!==this.width||t!==this.height){this.canvas.width=e;this.canvas.height=t;this._source.width=e;this._source.height=t;this._source.isPowerOf2=IsSizePowerOfTwo_1(e,t);this.frames["__BASE"].setSize(e,t,0,0);this.refresh()}return this},destroy:function(){Texture_1$1.prototype.destroy.call(this);this._source=null;this.canvas=null;this.context=null;this.imageData=null;this.data=null;this.pixels=null;this.buffer=null}});var CanvasTexture_1=CanvasTexture;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AtlasXML=function(e,t,i){if(!i.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var n=i.getElementsByTagName("SubTexture");var s;for(var a=0;a<n.length;a++){var o=n[a].attributes;var l=o.name.value;var h=parseInt(o.x.value,10);var u=parseInt(o.y.value,10);var c=parseInt(o.width.value,10);var f=parseInt(o.height.value,10);s=e.add(l,t,h,u,c,f);if(o.frameX){var d=Math.abs(parseInt(o.frameX.value,10));var v=Math.abs(parseInt(o.frameY.value,10));var p=parseInt(o.frameWidth.value,10);var g=parseInt(o.frameHeight.value,10);s.setTrim(c,f,d,v,p,g)}}return e};var AtlasXML_1=AtlasXML;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Canvas=function(e,t){var i=e.source[t];e.add("__BASE",t,0,0,i.width,i.height);return e};var Canvas_1=Canvas;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Image$1=function(e,t){var i=e.source[t];e.add("__BASE",t,0,0,i.width,i.height);return e};var Image_1=Image$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JSONArray=function(e,t,i){if(!i["frames"]&&!i["textures"]){console.warn("Invalid Texture Atlas JSON Array");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var n=Array.isArray(i.textures)?i.textures[t].frames:i.frames;var s;for(var a=0;a<n.length;a++){var o=n[a];s=e.add(o.filename,t,o.frame.x,o.frame.y,o.frame.w,o.frame.h);if(o.trimmed){s.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h)}if(o.rotated){s.rotated=true;s.updateUVsInverted()}if(o.anchor){s.customPivot=true;s.pivotX=o.anchor.x;s.pivotY=o.anchor.y}s.customData=Clone_1(o)}for(var l in i){if(l==="frames"){continue}if(Array.isArray(i[l])){e.customData[l]=i[l].slice(0)}else{e.customData[l]=i[l]}}return e};var JSONArray_1=JSONArray;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JSONHash=function(e,t,i){if(!i["frames"]){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);var n=i["frames"];var s;for(var a in n){var o=n[a];s=e.add(a,t,o.frame.x,o.frame.y,o.frame.w,o.frame.h);if(o.trimmed){s.setTrim(o.sourceSize.w,o.sourceSize.h,o.spriteSourceSize.x,o.spriteSourceSize.y,o.spriteSourceSize.w,o.spriteSourceSize.h)}if(o.rotated){s.rotated=true;s.updateUVsInverted()}s.customData=Clone_1(o)}for(var l in i){if(l==="frames"){continue}if(Array.isArray(i[l])){e.customData[l]=i[l].slice(0)}else{e.customData[l]=i[l]}}return e};var JSONHash_1=JSONHash;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpriteSheet=function(e,t,i,r,n,s,a){var o=GetFastValue_1(a,"frameWidth",null);var l=GetFastValue_1(a,"frameHeight",o);if(o===null){throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.")}var h=e.source[t];e.add("__BASE",t,0,0,h.width,h.height);var u=GetFastValue_1(a,"startFrame",0);var c=GetFastValue_1(a,"endFrame",-1);var f=GetFastValue_1(a,"margin",0);var d=GetFastValue_1(a,"spacing",0);var v=Math.floor((n-f+d)/(o+d));var p=Math.floor((s-f+d)/(l+d));var g=v*p;if(g===0){console.warn("SpriteSheet frame dimensions will result in zero frames.")}if(u>g||u<-g){u=0}if(u<0){u=g+u}if(c!==-1){g=u+(c+1)}var m=f;var _=f;var y=0;var T=0;for(var x=0;x<g;x++){y=0;T=0;var E=m+o;var C=_+l;if(E>n){y=E-n}if(C>s){T=C-s}e.add(x,t,i+m,r+_,o-y,l-T);m+=o+d;if(m+o>n){m=f;_+=l+d}}return e};var SpriteSheet_1=SpriteSheet;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpriteSheetFromAtlas=function(e,t,i){var r=GetFastValue_1(i,"frameWidth",null);var n=GetFastValue_1(i,"frameHeight",r);if(!r){throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.")}var s=e.source[0];e.add("__BASE",0,0,0,s.width,s.height);var a=GetFastValue_1(i,"startFrame",0);var o=GetFastValue_1(i,"endFrame",-1);var l=GetFastValue_1(i,"margin",0);var h=GetFastValue_1(i,"spacing",0);var u=t.cutX;var c=t.cutY;var f=t.cutWidth;var d=t.cutHeight;var v=t.realWidth;var p=t.realHeight;var g=Math.floor((v-l+h)/(r+h));var m=Math.floor((p-l+h)/(n+h));var _=g*m;var y=t.x;var T=r-y;var x=r-(v-f-y);var E=t.y;var C=n-E;var S=n-(p-d-E);if(a>_||a<-_){a=0}if(a<0){a=_+a}if(o!==-1){_=a+(o+1)}var A;var b=l;var w=l;var P=0;var R=t.sourceIndex;for(var O=0;O<m;O++){var M=O===0;var F=O===m-1;for(var L=0;L<g;L++){var G=L===0;var V=L===g-1;A=e.add(P,R,u+b,c+w,r,n);if(G||M||V||F){var I=G?y:0;var D=M?E:0;var B=0;var N=0;if(G){B+=r-T}if(V){B+=r-x}if(M){N+=n-C}if(F){N+=n-S}var $=r-B;var k=n-N;A.cutWidth=$;A.cutHeight=k;A.setTrim(r,n,I,D,$,k)}b+=h;if(G){b+=T}else if(V){b+=x}else{b+=r}P++}b=l;w+=h;if(M){w+=C}else if(F){w+=S}else{w+=n}}return e};var SpriteSheetFromAtlas_1=SpriteSheetFromAtlas;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var imageHeight=0;var addFrame=function(e,t,i,r){var n=imageHeight-r.y-r.height;e.add(i,t,r.x,n,r.width,r.height)};var UnityYAML=function(e,t,i){var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);imageHeight=r.height;var n=i.split("\n");var s=/^[ ]*(- )*(\w+)+[: ]+(.*)/;var a="";var o="";var l={x:0,y:0,width:0,height:0};for(var h=0;h<n.length;h++){var u=n[h].match(s);if(!u){continue}var c=u[1]==="- ";var f=u[2];var d=u[3];if(c){if(o!==a){addFrame(e,t,o,l);a=o}l={x:0,y:0,width:0,height:0}}if(f==="name"){o=d;continue}switch(f){case"x":case"y":case"width":case"height":l[f]=parseInt(d,10);break}}if(o!==a){addFrame(e,t,o,l)}return e};var UnityYAML_1=UnityYAML;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var parsers={AtlasXML:AtlasXML_1,Canvas:Canvas_1,Image:Image_1,JSONArray:JSONArray_1,JSONHash:JSONHash_1,SpriteSheet:SpriteSheet_1,SpriteSheetFromAtlas:SpriteSheetFromAtlas_1,UnityYAML:UnityYAML_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextureManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.name="TextureManager";this.list={};this._tempCanvas=CanvasPool_1.create2D(this,1,1);this._tempContext=this._tempCanvas.getContext("2d");this._pending=0;t.events.once(events$1.BOOT,this.boot,this)},boot:function(){this._pending=2;this.on(events$8.LOAD,this.updatePending,this);this.on(events$8.ERROR,this.updatePending,this);this.addBase64("__DEFAULT",this.game.config.defaultImage);this.addBase64("__MISSING",this.game.config.missingImage);this.game.events.once(events$1.DESTROY,this.destroy,this)},updatePending:function(){this._pending--;if(this._pending===0){this.off(events$8.LOAD);this.off(events$8.ERROR);this.emit(events$8.READY)}},checkKey:function(e){if(this.exists(e)){console.error("Texture key already in use: "+e);return false}return true},remove:function(e){if(typeof e==="string"){if(this.exists(e)){e=this.get(e)}else{console.warn("No texture found matching key: "+e);return this}}if(this.list.hasOwnProperty(e.key)){e.destroy();this.emit(events$8.REMOVE,e.key)}return this},removeKey:function(e){if(this.list.hasOwnProperty(e)){delete this.list[e]}return this},addBase64:function(e,t){if(this.checkKey(e)){var i=this;var r=new Image;r.onerror=function(){i.emit(events$8.ERROR,e)};r.onload=function(){var t=i.create(e,r);parsers.Image(t,0);i.emit(events$8.ADD,e,t);i.emit(events$8.LOAD,e,t)};r.src=t}return this},getBase64:function(e,t,i,r){if(i===undefined){i="image/png"}if(r===undefined){r=.92}var n="";var s=this.getFrame(e,t);if(s&&(s.source.isRenderTexture||s.source.isGLTexture)){console.warn("Cannot getBase64 from WebGL Texture")}else if(s){var a=s.canvasData;var o=CanvasPool_1.create2D(this,a.width,a.height);var l=o.getContext("2d");l.drawImage(s.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height);n=o.toDataURL(i,r);CanvasPool_1.remove(o)}return n},addImage:function(e,t,i){var r=null;if(this.checkKey(e)){r=this.create(e,t);parsers.Image(r,0);if(i){r.setDataSource(i)}this.emit(events$8.ADD,e,r)}return r},addGLTexture:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=this.create(e,t,i,r);n.add("__BASE",0,0,0,i,r);this.emit(events$8.ADD,e,n)}return n},addRenderTexture:function(e,t){var i=null;if(this.checkKey(e)){i=this.create(e,t);i.add("__BASE",0,0,0,t.width,t.height);this.emit(events$8.ADD,e,i)}return i},generate:function(e,t){if(this.checkKey(e)){var i=CanvasPool_1.create(this,1,1);t.canvas=i;GenerateTexture_1(t);return this.addCanvas(e,i)}else{return null}},createCanvas:function(e,t,i){if(t===undefined){t=256}if(i===undefined){i=256}if(this.checkKey(e)){var r=CanvasPool_1.create(this,t,i,_const.CANVAS,true);return this.addCanvas(e,r)}return null},addCanvas:function(e,t,i){if(i===undefined){i=false}var r=null;if(i){r=new CanvasTexture_1(this,e,t,t.width,t.height)}else if(this.checkKey(e)){r=new CanvasTexture_1(this,e,t,t.width,t.height);this.list[e]=r;this.emit(events$8.ADD,e,r)}return r},addAtlas:function(e,t,i,r){if(Array.isArray(i.textures)||Array.isArray(i.frames)){return this.addAtlasJSONArray(e,t,i,r)}else{return this.addAtlasJSONHash(e,t,i,r)}},addAtlasJSONArray:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=this.create(e,t);if(Array.isArray(i)){var s=i.length===1;for(var a=0;a<n.source.length;a++){var o=s?i[0]:i[a];parsers.JSONArray(n,a,o)}}else{parsers.JSONArray(n,0,i)}if(r){n.setDataSource(r)}this.emit(events$8.ADD,e,n)}return n},addAtlasJSONHash:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=this.create(e,t);if(Array.isArray(i)){for(var s=0;s<i.length;s++){parsers.JSONHash(n,s,i[s])}}else{parsers.JSONHash(n,0,i)}if(r){n.setDataSource(r)}this.emit(events$8.ADD,e,n)}return n},addAtlasXML:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=this.create(e,t);parsers.AtlasXML(n,0,i);if(r){n.setDataSource(r)}this.emit(events$8.ADD,e,n)}return n},addUnityAtlas:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=this.create(e,t);parsers.UnityYAML(n,0,i);if(r){n.setDataSource(r)}this.emit(events$8.ADD,e,n)}return n},addSpriteSheet:function(e,t,i){var r=null;if(this.checkKey(e)){r=this.create(e,t);var n=r.source[0].width;var s=r.source[0].height;parsers.SpriteSheet(r,0,0,0,n,s,i);this.emit(events$8.ADD,e,r)}return r},addSpriteSheetFromAtlas:function(e,t){if(!this.checkKey(e)){return null}var i=GetValue_1(t,"atlas",null);var r=GetValue_1(t,"frame",null);if(!i||!r){return}var n=this.get(i);var s=n.get(r);if(s){var a=this.create(e,s.source.image);if(s.trimmed){parsers.SpriteSheetFromAtlas(a,s,t)}else{parsers.SpriteSheet(a,0,s.cutX,s.cutY,s.cutWidth,s.cutHeight,t)}this.emit(events$8.ADD,e,a);return a}},create:function(e,t,i,r){var n=null;if(this.checkKey(e)){n=new Texture_1$1(this,e,t,i,r);this.list[e]=n}return n},exists:function(e){return this.list.hasOwnProperty(e)},get:function(e){if(e===undefined){e="__DEFAULT"}if(this.list[e]){return this.list[e]}else{return this.list["__MISSING"]}},cloneFrame:function(e,t){if(this.list[e]){return this.list[e].get(t).clone()}},getFrame:function(e,t){if(this.list[e]){return this.list[e].get(t)}},getTextureKeys:function(){var e=[];for(var t in this.list){if(t!=="__DEFAULT"&&t!=="__MISSING"){e.push(t)}}return e},getPixel:function(e,t,i,r){var n=this.getFrame(i,r);if(n){e-=n.x;t-=n.y;var s=n.data.cut;e+=s.x;t+=s.y;if(e>=s.x&&e<s.r&&t>=s.y&&t<s.b){var a=this._tempContext;a.clearRect(0,0,1,1);a.drawImage(n.source.image,e,t,1,1,0,0,1,1);var o=a.getImageData(0,0,1,1);return new Color_1(o.data[0],o.data[1],o.data[2],o.data[3])}}return null},getPixelAlpha:function(e,t,i,r){var n=this.getFrame(i,r);if(n){e-=n.x;t-=n.y;var s=n.data.cut;e+=s.x;t+=s.y;if(e>=s.x&&e<s.r&&t>=s.y&&t<s.b){var a=this._tempContext;a.clearRect(0,0,1,1);a.drawImage(n.source.image,e,t,1,1,0,0,1,1);var o=a.getImageData(0,0,1,1);return o.data[3]}}return null},setTexture:function(e,t,i){if(this.list[t]){e.texture=this.list[t];e.frame=e.texture.get(i)}return e},renameTexture:function(e,t){var i=this.get(e);if(i&&e!==t){i.key=t;this.list[t]=i;delete this.list[e];return true}return false},each:function(e,t){var i=[null];for(var r=1;r<arguments.length;r++){i.push(arguments[r])}for(var n in this.list){i[0]=this.list[n];e.apply(t,i)}},destroy:function(){for(var e in this.list){this.list[e].destroy()}this.list={};this.game=null;CanvasPool_1.remove(this._tempCanvas)}});var TextureManager_1=TextureManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COMPLETE_EVENT$1="complete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DECODED_EVENT="decoded";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DECODED_ALL_EVENT="decodedall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DESTROY_EVENT$5="destroy";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DETUNE_EVENT="detune";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GLOBAL_DETUNE_EVENT="detune";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GLOBAL_MUTE_EVENT="mute";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GLOBAL_RATE_EVENT="rate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GLOBAL_VOLUME_EVENT="volume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LOOP_EVENT="loop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LOOPED_EVENT="looped";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MUTE_EVENT="mute";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_ALL_EVENT$1="pauseall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT$2="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PLAY_EVENT="play";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RATE_EVENT="rate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_ALL_EVENT$1="resumeall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT$2="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SEEK_EVENT="seek";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var STOP_ALL_EVENT="stopall";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var STOP_EVENT="stop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UNLOCKED_EVENT="unlocked";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var VOLUME_EVENT="volume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$c={COMPLETE:COMPLETE_EVENT$1,DECODED:DECODED_EVENT,DECODED_ALL:DECODED_ALL_EVENT,DESTROY:DESTROY_EVENT$5,DETUNE:DETUNE_EVENT,GLOBAL_DETUNE:GLOBAL_DETUNE_EVENT,GLOBAL_MUTE:GLOBAL_MUTE_EVENT,GLOBAL_RATE:GLOBAL_RATE_EVENT,GLOBAL_VOLUME:GLOBAL_VOLUME_EVENT,LOOP:LOOP_EVENT,LOOPED:LOOPED_EVENT,MUTE:MUTE_EVENT,PAUSE_ALL:PAUSE_ALL_EVENT$1,PAUSE:PAUSE_EVENT$2,PLAY:PLAY_EVENT,RATE:RATE_EVENT,RESUME_ALL:RESUME_ALL_EVENT$1,RESUME:RESUME_EVENT$2,SEEK:SEEK_EVENT,STOP_ALL:STOP_ALL_EVENT,STOP:STOP_EVENT,UNLOCKED:UNLOCKED_EVENT,VOLUME:VOLUME_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BaseSoundManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.jsonCache=t.cache.json;this.sounds=[];this.mute=false;this.volume=1;this.pauseOnBlur=true;this._rate=1;this._detune=0;this.locked=this.locked||false;this.unlocked=false;t.events.on(events$1.BLUR,(function(){if(this.pauseOnBlur){this.onBlur()}}),this);t.events.on(events$1.FOCUS,(function(){if(this.pauseOnBlur){this.onFocus()}}),this);t.events.on(events$1.PRE_STEP,this.update,this);t.events.once(events$1.DESTROY,this.destroy,this)},add:NOOP_1,addAudioSprite:function(e,t){if(t===undefined){t={}}var i=this.add(e,t);i.spritemap=this.jsonCache.get(e).spritemap;for(var r in i.spritemap){if(!i.spritemap.hasOwnProperty(r)){continue}var n=Clone_1(t);var s=i.spritemap[r];n.loop=s.hasOwnProperty("loop")?s.loop:false;i.addMarker({name:r,start:s.start,duration:s.end-s.start,config:n})}return i},play:function(e,t){var i=this.add(e);i.once(events$c.COMPLETE,i.destroy,i);if(t){if(t.name){i.addMarker(t);return i.play(t.name)}else{return i.play(t)}}else{return i.play()}},playAudioSprite:function(e,t,i){var r=this.addAudioSprite(e);r.once(events$c.COMPLETE,r.destroy,r);return r.play(t,i)},remove:function(e){var t=this.sounds.indexOf(e);if(t!==-1){e.destroy();this.sounds.splice(t,1);return true}return false},removeByKey:function(e){var t=0;for(var i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];if(r.key===e){r.destroy();this.sounds.splice(i,1);t++}}return t},pauseAll:function(){this.forEachActiveSound((function(e){e.pause()}));this.emit(events$c.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(e){e.resume()}));this.emit(events$c.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(e){e.stop()}));this.emit(events$c.STOP_ALL,this)},unlock:NOOP_1,onBlur:NOOP_1,onFocus:NOOP_1,update:function(e,t){if(this.unlocked){this.unlocked=false;this.locked=false;this.emit(events$c.UNLOCKED,this)}for(var i=this.sounds.length-1;i>=0;i--){if(this.sounds[i].pendingRemove){this.sounds.splice(i,1)}}this.sounds.forEach((function(i){i.update(e,t)}))},destroy:function(){this.removeAllListeners();this.forEachActiveSound((function(e){e.destroy()}));this.sounds.length=0;this.sounds=null;this.game=null},forEachActiveSound:function(e,t){var i=this;this.sounds.forEach((function(r,n){if(!r.pendingRemove){e.call(t||i,r,n,i.sounds)}}))},setRate:function(e){this.rate=e;return this},rate:{get:function(){return this._rate},set:function(e){this._rate=e;this.forEachActiveSound((function(e){e.calculateRate()}));this.emit(events$c.GLOBAL_RATE,this,e)}},setDetune:function(e){this.detune=e;return this},detune:{get:function(){return this._detune},set:function(e){this._detune=e;this.forEachActiveSound((function(e){e.calculateRate()}));this.emit(events$c.GLOBAL_DETUNE,this,e)}}});var BaseSoundManager_1=BaseSoundManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BaseSound=new Class_1({Extends:eventemitter3,initialize:function e(t,i,r){eventemitter3.call(this);this.manager=t;this.key=i;this.isPlaying=false;this.isPaused=false;this.totalRate=1;this.duration=this.duration||0;this.totalDuration=this.totalDuration||0;this.config={mute:false,volume:1,rate:1,detune:0,seek:0,loop:false,delay:0};this.currentConfig=this.config;this.config=Extend_1(this.config,r);this.markers={};this.currentMarker=null;this.pendingRemove=false},addMarker:function(e){if(!e||!e.name||typeof e.name!=="string"){return false}if(this.markers[e.name]){console.error("addMarker "+e.name+" already exists in Sound");return false}e=Extend_1(true,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:false,volume:1,rate:1,detune:0,seek:0,loop:false,delay:0}},e);this.markers[e.name]=e;return true},updateMarker:function(e){if(!e||!e.name||typeof e.name!=="string"){return false}if(!this.markers[e.name]){console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key);return false}this.markers[e.name]=Extend_1(true,this.markers[e.name],e);return true},removeMarker:function(e){var t=this.markers[e];if(!t){return null}this.markers[e]=null;return t},play:function(e,t){if(e===undefined){e=""}if(typeof e==="object"){t=e;e=""}if(typeof e!=="string"){return false}if(!e){this.currentMarker=null;this.currentConfig=this.config;this.duration=this.totalDuration}else{if(!this.markers[e]){console.warn("Marker: "+e+" missing in Sound: "+this.key);return false}this.currentMarker=this.markers[e];this.currentConfig=this.currentMarker.config;this.duration=this.currentMarker.duration}this.resetConfig();this.currentConfig=Extend_1(this.currentConfig,t);this.isPlaying=true;this.isPaused=false;return true},pause:function(){if(this.isPaused||!this.isPlaying){return false}this.isPlaying=false;this.isPaused=true;return true},resume:function(){if(!this.isPaused||this.isPlaying){return false}this.isPlaying=true;this.isPaused=false;return true},stop:function(){if(!this.isPaused&&!this.isPlaying){return false}this.isPlaying=false;this.isPaused=false;this.resetConfig();return true},applyConfig:function(){this.mute=this.currentConfig.mute;this.volume=this.currentConfig.volume;this.rate=this.currentConfig.rate;this.detune=this.currentConfig.detune;this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0;this.currentConfig.delay=0},update:NOOP_1,calculateRate:function(){var e=1.0005777895065548;var t=this.currentConfig.detune+this.manager.detune;var i=Math.pow(e,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){if(this.pendingRemove){return}this.emit(events$c.DESTROY,this);this.pendingRemove=true;this.manager=null;this.key="";this.removeAllListeners();this.isPlaying=false;this.isPaused=false;this.config=null;this.currentConfig=null;this.markers=null;this.currentMarker=null}});var BaseSound_1=BaseSound;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HTML5AudioSound=new Class_1({Extends:BaseSound_1,initialize:function e(t,i,r){if(r===undefined){r={}}this.tags=t.game.cache.audio.get(i);if(!this.tags){console.warn("Audio cache entry missing: "+i);return}this.audio=null;this.startTime=0;this.previousTime=0;this.duration=this.tags[0].duration;this.totalDuration=this.tags[0].duration;BaseSound_1.call(this,t,i,r)},play:function(e,t){if(this.manager.isLocked(this,"play",[e,t])){return false}if(!BaseSound_1.prototype.play.call(this,e,t)){return false}if(!this.pickAndPlayAudioTag()){return false}this.emit(events$c.PLAY,this);return true},pause:function(){if(this.manager.isLocked(this,"pause")){return false}if(this.startTime>0){return false}if(!BaseSound_1.prototype.pause.call(this)){return false}this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0);this.stopAndReleaseAudioTag();this.emit(events$c.PAUSE,this);return true},resume:function(){if(this.manager.isLocked(this,"resume")){return false}if(this.startTime>0){return false}if(!BaseSound_1.prototype.resume.call(this)){return false}if(!this.pickAndPlayAudioTag()){return false}this.emit(events$c.RESUME,this);return true},stop:function(){if(this.manager.isLocked(this,"stop")){return false}if(!BaseSound_1.prototype.stop.call(this)){return false}this.stopAndReleaseAudioTag();this.emit(events$c.STOP,this);return true},pickAndPlayAudioTag:function(){if(!this.pickAudioTag()){this.reset();return false}var e=this.currentConfig.seek;var t=this.currentConfig.delay;var i=(this.currentMarker?this.currentMarker.start:0)+e;this.previousTime=i;this.audio.currentTime=i;this.applyConfig();if(t===0){this.startTime=0;if(this.audio.paused){this.playCatchPromise()}}else{this.startTime=window.performance.now()+t*1e3;if(!this.audio.paused){this.audio.pause()}}this.resetConfig();return true},pickAudioTag:function(){if(this.audio){return true}for(var e=0;e<this.tags.length;e++){var t=this.tags[e];if(t.dataset.used==="false"){t.dataset.used="true";this.audio=t;return true}}if(!this.manager.override){return false}var i=[];this.manager.forEachActiveSound((function(e){if(e.key===this.key&&e.audio){i.push(e)}}),this);i.sort((function(e,t){if(e.loop===t.loop){return t.seek/t.duration-e.seek/e.duration}return e.loop?1:-1}));var r=i[0];this.audio=r.audio;r.reset();r.audio=null;r.startTime=0;r.previousTime=0;return true},playCatchPromise:function(){var e=this.audio.play();if(e){e.catch((function(e){console.warn(e)}))}},stopAndReleaseAudioTag:function(){this.audio.pause();this.audio.dataset.used="false";this.audio=null;this.startTime=0;this.previousTime=0},reset:function(){BaseSound_1.prototype.stop.call(this)},onBlur:function(){this.isPlaying=false;this.isPaused=true;this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0);this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3);this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=true;this.isPaused=false;this.pickAndPlayAudioTag()},update:function(e,t){if(!this.isPlaying){return}if(this.startTime>0){if(this.startTime<e-this.manager.audioPlayDelay){this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3;this.startTime=0;this.previousTime=this.audio.currentTime;this.playCatchPromise()}return}var i=this.currentMarker?this.currentMarker.start:0;var r=i+this.duration;var n=this.audio.currentTime;if(this.currentConfig.loop){if(n>=r-this.manager.loopEndOffset){this.audio.currentTime=i+Math.max(0,n-r);n=this.audio.currentTime}else if(n<i){this.audio.currentTime+=i;n=this.audio.currentTime}if(n<this.previousTime){this.emit(events$c.LOOPED,this)}}else if(n>=r){this.reset();this.stopAndReleaseAudioTag();this.emit(events$c.COMPLETE,this);return}this.previousTime=n},destroy:function(){BaseSound_1.prototype.destroy.call(this);this.tags=null;if(this.audio){this.stopAndReleaseAudioTag()}},updateMute:function(){if(this.audio){this.audio.muted=this.currentConfig.mute||this.manager.mute}},updateVolume:function(){if(this.audio){this.audio.volume=this.currentConfig.volume*this.manager.volume}},calculateRate:function(){BaseSound_1.prototype.calculateRate.call(this);if(this.audio){this.audio.playbackRate=this.totalRate}},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e;if(this.manager.isLocked(this,"mute",e)){return}this.updateMute();this.emit(events$c.MUTE,this,e)}},setMute:function(e){this.mute=e;return this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e;if(this.manager.isLocked(this,"volume",e)){return}this.updateVolume();this.emit(events$c.VOLUME,this,e)}},setVolume:function(e){this.volume=e;return this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e;if(this.manager.isLocked(this,events$c.RATE,e)){return}else{this.calculateRate();this.emit(events$c.RATE,this,e)}}},setRate:function(e){this.rate=e;return this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e;if(this.manager.isLocked(this,events$c.DETUNE,e)){return}else{this.calculateRate();this.emit(events$c.DETUNE,this,e)}}},setDetune:function(e){this.detune=e;return this},seek:{get:function(){if(this.isPlaying){return this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0)}else if(this.isPaused){return this.currentConfig.seek}else{return 0}},set:function(e){if(this.manager.isLocked(this,"seek",e)){return}if(this.startTime>0){return}if(this.isPlaying||this.isPaused){e=Math.min(Math.max(0,e),this.duration);if(this.isPlaying){this.previousTime=e;this.audio.currentTime=e}else if(this.isPaused){this.currentConfig.seek=e}this.emit(events$c.SEEK,this,e)}}},setSeek:function(e){this.seek=e;return this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e;if(this.manager.isLocked(this,"loop",e)){return}if(this.audio){this.audio.loop=e}this.emit(events$c.LOOP,this,e)}},setLoop:function(e){this.loop=e;return this}});var HTML5AudioSound_1=HTML5AudioSound;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HTML5AudioSoundManager=new Class_1({Extends:BaseSoundManager_1,initialize:function e(t){this.override=true;this.audioPlayDelay=.1;this.loopEndOffset=.05;this.onBlurPausedSounds=[];this.locked="ontouchstart"in window;this.lockedActionsQueue=this.locked?[]:null;this._mute=false;this._volume=1;BaseSoundManager_1.call(this,t)},add:function(e,t){var i=new HTML5AudioSound_1(this,e,t);this.sounds.push(i);return i},unlock:function(){this.locked=false;var e=this;this.game.cache.audio.entries.each((function(t,i){for(var r=0;r<i.length;r++){if(i[r].dataset.locked==="true"){e.locked=true;return false}}return true}));if(!this.locked){return}var t=false;var i=function(){t=true};var r=function(){if(t){t=false;return}document.body.removeEventListener("touchmove",i);document.body.removeEventListener("touchend",r);var n=[];e.game.cache.audio.entries.each((function(e,t){for(var i=0;i<t.length;i++){var r=t[i];if(r.dataset.locked==="true"){n.push(r)}}return true}));if(n.length===0){return}var s=n[n.length-1];s.oncanplaythrough=function(){s.oncanplaythrough=null;n.forEach((function(e){e.dataset.locked="false"}));e.unlocked=true};n.forEach((function(e){e.load()}))};this.once(events$c.UNLOCKED,(function(){this.forEachActiveSound((function(e){if(e.currentMarker===null&&e.duration===0){e.duration=e.tags[0].duration}e.totalDuration=e.tags[0].duration}));while(this.lockedActionsQueue.length){var e=this.lockedActionsQueue.shift();if(e.sound[e.prop].apply){e.sound[e.prop].apply(e.sound,e.value||[])}else{e.sound[e.prop]=e.value}}}),this);document.body.addEventListener("touchmove",i,false);document.body.addEventListener("touchend",r,false)},onBlur:function(){this.forEachActiveSound((function(e){if(e.isPlaying){this.onBlurPausedSounds.push(e);e.onBlur()}}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(e){e.onFocus()}));this.onBlurPausedSounds.length=0},destroy:function(){BaseSoundManager_1.prototype.destroy.call(this);this.onBlurPausedSounds.length=0;this.onBlurPausedSounds=null},isLocked:function(e,t,i){if(e.tags[0].dataset.locked==="true"){this.lockedActionsQueue.push({sound:e,prop:t,value:i});return true}return false},setMute:function(e){this.mute=e;return this},mute:{get:function(){return this._mute},set:function(e){this._mute=e;this.forEachActiveSound((function(e){e.updateMute()}));this.emit(events$c.GLOBAL_MUTE,this,e)}},setVolume:function(e){this.volume=e;return this},volume:{get:function(){return this._volume},set:function(e){this._volume=e;this.forEachActiveSound((function(e){e.updateVolume()}));this.emit(events$c.GLOBAL_VOLUME,this,e)}}});var HTML5AudioSoundManager_1=HTML5AudioSoundManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NoAudioSound=new Class_1({Extends:eventemitter3,initialize:function e(t,i,r){if(r===void 0){r={}}eventemitter3.call(this);this.manager=t;this.key=i;this.isPlaying=false;this.isPaused=false;this.totalRate=1;this.duration=0;this.totalDuration=0;this.config=Extend_1({mute:false,volume:1,rate:1,detune:0,seek:0,loop:false,delay:0},r);this.currentConfig=this.config;this.mute=false;this.volume=1;this.rate=1;this.detune=0;this.seek=0;this.loop=false;this.markers={};this.currentMarker=null;this.pendingRemove=false},addMarker:function(e){return false},updateMarker:function(e){return false},removeMarker:function(e){return null},play:function(e,t){return false},pause:function(){return false},resume:function(){return false},stop:function(){return false},destroy:function(){this.manager.remove(this);BaseSound_1.prototype.destroy.call(this)}});var NoAudioSound_1=NoAudioSound;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NoAudioSoundManager=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.sounds=[];this.mute=false;this.volume=1;this.rate=1;this.detune=0;this.pauseOnBlur=true;this.locked=false},add:function(e,t){var i=new NoAudioSound_1(this,e,t);this.sounds.push(i);return i},addAudioSprite:function(e,t){var i=this.add(e,t);i.spritemap={};return i},play:function(e,t){return false},playAudioSprite:function(e,t,i){return false},remove:function(e){return BaseSoundManager_1.prototype.remove.call(this,e)},removeByKey:function(e){return BaseSoundManager_1.prototype.removeByKey.call(this,e)},pauseAll:NOOP_1,resumeAll:NOOP_1,stopAll:NOOP_1,update:NOOP_1,setRate:NOOP_1,setDetune:NOOP_1,setMute:NOOP_1,setVolume:NOOP_1,forEachActiveSound:function(e,t){BaseSoundManager_1.prototype.forEachActiveSound.call(this,e,t)},destroy:function(){BaseSoundManager_1.prototype.destroy.call(this)}});var NoAudioSoundManager_1=NoAudioSoundManager;
/**
             * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var lookup=new Uint8Array(256);for(var i=0;i<chars.length;i++){lookup[chars.charCodeAt(i)]=i}var Base64ToArrayBuffer=function(e){e=e.substr(e.indexOf(",")+1);var t=e.length;var i=t*.75;var r=0;var n;var s;var a;var o;if(e[t-1]==="="){i--;if(e[t-2]==="="){i--}}var l=new ArrayBuffer(i);var h=new Uint8Array(l);for(var u=0;u<t;u+=4){n=lookup[e.charCodeAt(u)];s=lookup[e.charCodeAt(u+1)];a=lookup[e.charCodeAt(u+2)];o=lookup[e.charCodeAt(u+3)];h[r++]=n<<2|s>>4;h[r++]=(s&15)<<4|a>>2;h[r++]=(a&3)<<6|o&63}return l};var Base64ToArrayBuffer_1=Base64ToArrayBuffer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WebAudioSound=new Class_1({Extends:BaseSound_1,initialize:function e(t,i,r){if(r===undefined){r={}}this.audioBuffer=t.game.cache.audio.get(i);if(!this.audioBuffer){console.warn("Audio cache entry missing: "+i);return}this.source=null;this.loopSource=null;this.muteNode=t.context.createGain();this.volumeNode=t.context.createGain();this.playTime=0;this.startTime=0;this.loopTime=0;this.rateUpdates=[];this.hasEnded=false;this.hasLooped=false;this.muteNode.connect(this.volumeNode);this.volumeNode.connect(t.destination);this.duration=this.audioBuffer.duration;this.totalDuration=this.audioBuffer.duration;BaseSound_1.call(this,t,i,r)},play:function(e,t){if(!BaseSound_1.prototype.play.call(this,e,t)){return false}this.stopAndRemoveBufferSource();this.createAndStartBufferSource();this.emit(events$c.PLAY,this);return true},pause:function(){if(this.manager.context.currentTime<this.startTime){return false}if(!BaseSound_1.prototype.pause.call(this)){return false}this.currentConfig.seek=this.getCurrentTime();this.stopAndRemoveBufferSource();this.emit(events$c.PAUSE,this);return true},resume:function(){if(this.manager.context.currentTime<this.startTime){return false}if(!BaseSound_1.prototype.resume.call(this)){return false}this.createAndStartBufferSource();this.emit(events$c.RESUME,this);return true},stop:function(){if(!BaseSound_1.prototype.stop.call(this)){return false}this.stopAndRemoveBufferSource();this.emit(events$c.STOP,this);return true},createAndStartBufferSource:function(){var e=this.currentConfig.seek;var t=this.currentConfig.delay;var i=this.manager.context.currentTime+t;var r=(this.currentMarker?this.currentMarker.start:0)+e;var n=this.duration-e;this.playTime=i-e;this.startTime=i;this.source=this.createBufferSource();this.applyConfig();this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,n));this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime();var t=this.currentMarker?this.currentMarker.start:0;var i=this.duration;this.loopTime=e;this.loopSource=this.createBufferSource();this.loopSource.playbackRate.setValueAtTime(this.totalRate,0);this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function(){var e=this;var t=this.manager.context.createBufferSource();t.buffer=this.audioBuffer;t.connect(this.muteNode);t.onended=function(t){if(t.target===e.source){if(e.currentConfig.loop){e.hasLooped=true}else{e.hasEnded=true}}};return t},stopAndRemoveBufferSource:function(){if(this.source){this.source.stop();this.source.disconnect();this.source=null}this.playTime=0;this.startTime=0;this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){if(this.loopSource){this.loopSource.stop();this.loopSource.disconnect();this.loopSource=null}this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0;this.rateUpdates.push({time:0,rate:1});BaseSound_1.prototype.applyConfig.call(this)},update:function(e,t){if(this.hasEnded){this.hasEnded=false;BaseSound_1.prototype.stop.call(this);this.stopAndRemoveBufferSource();this.emit(events$c.COMPLETE,this)}else if(this.hasLooped){this.hasLooped=false;this.source=this.loopSource;this.loopSource=null;this.playTime=this.startTime=this.loopTime;this.rateUpdates.length=0;this.rateUpdates.push({time:0,rate:this.totalRate});this.createAndStartLoopBufferSource();this.emit(events$c.LOOPED,this)}},destroy:function(){BaseSound_1.prototype.destroy.call(this);this.audioBuffer=null;this.stopAndRemoveBufferSource();this.muteNode.disconnect();this.muteNode=null;this.volumeNode.disconnect();this.volumeNode=null;this.rateUpdates.length=0;this.rateUpdates=null},calculateRate:function(){BaseSound_1.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;if(this.source&&typeof this.totalRate==="number"){this.source.playbackRate.setValueAtTime(this.totalRate,e)}if(this.isPlaying){this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate});if(this.loopSource){this.stopAndRemoveLoopBufferSource();this.createAndStartLoopBufferSource()}}},getCurrentTime:function(){var e=0;for(var t=0;t<this.rateUpdates.length;t++){var i=0;if(t<this.rateUpdates.length-1){i=this.rateUpdates[t+1].time}else{i=this.manager.context.currentTime-this.playTime}e+=(i-this.rateUpdates[t].time)*this.rateUpdates[t].rate}return e},getLoopTime:function(){var e=0;for(var t=0;t<this.rateUpdates.length-1;t++){e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate}var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-e)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e;this.calculateRate();this.emit(events$c.RATE,this,e)}},setRate:function(e){this.rate=e;return this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e;this.calculateRate();this.emit(events$c.DETUNE,this,e)}},setDetune:function(e){this.detune=e;return this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e;this.muteNode.gain.setValueAtTime(e?0:1,0);this.emit(events$c.MUTE,this,e)}},setMute:function(e){this.mute=e;return this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e;this.volumeNode.gain.setValueAtTime(e,0);this.emit(events$c.VOLUME,this,e)}},setVolume:function(e){this.volume=e;return this},seek:{get:function(){if(this.isPlaying){if(this.manager.context.currentTime<this.startTime){return this.startTime-this.playTime}return this.getCurrentTime()}else if(this.isPaused){return this.currentConfig.seek}else{return 0}},set:function(e){if(this.manager.context.currentTime<this.startTime){return}if(this.isPlaying||this.isPaused){e=Math.min(Math.max(0,e),this.duration);this.currentConfig.seek=e;if(this.isPlaying){this.stopAndRemoveBufferSource();this.createAndStartBufferSource()}this.emit(events$c.SEEK,this,e)}}},setSeek:function(e){this.seek=e;return this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e;if(this.isPlaying){this.stopAndRemoveLoopBufferSource();if(e){this.createAndStartLoopBufferSource()}}this.emit(events$c.LOOP,this,e)}},setLoop:function(e){this.loop=e;return this}});var WebAudioSound_1=WebAudioSound;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WebAudioSoundManager=new Class_1({Extends:BaseSoundManager_1,initialize:function e(t){this.context=this.createAudioContext(t);this.masterMuteNode=this.context.createGain();this.masterVolumeNode=this.context.createGain();this.masterMuteNode.connect(this.masterVolumeNode);this.masterVolumeNode.connect(this.context.destination);this.destination=this.masterMuteNode;this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window);BaseSoundManager_1.call(this,t);if(this.locked){this.unlock()}},createAudioContext:function(e){var t=e.config.audio;if(t&&t.context){t.context.resume();return t.context}return new AudioContext},add:function(e,t){var i=new WebAudioSound_1(this,e,t);this.sounds.push(i);return i},decodeAudio:function(e,t){var i;if(!Array.isArray(e)){i=[{key:e,data:t}]}else{i=e}var r=this.game.cache.audio;var n=i.length;for(var s=0;s<i.length;s++){var a=i[s];var o=a.key;var l=a.data;if(typeof l==="string"){l=Base64ToArrayBuffer_1(l)}var h=function(e,t){r.add(e,t);this.emit(events$c.DECODED,e);n--;if(n===0){this.emit(events$c.DECODED_ALL)}}.bind(this,o);var u=function(e,t){console.error("Error decoding audio: "+e+" - ",t?t.message:"");n--;if(n===0){this.emit(events$c.DECODED_ALL)}}.bind(this,o);this.context.decodeAudioData(l,h,u)}},unlock:function(){var e=this;var t=function t(){if(e.context){e.context.resume().then((function(){document.body.removeEventListener("touchstart",t);document.body.removeEventListener("touchend",t);document.body.removeEventListener("click",t);e.unlocked=true}),(function(){document.body.removeEventListener("touchstart",t);document.body.removeEventListener("touchend",t);document.body.removeEventListener("click",t)}))}};if(document.body){document.body.addEventListener("touchstart",t,false);document.body.addEventListener("touchend",t,false);document.body.addEventListener("click",t,false)}},onBlur:function(){if(!this.locked){this.context.suspend()}},onFocus:function(){if(!this.locked){this.context.resume()}},destroy:function(){this.destination=null;this.masterVolumeNode.disconnect();this.masterVolumeNode=null;this.masterMuteNode.disconnect();this.masterMuteNode=null;if(this.game.config.audio&&this.game.config.audio.context){this.context.suspend()}else{var e=this;this.context.close().then((function(){e.context=null}))}BaseSoundManager_1.prototype.destroy.call(this)},setMute:function(e){this.mute=e;return this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(e){this.masterMuteNode.gain.setValueAtTime(e?0:1,0);this.emit(events$c.GLOBAL_MUTE,this,e)}},setVolume:function(e){this.volume=e;return this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(e){this.masterVolumeNode.gain.setValueAtTime(e,0);this.emit(events$c.GLOBAL_VOLUME,this,e)}}});var WebAudioSoundManager_1=WebAudioSoundManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SoundManagerCreator={create:function(e){var t=e.config.audio;var i=e.device.audio;if(t&&t.noAudio||!i.webAudio&&!i.audioData){return new NoAudioSoundManager_1(e)}if(i.webAudio&&!(t&&t.disableWebAudio)){return new WebAudioSoundManager_1(e)}return new HTML5AudioSoundManager_1(e)}};var SoundManagerCreator_1=SoundManagerCreator;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var AdInstance=function(e,t,i){return{instance:t,placementID:e,shown:false,video:i}};var AdInstance_1=AdInstance;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var LeaderboardScore=function(e){return{score:e.getScore(),scoreFormatted:e.getFormattedScore(),timestamp:e.getTimestamp(),rank:e.getRank(),data:e.getExtraData(),playerName:e.getPlayer().getName(),playerPhotoURL:e.getPlayer().getPhoto(),playerID:e.getPlayer().getID()}};var LeaderboardScore_1=LeaderboardScore;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var Leaderboard=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.plugin=t;this.ref=i;this.name=i.getName();this.contextID=i.getContextID();this.entryCount=0;this.playerScore=null;this.scores=[];this.getEntryCount()},getEntryCount:function(){var e=this;this.ref.getEntryCountAsync().then((function(t){e.entryCount=t;e.emit("getentrycount",t,e.name)})).catch((function(e){console.warn(e)}));return this},setScore:function(e,t){if(t===undefined){t=""}if(typeof t==="object"){t=JSON.stringify(t)}var i=this;this.ref.setScoreAsync(e,t).then((function(e){if(e){var t=LeaderboardScore_1(e);i.playerScore=t;i.emit("setscore",t,i.name)}else{i.emit("setscore",null,i.name)}})).catch((function(e){console.warn(e)}));return this},getPlayerScore:function(){var e=this;this.ref.getPlayerEntryAsync().then((function(t){if(t){var i=LeaderboardScore_1(t);e.playerScore=i;e.emit("getplayerscore",i,e.name)}else{e.emit("getplayerscore",null,e.name)}})).catch((function(e){console.warn(e)}));return this},getScores:function(e,t){if(e===undefined){e=10}if(t===undefined){t=0}var i=this;this.ref.getEntriesAsync(e,t).then((function(e){i.scores=[];e.forEach((function(e){i.scores.push(LeaderboardScore_1(e))}));i.emit("getscores",i.scores,i.name)})).catch((function(e){console.warn(e)}));return this},getConnectedScores:function(e,t){var i=this;this.ref.getConnectedPlayerEntriesAsync().then((function(e){i.scores=[];e.forEach((function(e){i.scores.push(LeaderboardScore_1(e))}));i.emit("getconnectedscores",i.scores,i.name)})).catch((function(e){console.warn(e)}));return this}});var Leaderboard_1=Leaderboard;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var Product=function(e){return{title:GetFastValue_1(e,"title",""),productID:GetFastValue_1(e,"productID",""),description:GetFastValue_1(e,"description",""),imageURI:GetFastValue_1(e,"imageURI",""),price:GetFastValue_1(e,"price",""),priceCurrencyCode:GetFastValue_1(e,"priceCurrencyCode","")}};var Product_1=Product;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var Purchase=function(e){return{developerPayload:GetFastValue_1(e,"developerPayload",""),paymentID:GetFastValue_1(e,"paymentID",""),productID:GetFastValue_1(e,"productID",""),purchaseTime:GetFastValue_1(e,"purchaseTime",""),purchaseToken:GetFastValue_1(e,"purchaseToken",""),signedRequest:GetFastValue_1(e,"signedRequest","")}};var Purchase_1=Purchase;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var FacebookInstantGamesPlugin=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t;this.data=new DataManager_1(this);this.on("setdata",this.setDataHandler,this);this.on("changedata",this.changeDataHandler,this);this.hasLoaded=false;this.dataLocked=false;this.supportedAPIs=[];this.entryPoint="";this.entryPointData=null;this.contextID=null;this.contextType=null;this.locale=null;this.platform=null;this.version=null;this.playerID=null;this.playerName=null;this.playerPhotoURL=null;this.playerCanSubscribeBot=false;this.paymentsReady=false;this.catalog=[];this.purchases=[];this.leaderboards={};this.ads=[]},setDataHandler:function(e,t,i){if(this.dataLocked){return}var r={};r[t]=i;var n=this;FBInstant.player.setDataAsync(r).then((function(){n.emit("savedata",r)}))},changeDataHandler:function(e,t,i){if(this.dataLocked){return}var r={};r[t]=i;var n=this;FBInstant.player.setDataAsync(r).then((function(){n.emit("savedata",r)}))},showLoadProgress:function(e){e.load.on("progress",(function(e){if(!this.hasLoaded){FBInstant.setLoadingProgress(e*100)}}),this);e.load.on("complete",(function(){if(!this.hasLoaded){this.hasLoaded=true;FBInstant.startGameAsync().then(this.gameStarted.bind(this))}}),this);return this},gameStarted:function(){var e=FBInstant.getSupportedAPIs();var t={};var i=function(e){return e[1].toUpperCase()};e.forEach((function(e){e=e.replace(/\../g,i);t[e]=true}));this.supportedAPIs=t;this.getID();this.getType();this.getLocale();this.getPlatform();this.getSDKVersion();this.getPlayerID();this.getPlayerName();this.getPlayerPhotoURL();var r=this;FBInstant.onPause((function(){r.emit("pause")}));FBInstant.getEntryPointAsync().then((function(e){r.entryPoint=e;r.entryPointData=FBInstant.getEntryPointData();r.emit("startgame")})).catch((function(e){console.warn(e)}));if(this.supportedAPIs.paymentsPurchaseAsync){FBInstant.payments.onReady((function(){r.paymentsReady=true})).catch((function(e){console.warn(e)}))}},checkAPI:function(e){if(!this.supportedAPIs[e]){return false}else{return true}},getID:function(){if(!this.contextID&&this.supportedAPIs.contextGetID){this.contextID=FBInstant.context.getID()}return this.contextID},getType:function(){if(!this.contextType&&this.supportedAPIs.contextGetType){this.contextType=FBInstant.context.getType()}return this.contextType},getLocale:function(){if(!this.locale&&this.supportedAPIs.getLocale){this.locale=FBInstant.getLocale()}return this.locale},getPlatform:function(){if(!this.platform&&this.supportedAPIs.getPlatform){this.platform=FBInstant.getPlatform()}return this.platform},getSDKVersion:function(){if(!this.version&&this.supportedAPIs.getSDKVersion){this.version=FBInstant.getSDKVersion()}return this.version},getPlayerID:function(){if(!this.playerID&&this.supportedAPIs.playerGetID){this.playerID=FBInstant.player.getID()}return this.playerID},getPlayerName:function(){if(!this.playerName&&this.supportedAPIs.playerGetName){this.playerName=FBInstant.player.getName()}return this.playerName},getPlayerPhotoURL:function(){if(!this.playerPhotoURL&&this.supportedAPIs.playerGetPhoto){this.playerPhotoURL=FBInstant.player.getPhoto()}return this.playerPhotoURL},loadPlayerPhoto:function(e,t){if(this.playerPhotoURL){e.load.setCORS("anonymous");e.load.image(t,this.playerPhotoURL);e.load.once("filecomplete-image-"+t,(function(){this.emit("photocomplete",t)}),this);e.load.start()}return this},canSubscribeBot:function(){if(this.supportedAPIs.playerCanSubscribeBotAsync){var e=this;FBInstant.player.canSubscribeBotAsync().then((function(){e.playerCanSubscribeBot=true;e.emit("cansubscribebot")})).catch((function(t){e.emit("cansubscribebotfail",t)}))}else{this.emit("cansubscribebotfail")}return this},subscribeBot:function(){if(this.playerCanSubscribeBot){var e=this;FBInstant.player.subscribeBotAsync().then((function(){e.emit("subscribebot")})).catch((function(t){e.emit("subscribebotfail",t)}))}else{this.emit("subscribebotfail")}return this},getData:function(e){if(!this.checkAPI("playerGetDataAsync")){return this}if(!Array.isArray(e)){e=[e]}var t=this;FBInstant.player.getDataAsync(e).then((function(e){t.dataLocked=true;for(var i in e){t.data.set(i,e[i])}t.dataLocked=false;t.emit("getdata",e)}));return this},saveData:function(e){if(!this.checkAPI("playerSetDataAsync")){return this}var t=this;FBInstant.player.setDataAsync(e).then((function(){t.emit("savedata",e)})).catch((function(e){t.emit("savedatafail",e)}));return this},flushData:function(){if(!this.checkAPI("playerFlushDataAsync")){return this}var e=this;FBInstant.player.flushDataAsync().then((function(){e.emit("flushdata")})).catch((function(t){e.emit("flushdatafail",t)}));return this},getStats:function(e){if(!this.checkAPI("playerGetStatsAsync")){return this}var t=this;FBInstant.player.getStatsAsync(e).then((function(e){t.emit("getstats",e)})).catch((function(e){t.emit("getstatsfail",e)}));return this},saveStats:function(e){if(!this.checkAPI("playerSetStatsAsync")){return this}var t={};for(var i in e){if(typeof e[i]==="number"){t[i]=e[i]}}var r=this;FBInstant.player.setStatsAsync(t).then((function(){r.emit("savestats",t)})).catch((function(e){r.emit("savestatsfail",e)}));return this},incStats:function(e){if(!this.checkAPI("playerIncrementStatsAsync")){return this}var t={};for(var i in e){if(typeof e[i]==="number"){t[i]=e[i]}}var r=this;FBInstant.player.incrementStatsAsync(t).then((function(e){r.emit("incstats",e)})).catch((function(e){r.emit("incstatsfail",e)}));return this},saveSession:function(e){if(!this.checkAPI("setSessionData")){return this}var t=JSON.stringify(e);if(t.length<=1e3){FBInstant.setSessionData(e)}else{console.warn("Session data too long. Max 1000 chars.")}return this},openShare:function(e,t,i,r){return this._share("SHARE",e,t,i,r)},openInvite:function(e,t,i,r){return this._share("INVITE",e,t,i,r)},openRequest:function(e,t,i,r){return this._share("REQUEST",e,t,i,r)},openChallenge:function(e,t,i,r){return this._share("CHALLENGE",e,t,i,r)},_share:function(e,t,i,r,n){if(!this.checkAPI("shareAsync")){return this}if(n===undefined){n={}}if(i){var s=this.game.textures.getBase64(i,r)}var a={intent:e,image:s,text:t,data:n};var o=this;FBInstant.shareAsync(a).then((function(){o.emit("resume")}));return this},isSizeBetween:function(e,t){if(!this.checkAPI("contextIsSizeBetween")){return this}return FBInstant.context.isSizeBetween(e,t)},switchContext:function(e){if(!this.checkAPI("contextSwitchAsync")){return this}if(e!==this.contextID){var t=this;FBInstant.context.switchAsync(e).then((function(){t.contextID=FBInstant.context.getID();t.emit("switch",t.contextID)})).catch((function(e){t.emit("switchfail",e)}))}return this},chooseContext:function(e){if(!this.checkAPI("contextChooseAsync")){return this}var t=this;FBInstant.context.chooseAsync(e).then((function(){t.contextID=FBInstant.context.getID();t.emit("choose",t.contextID)})).catch((function(e){t.emit("choosefail",e)}));return this},createContext:function(e){if(!this.checkAPI("contextCreateAsync")){return this}var t=this;FBInstant.context.createAsync(e).then((function(){t.contextID=FBInstant.context.getID();t.emit("create",t.contextID)})).catch((function(e){t.emit("createfail",e)}));return this},getPlayers:function(){if(!this.checkAPI("playerGetConnectedPlayersAsync")){return this}var e=this;FBInstant.player.getConnectedPlayersAsync().then((function(t){e.emit("players",t)})).catch((function(t){e.emit("playersfail",t)}));return this},getCatalog:function(){if(!this.paymentsReady){return this}var e=this;var t=this.catalog;FBInstant.payments.getCatalogAsync().then((function(i){t=[];i.forEach((function(e){t.push(Product_1(e))}));e.emit("getcatalog",t)})).catch((function(t){e.emit("getcatalogfail",t)}));return this},getProduct:function(e){for(var t=0;t<this.catalog.length;t++){if(this.catalog[t].productID===e){return this.catalog[t]}}return null},purchase:function(e,t){if(!this.paymentsReady){return this}var i={productID:e};if(t){i.developerPayload=t}var r=this;FBInstant.payments.purchaseAsync(i).then((function(e){var t=Purchase_1(e);r.emit("purchase",t)})).catch((function(e){r.emit("purchasefail",e)}));return this},getPurchases:function(){if(!this.paymentsReady){return this}var e=this;var t=this.purchases;FBInstant.payments.getPurchasesAsync().then((function(i){t=[];i.forEach((function(e){t.push(Purchase_1(e))}));e.emit("getpurchases",t)})).catch((function(t){e.emit("getpurchasesfail",t)}));return this},consumePurchase:function(e){if(!this.paymentsReady){return this}var t=this;FBInstant.payments.consumePurchaseAsync(e).then((function(){t.emit("consumepurchase",e)})).catch((function(e){t.emit("consumepurchasefail",e)}));return this},update:function(e,t,i,r,n,s){return this._update("CUSTOM",e,t,i,r,n,s)},updateLeaderboard:function(e,t,i,r,n,s){return this._update("LEADERBOARD",e,t,i,r,n,s)},_update:function(e,t,i,r,n,s,a){if(!this.checkAPI("shareAsync")){return this}if(t===undefined){t=""}if(typeof i==="string"){i={default:i}}if(a===undefined){a={}}if(r){var o=this.game.textures.getBase64(r,n)}var l={action:e,cta:t,image:o,text:i,template:s,data:a,strategy:"IMMEDIATE",notification:"NO_PUSH"};var h=this;FBInstant.updateAsync(l).then((function(){h.emit("update")})).catch((function(e){h.emit("updatefail",e)}));return this},switchGame:function(e,t){if(!this.checkAPI("switchGameAsync")){return this}if(t){var i=JSON.stringify(t);if(i.length>1e3){console.warn("Switch Game data too long. Max 1000 chars.");return this}}var r=this;FBInstant.switchGameAsync(e,t).then((function(){r.emit("switchgame",e)})).catch((function(e){r.emit("switchgamefail",e)}));return this},createShortcut:function(){var e=this;FBInstant.canCreateShortcutAsync().then((function(t){if(t){FBInstant.createShortcutAsync().then((function(){e.emit("shortcutcreated")})).catch((function(t){e.emit("shortcutfailed",t)}))}}));return this},quit:function(){FBInstant.quit()},log:function(e,t,i){if(!this.checkAPI("logEvent")){return this}if(i===undefined){i={}}if(e.length>=2&&e.length<=40){FBInstant.logEvent(e,parseFloat(t),i)}return this},preloadAds:function(e){if(!this.checkAPI("getInterstitialAdAsync")){return this}if(!Array.isArray(e)){e=[e]}var t;var i=this;var r=0;for(t=0;t<this.ads.length;t++){if(!this.ads[t].shown){r++}}if(r+e.length>=3){console.warn("Too many AdInstances. Show an ad before loading more");return this}for(t=0;t<e.length;t++){var n=e[t];var s;FBInstant.getInterstitialAdAsync(n).then((function(e){s=e;return e.loadAsync()})).then((function(){var e=AdInstance_1(n,s,false);i.ads.push(e);i.emit("adloaded",e)})).catch((function(e){if(e.code==="ADS_NO_FILL"){i.emit("adsnofill",n)}else if(e.code==="ADS_FREQUENT_LOAD"){i.emit("adsfrequentload",n)}else{console.warn(e)}}))}return this},preloadVideoAds:function(e){if(!this.checkAPI("getRewardedVideoAsync")){return this}if(!Array.isArray(e)){e=[e]}var t;var i=this;var r=0;for(t=0;t<this.ads.length;t++){if(!this.ads[t].shown){r++}}if(r+e.length>=3){console.warn("Too many AdInstances. Show an ad before loading more");return this}for(t=0;t<e.length;t++){var n=e[t];var s;FBInstant.getRewardedVideoAsync(n).then((function(e){s=e;return e.loadAsync()})).then((function(){var e=AdInstance_1(n,s,true);i.ads.push(e);i.emit("adloaded",e)})).catch((function(e){if(e.code==="ADS_NO_FILL"){i.emit("adsnofill",n)}else if(e.code==="ADS_FREQUENT_LOAD"){i.emit("adsfrequentload",n)}else{console.warn(e)}}))}return this},showAd:function(e){var t=this;for(var i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e){r.instance.showAsync().then((function(){r.shown=true;t.emit("adfinished",r)})).catch((function(e){if(e.code==="ADS_NOT_LOADED"){t.emit("adsnotloaded",r)}else if(e.code==="RATE_LIMITED"){t.emit("adratelimited",r)}t.emit("adshowerror",e,r)}))}}return this},showVideo:function(e){var t=this;for(var i=0;i<this.ads.length;i++){var r=this.ads[i];if(r.placementID===e&&r.video){r.instance.showAsync().then((function(){r.shown=true;t.emit("adfinished",r)})).catch((function(e){if(e.code==="ADS_NOT_LOADED"){t.emit("adsnotloaded",r)}else if(e.code==="RATE_LIMITED"){t.emit("adratelimited",r)}t.emit("adshowerror",e,r)}))}}return this},matchPlayer:function(e,t){if(e===undefined){e=null}if(t===undefined){t=false}if(!this.checkAPI("matchPlayerAsync")){return this}var i=this;FBInstant.matchPlayerAsync(e,t).then((function(){i.getID();i.getType();i.emit("matchplayer",i.contextID,i.contextType)}));return this},getLeaderboard:function(e){if(!this.checkAPI("getLeaderboardAsync")){return this}var t=this;FBInstant.getLeaderboardAsync(e).then((function(i){var r=new Leaderboard_1(t,i);t.leaderboards[e]=r;t.emit("getleaderboard",r)})).catch((function(e){console.warn(e)}));return this},destroy:function(){FBInstant.quit();this.data.destroy();this.removeAllListeners();this.catalog=[];this.purchases=[];this.leaderboards=[];this.ads=[];this.game=null}});var FacebookInstantGamesPlugin_1=FacebookInstantGamesPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */if(typeof FEATURE_SOUND){var SoundManagerCreator$1=SoundManagerCreator_1}if(typeof PLUGIN_FBINSTANT){var FacebookInstantGamesPlugin$1=FacebookInstantGamesPlugin_1}var Game=new Class_1({initialize:function e(t){this.config=new Config_1(t);this.renderer=null;this.domContainer=null;this.canvas=null;this.context=null;this.isBooted=false;this.isRunning=false;this.events=new eventemitter3;this.anims=new AnimationManager_1(this);this.textures=new TextureManager_1(this);this.cache=new CacheManager_1(this);this.registry=new DataManager_1(this);this.input=new InputManager_1(this,this.config);this.scene=new SceneManager_1(this,this.config.sceneConfig);this.device=device;this.scale=new ScaleManager_1(this,this.config);this.sound=null;if(typeof FEATURE_SOUND){this.sound=SoundManagerCreator$1.create(this)}this.loop=new TimeStep_1(this,this.config.fps);this.plugins=new PluginManager_1(this,this.config);if(typeof PLUGIN_FBINSTANT){this.facebook=new FacebookInstantGamesPlugin$1(this)}this.pendingDestroy=false;this.removeCanvas=false;this.noReturn=false;this.hasFocus=false;DOMContentLoaded_1(this.boot.bind(this))},boot:function(){if(!PluginCache_1.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=true;this.config.preBoot(this);this.scale.preBoot();CreateRenderer_1(this);CreateDOMContainer_1(this);DebugHeader_1(this);AddToDOM_1(this.canvas,this.config.parent);this.textures.once(events$8.READY,this.texturesReady,this);this.events.emit(events$1.BOOT)},texturesReady:function(){this.events.emit(events$1.READY);this.start()},start:function(){this.isRunning=true;this.config.postBoot(this);if(this.renderer){this.loop.start(this.step.bind(this))}else{this.loop.start(this.headlessStep.bind(this))}VisibilityHandler_1(this);var e=this.events;e.on(events$1.HIDDEN,this.onHidden,this);e.on(events$1.VISIBLE,this.onVisible,this);e.on(events$1.BLUR,this.onBlur,this);e.on(events$1.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy){return this.runDestroy()}var i=this.events;i.emit(events$1.PRE_STEP,e,t);i.emit(events$1.STEP,e,t);this.scene.update(e,t);i.emit(events$1.POST_STEP,e,t);var r=this.renderer;r.preRender();i.emit(events$1.PRE_RENDER,r,e,t);this.scene.render(r);r.postRender();i.emit(events$1.POST_RENDER,r,e,t)},headlessStep:function(e,t){var i=this.events;i.emit(events$1.PRE_STEP,e,t);i.emit(events$1.STEP,e,t);this.scene.update(e,t);i.emit(events$1.POST_STEP,e,t);i.emit(events$1.PRE_RENDER);i.emit(events$1.POST_RENDER)},onHidden:function(){this.loop.pause();this.events.emit(events$1.PAUSE)},onVisible:function(){this.loop.resume();this.events.emit(events$1.RESUME)},onBlur:function(){this.hasFocus=false;this.loop.blur()},onFocus:function(){this.hasFocus=true;this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){if(t===undefined){t=false}this.pendingDestroy=true;this.removeCanvas=e;this.noReturn=t},runDestroy:function(){this.events.emit(events$1.DESTROY);this.events.removeAllListeners();this.scene.destroy();if(this.renderer){this.renderer.destroy()}if(this.removeCanvas&&this.canvas){CanvasPool_1.remove(this.canvas);if(this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}}if(this.domContainer){this.domContainer.parentNode.removeChild(this.domContainer)}this.loop.destroy();this.pendingDestroy=false}});var Game_1=Game;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CheckMatrix=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0])){return false}var t=e[0].length;for(var i=1;i<e.length;i++){if(e[i].length!==t){return false}}return true};var CheckMatrix_1=CheckMatrix;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatrixToString=function(e){var t="";if(!CheckMatrix_1(e)){return t}for(var i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++){var n=e[i][r].toString();if(n!=="undefined"){t+=Pad_1(n,2)}else{t+="?"}if(r<e[i].length-1){t+=" |"}}if(i<e.length-1){t+="\n";for(var s=0;s<e[i].length;s++){t+="---";if(s<e[i].length-1){t+="+"}}t+="\n"}}return t};var MatrixToString_1=MatrixToString;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ReverseColumns=function(e){return e.reverse()};var ReverseColumns_1=ReverseColumns;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ReverseRows=function(e){for(var t=0;t<e.length;t++){e[t].reverse()}return e};var ReverseRows_1=ReverseRows;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TransposeMatrix=function(e){var t=e.length;var i=e[0].length;var r=new Array(i);for(var n=0;n<i;n++){r[n]=new Array(t);for(var s=t-1;s>-1;s--){r[n][s]=e[s][n]}}return r};var TransposeMatrix_1=TransposeMatrix;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateMatrix=function(e,t){if(t===undefined){t=90}if(!CheckMatrix_1(e)){return null}if(typeof t!=="string"){t=(t%360+360)%360}if(t===90||t===-270||t==="rotateLeft"){e=TransposeMatrix_1(e);e.reverse()}else if(t===-90||t===270||t==="rotateRight"){e.reverse();e=TransposeMatrix_1(e)}else if(Math.abs(t)===180||t==="rotate180"){for(var i=0;i<e.length;i++){e[i].reverse()}e.reverse()}return e};var RotateMatrix_1=RotateMatrix;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rotate180=function(e){return RotateMatrix_1(e,180)};var Rotate180_1=Rotate180;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateLeft$1=function(e){return RotateMatrix_1(e,90)};var RotateLeft_1$1=RotateLeft$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateRight$1=function(e){return RotateMatrix_1(e,-90)};var RotateRight_1$1=RotateRight$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var matrix={CheckMatrix:CheckMatrix_1,MatrixToString:MatrixToString_1,ReverseColumns:ReverseColumns_1,ReverseRows:ReverseRows_1,Rotate180:Rotate180_1,RotateLeft:RotateLeft_1$1,RotateMatrix:RotateMatrix_1,RotateRight:RotateRight_1$1,TransposeMatrix:TransposeMatrix_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Add=function(e,t,i,r,n){if(n===undefined){n=e}if(i>0){var s=i-e.length;if(s<=0){return null}}if(!Array.isArray(t)){if(e.indexOf(t)===-1){e.push(t);if(r){r.call(n,t)}return t}else{return null}}var a=t.length-1;while(a>=0){if(e.indexOf(t[a])!==-1){t.splice(a,1)}a--}a=t.length;if(a===0){return null}if(i>0&&a>s){t.splice(s);a=s}for(var o=0;o<a;o++){var l=t[o];e.push(l);if(r){r.call(n,l)}}return t};var Add_1=Add;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AddAt=function(e,t,i,r,n,s){if(i===undefined){i=0}if(s===undefined){s=e}if(r>0){var a=r-e.length;if(a<=0){return null}}if(!Array.isArray(t)){if(e.indexOf(t)===-1){e.splice(i,0,t);if(n){n.call(s,t)}return t}else{return null}}var o=t.length-1;while(o>=0){if(e.indexOf(t[o])!==-1){t.pop()}o--}o=t.length;if(o===0){return null}if(r>0&&o>a){t.splice(a);o=a}for(var l=o-1;l>=0;l--){var h=t[l];e.splice(i,0,h);if(n){n.call(s,h)}}return t};var AddAt_1=AddAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BringToTop=function(e,t){var i=e.indexOf(t);if(i!==-1&&i<e.length){e.splice(i,1);e.push(t)}return t};var BringToTop_1=BringToTop;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SafeRange=function(e,t,i,r){var n=e.length;if(t<0||t>n||t>=i||i>n||t+i>n){if(r){throw new Error("Range Error: Values outside acceptable range")}return false}else{return true}};var SafeRange_1=SafeRange;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CountAllMatching=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=e.length}var s=0;if(SafeRange_1(e,r,n)){for(var a=r;a<n;a++){var o=e[a];if(o[t]===i){s++}}}return s};var CountAllMatching_1=CountAllMatching;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Each=function(e,t,i){var r;var n=[null];for(r=3;r<arguments.length;r++){n.push(arguments[r])}for(r=0;r<e.length;r++){n[0]=e[r];t.apply(i,n)}return e};var Each_1=Each;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EachInRange=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=e.length}if(SafeRange_1(e,r,n)){var s;var a=[null];for(s=5;s<arguments.length;s++){a.push(arguments[s])}for(s=r;s<n;s++){a[0]=e[s];t.apply(i,a)}}return e};var EachInRange_1=EachInRange;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetAll=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=e.length}var s=[];if(SafeRange_1(e,r,n)){for(var a=r;a<n;a++){var o=e[a];if(!t||t&&i===undefined&&o.hasOwnProperty(t)||t&&i!==undefined&&o[t]===i){s.push(o)}}}return s};var GetAll_1=GetAll;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetFirst$1=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=e.length}if(SafeRange_1(e,r,n)){for(var s=r;s<n;s++){var a=e[s];if(!t||t&&i===undefined&&a.hasOwnProperty(t)||t&&i!==undefined&&a[t]===i){return a}}}return null};var GetFirst_1$1=GetFirst$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRandom=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=e.length}var r=t+Math.floor(Math.random()*i);return e[r]===undefined?null:e[r]};var GetRandom_1=GetRandom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MoveDown=function(e,t){var i=e.indexOf(t);if(i>0){var r=e[i-1];var n=e.indexOf(r);e[i]=r;e[n]=t}return e};var MoveDown_1=MoveDown;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MoveTo$1=function(e,t,i){var r=e.indexOf(t);if(r===-1||i<0||i>=e.length){throw new Error("Supplied index out of bounds")}if(r!==i){e.splice(r,1);e.splice(i,0,t)}return t};var MoveTo_1$1=MoveTo$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MoveUp=function(e,t){var i=e.indexOf(t);if(i!==-1&&i<e.length-1){var r=e[i+1];var n=e.indexOf(r);e[i]=r;e[n]=t}return e};var MoveUp_1=MoveUp;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NumberArray=function(e,t,i,r){var n=[];for(var s=e;s<=t;s++){if(i||r){var a=i?i+s.toString():s.toString();if(r){a=a.concat(r)}n.push(a)}else{n.push(s)}}return n};var NumberArray_1=NumberArray;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NumberArrayStep=function(e,t,i){if(e===undefined){e=0}if(t===undefined){t=null}if(i===undefined){i=1}if(t===null){t=e;e=0}var r=[];var n=Math.max(RoundAwayFromZero_1((t-e)/(i||1)),0);for(var s=0;s<n;s++){r.push(e);e+=i}return r};var NumberArrayStep_1=NumberArrayStep;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function swap(e,t,i){var r=e[t];e[t]=e[i];e[i]=r}function defaultCompare(e,t){return e<t?-1:e>t?1:0}var QuickSelect=function(e,t,i,r,n){if(i===undefined){i=0}if(r===undefined){r=e.length-1}if(n===undefined){n=defaultCompare}while(r>i){if(r-i>600){var s=r-i+1;var a=t-i+1;var o=Math.log(s);var l=.5*Math.exp(2*o/3);var h=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);var u=Math.max(i,Math.floor(t-a*l/s+h));var c=Math.min(r,Math.floor(t+(s-a)*l/s+h));QuickSelect(e,t,u,c,n)}var f=e[t];var d=i;var v=r;swap(e,i,t);if(n(e[r],f)>0){swap(e,i,r)}while(d<v){swap(e,d,v);d++;v--;while(n(e[d],f)<0){d++}while(n(e[v],f)>0){v--}}if(n(e[i],f)===0){swap(e,i,v)}else{v++;swap(e,v,r)}if(v<=t){i=v+1}if(t<=v){r=v-1}}};var QuickSelect_1=QuickSelect;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildChunk=function(e,t,i){var r=[];for(var n=0;n<e.length;n++){for(var s=0;s<t.length;s++){for(var a=0;a<i;a++){r.push({a:e[n],b:t[s]})}}}return r};var Range=function(e,t,i){var r=GetValue_1(i,"max",0);var n=GetValue_1(i,"qty",1);var s=GetValue_1(i,"random",false);var a=GetValue_1(i,"randomB",false);var o=GetValue_1(i,"repeat",0);var l=GetValue_1(i,"yoyo",false);var h=[];if(a){Shuffle_1(t)}if(o===-1){if(r===0){o=0}else{var u=e.length*t.length*n;if(l){u*=2}o=Math.ceil(r/u)}}for(var c=0;c<=o;c++){var f=BuildChunk(e,t,n);if(s){Shuffle_1(f)}h=h.concat(f);if(l){f.reverse();h=h.concat(f)}}if(r){h.splice(r)}return h};var Range_1=Range;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveAt=function(e,t,i,r){if(r===undefined){r=e}if(t<0||t>e.length-1){throw new Error("Index out of bounds")}var n=SpliceOne_1(e,t);if(i){i.call(r,n)}return n};var RemoveAt_1=RemoveAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveBetween=function(e,t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=e.length}if(n===undefined){n=e}if(SafeRange_1(e,t,i)){var s=i-t;var a=e.splice(t,s);if(r){for(var o=0;o<a.length;o++){var l=a[o];r.call(n,l)}}return a}else{return[]}};var RemoveBetween_1=RemoveBetween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveRandomElement=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=e.length}var r=t+Math.floor(Math.random()*i);return SpliceOne_1(e,r)};var RemoveRandomElement_1=RemoveRandomElement;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Replace=function(e,t,i){var r=e.indexOf(t);var n=e.indexOf(i);if(r!==-1&&n===-1){e[r]=i;return true}else{return false}};var Replace_1=Replace;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SendToBack=function(e,t){var i=e.indexOf(t);if(i!==-1&&i>0){e.splice(i,1);e.unshift(t)}return t};var SendToBack_1=SendToBack;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetAll=function(e,t,i,r,n){if(r===undefined){r=0}if(n===undefined){n=e.length}if(SafeRange_1(e,r,n)){for(var s=r;s<n;s++){var a=e[s];if(a.hasOwnProperty(t)){a[t]=i}}}return e};var SetAll_1=SetAll;var StableSort=createCommonjsModule((function(e){
/**
                 * @author       Richard Davey <rich@photonstorm.com>
                 * @copyright    2019 Photon Storm Ltd.
                 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
                 */
//! stable.js 0.1.6, https://github.com/Two-Screen/stable
//!  2017 Angry Bytes and contributors. MIT licensed.
(function(){var t=function(e,t){return i(e.slice(),t)};t.inplace=function(e,t){var n=i(e,t);if(n!==e){r(n,null,e.length,e)}return e};function i(e,t){if(typeof t!=="function"){t=function(e,t){return String(e).localeCompare(t)}}var i=e.length;if(i<=1){return e}var n=new Array(i);for(var s=1;s<i;s*=2){r(e,t,s,n);var a=e;e=n;n=a}return e}var r=function(e,t,i,r){var n=e.length;var s=0;var a=i*2;var o,l,h;var u,c;for(o=0;o<n;o+=a){l=o+i;h=l+i;if(l>n)l=n;if(h>n)h=n;u=o;c=l;while(true){if(u<l&&c<h){if(t(e[u],e[c])<=0){r[s++]=e[u++]}else{r[s++]=e[c++]}}else if(u<l){r[s++]=e[u++]}else if(c<h){r[s++]=e[c++]}else{break}}}};{e.exports=t}})()}));
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Swap=function(e,t,i){if(t===i){return}var r=e.indexOf(t);var n=e.indexOf(i);if(r<0||n<0){throw new Error("Supplied items must be elements of the same array")}e[r]=i;e[n]=t;return e};var Swap_1=Swap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var array={Matrix:matrix,Add:Add_1,AddAt:AddAt_1,BringToTop:BringToTop_1,CountAllMatching:CountAllMatching_1,Each:Each_1,EachInRange:EachInRange_1,FindClosestInSorted:FindClosestInSorted_1,GetAll:GetAll_1,GetFirst:GetFirst_1$1,GetRandom:GetRandom_1,MoveDown:MoveDown_1,MoveTo:MoveTo_1$1,MoveUp:MoveUp_1,NumberArray:NumberArray_1,NumberArrayStep:NumberArrayStep_1,QuickSelect:QuickSelect_1,Range:Range_1,Remove:Remove_1,RemoveAt:RemoveAt_1,RemoveBetween:RemoveBetween_1,RemoveRandomElement:RemoveRandomElement_1,Replace:Replace_1,RotateLeft:RotateLeft_1,RotateRight:RotateRight_1,SafeRange:SafeRange_1,SendToBack:SendToBack_1,SetAll:SetAll_1,Shuffle:Shuffle_1,SpliceOne:SpliceOne_1,StableSort:StableSort,Swap:Swap_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var List=new Class_1({initialize:function e(t){this.parent=t;this.list=[];this.position=0;this.addCallback=NOOP_1;this.removeCallback=NOOP_1;this._sortKey=""},add:function(e,t){if(t){return array.Add(this.list,e)}else{return array.Add(this.list,e,0,this.addCallback,this)}},addAt:function(e,t,i){if(i){return array.AddAt(this.list,e,t)}else{return array.AddAt(this.list,e,t,0,this.addCallback,this)}},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){if(!e){return this}if(t===undefined){t=function(t,i){return t[e]-i[e]}}StableSort.inplace(this.list,t);return this},getByName:function(e){return array.GetFirst(this.list,"name",e)},getRandom:function(e,t){return array.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return array.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return array.GetAll(this.list,e,t,i,r)},count:function(e,t){return array.CountAllMatching(this.list,e,t)},swap:function(e,t){array.Swap(this.list,e,t)},moveTo:function(e,t){return array.MoveTo(this.list,e,t)},remove:function(e,t){if(t){return array.Remove(this.list,e)}else{return array.Remove(this.list,e,this.removeCallback,this)}},removeAt:function(e,t){if(t){return array.RemoveAt(this.list,e)}else{return array.RemoveAt(this.list,e,this.removeCallback,this)}},removeBetween:function(e,t,i){if(i){return array.RemoveBetween(this.list,e,t)}else{return array.RemoveBetween(this.list,e,t,this.removeCallback,this)}},removeAll:function(e){var t=this.list.length;while(t--){this.remove(this.list[t],e)}return this},bringToTop:function(e){return array.BringToTop(this.list,e)},sendToBack:function(e){return array.SendToBack(this.list,e)},moveUp:function(e){array.MoveUp(this.list,e);return e},moveDown:function(e){array.MoveDown(this.list,e);return e},reverse:function(){this.list.reverse();return this},shuffle:function(){array.Shuffle(this.list);return this},replace:function(e,t){return array.Replace(this.list,e,t)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){array.SetAll(this.list,e,t,i,r);return this},each:function(e,t){var i=[null];for(var r=2;r<arguments.length;r++){i.push(arguments[r])}for(r=0;r<this.list.length;r++){i[0]=this.list[r];e.apply(t,i)}},shutdown:function(){this.removeAll();this.list=[]},destroy:function(){this.removeAll();this.parent=null;this.addCallback=null;this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){this.position=0;if(this.list.length>0){return this.list[0]}else{return null}}},last:{get:function(){if(this.list.length>0){this.position=this.list.length-1;return this.list[this.position]}else{return null}}},next:{get:function(){if(this.position<this.list.length){this.position++;return this.list[this.position]}else{return null}}},previous:{get:function(){if(this.position>0){this.position--;return this.list[this.position]}else{return null}}}});var List_1=List;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DisplayList=new Class_1({Extends:List_1,initialize:function e(t){List_1.call(this,t);this.sortChildrenFlag=false;this.scene=t;this.systems=t.sys;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){this.systems.events.once(events$7.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=true},depthSort:function(){if(this.sortChildrenFlag){StableSort.inplace(this.list,this.sortByDepth);this.sortChildrenFlag=false}},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},shutdown:function(){var e=this.list.length;while(e--){this.list[e].destroy(true)}this.list.length=0;this.systems.events.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("DisplayList",DisplayList,"displayList");var DisplayList_1=DisplayList;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UpdateList=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this._list=[];this._pendingInsertion=[];this._pendingRemoval=[];t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(events$7.PRE_UPDATE,this.preUpdate,this);e.on(events$7.UPDATE,this.update,this);e.once(events$7.SHUTDOWN,this.shutdown,this)},add:function(e){if(this._list.indexOf(e)===-1&&this._pendingInsertion.indexOf(e)===-1){this._pendingInsertion.push(e)}return e},preUpdate:function(){var e=this._pendingRemoval.length;var t=this._pendingInsertion.length;if(e===0&&t===0){return}var i;var r;for(i=0;i<e;i++){r=this._pendingRemoval[i];var n=this._list.indexOf(r);if(n>-1){this._list.splice(n,1)}}this._list=this._list.concat(this._pendingInsertion.splice(0));this._pendingRemoval.length=0;this._pendingInsertion.length=0},update:function(e,t){var i=this._list;var r=i.length;for(var n=0;n<r;n++){var s=i[n];if(s.active){s.preUpdate.call(s,e,t)}}},remove:function(e){if(this._list.indexOf(e)!==-1&&this._pendingRemoval.indexOf(e)===-1){this._pendingRemoval.push(e)}return e},removeAll:function(){var e=this._list.length;while(e--){this.remove(this._list[e])}return this},shutdown:function(){var e=this._list.length;while(e--){this._list[e].destroy(true)}e=this._pendingRemoval.length;while(e--){this._pendingRemoval[e].destroy(true)}e=this._pendingInsertion.length;while(e--){this._pendingInsertion[e].destroy(true)}this._list.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;var t=this.systems.events;t.off(events$7.PRE_UPDATE,this.preUpdate,this);t.off(events$7.UPDATE,this.update,this);t.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null},length:{get:function(){return this._list.length}}});PluginCache_1.register("UpdateList",UpdateList,"updateList");var UpdateList_1=UpdateList;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetAdvancedValue=function(e,t,i){var r=GetValue_1(e,t,null);if(r===null){return i}else if(Array.isArray(r)){return math.RND.pick(r)}else if(typeof r==="object"){if(r.hasOwnProperty("randInt")){return math.RND.integerInRange(r.randInt[0],r.randInt[1])}else if(r.hasOwnProperty("randFloat")){return math.RND.realInRange(r.randFloat[0],r.randFloat[1])}}else if(typeof r==="function"){return r(t)}return r};var GetAdvancedValue_1=GetAdvancedValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildGameObject=function(e,t,i){t.x=GetAdvancedValue_1(i,"x",0);t.y=GetAdvancedValue_1(i,"y",0);t.depth=GetAdvancedValue_1(i,"depth",0);t.flipX=GetAdvancedValue_1(i,"flipX",false);t.flipY=GetAdvancedValue_1(i,"flipY",false);var r=GetAdvancedValue_1(i,"scale",null);if(typeof r==="number"){t.setScale(r)}else if(r!==null){t.scaleX=GetAdvancedValue_1(r,"x",1);t.scaleY=GetAdvancedValue_1(r,"y",1)}var n=GetAdvancedValue_1(i,"scrollFactor",null);if(typeof n==="number"){t.setScrollFactor(n)}else if(n!==null){t.scrollFactorX=GetAdvancedValue_1(n,"x",1);t.scrollFactorY=GetAdvancedValue_1(n,"y",1)}t.rotation=GetAdvancedValue_1(i,"rotation",0);var s=GetAdvancedValue_1(i,"angle",null);if(s!==null){t.angle=s}t.alpha=GetAdvancedValue_1(i,"alpha",1);var a=GetAdvancedValue_1(i,"origin",null);if(typeof a==="number"){t.setOrigin(a)}else if(a!==null){var o=GetAdvancedValue_1(a,"x",.5);var l=GetAdvancedValue_1(a,"y",.5);t.setOrigin(o,l)}t.scaleMode=GetAdvancedValue_1(i,"scaleMode",ScaleModes_1.DEFAULT);t.blendMode=GetAdvancedValue_1(i,"blendMode",BlendModes.NORMAL);t.visible=GetAdvancedValue_1(i,"visible",true);var h=GetAdvancedValue_1(i,"add",true);if(h){e.sys.displayList.add(t)}if(t.preUpdate){e.sys.updateList.add(t)}return t};var BuildGameObject_1=BuildGameObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildGameObjectAnimation=function(e,t){var i=GetAdvancedValue_1(t,"anims",null);if(i===null){return e}if(typeof i==="string"){e.anims.play(i)}else if(typeof i==="object"){var r=e.anims;var n=GetAdvancedValue_1(i,"key",undefined);var s=GetAdvancedValue_1(i,"startFrame",undefined);var a=GetAdvancedValue_1(i,"delay",0);var o=GetAdvancedValue_1(i,"repeat",0);var l=GetAdvancedValue_1(i,"repeatDelay",0);var h=GetAdvancedValue_1(i,"yoyo",false);var u=GetAdvancedValue_1(i,"play",false);var c=GetAdvancedValue_1(i,"delayedPlay",0);r.setDelay(a);r.setRepeat(o);r.setRepeatDelay(l);r.setYoyo(h);if(u){r.play(n,s)}else if(c>0){r.delayedPlay(c,n,s)}else{r.load(n)}}return e};var BuildGameObjectAnimation_1=BuildGameObjectAnimation;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBitmapTextSize=function(e,t,i){if(i===undefined){i={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null}}}var r=e.text;var n=r.length;var s=Number.MAX_VALUE;var a=Number.MAX_VALUE;var o=0;var l=0;var h=e.fontData.chars;var u=e.fontData.lineHeight;var c=e.letterSpacing;var f=0;var d=0;var v=0;var p=null;var g=0;var m=0;var _=e.fontSize/e.fontData.size;var y=_*e.scaleX;var T=_*e.scaleY;var x=null;var E=0;var C=[];var S=Number.MAX_VALUE;var A=0;var b=0;var w=0;for(var P=0;P<n;P++){v=r.charCodeAt(P);if(v===10){f=0;d+=u;x=null;C[b]=w;if(w>A){A=w}if(w<S){S=w}b++;w=0;continue}p=h[v];if(!p){continue}g=f;m=d;if(x!==null){var R=p.kerning[E];g+=R!==undefined?R:0}if(s>g){s=g}if(a>m){a=m}var O=g+p.xAdvance;var M=m+u;if(o<O){o=O}if(l<M){l=M}f+=p.xAdvance+c;x=p;E=v;w=O*_}C[b]=w;if(w>A){A=w}if(w<S){S=w}var F=i.local;var L=i.global;var G=i.lines;F.x=s*_;F.y=a*_;F.width=o*_;F.height=l*_;L.x=e.x-e.displayOriginX+s*y;L.y=e.y-e.displayOriginY+a*T;L.width=o*y;L.height=l*T;G.shortest=S;G.longest=A;G.lengths=C;if(t){F.x=Math.round(F.x);F.y=Math.round(F.y);F.width=Math.round(F.width);F.height=Math.round(F.height);L.x=Math.round(L.x);L.y=Math.round(L.y);L.width=Math.round(L.width);L.height=Math.round(L.height);G.shortest=Math.round(S);G.longest=Math.round(A)}return i};var GetBitmapTextSize_1=GetBitmapTextSize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function getValue(e,t){return parseInt(e.getAttribute(t),10)}var ParseXMLBitmapFont=function(e,t,i,r){if(t===undefined){t=0}if(i===undefined){i=0}var n={};var s=e.getElementsByTagName("info")[0];var a=e.getElementsByTagName("common")[0];n.font=s.getAttribute("face");n.size=getValue(s,"size");n.lineHeight=getValue(a,"lineHeight")+i;n.chars={};var o=e.getElementsByTagName("char");var l=r!==undefined&&r.trimmed;if(l){var h=r.height;var u=r.width}for(var c=0;c<o.length;c++){var f=o[c];var d=getValue(f,"id");var v=getValue(f,"x");var p=getValue(f,"y");var g=getValue(f,"width");var m=getValue(f,"height");if(l){if(v<u){u=v}if(p<h){h=p}}n.chars[d]={x:v,y:p,width:g,height:m,centerX:Math.floor(g/2),centerY:Math.floor(m/2),xOffset:getValue(f,"xoffset"),yOffset:getValue(f,"yoffset"),xAdvance:getValue(f,"xadvance")+t,data:{},kerning:{}}}if(l&&h!==0&&u!==0){for(var _ in n.chars){var y=n.chars[_];y.x-=r.x;y.y-=r.y}}var T=e.getElementsByTagName("kerning");for(c=0;c<T.length;c++){var x=T[c];var E=getValue(x,"first");var C=getValue(x,"second");var S=getValue(x,"amount");n.chars[C].kerning[E]=S}return n};var ParseXMLBitmapFont_1=ParseXMLBitmapFont;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseFromAtlas=function(e,t,i,r,n,s,a){var o=e.sys.textures.getFrame(i,r);var l=e.sys.cache.xml.get(n);if(o&&l){var h=ParseXMLBitmapFont_1(l,s,a,o);e.sys.cache.bitmapFont.add(t,{data:h,texture:i,frame:r});return true}else{return false}};var ParseFromAtlas_1=ParseFromAtlas;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapTextWebGLRenderer=function(e,t,i,r,n){var s=t._text;var a=s.length;if(a===0){return}var o=this.pipeline;e.setPipeline(o,t);var l=o._tempMatrix1;var h=o._tempMatrix2;var u=o._tempMatrix3;h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(n){l.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);h.e=t.x;h.f=t.y;l.multiply(h,u)}else{h.e-=r.scrollX*t.scrollFactorX;h.f-=r.scrollY*t.scrollFactorY;l.multiply(h,u)}var c=t.frame;var f=c.glTexture;var d=c.cutX;var v=c.cutY;var p=f.width;var g=f.height;var m=t._isTinted&&t.tintFill;var _=Utils.getTintAppendFloatAlpha(t._tintTL,r.alpha*t._alphaTL);var y=Utils.getTintAppendFloatAlpha(t._tintTR,r.alpha*t._alphaTR);var T=Utils.getTintAppendFloatAlpha(t._tintBL,r.alpha*t._alphaBL);var x=Utils.getTintAppendFloatAlpha(t._tintBR,r.alpha*t._alphaBR);o.setTexture2D(f,0);var E=0;var C=0;var S=0;var A=0;var b=t._letterSpacing;var w;var P=0;var R=0;var O=0;var M=0;var F;var L=t.fontData;var G=L.chars;var V=L.lineHeight;var I=t._fontSize/L.size;var D=t._align;var B=0;var N=0;t.getTextBounds(false);var $=t._bounds.lines;if(D===1){N=($.longest-$.lengths[0])/2}else if(D===2){N=$.longest-$.lengths[0]}var k=r.roundPixels;for(var Y=0;Y<a;Y++){S=s.charCodeAt(Y);if(S===10){B++;if(D===1){N=($.longest-$.lengths[B])/2}else if(D===2){N=$.longest-$.lengths[B]}E=0;C+=V;F=null;continue}w=G[S];if(!w){continue}P=d+w.x;R=v+w.y;O=w.width;M=w.height;var W=w.xOffset+E;var X=w.yOffset+C;if(F!==null){var U=w.kerning[A];W+=U!==undefined?U:0}E+=w.xAdvance+b;F=w;A=S;if(O===0||M===0||S===32){continue}W*=I;X*=I;W-=t.displayOriginX;X-=t.displayOriginY;W+=N;var z=P/p;var H=R/g;var j=(P+O)/p;var q=(R+M)/g;var K=W+O*I;var J=X+M*I;var Z=u.getX(W,X);var Q=u.getY(W,X);var ee=u.getX(W,J);var te=u.getY(W,J);var ie=u.getX(K,J);var re=u.getY(K,J);var ne=u.getX(K,X);var se=u.getY(K,X);if(k){Z=Math.round(Z);Q=Math.round(Q);ee=Math.round(ee);te=Math.round(te);ie=Math.round(ie);re=Math.round(re);ne=Math.round(ne);se=Math.round(se)}o.batchQuad(Z,Q,ee,te,ie,re,ne,se,z,H,j,q,_,y,T,x,m,f,0)}};var BitmapTextWebGLRenderer_1=BitmapTextWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTransform=function(e,t,i,r,n){var s=r.alpha*i.alpha;if(s<=0){return false}var a=e._tempMatrix1.copyFromArray(r.matrix.matrix);var o=e._tempMatrix2.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var l=e._tempMatrix3;if(n){a.multiplyWithOffset(n,-r.scrollX*i.scrollFactorX,-r.scrollY*i.scrollFactorY);o.e=i.x;o.f=i.y;a.multiply(o,l)}else{o.e-=r.scrollX*i.scrollFactorX;o.f-=r.scrollY*i.scrollFactorY;a.multiply(o,l)}t.globalCompositeOperation=e.blendModes[i.blendMode];t.globalAlpha=s;t.save();l.setToContext(t);return true};var SetTransform_1=SetTransform;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapTextCanvasRenderer=function(e,t,i,r,n){var s=t._text;var a=s.length;var o=e.currentContext;if(a===0||!SetTransform_1(e,o,t,r,n)){return}var l=t.frame;var h=t.fontData.chars;var u=t.fontData.lineHeight;var c=t._letterSpacing;var f=0;var d=0;var v=0;var p=null;var g=0;var m=0;var _=0;var y=0;var T=0;var x=0;var E=null;var C=0;var S=t.frame.source.image;var A=l.cutX;var b=l.cutY;var w=t._fontSize/t.fontData.size;var P=t._align;var R=0;var O=0;t.getTextBounds(false);var M=t._bounds.lines;if(P===1){O=(M.longest-M.lengths[0])/2}else if(P===2){O=M.longest-M.lengths[0]}o.translate(-t.displayOriginX,-t.displayOriginY);var F=r.roundPixels;for(var L=0;L<a;L++){v=s.charCodeAt(L);if(v===10){R++;if(P===1){O=(M.longest-M.lengths[R])/2}else if(P===2){O=M.longest-M.lengths[R]}f=0;d+=u;E=null;continue}p=h[v];if(!p){continue}g=A+p.x;m=b+p.y;_=p.width;y=p.height;T=p.xOffset+f;x=p.yOffset+d;if(E!==null){var G=p.kerning[C];T+=G!==undefined?G:0}T*=w;x*=w;T+=O;f+=p.xAdvance+c;E=p;C=v;if(_===0||y===0||v===32){continue}if(F){T=Math.round(T);x=Math.round(x)}o.save();o.translate(T,x);o.scale(w,w);o.drawImage(S,g,m,_,y,0,0,_,y);o.restore()}o.restore()};var BitmapTextCanvasRenderer_1=BitmapTextCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL=NOOP_1;var renderCanvas=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL=BitmapTextWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas=BitmapTextCanvasRenderer_1}var BitmapTextRender={renderWebGL:renderWebGL,renderCanvas:renderCanvas};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapText=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Texture,components.Tint,components.Transform,components.Visible,BitmapTextRender],initialize:function e(t,i,r,n,s,a,o){if(s===undefined){s=""}if(o===undefined){o=0}GameObject_1.call(this,t,"BitmapText");this.font=n;var l=this.scene.sys.cache.bitmapFont.get(n);this.fontData=l.data;this._text="";this._fontSize=a||this.fontData.size;this._letterSpacing=0;this._align=o;this._bounds=GetBitmapTextSize_1(this,false,this._bounds);this._dirty=false;this.setTexture(l.texture,l.frame);this.setPosition(i,r);this.setOrigin(0,0);this.initPipeline();this.setText(s)},setLeftAlign:function(){this._align=BitmapText.ALIGN_LEFT;this._dirty=true;return this},setCenterAlign:function(){this._align=BitmapText.ALIGN_CENTER;this._dirty=true;return this},setRightAlign:function(){this._align=BitmapText.ALIGN_RIGHT;this._dirty=true;return this},setFontSize:function(e){this._fontSize=e;this._dirty=true;return this},setLetterSpacing:function(e){if(e===undefined){e=0}this._letterSpacing=e;this._dirty=true;return this},setText:function(e){if(!e&&e!==0){e=""}if(Array.isArray(e)){e=e.join("\n")}if(e!==this.text){this._text=e.toString();this._dirty=true;this.updateDisplayOrigin()}return this},getTextBounds:function(e){if(this._dirty){GetBitmapTextSize_1(this,e,this._bounds)}return this._bounds},setFont:function(e,t,i){if(t===undefined){t=this._fontSize}if(i===undefined){i=this._align}if(e!==this.font){var r=this.scene.sys.cache.bitmapFont.get(e);if(r){this.font=e;this.fontData=r.data;this._fontSize=t;this._align=i;this.setTexture(r.texture,r.frame);GetBitmapTextSize_1(this,false,this._bounds)}}return this},align:{set:function(e){this._align=e;this._dirty=true},get:function(){return this._align}},text:{set:function(e){this.setText(e)},get:function(){return this._text}},fontSize:{set:function(e){this._fontSize=e;this._dirty=true},get:function(){return this._fontSize}},letterSpacing:{set:function(e){this._letterSpacing=e;this._dirty=true},get:function(){return this._letterSpacing}},width:{get:function(){this.getTextBounds(false);return this._bounds.global.width}},height:{get:function(){this.getTextBounds(false);return this._bounds.global.height}},toJSON:function(){var e=components.ToJSON(this);var t={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};e.data=t;return e}});BitmapText.ALIGN_LEFT=0;BitmapText.ALIGN_CENTER=1;BitmapText.ALIGN_RIGHT=2;BitmapText.ParseFromAtlas=ParseFromAtlas_1;BitmapText.ParseXMLBitmapFont=ParseXMLBitmapFont_1;var BitmapText_1=BitmapText;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BlitterWebGLRenderer=function(e,t,i,r,n){var s=t.getRenderList();if(s.length===0){return}var a=this.pipeline;e.setPipeline(a,t);var o=r.scrollX*t.scrollFactorX;var l=r.scrollY*t.scrollFactorY;var h=a._tempMatrix1;h.copyFrom(r.matrix);if(n){h.multiplyWithOffset(n,-o,-l);o=0;l=0}var u=t.x-o;var c=t.y-l;var f=-1;var d=false;var v=r.alpha*t.alpha;var p=r.roundPixels;for(var g=0;g<s.length;g++){var m=s[g];var _=m.frame;var y=m.alpha*v;if(y===0){continue}var T=_.width;var x=_.height;var E=u+m.x+_.x;var C=c+m.y+_.y;if(m.flipX){T*=-1;E+=_.width}if(m.flipY){x*=-1;C+=_.height}var S=E+T;var A=C+x;var b=h.getX(E,C);var w=h.getY(E,C);var P=h.getX(S,A);var R=h.getY(S,A);var O=Utils.getTintAppendFloatAlpha(16777215,y);if(_.sourceIndex!==f){a.setTexture2D(_.glTexture,0);f=_.sourceIndex}if(p){b=Math.round(b);w=Math.round(w);P=Math.round(P);R=Math.round(R)}if(a.batchQuad(b,w,b,R,P,R,P,w,_.u0,_.v0,_.u1,_.v1,O,O,O,O,d,_.glTexture,0)){f=-1}}};var BlitterWebGLRenderer_1=BlitterWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BlitterCanvasRenderer=function(e,t,i,r,n){var s=t.getRenderList();if(s.length===0){return}var a=e.currentContext;var o=r.alpha*t.alpha;if(o===0){return}a.globalCompositeOperation=e.blendModes[t.blendMode];var l=t.x-r.scrollX*t.scrollFactorX;var h=t.y-r.scrollY*t.scrollFactorY;a.save();if(n){n.copyToContext(a)}var u=r.roundPixels;for(var c=0;c<s.length;c++){var f=s[c];var d=f.flipX||f.flipY;var v=f.frame;var p=v.canvasData;var g=v.x;var m=v.y;var _=1;var y=1;var T=f.alpha*o;if(T===0){continue}a.globalAlpha=T;if(!d){if(u){g=Math.round(g);m=Math.round(m)}a.drawImage(v.source.image,p.x,p.y,p.width,p.height,g+f.x+l,m+f.y+h,p.width,p.height)}else{if(f.flipX){_=-1;g-=p.width}if(f.flipY){y=-1;m-=p.height}a.save();a.translate(f.x+l,f.y+h);a.scale(_,y);a.drawImage(v.source.image,p.x,p.y,p.width,p.height,g,m,p.width,p.height);a.restore()}}a.restore()};var BlitterCanvasRenderer_1=BlitterCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$1=NOOP_1;var renderCanvas$1=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$1=BlitterWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$1=BlitterCanvasRenderer_1}var BlitterRender={renderWebGL:renderWebGL$1,renderCanvas:renderCanvas$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Bob=new Class_1({initialize:function e(t,i,r,n,s){this.parent=t;this.x=i;this.y=r;this.frame=n;this.data={};this._visible=s;this._alpha=1;this.flipX=false;this.flipY=false},setFrame:function(e){if(e===undefined){this.frame=this.parent.frame}else if(e instanceof Frame_1&&e.texture===this.parent.texture){this.frame=e}else{this.frame=this.parent.texture.get(e)}return this},resetFlip:function(){this.flipX=false;this.flipY=false;return this},reset:function(e,t,i){this.x=e;this.y=t;this.flipX=false;this.flipY=false;this._alpha=1;this._visible=true;this.parent.dirty=true;if(i){this.setFrame(i)}return this},setFlipX:function(e){this.flipX=e;return this},setFlipY:function(e){this.flipY=e;return this},setFlip:function(e,t){this.flipX=e;this.flipY=t;return this},setVisible:function(e){this.visible=e;return this},setAlpha:function(e){this.alpha=e;return this},destroy:function(){this.parent.dirty=true;this.parent.children.remove(this);this.parent=undefined;this.frame=undefined;this.data=undefined},visible:{get:function(){return this._visible},set:function(e){this._visible=e;this.parent.dirty=true}},alpha:{get:function(){return this._alpha},set:function(e){this._alpha=e;this.parent.dirty=true}}});var Bob_1=Bob;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Blitter=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Mask,components.Pipeline,components.ScrollFactor,components.Size,components.Texture,components.Transform,components.Visible,BlitterRender],initialize:function e(t,i,r,n,s){GameObject_1.call(this,t,"Blitter");this.setTexture(n,s);this.setPosition(i,r);this.initPipeline();this.children=new List_1;this.renderList=[];this.dirty=false},create:function(e,t,i,r,n){if(r===undefined){r=true}if(n===undefined){n=this.children.length}if(i===undefined){i=this.frame}else if(!(i instanceof Frame_1)){i=this.texture.get(i)}var s=new Bob_1(this,e,t,i,r);this.children.addAt(s,n,false);this.dirty=true;return s},createFromCallback:function(e,t,i,r){var n=this.createMultiple(t,i,r);for(var s=0;s<n.length;s++){var a=n[s];e.call(this,a,s)}return n},createMultiple:function(e,t,i){if(t===undefined){t=this.frame.name}if(i===undefined){i=true}if(!Array.isArray(t)){t=[t]}var r=[];var n=this;t.forEach((function(t){for(var s=0;s<e;s++){r.push(n.create(0,0,t,i))}}));return r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){if(this.dirty){this.renderList=this.children.list.filter(this.childCanRender,this);this.dirty=false}return this.renderList},clear:function(){this.children.removeAll();this.dirty=true},preDestroy:function(){this.children.destroy();this.renderList=[]}});var Blitter_1=Blitter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainerWebGLRenderer=function(e,t,i,r,n){var s=t.list;if(s.length===0){return}var a=t.localTransform;if(n){a.loadIdentity();a.multiply(n);a.translate(t.x,t.y);a.rotate(t.rotation);a.scale(t.scaleX,t.scaleY)}else{a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY)}var o=t.blendMode!==-1;if(!o){e.setBlendMode(0)}var l=t._alpha;var h=t.scrollFactorX;var u=t.scrollFactorY;for(var c=0;c<s.length;c++){var f=s[c];if(!f.willRender(r)){continue}var d=f.alpha;var v=f.scrollFactorX;var p=f.scrollFactorY;if(!o&&f.blendMode!==e.currentBlendMode){e.setBlendMode(f.blendMode)}if(f.mask){f.mask.preRenderWebGL(e,f,r)}f.setScrollFactor(v*h,p*u);f.setAlpha(d*l);f.renderWebGL(e,f,i,r,a);f.setAlpha(d);f.setScrollFactor(v,p);if(f.mask){f.mask.postRenderWebGL(e,r)}}};var ContainerWebGLRenderer_1=ContainerWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainerCanvasRenderer=function(e,t,i,r,n){var s=t.list;if(s.length===0){return}var a=t.localTransform;if(n){a.loadIdentity();a.multiply(n);a.translate(t.x,t.y);a.rotate(t.rotation);a.scale(t.scaleX,t.scaleY)}else{a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY)}var o=t.blendMode!==-1;if(!o){e.setBlendMode(0)}var l=t._alpha;var h=t.scrollFactorX;var u=t.scrollFactorY;for(var c=0;c<s.length;c++){var f=s[c];if(!f.willRender(r)){continue}var d=f.alpha;var v=f._blendMode;var p=f.scrollFactorX;var g=f.scrollFactorY;f.setScrollFactor(p*h,g*u);f.setAlpha(d*l);if(o){f.setBlendMode(t._blendMode)}f.renderCanvas(e,f,i,r,a);f.setAlpha(d);f.setScrollFactor(p,g);f.setBlendMode(v)}};var ContainerCanvasRenderer_1=ContainerCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$2=NOOP_1;var renderCanvas$2=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$2=ContainerWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$2=ContainerCanvasRenderer_1}var ContainerRender={renderWebGL:renderWebGL$2,renderCanvas:renderCanvas$2};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Union=function(e,t,i){if(i===undefined){i=new Rectangle_1}var r=Math.min(e.x,t.x);var n=Math.min(e.y,t.y);var s=Math.max(e.right,t.right)-r;var a=Math.max(e.bottom,t.bottom)-n;return i.setTo(r,n,s,a)};var Union_1=Union;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Container=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Depth,components.Mask,components.Transform,components.Visible,ContainerRender],initialize:function e(t,i,r,n){GameObject_1.call(this,t,"Container");this.list=[];this.exclusive=true;this.maxSize=-1;this.position=0;this.localTransform=new components.TransformMatrix;this.tempTransformMatrix=new components.TransformMatrix;this._displayList=t.sys.displayList;this._sortKey="";this._sysEvents=t.sys.events;this.scrollFactorX=1;this.scrollFactorY=1;this.setPosition(i,r);this.clearAlpha();this.setBlendMode(BlendModes.SKIP_CHECK);if(n){this.add(n)}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(e){if(e===undefined){e=true}this.exclusive=e;return this},getBounds:function(e){if(e===undefined){e=new Rectangle_1}e.setTo(this.x,this.y,0,0);if(this.list.length>0){var t=this.list;var i=new Rectangle_1;for(var r=0;r<t.length;r++){var n=t[r];if(n.getBounds){n.getBounds(i);Union_1(i,e,e)}}}return e},addHandler:function(e){e.once(events$3.DESTROY,this.remove,this);if(this.exclusive){this._displayList.remove(e);if(e.parentContainer){e.parentContainer.remove(e)}e.parentContainer=this}},removeHandler:function(e){e.off(events$3.DESTROY,this.remove);if(this.exclusive){e.parentContainer=null}},pointToContainer:function(e,t){if(t===undefined){t=new Vector2_1}if(this.parentContainer){return this.parentContainer.pointToContainer(e,t)}var i=this.tempTransformMatrix;i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY);i.invert();i.transformPoint(e.x,e.y,t);return t},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(e){array.Add(this.list,e,this.maxSize,this.addHandler,this);return this},addAt:function(e,t){array.AddAt(this.list,e,t,this.maxSize,this.addHandler,this);return this},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){if(!e){return this}if(t===undefined){t=function(t,i){return t[e]-i[e]}}array.StableSort.inplace(this.list,t);return this},getByName:function(e){return array.GetFirst(this.list,"name",e)},getRandom:function(e,t){return array.GetRandom(this.list,e,t)},getFirst:function(e,t,i,r){return array.GetFirst(this.list,e,t,i,r)},getAll:function(e,t,i,r){return array.GetAll(this.list,e,t,i,r)},count:function(e,t,i,r){return array.CountAllMatching(this.list,e,t,i,r)},swap:function(e,t){array.Swap(this.list,e,t);return this},moveTo:function(e,t){array.MoveTo(this.list,e,t);return this},remove:function(e,t){var i=array.Remove(this.list,e,this.removeHandler,this);if(t&&i){if(!Array.isArray(i)){i=[i]}for(var r=0;r<i.length;r++){i[r].destroy()}}return this},removeAt:function(e,t){var i=array.RemoveAt(this.list,e,this.removeHandler,this);if(t&&i){i.destroy()}return this},removeBetween:function(e,t,i){var r=array.RemoveBetween(this.list,e,t,this.removeHandler,this);if(i){for(var n=0;n<r.length;n++){r[n].destroy()}}return this},removeAll:function(e){var t=array.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(e){for(var i=0;i<t.length;i++){t[i].destroy()}}return this},bringToTop:function(e){array.BringToTop(this.list,e);return this},sendToBack:function(e){array.SendToBack(this.list,e);return this},moveUp:function(e){array.MoveUp(this.list,e);return this},moveDown:function(e){array.MoveDown(this.list,e);return this},reverse:function(){this.list.reverse();return this},shuffle:function(){array.Shuffle(this.list);return this},replace:function(e,t,i){var r=array.Replace(this.list,e,t);if(r){this.addHandler(t);this.removeHandler(e);if(i){e.destroy()}}return this},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,r){array.SetAll(this.list,e,t,i,r);return this},each:function(e,t){var i=[null];var r;var n=this.list.slice();var s=n.length;for(r=2;r<arguments.length;r++){i.push(arguments[r])}for(r=0;r<s;r++){i[0]=n[r];e.apply(t,i)}return this},iterate:function(e,t){var i=[null];var r;for(r=2;r<arguments.length;r++){i.push(arguments[r])}for(r=0;r<this.list.length;r++){i[0]=this.list[r];e.apply(t,i)}return this},setScrollFactor:function(e,t,i){if(t===undefined){t=e}if(i===undefined){i=false}this.scrollFactorX=e;this.scrollFactorY=t;if(i){array.SetAll(this.list,"scrollFactorX",e);array.SetAll(this.list,"scrollFactorY",t)}return this},length:{get:function(){return this.list.length}},first:{get:function(){this.position=0;if(this.list.length>0){return this.list[0]}else{return null}}},last:{get:function(){if(this.list.length>0){this.position=this.list.length-1;return this.list[this.position]}else{return null}}},next:{get:function(){if(this.position<this.list.length){this.position++;return this.list[this.position]}else{return null}}},previous:{get:function(){if(this.position>0){this.position--;return this.list[this.position]}else{return null}}},preDestroy:function(){this.removeAll(!!this.exclusive);this.localTransform.destroy();this.tempTransformMatrix.destroy();this.list=[];this._displayList=null}});var Container_1=Container;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CSSBlendModes=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DOMElementCSSRenderer=function(e,t,i,r,n){var s=t.node;var a=s.style;if(!s||!a||GameObject_1.RENDER_MASK!==t.renderFlags||t.cameraFilter!==0&&t.cameraFilter&r.id||t.parentContainer&&!t.parentContainer.willRender()){if(s){a.display="none"}return}var o=t.parentContainer;var l=r.alpha*t.alpha;if(o){l*=o.alpha}var h=e._tempMatrix1;var u=e._tempMatrix2;var c=e._tempMatrix3;var f=0;var d=0;var v="0%";var p="0%";if(n){f=t.width*t.scaleX*t.originX;d=t.height*t.scaleY*t.originY;u.applyITRS(t.x-f,t.y-d,t.rotation,t.scaleX,t.scaleY);h.copyFrom(r.matrix);h.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);u.e=t.x-f;u.f=t.y-d;h.multiply(u,c)}else{f=t.width*t.originX;d=t.height*t.originY;u.applyITRS(t.x-f,t.y-d,t.rotation,t.scaleX,t.scaleY);h.copyFrom(r.matrix);v=100*t.originX+"%";p=100*t.originY+"%";u.e-=r.scrollX*t.scrollFactorX;u.f-=r.scrollY*t.scrollFactorY;h.multiply(u,c)}if(!t.transformOnly){a.display="block";a.opacity=l;a.zIndex=t._depth;a.pointerEvents="auto";a.mixBlendMode=CSSBlendModes[t._blendMode]}a.transform=c.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad)"+" rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")";a.transformOrigin=v+" "+p};var DOMElementCSSRenderer_1=DOMElementCSSRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$3=NOOP_1;var renderCanvas$3=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$3=DOMElementCSSRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$3=DOMElementCSSRenderer_1}var DOMElementRender={renderWebGL:renderWebGL$3,renderCanvas:renderCanvas$3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DOMElement=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Origin,components.ScrollFactor,components.Transform,components.Visible,DOMElementRender],initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t,"DOMElement");this.parent=t.sys.game.domContainer;this.cache=t.sys.cache.html;this.transformOnly=false;this.skewX=0;this.skewY=0;this.rotate3d=new Vector4_1;this.rotate3dAngle="deg";this.width=0;this.height=0;this.displayWidth=0;this.displayHeight=0;this.handler=this.dispatchNativeEvent.bind(this);this.setPosition(i,r);if(typeof n==="string"){if(n[0]==="#"){this.setElement(n.substr(1),s,a)}else{this.createElement(n,s,a)}}else if(n){this.setElement(n,s,a)}},setSkew:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.skewX=e;this.skewY=t;return this},setPerspective:function(e){this.parent.style.perspective=e+"px";return this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++){this.node.addEventListener(e[t],this.handler,false)}}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++){this.node.removeEventListener(e[t],this.handler)}}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){this.removeElement();var r;if(typeof e==="string"){if(e[0]==="#"){e=e.substr(1)}r=document.getElementById(e)}else if(typeof e==="object"&&e.nodeType===1){r=e}if(!r){return this}this.node=r;if(t&&IsPlainObject_1(t)){for(var n in t){r.style[n]=t[n]}}else if(typeof t==="string"){r.style=t}r.style.zIndex="0";r.style.display="inline";r.style.position="absolute";r.phaser=this;if(this.parent){this.parent.appendChild(r)}if(i){r.innerText=i}return this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);if(i){this.createFromHTML(i,t)}return this},createFromHTML:function(e,t){if(t===undefined){t="div"}this.removeElement();var i=document.createElement(t);this.node=i;i.style.zIndex="0";i.style.display="inline";i.style.position="absolute";i.phaser=this;if(this.parent){this.parent.appendChild(i)}i.innerHTML=e;return this.updateSize()},removeElement:function(){if(this.node){RemoveFromDOM_1(this.node);this.node=null}return this},updateSize:function(){var e=this.node;var t=e.getBoundingClientRect();this.width=e.clientWidth;this.height=e.clientHeight;this.displayWidth=t.width||0;this.displayHeight=t.height||0;return this},getChildByProperty:function(e,t){if(this.node){var i=this.node.querySelectorAll("*");for(var r=0;r<i.length;r++){if(i[r][e]===t){return i[r]}}}return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){if(this.node){this.node.className=e;this.updateSize()}return this},setText:function(e){if(this.node){this.node.innerText=e;this.updateSize()}return this},setHTML:function(e){if(this.node){this.node.innerHTML=e;this.updateSize()}return this},preUpdate:function(){var e=this.parentContainer;var t=this.node;if(t&&e&&!e.willRender()){t.style.display="none"}},willRender:function(){return true},preDestroy:function(){this.removeElement()}});var DOMElement_1=DOMElement;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicBitmapTextWebGLRenderer=function(e,t,i,r,n){var s=t.text;var a=s.length;if(a===0){return}var o=this.pipeline;e.setPipeline(o,t);var l=t.cropWidth>0||t.cropHeight>0;if(l){o.flush();e.pushScissor(t.x,t.y,t.cropWidth*t.scaleX,t.cropHeight*t.scaleY)}var h=o._tempMatrix1;var u=o._tempMatrix2;var c=o._tempMatrix3;var f=o._tempMatrix4;u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);h.copyFrom(r.matrix);if(n){h.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);u.e=t.x;u.f=t.y;h.multiply(u,c)}else{u.e-=r.scrollX*t.scrollFactorX;u.f-=r.scrollY*t.scrollFactorY;h.multiply(u,c)}var d=t.frame;var v=d.glTexture;var p=d.cutX;var g=d.cutY;var m=v.width;var _=v.height;var y=t._isTinted&&t.tintFill;var T=Utils.getTintAppendFloatAlpha(t._tintTL,r.alpha*t._alphaTL);var x=Utils.getTintAppendFloatAlpha(t._tintTR,r.alpha*t._alphaTR);var E=Utils.getTintAppendFloatAlpha(t._tintBL,r.alpha*t._alphaBL);var C=Utils.getTintAppendFloatAlpha(t._tintBR,r.alpha*t._alphaBR);o.setTexture2D(v,0);var S=0;var A=0;var b=0;var w=0;var P=t.letterSpacing;var R;var O=0;var M=0;var F=0;var L=0;var G;var V=t.scrollX;var I=t.scrollY;var D=t.fontData;var B=D.chars;var N=D.lineHeight;var $=t.fontSize/D.size;var k=0;var Y=t._align;var W=0;var X=0;t.getTextBounds(false);var U=t._bounds.lines;if(Y===1){X=(U.longest-U.lengths[0])/2}else if(Y===2){X=U.longest-U.lengths[0]}var z=r.roundPixels;var H=t.displayCallback;var j=t.callbackData;for(var q=0;q<a;q++){b=s.charCodeAt(q);if(b===10){W++;if(Y===1){X=(U.longest-U.lengths[W])/2}else if(Y===2){X=U.longest-U.lengths[W]}S=0;A+=N;G=null;continue}R=B[b];if(!R){continue}O=p+R.x;M=g+R.y;F=R.width;L=R.height;var K=R.xOffset+S-V;var J=R.yOffset+A-I;if(G!==null){var Z=R.kerning[w];K+=Z!==undefined?Z:0}S+=R.xAdvance+P;G=R;w=b;if(F===0||L===0||b===32){continue}$=t.fontSize/t.fontData.size;k=0;if(H){j.color=0;j.tint.topLeft=T;j.tint.topRight=x;j.tint.bottomLeft=E;j.tint.bottomRight=C;j.index=q;j.charCode=b;j.x=K;j.y=J;j.scale=$;j.rotation=k;j.data=R.data;var Q=H(j);K=Q.x;J=Q.y;$=Q.scale;k=Q.rotation;if(Q.color){T=Q.color;x=Q.color;E=Q.color;C=Q.color}else{T=Q.tint.topLeft;x=Q.tint.topRight;E=Q.tint.bottomLeft;C=Q.tint.bottomRight}T=Utils.getTintAppendFloatAlpha(T,r.alpha*t._alphaTL);x=Utils.getTintAppendFloatAlpha(x,r.alpha*t._alphaTR);E=Utils.getTintAppendFloatAlpha(E,r.alpha*t._alphaBL);C=Utils.getTintAppendFloatAlpha(C,r.alpha*t._alphaBR)}K*=$;J*=$;K-=t.displayOriginX;J-=t.displayOriginY;K+=X;f.applyITRS(K,J,k,$,$);c.multiply(f,u);var ee=O/m;var te=M/_;var ie=(O+F)/m;var re=(M+L)/_;var ne=F;var se=L;var ae=u.e;var oe=u.f;var le=se*u.c+u.e;var he=se*u.d+u.f;var ue=ne*u.a+se*u.c+u.e;var ce=ne*u.b+se*u.d+u.f;var fe=ne*u.a+u.e;var de=ne*u.b+u.f;if(z){ae=Math.round(ae);oe=Math.round(oe);le=Math.round(le);he=Math.round(he);ue=Math.round(ue);ce=Math.round(ce);fe=Math.round(fe);de=Math.round(de)}o.batchQuad(ae,oe,le,he,ue,ce,fe,de,ee,te,ie,re,T,x,E,C,y,v,0)}if(l){o.flush();e.popScissor()}};var DynamicBitmapTextWebGLRenderer_1=DynamicBitmapTextWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicBitmapTextCanvasRenderer=function(e,t,i,r,n){var s=t.text;var a=s.length;var o=e.currentContext;if(a===0||!SetTransform_1(e,o,t,r,n)){return}var l=t.frame;var h=t.displayCallback;var u=t.callbackData;var c=r.scrollX*t.scrollFactorX;var f=r.scrollY*t.scrollFactorY;var d=t.fontData.chars;var v=t.fontData.lineHeight;var p=0;var g=0;var m=0;var _=0;var y=null;var T=0;var x=0;var E=0;var C=0;var S=0;var A=0;var b=null;var w=0;var P=t.frame.source.image;var R=l.cutX;var O=l.cutY;var M=0;var F=t.fontSize/t.fontData.size;if(t.cropWidth>0&&t.cropHeight>0){o.beginPath();o.rect(0,0,t.cropWidth,t.cropHeight);o.clip()}for(var L=0;L<a;++L){F=t.fontSize/t.fontData.size;M=0;_=s.charCodeAt(L);if(_===10){p=0;m=0;g+=v;b=null;continue}y=d[_];if(!y){continue}T=R+y.x;x=O+y.y;E=y.width;C=y.height;S=m+y.xOffset+p-t.scrollX;A=y.yOffset+g-t.scrollY;if(b!==null){var G=y.kerning[w];S+=G!==undefined?G:0}if(h){u.index=L;u.charCode=_;u.x=S;u.y=A;u.scale=F;u.rotation=M;u.data=y.data;var V=h(u);S=V.x;A=V.y;F=V.scale;M=V.rotation}S*=F;A*=F;S-=c;A-=f;if(r.roundPixels){S=Math.round(S);A=Math.round(A)}o.save();o.translate(S,A);o.rotate(M);o.scale(F,F);o.drawImage(P,T,x,E,C,0,0,E,C);o.restore();p+=y.xAdvance;m+=1;b=y;w=_}o.restore()};var DynamicBitmapTextCanvasRenderer_1=DynamicBitmapTextCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$4=NOOP_1;var renderCanvas$4=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$4=DynamicBitmapTextWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$4=DynamicBitmapTextCanvasRenderer_1}var DynamicBitmapTextRender={renderWebGL:renderWebGL$4,renderCanvas:renderCanvas$4};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicBitmapText=new Class_1({Extends:BitmapText_1,Mixins:[DynamicBitmapTextRender],initialize:function e(t,i,r,n,s,a,o){BitmapText_1.call(this,t,i,r,n,s,a,o);this.type="DynamicBitmapText";this.scrollX=0;this.scrollY=0;this.cropWidth=0;this.cropHeight=0;this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,t){this.cropWidth=e;this.cropHeight=t;return this},setDisplayCallback:function(e){this.displayCallback=e;return this},setScrollX:function(e){this.scrollX=e;return this},setScrollY:function(e){this.scrollY=e;return this}});var DynamicBitmapText_1=DynamicBitmapText;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ExternWebGLRenderer=function(e,t,i,r,n){var s=e.currentPipeline;e.clearPipeline();var a=e._tempMatrix1;var o=e._tempMatrix2;var l=e._tempMatrix3;o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y;a.multiply(o,l)}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY;a.multiply(o,l)}t.render.call(t,e,r,l);e.rebindPipeline(s)};var ExternWebGLRenderer_1=ExternWebGLRenderer;var ExternCanvasRenderer=Object.freeze({__proto__:null});
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$5=NOOP_1;var renderCanvas$5=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$5=ExternWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$5=ExternCanvasRenderer}var ExternRender={renderWebGL:renderWebGL$5,renderCanvas:renderCanvas$5};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Extern=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Flip,components.Origin,components.ScrollFactor,components.Size,components.Texture,components.Tint,components.Transform,components.Visible,ExternRender],initialize:function e(t){GameObject_1.call(this,t,"Extern")},preUpdate:function(){},render:function(){}});var Extern_1=Extern;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Commands={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Contains$2=function(e,t,i){if(e.width<=0||e.height<=0){return false}var r=(t-e.x)/e.width;var n=(i-e.y)/e.height;r*=r;n*=n;return r+n<.25};var Contains_1$2=Contains$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CircumferencePoint$1=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.width/2;var n=e.height/2;i.x=e.x+r*Math.cos(t);i.y=e.y+n*Math.sin(t);return i};var CircumferencePoint_1$1=CircumferencePoint$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoint$3=function(e,t,i){if(i===undefined){i=new Point_1}var r=FromPercent_1(t,0,_const$3.PI2);return CircumferencePoint_1$1(e,r,i)};var GetPoint_1$3=GetPoint$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Circumference$1=function(e){var t=e.width/2;var i=e.height/2;var r=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*r/(10+Math.sqrt(4-3*r)))};var Circumference_1$1=Circumference$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints$3=function(e,t,i,r){if(r===undefined){r=[]}if(!t){t=Circumference_1$1(e)/i}for(var n=0;n<t;n++){var s=FromPercent_1(n/t,0,_const$3.PI2);r.push(CircumferencePoint_1$1(e,s))}return r};var GetPoints_1$3=GetPoints$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Ellipse=new Class_1({initialize:function e(t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}this.type=_const$2.ELLIPSE;this.x=t;this.y=i;this.width=r;this.height=n},contains:function(e,t){return Contains_1$2(this,e,t)},getPoint:function(e,t){return GetPoint_1$3(this,e,t)},getPoints:function(e,t,i){return GetPoints_1$3(this,e,t,i)},getRandomPoint:function(e){return Random_1$3(this,e)},setTo:function(e,t,i,r){this.x=e;this.y=t;this.width=i;this.height=r;return this},setEmpty:function(){this.width=0;this.height=0;return this},setPosition:function(e,t){if(t===undefined){t=e}this.x=e;this.y=t;return this},setSize:function(e,t){if(t===undefined){t=e}this.width=e;this.height=t;return this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(e){this.x=e+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(e){this.y=e+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});var Ellipse_1=Ellipse;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Point$1=function(e,t,i){this.x=e;this.y=t;this.width=i};var Path$1=function(e,t,i){this.points=[];this.pointsLength=1;this.points[0]=new Point$1(e,t,i)};var matrixStack=[];var GraphicsWebGLRenderer=function(e,t,i,r,n){if(t.commandBuffer.length===0){return}var s=this.pipeline;e.setPipeline(s,t);var a=t._tempMatrix1;var o=t._tempMatrix2;var l=t._tempMatrix3;l.loadIdentity();o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y;a.multiply(o)}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY;a.multiply(o)}var h=t.commandBuffer;var u=r.alpha*t.alpha;var c=1;var f=s.fillTint;var d=s.strokeTint;var v=0;var p=0;var g=0;var m=.01;var _=Math.PI*2;var y;var T=[];var x=0;var E=false;var C=null;var S=Utils.getTintAppendFloatAlphaAndSwap;var A=e.blankTexture.glTexture;for(var b=0;b<h.length;b++){y=h[b];switch(y){case Commands.BEGIN_PATH:T.length=0;C=null;E=true;break;case Commands.CLOSE_PATH:E=false;if(C&&C.points.length){C.points.push(C.points[0])}break;case Commands.FILL_PATH:for(x=0;x<T.length;x++){s.setTexture2D(A);s.batchFillPath(T[x].points,l,a)}break;case Commands.STROKE_PATH:for(x=0;x<T.length;x++){s.setTexture2D(A);s.batchStrokePath(T[x].points,c,E,l,a)}break;case Commands.LINE_STYLE:c=h[++b];var w=h[++b];var P=h[++b]*u;var R=S(w,P);d.TL=R;d.TR=R;d.BL=R;d.BR=R;break;case Commands.FILL_STYLE:var O=h[++b];var M=h[++b]*u;var F=S(O,M);f.TL=F;f.TR=F;f.BL=F;f.BR=F;break;case Commands.GRADIENT_FILL_STYLE:var L=h[++b]*u;f.TL=S(h[++b],L);f.TR=S(h[++b],L);f.BL=S(h[++b],L);f.BR=S(h[++b],L);break;case Commands.GRADIENT_LINE_STYLE:c=h[++b];var G=h[++b]*u;d.TL=S(h[++b],G);d.TR=S(h[++b],G);d.BL=S(h[++b],G);d.BR=S(h[++b],G);break;case Commands.ARC:var V=0;var I=h[++b];var D=h[++b];var B=h[++b];var N=h[++b];var $=h[++b];var k=h[++b];var Y=h[++b];$-=N;if(k){if($<-_){$=-_}else if($>0){$=-_+$%_}}else if($>_){$=_}else if($<0){$=_+$%_}if(C===null){C=new Path$1(I+Math.cos(N)*B,D+Math.sin(N)*B,c);T.push(C);V+=m}while(V<1+Y){g=$*V+N;v=I+Math.cos(g)*B;p=D+Math.sin(g)*B;C.points.push(new Point$1(v,p,c));V+=m}g=$+N;v=I+Math.cos(g)*B;p=D+Math.sin(g)*B;C.points.push(new Point$1(v,p,c));break;case Commands.FILL_RECT:s.setTexture2D(A);s.batchFillRect(h[++b],h[++b],h[++b],h[++b],l,a);break;case Commands.FILL_TRIANGLE:s.setTexture2D(A);s.batchFillTriangle(h[++b],h[++b],h[++b],h[++b],h[++b],h[++b],l,a);break;case Commands.STROKE_TRIANGLE:s.setTexture2D(A);s.batchStrokeTriangle(h[++b],h[++b],h[++b],h[++b],h[++b],h[++b],c,l,a);break;case Commands.LINE_TO:if(C!==null){C.points.push(new Point$1(h[++b],h[++b],c))}else{C=new Path$1(h[++b],h[++b],c);T.push(C)}break;case Commands.MOVE_TO:C=new Path$1(h[++b],h[++b],c);T.push(C);break;case Commands.SAVE:matrixStack.push(l.copyToArray());break;case Commands.RESTORE:l.copyFromArray(matrixStack.pop());break;case Commands.TRANSLATE:I=h[++b];D=h[++b];l.translate(I,D);break;case Commands.SCALE:I=h[++b];D=h[++b];l.scale(I,D);break;case Commands.ROTATE:l.rotate(h[++b]);break;case Commands.SET_TEXTURE:var W=h[++b];var X=h[++b];s.currentFrame=W;s.setTexture2D(W.glTexture,0);s.tintEffect=X;A=W.glTexture;break;case Commands.CLEAR_TEXTURE:s.currentFrame=e.blankTexture;s.tintEffect=2;A=e.blankTexture.glTexture;break}}};var GraphicsWebGLRenderer_1=GraphicsWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GraphicsCanvasRenderer=function(e,t,i,r,n,s,a){var o=t.commandBuffer;var l=o.length;var h=s||e.currentContext;if(l===0||!SetTransform_1(e,h,t,r,n)){return}var u=1;var c=1;var f=0;var d=0;var v=1;var p=0;var g=0;var m=0;h.beginPath();for(var _=0;_<l;++_){var y=o[_];switch(y){case Commands.ARC:h.arc(o[_+1],o[_+2],o[_+3],o[_+4],o[_+5],o[_+6]);_+=7;break;case Commands.LINE_STYLE:v=o[_+1];f=o[_+2];u=o[_+3];p=(f&16711680)>>>16;g=(f&65280)>>>8;m=f&255;h.strokeStyle="rgba("+p+","+g+","+m+","+u+")";h.lineWidth=v;_+=3;break;case Commands.FILL_STYLE:d=o[_+1];c=o[_+2];p=(d&16711680)>>>16;g=(d&65280)>>>8;m=d&255;h.fillStyle="rgba("+p+","+g+","+m+","+c+")";_+=2;break;case Commands.BEGIN_PATH:h.beginPath();break;case Commands.CLOSE_PATH:h.closePath();break;case Commands.FILL_PATH:if(!a){h.fill()}break;case Commands.STROKE_PATH:if(!a){h.stroke()}break;case Commands.FILL_RECT:if(!a){h.fillRect(o[_+1],o[_+2],o[_+3],o[_+4])}else{h.rect(o[_+1],o[_+2],o[_+3],o[_+4])}_+=4;break;case Commands.FILL_TRIANGLE:h.beginPath();h.moveTo(o[_+1],o[_+2]);h.lineTo(o[_+3],o[_+4]);h.lineTo(o[_+5],o[_+6]);h.closePath();if(!a){h.fill()}_+=6;break;case Commands.STROKE_TRIANGLE:h.beginPath();h.moveTo(o[_+1],o[_+2]);h.lineTo(o[_+3],o[_+4]);h.lineTo(o[_+5],o[_+6]);h.closePath();if(!a){h.stroke()}_+=6;break;case Commands.LINE_TO:h.lineTo(o[_+1],o[_+2]);_+=2;break;case Commands.MOVE_TO:h.moveTo(o[_+1],o[_+2]);_+=2;break;case Commands.LINE_FX_TO:h.lineTo(o[_+1],o[_+2]);_+=5;break;case Commands.MOVE_FX_TO:h.moveTo(o[_+1],o[_+2]);_+=5;break;case Commands.SAVE:h.save();break;case Commands.RESTORE:h.restore();break;case Commands.TRANSLATE:h.translate(o[_+1],o[_+2]);_+=2;break;case Commands.SCALE:h.scale(o[_+1],o[_+2]);_+=2;break;case Commands.ROTATE:h.rotate(o[_+1]);_+=1;break;case Commands.GRADIENT_FILL_STYLE:_+=5;break;case Commands.GRADIENT_LINE_STYLE:_+=6;break;case Commands.SET_TEXTURE:_+=2;break}}h.restore()};var GraphicsCanvasRenderer_1=GraphicsCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$6=NOOP_1;var renderCanvas$6=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$6=GraphicsWebGLRenderer_1;renderCanvas$6=GraphicsCanvasRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$6=GraphicsCanvasRenderer_1}var GraphicsRender={renderWebGL:renderWebGL$6,renderCanvas:renderCanvas$6};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Graphics=new Class_1({Extends:GameObject_1,Mixins:[Alpha_1,BlendMode_1,Depth_1,Mask_1,Pipeline_1,Transform_1,Visible_1,ScrollFactor_1,GraphicsRender],initialize:function e(t,i){var r=GetValue_1(i,"x",0);var n=GetValue_1(i,"y",0);GameObject_1.call(this,t,"Graphics");this.setPosition(r,n);this.initPipeline();this.displayOriginX=0;this.displayOriginY=0;this.commandBuffer=[];this.defaultFillColor=-1;this.defaultFillAlpha=1;this.defaultStrokeWidth=1;this.defaultStrokeColor=-1;this.defaultStrokeAlpha=1;this._lineWidth=1;this._tempMatrix1=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempMatrix3=new TransformMatrix_1;this.setDefaultStyles(i)},setDefaultStyles:function(e){if(GetValue_1(e,"lineStyle",null)){this.defaultStrokeWidth=GetValue_1(e,"lineStyle.width",1);this.defaultStrokeColor=GetValue_1(e,"lineStyle.color",16777215);this.defaultStrokeAlpha=GetValue_1(e,"lineStyle.alpha",1);this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)}if(GetValue_1(e,"fillStyle",null)){this.defaultFillColor=GetValue_1(e,"fillStyle.color",16777215);this.defaultFillAlpha=GetValue_1(e,"fillStyle.alpha",1);this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)}return this},lineStyle:function(e,t,i){if(i===undefined){i=1}this.commandBuffer.push(Commands.LINE_STYLE,e,t,i);this._lineWidth=e;return this},fillStyle:function(e,t){if(t===undefined){t=1}this.commandBuffer.push(Commands.FILL_STYLE,e,t);return this},fillGradientStyle:function(e,t,i,r,n){if(n===undefined){n=1}this.commandBuffer.push(Commands.GRADIENT_FILL_STYLE,n,e,t,i,r);return this},lineGradientStyle:function(e,t,i,r,n,s){if(s===undefined){s=1}this.commandBuffer.push(Commands.GRADIENT_LINE_STYLE,e,s,t,i,r,n);return this},setTexture:function(e,t,i){if(i===undefined){i=0}if(e===undefined){this.commandBuffer.push(Commands.CLEAR_TEXTURE)}else{var r=this.scene.sys.textures.getFrame(e,t);if(r){if(i===2){i=3}this.commandBuffer.push(Commands.SET_TEXTURE,r,i)}}return this},beginPath:function(){this.commandBuffer.push(Commands.BEGIN_PATH);return this},closePath:function(){this.commandBuffer.push(Commands.CLOSE_PATH);return this},fillPath:function(){this.commandBuffer.push(Commands.FILL_PATH);return this},fill:function(){this.commandBuffer.push(Commands.FILL_PATH);return this},strokePath:function(){this.commandBuffer.push(Commands.STROKE_PATH);return this},stroke:function(){this.commandBuffer.push(Commands.STROKE_PATH);return this},fillCircleShape:function(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function(e,t,i){this.beginPath();this.arc(e,t,i,0,_const$3.PI2);this.fillPath();return this},strokeCircle:function(e,t,i){this.beginPath();this.arc(e,t,i,0,_const$3.PI2);this.strokePath();return this},fillRectShape:function(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function(e,t,i,r){this.commandBuffer.push(Commands.FILL_RECT,e,t,i,r);return this},strokeRect:function(e,t,i,r){var n=this._lineWidth/2;var s=e-n;var a=e+n;this.beginPath();this.moveTo(e,t);this.lineTo(e,t+r);this.strokePath();this.beginPath();this.moveTo(e+i,t);this.lineTo(e+i,t+r);this.strokePath();this.beginPath();this.moveTo(s,t);this.lineTo(a+i,t);this.strokePath();this.beginPath();this.moveTo(s,t+r);this.lineTo(a+i,t+r);this.strokePath();return this},fillRoundedRect:function(e,t,i,r,n){if(n===undefined){n=20}var s=n;var a=n;var o=n;var l=n;if(typeof n!=="number"){s=GetFastValue_1(n,"tl",20);a=GetFastValue_1(n,"tr",20);o=GetFastValue_1(n,"bl",20);l=GetFastValue_1(n,"br",20)}this.beginPath();this.moveTo(e+s,t);this.lineTo(e+i-a,t);this.arc(e+i-a,t+a,a,-_const$3.TAU,0);this.lineTo(e+i,t+r-l);this.arc(e+i-l,t+r-l,l,0,_const$3.TAU);this.lineTo(e+o,t+r);this.arc(e+o,t+r-o,o,_const$3.TAU,Math.PI);this.lineTo(e,t+s);this.arc(e+s,t+s,s,-Math.PI,-_const$3.TAU);this.fillPath();return this},strokeRoundedRect:function(e,t,i,r,n){if(n===undefined){n=20}var s=n;var a=n;var o=n;var l=n;if(typeof n!=="number"){s=GetFastValue_1(n,"tl",20);a=GetFastValue_1(n,"tr",20);o=GetFastValue_1(n,"bl",20);l=GetFastValue_1(n,"br",20)}this.beginPath();this.moveTo(e+s,t);this.lineTo(e+i-a,t);this.arc(e+i-a,t+a,a,-_const$3.TAU,0);this.lineTo(e+i,t+r-l);this.arc(e+i-l,t+r-l,l,0,_const$3.TAU);this.lineTo(e+o,t+r);this.arc(e+o,t+r-o,o,_const$3.TAU,Math.PI);this.lineTo(e,t+s);this.arc(e+s,t+s,s,-Math.PI,-_const$3.TAU);this.strokePath();return this},fillPointShape:function(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function(e,t,i){if(!i||i<1){i=1}else{e-=i/2;t-=i/2}this.commandBuffer.push(Commands.FILL_RECT,e,t,i,i);return this},fillTriangleShape:function(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function(e,t,i,r,n,s){this.commandBuffer.push(Commands.FILL_TRIANGLE,e,t,i,r,n,s);return this},strokeTriangle:function(e,t,i,r,n,s){this.commandBuffer.push(Commands.STROKE_TRIANGLE,e,t,i,r,n,s);return this},strokeLineShape:function(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function(e,t,i,r){this.beginPath();this.moveTo(e,t);this.lineTo(i,r);this.strokePath();return this},lineTo:function(e,t){this.commandBuffer.push(Commands.LINE_TO,e,t);return this},moveTo:function(e,t){this.commandBuffer.push(Commands.MOVE_TO,e,t);return this},strokePoints:function(e,t,i,r){if(t===undefined){t=false}if(i===undefined){i=false}if(r===undefined){r=e.length}this.beginPath();this.moveTo(e[0].x,e[0].y);for(var n=1;n<r;n++){this.lineTo(e[n].x,e[n].y)}if(t){this.lineTo(e[0].x,e[0].y)}if(i){this.closePath()}this.strokePath();return this},fillPoints:function(e,t,i,r){if(t===undefined){t=false}if(i===undefined){i=false}if(r===undefined){r=e.length}this.beginPath();this.moveTo(e[0].x,e[0].y);for(var n=1;n<r;n++){this.lineTo(e[n].x,e[n].y)}if(t){this.lineTo(e[0].x,e[0].y)}if(i){this.closePath()}this.fillPath();return this},strokeEllipseShape:function(e,t){if(t===undefined){t=32}var i=e.getPoints(t);return this.strokePoints(i,true)},strokeEllipse:function(e,t,i,r,n){if(n===undefined){n=32}var s=new Ellipse_1(e,t,i,r);var a=s.getPoints(n);return this.strokePoints(a,true)},fillEllipseShape:function(e,t){if(t===undefined){t=32}var i=e.getPoints(t);return this.fillPoints(i,true)},fillEllipse:function(e,t,i,r,n){if(n===undefined){n=32}var s=new Ellipse_1(e,t,i,r);var a=s.getPoints(n);return this.fillPoints(a,true)},arc:function(e,t,i,r,n,s,a){if(s===undefined){s=false}if(a===undefined){a=0}this.commandBuffer.push(Commands.ARC,e,t,i,r,n,s,a);return this},slice:function(e,t,i,r,n,s,a){if(s===undefined){s=false}if(a===undefined){a=0}this.commandBuffer.push(Commands.BEGIN_PATH);this.commandBuffer.push(Commands.MOVE_TO,e,t);this.commandBuffer.push(Commands.ARC,e,t,i,r,n,s,a);this.commandBuffer.push(Commands.CLOSE_PATH);return this},save:function(){this.commandBuffer.push(Commands.SAVE);return this},restore:function(){this.commandBuffer.push(Commands.RESTORE);return this},translateCanvas:function(e,t){this.commandBuffer.push(Commands.TRANSLATE,e,t);return this},scaleCanvas:function(e,t){this.commandBuffer.push(Commands.SCALE,e,t);return this},rotateCanvas:function(e){this.commandBuffer.push(Commands.ROTATE,e);return this},clear:function(){this.commandBuffer.length=0;if(this.defaultFillColor>-1){this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)}if(this.defaultStrokeColor>-1){this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)}return this},generateTexture:function(e,t,i){var r=this.scene.sys;var n=r.game.renderer;if(t===undefined){t=r.scale.width}if(i===undefined){i=r.scale.height}Graphics.TargetCamera.setScene(this.scene);Graphics.TargetCamera.setViewport(0,0,t,i);Graphics.TargetCamera.scrollX=this.x;Graphics.TargetCamera.scrollY=this.y;var s;var a;if(typeof e==="string"){if(r.textures.exists(e)){s=r.textures.get(e);var o=s.getSourceImage();if(o instanceof HTMLCanvasElement){a=o.getContext("2d")}}else{s=r.textures.createCanvas(e,t,i);a=s.getSourceImage().getContext("2d")}}else if(e instanceof HTMLCanvasElement){a=e.getContext("2d")}if(a){this.renderCanvas(n,this,0,Graphics.TargetCamera,null,a,false);if(s){s.refresh()}}return this},preDestroy:function(){this.commandBuffer=[]}});Graphics.TargetCamera=new BaseCamera_1;var Graphics_1=Graphics;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Set=new Class_1({initialize:function e(t){this.entries=[];if(Array.isArray(t)){for(var i=0;i<t.length;i++){this.set(t[i])}}},set:function(e){if(this.entries.indexOf(e)===-1){this.entries.push(e)}return this},get:function(e,t){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[e]===t){return r}}},getArray:function(){return this.entries.slice(0)},delete:function(e){var t=this.entries.indexOf(e);if(t>-1){this.entries.splice(t,1)}return this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++){var t=this.entries[e];console.log(t)}console.groupEnd()},each:function(e,t){var i;var r=this.entries.slice();var n=r.length;if(t){for(i=0;i<n;i++){if(e.call(t,r[i],i)===false){break}}}else{for(i=0;i<n;i++){if(e(r[i],i)===false){break}}}return this},iterate:function(e,t){var i;var r=this.entries.length;if(t){for(i=0;i<r;i++){if(e.call(t,this.entries[i],i)===false){break}}}else{for(i=0;i<r;i++){if(e(this.entries[i],i)===false){break}}}return this},iterateLocal:function(e){var t;var i=[];for(t=1;t<arguments.length;t++){i.push(arguments[t])}var r=this.entries.length;for(t=0;t<r;t++){var n=this.entries[t];n[e].apply(n,i)}return this},clear:function(){this.entries.length=0;return this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var t=new Set;e.entries.forEach((function(e){t.set(e)}));this.entries.forEach((function(e){t.set(e)}));return t},intersect:function(e){var t=new Set;this.entries.forEach((function(i){if(e.contains(i)){t.set(i)}}));return t},difference:function(e){var t=new Set;this.entries.forEach((function(i){if(!e.contains(i)){t.set(i)}}));return t},size:{get:function(){return this.entries.length},set:function(e){if(e<this.entries.length){return this.entries.length=e}else{return this.entries.length}}}});var _Set=Set;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpriteWebGLRenderer=function(e,t,i,r,n){this.pipeline.batchSprite(t,r,n)};var SpriteWebGLRenderer_1=SpriteWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpriteCanvasRenderer=function(e,t,i,r,n){e.batchSprite(t,t.frame,r,n)};var SpriteCanvasRenderer_1=SpriteCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$7=NOOP_1;var renderCanvas$7=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$7=SpriteWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$7=SpriteCanvasRenderer_1}var SpriteRender={renderWebGL:renderWebGL$7,renderCanvas:renderCanvas$7};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Sprite=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Flip,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Size,components.TextureCrop,components.Tint,components.Transform,components.Visible,SpriteRender],initialize:function e(t,i,r,n,s){GameObject_1.call(this,t,"Sprite");this._crop=this.resetCropObject();this.anims=new components.Animation(this);this.setTexture(n,s);this.setPosition(i,r);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t,i){this.anims.play(e,t,i);return this},toJSON:function(){var e=components.ToJSON(this);return e},preDestroy:function(){this.anims.destroy();this.anims=undefined}});var Sprite_1=Sprite;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Group=new Class_1({initialize:function e(t,i,r){if(r){if(i&&!Array.isArray(i)){i=[i]}}else if(Array.isArray(i)){if(IsPlainObject_1(i[0])){r=i;i=null}}else if(IsPlainObject_1(i)){r=i;i=null}this.scene=t;this.children=new _Set(i);this.isParent=true;this.classType=GetFastValue_1(r,"classType",Sprite_1);this.name=GetFastValue_1(r,"name","");this.active=GetFastValue_1(r,"active",true);this.maxSize=GetFastValue_1(r,"maxSize",-1);this.defaultKey=GetFastValue_1(r,"defaultKey",null);this.defaultFrame=GetFastValue_1(r,"defaultFrame",null);this.runChildUpdate=GetFastValue_1(r,"runChildUpdate",false);this.createCallback=GetFastValue_1(r,"createCallback",null);this.removeCallback=GetFastValue_1(r,"removeCallback",null);this.createMultipleCallback=GetFastValue_1(r,"createMultipleCallback",null);if(r){this.createMultiple(r)}},create:function(e,t,i,r,n,s){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.defaultKey}if(r===undefined){r=this.defaultFrame}if(n===undefined){n=true}if(s===undefined){s=true}if(this.isFull()){return null}var a=new this.classType(this.scene,e,t,i,r);this.scene.sys.displayList.add(a);if(a.preUpdate){this.scene.sys.updateList.add(a)}a.visible=n;a.setActive(s);this.add(a);return a},createMultiple:function(e){if(this.isFull()){return[]}if(!Array.isArray(e)){e=[e]}var t=[];if(e[0].key){for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}}return t},createFromConfig:function(e){if(this.isFull()){return[]}this.classType=GetFastValue_1(e,"classType",this.classType);var t=GetFastValue_1(e,"key",undefined);var i=GetFastValue_1(e,"frame",null);var r=GetFastValue_1(e,"visible",true);var n=GetFastValue_1(e,"active",true);var s=[];if(t===undefined){return s}else{if(!Array.isArray(t)){t=[t]}if(!Array.isArray(i)){i=[i]}}var a=GetFastValue_1(e,"repeat",0);var o=GetFastValue_1(e,"randomKey",false);var l=GetFastValue_1(e,"randomFrame",false);var h=GetFastValue_1(e,"yoyo",false);var u=GetFastValue_1(e,"quantity",false);var c=GetFastValue_1(e,"frameQuantity",1);var f=GetFastValue_1(e,"max",0);var d=Range_1(t,i,{max:f,qty:u?u:c,random:o,randomB:l,repeat:a,yoyo:h});if(e.createCallback){this.createCallback=e.createCallback}if(e.removeCallback){this.removeCallback=e.removeCallback}for(var v=0;v<d.length;v++){var p=this.create(0,0,d[v].a,d[v].b,r,n);if(!p){break}s.push(p)}var g=GetValue_1(e,"setXY.x",0);var m=GetValue_1(e,"setXY.y",0);var _=GetValue_1(e,"setXY.stepX",0);var y=GetValue_1(e,"setXY.stepY",0);actions.SetXY(s,g,m,_,y);var T=GetValue_1(e,"setRotation.value",0);var x=GetValue_1(e,"setRotation.step",0);actions.SetRotation(s,T,x);var E=GetValue_1(e,"setScale.x",1);var C=GetValue_1(e,"setScale.y",E);var S=GetValue_1(e,"setScale.stepX",0);var A=GetValue_1(e,"setScale.stepY",0);actions.SetScale(s,E,C,S,A);var b=GetValue_1(e,"setAlpha.value",1);var w=GetValue_1(e,"setAlpha.step",0);actions.SetAlpha(s,b,w);var P=GetFastValue_1(e,"hitArea",null);var R=GetFastValue_1(e,"hitAreaCallback",null);if(P){actions.SetHitArea(s,P,R)}var O=GetFastValue_1(e,"gridAlign",false);if(O){actions.GridAlign(s,O)}if(this.createMultipleCallback){this.createMultipleCallback.call(this,s)}return s},preUpdate:function(e,t){if(!this.runChildUpdate||this.children.size===0){return}var i=this.children.entries.slice();for(var r=0;r<i.length;r++){var n=i[r];if(n.active){n.update(e,t)}}},add:function(e,t){if(t===undefined){t=false}if(this.isFull()){return this}this.children.set(e);if(this.createCallback){this.createCallback.call(this,e)}if(t){this.scene.sys.displayList.add(e);if(e.preUpdate){this.scene.sys.updateList.add(e)}}e.on(events$3.DESTROY,this.remove,this);return this},addMultiple:function(e,t){if(t===undefined){t=false}if(Array.isArray(e)){for(var i=0;i<e.length;i++){this.add(e[i],t)}}return this},remove:function(e,t,i){if(t===undefined){t=false}if(i===undefined){i=false}if(!this.children.contains(e)){return this}this.children.delete(e);if(this.removeCallback){this.removeCallback.call(this,e)}e.off(events$3.DESTROY,this.remove,this);if(i){e.destroy()}else if(t){e.scene.sys.displayList.remove(e);if(e.preUpdate){e.scene.sys.updateList.remove(e)}}return this},clear:function(e,t){if(e===undefined){e=false}if(t===undefined){t=false}var i=this.children;for(var r=0;r<i.size;r++){var n=i.entries[r];n.off(events$3.DESTROY,this.remove,this);if(t){n.destroy()}else if(e){n.scene.sys.displayList.remove(n);if(n.preUpdate){n.scene.sys.updateList.remove(n)}}}this.children.clear();return this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(e,t,i,r,n,s,a){return this.getHandler(true,1,e,t,i,r,n,s,a)},getFirstNth:function(e,t,i,r,n,s,a,o){return this.getHandler(true,e,t,i,r,n,s,a,o)},getLast:function(e,t,i,r,n,s,a){return this.getHandler(false,1,e,t,i,r,n,s,a)},getLastNth:function(e,t,i,r,n,s,a,o){return this.getHandler(false,e,t,i,r,n,s,a,o)},getHandler:function(e,t,i,r,n,s,a,o,l){if(i===undefined){i=false}if(r===undefined){r=false}var h;var u;var c=0;var f=this.children.entries;if(e){for(u=0;u<f.length;u++){h=f[u];if(h.active===i){c++;if(c===t){break}}else{h=null}}}else{for(u=f.length-1;u>=0;u--){h=f[u];if(h.active===i){c++;if(c===t){break}}else{h=null}}}if(h){if(typeof n==="number"){h.x=n}if(typeof s==="number"){h.y=s}return h}if(r){return this.create(n,s,a,o,l)}else{return null}},get:function(e,t,i,r,n){return this.getFirst(false,true,e,t,i,r,n)},getFirstAlive:function(e,t,i,r,n,s){return this.getFirst(true,e,t,i,r,n,s)},getFirstDead:function(e,t,i,r,n,s){return this.getFirst(false,e,t,i,r,n,s)},playAnimation:function(e,t){actions.PlayAnimation(this.children.entries,e,t);return this},isFull:function(){if(this.maxSize===-1){return false}else{return this.children.size>=this.maxSize}},countActive:function(e){if(e===undefined){e=true}var t=0;for(var i=0;i<this.children.size;i++){if(this.children.entries[i].active===e){t++}}return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed();var t=this.maxSize===-1?999999999999:this.maxSize;return t-e},setDepth:function(e,t){actions.SetDepth(this.children.entries,e,t);return this},kill:function(e){if(this.children.contains(e)){e.setActive(false)}},killAndHide:function(e){if(this.children.contains(e)){e.setActive(false);e.setVisible(false)}},toggleVisible:function(){actions.ToggleVisible(this.children.entries);return this},destroy:function(e){if(e===undefined){e=false}if(!this.scene||this.ignoreDestroy){return}this.clear(false,e);this.scene=undefined;this.children=undefined}});var Group_1=Group;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImageWebGLRenderer=function(e,t,i,r,n){this.pipeline.batchSprite(t,r,n)};var ImageWebGLRenderer_1=ImageWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImageCanvasRenderer=function(e,t,i,r,n){e.batchSprite(t,t.frame,r,n)};var ImageCanvasRenderer_1=ImageCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$8=NOOP_1;var renderCanvas$8=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$8=ImageWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$8=ImageCanvasRenderer_1}var ImageRender={renderWebGL:renderWebGL$8,renderCanvas:renderCanvas$8};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Image$2=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.Depth,components.Flip,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Size,components.TextureCrop,components.Tint,components.Transform,components.Visible,ImageRender],initialize:function e(t,i,r,n,s){GameObject_1.call(this,t,"Image");this._crop=this.resetCropObject();this.setTexture(n,s);this.setPosition(i,r);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()}});var Image_1$1=Image$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GravityWell=new Class_1({initialize:function e(t,i,r,n,s){if(typeof t==="object"){var a=t;t=GetFastValue_1(a,"x",0);i=GetFastValue_1(a,"y",0);r=GetFastValue_1(a,"power",0);n=GetFastValue_1(a,"epsilon",100);s=GetFastValue_1(a,"gravity",50)}else{if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=100}if(s===undefined){s=50}}this.x=t;this.y=i;this.active=true;this._gravity=s;this._power=0;this._epsilon=0;this.power=r;this.epsilon=n},update:function(e,t){var i=this.x-e.x;var r=this.y-e.y;var n=i*i+r*r;if(n===0){return}var s=Math.sqrt(n);if(n<this._epsilon){n=this._epsilon}var a=this._power*t/(n*s)*100;e.velocityX+=i*a;e.velocityY+=r*a},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(e){this._epsilon=e*e}},power:{get:function(){return this._power/this._gravity},set:function(e){this._power=e*this._gravity}},gravity:{get:function(){return this._gravity},set:function(e){var t=this.power;this._gravity=e;this.power=t}}});var GravityWell_1=GravityWell;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Particle=new Class_1({initialize:function e(t){this.emitter=t;this.frame=null;this.x=0;this.y=0;this.velocityX=0;this.velocityY=0;this.accelerationX=0;this.accelerationY=0;this.maxVelocityX=1e4;this.maxVelocityY=1e4;this.bounce=0;this.scaleX=1;this.scaleY=1;this.alpha=1;this.angle=0;this.rotation=0;this.tint=16777215;this.life=1e3;this.lifeCurrent=1e3;this.delayCurrent=0;this.lifeT=0;this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0;this.y=0},fire:function(e,t){var i=this.emitter;this.frame=i.getFrame();if(i.emitZone){i.emitZone.getPoint(this)}if(e===undefined){if(i.follow){this.x+=i.follow.x+i.followOffset.x}this.x+=i.x.onEmit(this,"x")}else{this.x+=e}if(t===undefined){if(i.follow){this.y+=i.follow.y+i.followOffset.y}this.y+=i.y.onEmit(this,"y")}else{this.y+=t}this.life=i.lifespan.onEmit(this,"lifespan");this.lifeCurrent=this.life;this.lifeT=0;var r=i.speedX.onEmit(this,"speedX");var n=i.speedY?i.speedY.onEmit(this,"speedY"):r;if(i.radial){var s=DegToRad_1(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(s)*Math.abs(r);this.velocityY=Math.sin(s)*Math.abs(n)}else if(i.moveTo){var a=i.moveToX.onEmit(this,"moveToX");var o=i.moveToY?i.moveToY.onEmit(this,"moveToY"):a;var l=Math.atan2(o-this.y,a-this.x);var h=DistanceBetween_1(this.x,this.y,a,o)/(this.life/1e3);this.velocityX=Math.cos(l)*h;this.velocityY=Math.sin(l)*h}else{this.velocityX=r;this.velocityY=n}if(i.acceleration){this.accelerationX=i.accelerationX.onEmit(this,"accelerationX");this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")}this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX");this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY");this.delayCurrent=i.delay.onEmit(this,"delay");this.scaleX=i.scaleX.onEmit(this,"scaleX");this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX;this.angle=i.rotate.onEmit(this,"rotate");this.rotation=DegToRad_1(this.angle);this.bounce=i.bounce.onEmit(this,"bounce");this.alpha=i.alpha.onEmit(this,"alpha");this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function(e,t,i,r){var n=this.velocityX;var s=this.velocityY;var a=this.accelerationX;var o=this.accelerationY;var l=this.maxVelocityX;var h=this.maxVelocityY;n+=e.gravityX*i;s+=e.gravityY*i;if(a){n+=a*i}if(o){s+=o*i}if(n>l){n=l}else if(n<-l){n=-l}if(s>h){s=h}else if(s<-h){s=-h}this.velocityX=n;this.velocityY=s;for(var u=0;u<r.length;u++){r[u].update(this,t,i)}},checkBounds:function(e){var t=e.bounds;var i=-this.bounce;if(this.x<t.x&&e.collideLeft){this.x=t.x;this.velocityX*=i}else if(this.x>t.right&&e.collideRight){this.x=t.right;this.velocityX*=i}if(this.y<t.y&&e.collideTop){this.y=t.y;this.velocityY*=i}else if(this.y>t.bottom&&e.collideBottom){this.y=t.bottom;this.velocityY*=i}},update:function(e,t,i){if(this.delayCurrent>0){this.delayCurrent-=e;return false}var r=this.emitter;var n=1-this.lifeCurrent/this.life;this.lifeT=n;this.computeVelocity(r,e,t,i);this.x+=this.velocityX*t;this.y+=this.velocityY*t;if(r.bounds){this.checkBounds(r)}if(r.deathZone&&r.deathZone.willKill(this)){this.lifeCurrent=0;return true}this.scaleX=r.scaleX.onUpdate(this,"scaleX",n,this.scaleX);if(r.scaleY){this.scaleY=r.scaleY.onUpdate(this,"scaleY",n,this.scaleY)}else{this.scaleY=this.scaleX}this.angle=r.rotate.onUpdate(this,"rotate",n,this.angle);this.rotation=DegToRad_1(this.angle);this.alpha=r.alpha.onUpdate(this,"alpha",n,this.alpha);this.tint=r.tint.onUpdate(this,"tint",n,this.tint);this.lifeCurrent-=e;return this.lifeCurrent<=0}});var Particle_1=Particle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DeathZone=new Class_1({initialize:function e(t,i){this.source=t;this.killOnEnter=i},willKill:function(e){var t=this.source.contains(e.x,e.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});var DeathZone_1=DeathZone;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EdgeZone=new Class_1({initialize:function e(t,i,r,n,s){if(n===undefined){n=false}if(s===undefined){s=true}this.source=t;this.points=[];this.quantity=i;this.stepRate=r;this.yoyo=n;this.counter=-1;this.seamless=s;this._length=0;this._direction=0;this.updateSource()},updateSource:function(){this.points=this.source.getPoints(this.quantity,this.stepRate);if(this.seamless){var e=this.points[0];var t=this.points[this.points.length-1];if(e.x===t.x&&e.y===t.y){this.points.pop()}}var i=this._length;this._length=this.points.length;if(this._length<i&&this.counter>this._length){this.counter=this._length-1}return this},changeSource:function(e){this.source=e;return this.updateSource()},getPoint:function(e){if(this._direction===0){this.counter++;if(this.counter>=this._length){if(this.yoyo){this._direction=1;this.counter=this._length-1}else{this.counter=0}}}else{this.counter--;if(this.counter===-1){if(this.yoyo){this._direction=0;this.counter=0}else{this.counter=this._length-1}}}var t=this.points[this.counter];if(t){e.x=t.x;e.y=t.y}}});var EdgeZone_1=EdgeZone;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetEaseFunction=function(e,t){var i=EaseMap.Power0;if(typeof e==="string"){if(EaseMap.hasOwnProperty(e)){i=EaseMap[e]}else{var r="";if(e.indexOf(".")){r=e.substr(e.indexOf(".")+1);if(r.toLowerCase()==="in"){r="easeIn"}else if(r.toLowerCase()==="out"){r="easeOut"}else if(r.toLowerCase()==="inout"){r="easeInOut"}}e=UppercaseFirst_1(e.substr(0,e.indexOf(".")+1)+r);if(EaseMap.hasOwnProperty(e)){i=EaseMap[e]}}}else if(typeof e==="function"){i=e}if(!t){return i}var n=t.slice(0);n.unshift(0);return function(e){n[0]=e;return i.apply(this,n)}};var GetEaseFunction_1=GetEaseFunction;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EmitterOp=new Class_1({initialize:function e(t,i,r,n){if(n===undefined){n=false}this.propertyKey=i;this.propertyValue=r;this.defaultValue=r;this.steps=0;this.counter=0;this.start=0;this.end=0;this.emitOnly=n;this.onEmit=this.defaultEmit;this.onUpdate=this.defaultUpdate;this.loadConfig(t)},loadConfig:function(e,t){if(e===undefined){e={}}if(t){this.propertyKey=t}this.propertyValue=GetFastValue_1(e,this.propertyKey,this.defaultValue);this.setMethods();if(this.emitOnly){this.onUpdate=this.defaultUpdate}},toJSON:function(){return this.propertyValue},onChange:function(e){this.propertyValue=e;return this.setMethods()},setMethods:function(){var e=this.propertyValue;var t=typeof e;if(t==="number"){this.onEmit=this.staticValueEmit;this.onUpdate=this.staticValueUpdate}else if(Array.isArray(e)){this.onEmit=this.randomStaticValueEmit}else if(t==="function"){if(this.emitOnly){this.onEmit=e}else{this.onUpdate=e}}else if(t==="object"&&(this.has(e,"random")||this.hasBoth(e,"start","end")||this.hasBoth(e,"min","max"))){this.start=this.has(e,"start")?e.start:e.min;this.end=this.has(e,"end")?e.end:e.max;var i=this.hasBoth(e,"min","max")||!!e.random;if(i){var r=e.random;if(Array.isArray(r)){this.start=r[0];this.end=r[1]}this.onEmit=this.randomRangedValueEmit}if(this.has(e,"steps")){this.steps=e.steps;this.counter=this.start;this.onEmit=this.steppedEmit}else{var n=this.has(e,"ease")?e.ease:"Linear";this.ease=GetEaseFunction_1(n);if(!i){this.onEmit=this.easedValueEmit}this.onUpdate=this.easeValueUpdate}}else if(t==="object"&&this.hasEither(e,"onEmit","onUpdate")){if(this.has(e,"onEmit")){this.onEmit=e.onEmit}if(this.has(e,"onUpdate")){this.onUpdate=e.onUpdate}}return this},has:function(e,t){return e.hasOwnProperty(t)},hasBoth:function(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function(e,t,i){return i},defaultUpdate:function(e,t,i,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[e]},randomRangedValueEmit:function(e,t){var i=FloatBetween_1(this.start,this.end);if(e&&e.data[t]){e.data[t].min=i}return i},steppedEmit:function(){var e=this.counter;var t=this.counter+(this.end-this.start)/this.steps;this.counter=Wrap_1(t,this.start,this.end);return e},easedValueEmit:function(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start;i.max=this.end}return this.start},easeValueUpdate:function(e,t,i){var r=e.data[t];return(r.max-r.min)*this.ease(i)+r.min}});var EmitterOp_1=EmitterOp;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HasAny=function(e,t){for(var i=0;i<t.length;i++){if(e.hasOwnProperty(t[i])){return true}}return false};var HasAny_1=HasAny;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HasValue=function(e,t){return e.hasOwnProperty(t)};var HasValue_1=HasValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomZone=new Class_1({initialize:function e(t){this.source=t;this._tempVec=new Vector2_1},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t);e.x=t.x;e.y=t.y}});var RandomZone_1=RandomZone;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParticleEmitter=new Class_1({Mixins:[components.BlendMode,components.Mask,components.ScrollFactor,components.Visible],initialize:function e(t,i){this.manager=t;this.texture=t.texture;this.frames=[t.defaultFrame];this.defaultFrame=t.defaultFrame;this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"];this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"];this.name="";this.particleClass=Particle_1;this.x=new EmitterOp_1(i,"x",0,true);this.y=new EmitterOp_1(i,"y",0,true);this.radial=true;this.gravityX=0;this.gravityY=0;this.acceleration=false;this.accelerationX=new EmitterOp_1(i,"accelerationX",0,true);this.accelerationY=new EmitterOp_1(i,"accelerationY",0,true);this.maxVelocityX=new EmitterOp_1(i,"maxVelocityX",1e4,true);this.maxVelocityY=new EmitterOp_1(i,"maxVelocityY",1e4,true);this.speedX=new EmitterOp_1(i,"speedX",0,true);this.speedY=new EmitterOp_1(i,"speedY",0,true);this.moveTo=false;this.moveToX=new EmitterOp_1(i,"moveToX",0,true);this.moveToY=new EmitterOp_1(i,"moveToY",0,true);this.bounce=new EmitterOp_1(i,"bounce",0,true);this.scaleX=new EmitterOp_1(i,"scaleX",1);this.scaleY=new EmitterOp_1(i,"scaleY",1);this.tint=new EmitterOp_1(i,"tint",4294967295);this.alpha=new EmitterOp_1(i,"alpha",1);this.lifespan=new EmitterOp_1(i,"lifespan",1e3,true);this.angle=new EmitterOp_1(i,"angle",{min:0,max:360},true);this.rotate=new EmitterOp_1(i,"rotate",0);this.emitCallback=null;this.emitCallbackScope=null;this.deathCallback=null;this.deathCallbackScope=null;this.maxParticles=0;this.quantity=new EmitterOp_1(i,"quantity",1,true);this.delay=new EmitterOp_1(i,"delay",0,true);this.frequency=0;this.on=true;this.particleBringToTop=true;this.timeScale=1;this.emitZone=null;this.deathZone=null;this.bounds=null;this.collideLeft=true;this.collideRight=true;this.collideTop=true;this.collideBottom=true;this.active=true;this.visible=true;this.blendMode=BlendModes.NORMAL;this.follow=null;this.followOffset=new Vector2_1;this.trackVisible=false;this.currentFrame=0;this.randomFrame=true;this.frameQuantity=1;this.dead=[];this.alive=[];this._counter=0;this._frameCounter=0;if(i){this.fromJSON(i)}},fromJSON:function(e){if(!e){return this}var t=0;var i="";for(t=0;t<this.configFastMap.length;t++){i=this.configFastMap[t];if(HasValue_1(e,i)){this[i]=GetFastValue_1(e,i)}}for(t=0;t<this.configOpMap.length;t++){i=this.configOpMap[t];if(HasValue_1(e,i)){this[i].loadConfig(e)}}this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0;this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0;if(HasValue_1(e,"speed")){this.speedX.loadConfig(e,"speed");this.speedY=null}if(HasAny_1(e,["speedX","speedY"])||this.moveTo){this.radial=false}if(HasValue_1(e,"scale")){this.scaleX.loadConfig(e,"scale");this.scaleY=null}if(HasValue_1(e,"callbackScope")){var r=GetFastValue_1(e,"callbackScope",null);this.emitCallbackScope=r;this.deathCallbackScope=r}if(HasValue_1(e,"emitZone")){this.setEmitZone(e.emitZone)}if(HasValue_1(e,"deathZone")){this.setDeathZone(e.deathZone)}if(HasValue_1(e,"bounds")){this.setBounds(e.bounds)}if(HasValue_1(e,"followOffset")){this.followOffset.setFromObject(GetFastValue_1(e,"followOffset",0))}if(HasValue_1(e,"frame")){this.setFrame(e.frame)}return this},toJSON:function(e){if(e===undefined){e={}}var t=0;var i="";for(t=0;t<this.configFastMap.length;t++){i=this.configFastMap[t];e[i]=this[i]}for(t=0;t<this.configOpMap.length;t++){i=this.configOpMap[t];if(this[i]){e[i]=this[i].toJSON()}}if(!this.speedY){delete e.speedX;e.speed=this.speedX.toJSON()}if(!this.scaleY){delete e.scaleX;e.scale=this.scaleX.toJSON()}return e},startFollow:function(e,t,i,r){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=false}this.follow=e;this.followOffset.set(t,i);this.trackVisible=r;return this},stopFollow:function(){this.follow=null;this.followOffset.set(0,0);this.trackVisible=false;return this},getFrame:function(){if(this.frames.length===1){return this.defaultFrame}else if(this.randomFrame){return GetRandom_1(this.frames)}else{var e=this.frames[this.currentFrame];this._frameCounter++;if(this._frameCounter===this.frameQuantity){this._frameCounter=0;this.currentFrame=Wrap_1(this.currentFrame+1,0,this._frameLength)}return e}},setFrame:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=1}this.randomFrame=t;this.frameQuantity=i;this.currentFrame=0;this._frameCounter=0;var r=typeof e;if(Array.isArray(e)||r==="string"||r==="number"){this.manager.setEmitterFrames(e,this)}else if(r==="object"){var n=e;e=GetFastValue_1(n,"frames",null);if(e){this.manager.setEmitterFrames(e,this)}var s=GetFastValue_1(n,"cycle",false);this.randomFrame=s?false:true;this.frameQuantity=GetFastValue_1(n,"quantity",i)}this._frameLength=this.frames.length;if(this._frameLength===1){this.frameQuantity=1;this.randomFrame=false}return this},setRadial:function(e){if(e===undefined){e=true}this.radial=e;return this},setPosition:function(e,t){this.x.onChange(e);this.y.onChange(t);return this},setBounds:function(e,t,i,r){if(typeof e==="object"){var n=e;e=n.x;t=n.y;i=HasValue_1(n,"w")?n.w:n.width;r=HasValue_1(n,"h")?n.h:n.height}if(this.bounds){this.bounds.setTo(e,t,i,r)}else{this.bounds=new Rectangle_1(e,t,i,r)}return this},setSpeedX:function(e){this.speedX.onChange(e);this.radial=false;return this},setSpeedY:function(e){if(this.speedY){this.speedY.onChange(e);this.radial=false}return this},setSpeed:function(e){this.speedX.onChange(e);this.speedY=null;this.radial=true;return this},setScaleX:function(e){this.scaleX.onChange(e);return this},setScaleY:function(e){this.scaleY.onChange(e);return this},setScale:function(e){this.scaleX.onChange(e);this.scaleY=null;return this},setGravityX:function(e){this.gravityX=e;return this},setGravityY:function(e){this.gravityY=e;return this},setGravity:function(e,t){this.gravityX=e;this.gravityY=t;return this},setAlpha:function(e){this.alpha.onChange(e);return this},setEmitterAngle:function(e){this.angle.onChange(e);return this},setAngle:function(e){this.angle.onChange(e);return this},setLifespan:function(e){this.lifespan.onChange(e);return this},setQuantity:function(e){this.quantity.onChange(e);return this},setFrequency:function(e,t){this.frequency=e;this._counter=0;if(t){this.quantity.onChange(t)}return this},setEmitZone:function(e){if(e===undefined){this.emitZone=null}else{var t=GetFastValue_1(e,"type","random");var i=GetFastValue_1(e,"source",null);switch(t){case"random":this.emitZone=new RandomZone_1(i);break;case"edge":var r=GetFastValue_1(e,"quantity",1);var n=GetFastValue_1(e,"stepRate",0);var s=GetFastValue_1(e,"yoyo",false);var a=GetFastValue_1(e,"seamless",true);this.emitZone=new EdgeZone_1(i,r,n,s,a);break}}return this},setDeathZone:function(e){if(e===undefined){this.deathZone=null}else{var t=GetFastValue_1(e,"type","onEnter");var i=GetFastValue_1(e,"source",null);if(i&&typeof i.contains==="function"){var r=t==="onEnter"?true:false;this.deathZone=new DeathZone_1(i,r)}}return this},reserve:function(e){var t=this.dead;for(var i=0;i<e;i++){t.push(new this.particleClass(this))}return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(e,t){if(e===undefined){this.emitCallback=null;this.emitCallbackScope=null}else if(typeof e==="function"){this.emitCallback=e;if(t){this.emitCallbackScope=t}}return this},onParticleDeath:function(e,t){if(e===undefined){this.deathCallback=null;this.deathCallbackScope=null}else if(typeof e==="function"){this.deathCallback=e;if(t){this.deathCallbackScope=t}}return this},killAll:function(){var e=this.dead;var t=this.alive;while(t.length>0){e.push(t.pop())}return this},forEachAlive:function(e,t){var i=this.alive;var r=i.length;for(var n=0;n<r;++n){e.call(t,i[n],this)}return this},forEachDead:function(e,t){var i=this.dead;var r=i.length;for(var n=0;n<r;++n){e.call(t,i[n],this)}return this},start:function(){this.on=true;this._counter=0;return this},stop:function(){this.on=false;return this},pause:function(){this.active=false;return this},resume:function(){this.active=true;return this},depthSort:function(){StableSort.inplace(this.alive,this.depthSortCallback);return this},flow:function(e,t){if(t===undefined){t=1}this.frequency=e;this.quantity.onChange(t);return this.start()},explode:function(e,t,i){this.frequency=-1;return this.emitParticle(e,t,i)},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function(e,t,i){if(this.atLimit()){return}if(e===undefined){e=this.quantity.onEmit()}var r=this.dead;for(var n=0;n<e;n++){var s=r.pop();if(!s){s=new this.particleClass(this)}s.fire(t,i);if(this.particleBringToTop){this.alive.push(s)}else{this.alive.unshift(s)}if(this.emitCallback){this.emitCallback.call(this.emitCallbackScope,s,this)}if(this.atLimit()){break}}return s},preUpdate:function(e,t){t*=this.timeScale;var i=t/1e3;if(this.trackVisible){this.visible=this.follow.visible}var r=this.manager.getProcessors();var n=this.alive;var s=this.dead;var a=0;var o=[];var l=n.length;for(a=0;a<l;a++){var h=n[a];if(h.update(t,i,r)){o.push({index:a,particle:h})}}l=o.length;if(l>0){var u=this.deathCallback;var c=this.deathCallbackScope;for(a=l-1;a>=0;a--){var f=o[a];n.splice(f.index,1);s.push(f.particle);if(u){u.call(c,f.particle)}f.particle.resetPosition()}}if(!this.on){return}if(this.frequency===0){this.emitParticle()}else if(this.frequency>0){this._counter-=t;if(this._counter<=0){this.emitParticle();this._counter=this.frequency-Math.abs(this._counter)}}},depthSortCallback:function(e,t){return e.y-t.y}});var ParticleEmitter_1=ParticleEmitter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParticleManagerWebGLRenderer=function(e,t,i,r,n){var s=t.emitters.list;var a=s.length;if(a===0){return}var o=this.pipeline;var l=o._tempMatrix1.copyFrom(r.matrix);var h=o._tempMatrix2;var u=o._tempMatrix3;var c=o._tempMatrix4.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.multiply(c);e.setPipeline(o);var f=r.roundPixels;var d=t.defaultFrame.glTexture;var v=Utils.getTintAppendFloatAlphaAndSwap;o.setTexture2D(d,0);for(var p=0;p<a;p++){var g=s[p];var m=g.alive;var _=m.length;if(!g.visible||_===0){continue}var y=r.scrollX*g.scrollFactorX;var T=r.scrollY*g.scrollFactorY;if(n){l.multiplyWithOffset(n,-y,-T);y=0;T=0}if(e.setBlendMode(g.blendMode)){o.setTexture2D(d,0)}if(g.mask){g.mask.preRenderWebGL(e,g,r);o.setTexture2D(d,0)}var x=0;for(var E=0;E<_;E++){var C=m[E];var S=C.alpha*r.alpha;if(S<=0){continue}var A=C.frame;var b=-A.halfWidth;var w=-A.halfHeight;var P=b+A.width;var R=w+A.height;u.applyITRS(0,0,C.rotation,C.scaleX,C.scaleY);u.e=C.x-y;u.f=C.y-T;l.multiply(u,h);var O=h.getX(b,w);var M=h.getY(b,w);var F=h.getX(b,R);var L=h.getY(b,R);var G=h.getX(P,R);var V=h.getY(P,R);var I=h.getX(P,w);var D=h.getY(P,w);if(f){O=Math.round(O);M=Math.round(M);F=Math.round(F);L=Math.round(L);G=Math.round(G);V=Math.round(V);I=Math.round(I);D=Math.round(D)}var B=v(C.tint,S);o.batchQuad(O,M,F,L,G,V,I,D,A.u0,A.v0,A.u1,A.v1,B,B,B,B,x,d,0)}if(g.mask){g.mask.postRenderWebGL(e,r);o.setTexture2D(d,0)}}};var ParticleManagerWebGLRenderer_1=ParticleManagerWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParticleManagerCanvasRenderer=function(e,t,i,r,n){var s=t.emitters.list;var a=s.length;if(a===0){return}var o=e._tempMatrix1.copyFrom(r.matrix);var l=e._tempMatrix2;var h=e._tempMatrix3;var u=e._tempMatrix4.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);o.multiply(u);var c=r.roundPixels;var f=e.currentContext;f.save();for(var d=0;d<a;d++){var v=s[d];var p=v.alive;var g=p.length;if(!v.visible||g===0){continue}var m=r.scrollX*v.scrollFactorX;var _=r.scrollY*v.scrollFactorY;if(n){o.multiplyWithOffset(n,-m,-_);m=0;_=0}f.globalCompositeOperation=e.blendModes[v.blendMode];for(var y=0;y<g;y++){var T=p[y];var x=T.alpha*r.alpha;if(x<=0){continue}var E=T.frame;var C=E.canvasData;var S=-E.halfWidth;var A=-E.halfHeight;h.applyITRS(0,0,T.rotation,T.scaleX,T.scaleY);h.e=T.x-m;h.f=T.y-_;o.multiply(h,l);f.globalAlpha=x;f.save();l.copyToContext(f);if(c){S=Math.round(S);A=Math.round(A)}f.drawImage(E.source.image,C.x,C.y,C.width,C.height,S,A,C.width,C.height);f.restore()}}f.restore()};var ParticleManagerCanvasRenderer_1=ParticleManagerCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$9=NOOP_1;var renderCanvas$9=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$9=ParticleManagerWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$9=ParticleManagerCanvasRenderer_1}var ParticleManagerRender={renderWebGL:renderWebGL$9,renderCanvas:renderCanvas$9};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParticleEmitterManager=new Class_1({Extends:GameObject_1,Mixins:[components.Depth,components.Mask,components.Pipeline,components.Transform,components.Visible,ParticleManagerRender],initialize:function e(t,i,r,n){GameObject_1.call(this,t,"ParticleEmitterManager");this.blendMode=-1;this.timeScale=1;this.texture=null;this.frame=null;this.frameNames=[];if(r!==null&&(typeof r==="object"||Array.isArray(r))){n=r;r=null}this.setTexture(i,r);this.initPipeline();this.emitters=new List_1(this);this.wells=new List_1(this);if(n){if(!Array.isArray(n)){n=[n]}for(var s=0;s<n.length;s++){this.createEmitter(n[s])}}},setTexture:function(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex);var i=[];t.forEach((function(e){i.push(e.name)}));this.frameNames=i;this.defaultFrame=this.frame;return this},setEmitterFrames:function(e,t){if(!Array.isArray(e)){e=[e]}var i=t.frames;i.length=0;for(var r=0;r<e.length;r++){var n=e[r];if(this.frameNames.indexOf(n)!==-1){i.push(this.texture.get(n))}}if(i.length>0){t.defaultFrame=i[0]}else{t.defaultFrame=this.defaultFrame}return this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new ParticleEmitter_1(this,e))},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new GravityWell_1(e))},emitParticle:function(e,t,i){var r=this.emitters.list;for(var n=0;n<r.length;n++){var s=r[n];if(s.active){s.emitParticle(e,t,i)}}return this},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},pause:function(){this.active=false;return this},resume:function(){this.active=true;return this},getProcessors:function(){return this.wells.getAll("active",true)},preUpdate:function(e,t){t*=this.timeScale;var i=this.emitters.list;for(var r=0;r<i.length;r++){var n=i[r];if(n.active){n.preUpdate(e,t)}}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});var ParticleEmitterManager_1=ParticleEmitterManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var zones={DeathZone:DeathZone_1,EdgeZone:EdgeZone_1,RandomZone:RandomZone_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var particles={GravityWell:GravityWell_1,Particle:Particle_1,ParticleEmitter:ParticleEmitter_1,ParticleEmitterManager:ParticleEmitterManager_1,Zones:zones};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PathFollower$1=new Class_1({Extends:Sprite_1,Mixins:[components.PathFollower],initialize:function e(t,i,r,n,s,a){Sprite_1.call(this,t,r,n,s,a);this.path=i},preUpdate:function(e,t){this.anims.update(e,t);this.pathUpdate(e)}});var PathFollower_1$1=PathFollower$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RenderTextureWebGLRenderer=function(e,t,i,r,n){var s=t.frame;var a=s.width;var o=s.height;var l=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,s.glTexture,a,o,t.x,t.y,a,o,t.scaleX,t.scaleY,t.rotation,t.flipX,!t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,o,l(t._tintTL,r.alpha*t._alphaTL),l(t._tintTR,r.alpha*t._alphaTR),l(t._tintBL,r.alpha*t._alphaBL),l(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,r,n);e.setBlankTexture(true)};var RenderTextureWebGLRenderer_1=RenderTextureWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RenderTextureCanvasRenderer=function(e,t,i,r,n){e.batchSprite(t,t.frame,r,n)};var RenderTextureCanvasRenderer_1=RenderTextureCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$a=NOOP_1;var renderCanvas$a=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$a=RenderTextureWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$a=RenderTextureCanvasRenderer_1}var RenderTextureRender={renderWebGL:renderWebGL$a,renderCanvas:renderCanvas$a};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.random()*16|0;var i=e==="x"?t:t&3|8;return i.toString(16)}))};var UUID_1=UUID;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RenderTexture=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Crop,components.Depth,components.Flip,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Tint,components.Transform,components.Visible,RenderTextureRender],initialize:function e(t,i,r,n,s,a,o){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=32}if(s===undefined){s=32}GameObject_1.call(this,t,"RenderTexture");this.renderer=t.sys.game.renderer;this.textureManager=t.sys.textures;this.globalTint=16777215;this.globalAlpha=1;this.canvas=null;this.framebuffer=null;this.dirty=false;this._crop=this.resetCropObject();this.texture=null;this.frame=null;this._saved=false;if(a===undefined){this.canvas=CanvasPool_1.create2D(this,n,s);this.texture=t.sys.textures.addCanvas(UUID_1(),this.canvas);this.frame=this.texture.get()}else{this.texture=t.sys.textures.get(a);this.frame=this.texture.get(o);this.canvas=this.frame.source.image;this._saved=true;this.dirty=true;this.width=this.frame.cutWidth;this.height=this.frame.cutHeight}this.context=this.canvas.getContext("2d");this._eraseMode=false;this.camera=new BaseCamera_1(0,0,n,s);this.gl=null;this.glTexture=null;var l=this.renderer;if(l.type===_const.WEBGL){var h=l.gl;this.gl=h;this.glTexture=this.frame.source.glTexture;this.drawGameObject=this.batchGameObjectWebGL;this.framebuffer=l.createFramebuffer(n,s,this.glTexture,false)}else if(l.type===_const.CANVAS){this.drawGameObject=this.batchGameObjectCanvas}this.camera.setScene(t);this.setPosition(i,r);if(a===undefined){this.setSize(n,s)}this.setOrigin(0,0);this.initPipeline()},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){if(t===undefined){t=e}if(e!==this.width||t!==this.height){if(this.frame.name==="__BASE"){this.canvas.width=e;this.canvas.height=t;if(this.gl){var i=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture);this.renderer.deleteFramebuffer(this.framebuffer);var r=this.renderer.createTexture2D(0,i.NEAREST,i.NEAREST,i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.RGBA,null,e,t,false);this.framebuffer=this.renderer.createFramebuffer(e,t,r,false);this.frame.source.isRenderTexture=true;this.frame.glTexture=r;this.glTexture=r}this.frame.source.width=e;this.frame.source.height=t;this.camera.setSize(e,t);this.frame.setSize(e,t);this.width=e;this.height=t}}else{var n=this.texture.getSourceImage();if(this.frame.cutX+e>n.width){e=n.width-this.frame.cutX}if(this.frame.cutY+t>n.height){t=n.height-this.frame.cutY}this.frame.setSize(e,t,this.frame.cutX,this.frame.cutY)}return this},setGlobalTint:function(e){this.globalTint=e;return this},setGlobalAlpha:function(e){this.globalAlpha=e;return this},saveTexture:function(e){this.textureManager.renameTexture(this.texture.key,e);this._saved=true;return this.texture},fill:function(e,t,i,r,n,s){if(t===undefined){t=1}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=this.frame.cutWidth}if(s===undefined){s=this.frame.cutHeight}var a=(e>>16|0)&255;var o=(e>>8|0)&255;var l=(e|0)&255;var h=this.gl;var u=this.frame;if(h){var c=this.renderer;var f=this.getBounds();c.setFramebuffer(this.framebuffer,true);if(n!==u.source.width||s!==u.source.height){h.scissor(i+u.cutX,r+u.cutY,n,s)}this.pipeline.drawFillRect(f.x,f.y,f.right,f.bottom,Utils.getTintFromFloats(a/255,o/255,l/255,1),t);if(n!==u.source.width||s!==u.source.height){h.scissor(0,0,u.source.width,u.source.height)}this.renderer.setFramebuffer(null,true)}else{this.context.fillStyle="rgba("+a+","+o+","+l+","+t+")";this.context.fillRect(i+u.cutX,r+u.cutY,n,s)}return this},clear:function(){if(this.dirty){var e=this.gl;if(e){var t=this.renderer;t.setFramebuffer(this.framebuffer,true);if(this.frame.cutWidth!==this.canvas.width||this.frame.cutHeight!==this.canvas.height){e.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight)}e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);t.setFramebuffer(null,true)}else{var i=this.context;i.save();i.setTransform(1,0,0,1,0,0);i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight);i.restore()}this.dirty=false}return this},erase:function(e,t,i){this._eraseMode=true;var r=this.renderer.currentBlendMode;this.renderer.setBlendMode(BlendModes.ERASE);this.draw(e,t,i,1,16777215);this.renderer.setBlendMode(r);this._eraseMode=false;return this},draw:function(e,t,i,r,n){if(r===undefined){r=this.globalAlpha}if(n===undefined){n=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16)}else{n=(n>>16)+(n&65280)+((n&255)<<16)}if(!Array.isArray(e)){e=[e]}var s=this.gl;this.camera.preRender(1,1);if(s){var a=this.camera._cx;var o=this.camera._cy;var l=this.camera._cw;var h=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,false);this.renderer.pushScissor(a,o,l,h,h);var u=this.pipeline;u.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3);this.batchList(e,t,i,r,n);u.flush();this.renderer.setFramebuffer(null,false);this.renderer.popScissor();u.projOrtho(0,u.width,u.height,0,-1e3,1e3)}else{this.renderer.setContext(this.context);this.batchList(e,t,i,r,n);this.renderer.setContext()}this.dirty=true;return this},drawFrame:function(e,t,i,r,n,s){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=this.globalAlpha}if(s===undefined){s=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16)}else{s=(s>>16)+(s&65280)+((s&255)<<16)}var a=this.gl;var o=this.textureManager.getFrame(e,t);if(o){this.camera.preRender(1,1);if(a){var l=this.camera._cx;var h=this.camera._cy;var u=this.camera._cw;var c=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,false);this.renderer.pushScissor(l,h,u,c,c);var f=this.pipeline;f.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3);f.batchTextureFrame(o,i+this.frame.cutX,r+this.frame.cutY,s,n,this.camera.matrix,null);f.flush();this.renderer.setFramebuffer(null,false);this.renderer.popScissor();f.projOrtho(0,f.width,f.height,0,-1e3,1e3)}else{this.batchTextureFrame(o,i+this.frame.cutX,r+this.frame.cutY,n,s)}this.dirty=true}return this},batchList:function(e,t,i,r,n){for(var s=0;s<e.length;s++){var a=e[s];if(!a||a===this){continue}if(a.renderWebGL||a.renderCanvas){this.drawGameObject(a,t,i)}else if(a.isParent||a.list){this.batchGroup(a.getChildren(),t,i)}else if(typeof a==="string"){this.batchTextureFrameKey(a,null,t,i,r,n)}else if(a instanceof Frame_1){this.batchTextureFrame(a,t,i,r,n)}else if(Array.isArray(a)){this.batchList(a,t,i,r,n)}}},batchGroup:function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=0}t+=this.frame.cutX;i+=this.frame.cutY;for(var r=0;r<e.length;r++){var n=e[r];if(n.willRender()){var s=n.x+t;var a=n.y+i;this.drawGameObject(n,s,a)}}},batchGameObjectWebGL:function(e,t,i){if(t===undefined){t=e.x}if(i===undefined){i=e.y}var r=e.x;var n=e.y;if(!this._eraseMode){this.renderer.setBlendMode(e.blendMode)}e.setPosition(t+this.frame.cutX,i+this.frame.cutY);e.renderWebGL(this.renderer,e,0,this.camera,null);e.setPosition(r,n)},batchGameObjectCanvas:function(e,t,i){if(t===undefined){t=e.x}if(i===undefined){i=e.y}var r=e.x;var n=e.y;if(this._eraseMode){var s=e.blendMode;e.blendMode=BlendModes.ERASE}e.setPosition(t+this.frame.cutX,i+this.frame.cutY);e.renderCanvas(this.renderer,e,0,this.camera,null);e.setPosition(r,n);if(this._eraseMode){e.blendMode=s}},batchTextureFrameKey:function(e,t,i,r,n,s){var a=this.textureManager.getFrame(e,t);if(a){this.batchTextureFrame(a,i,r,n,s)}},batchTextureFrame:function(e,t,i,r,n){if(t===undefined){t=0}if(i===undefined){i=0}t+=this.frame.cutX;i+=this.frame.cutY;if(this.gl){this.pipeline.batchTextureFrame(e,t,i,n,r,this.camera.matrix,null)}else{var s=this.context;var a=e.canvasData;var o=e.source.image;var l=this.camera.matrix;s.globalAlpha=this.globalAlpha;s.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]);s.drawImage(o,a.x,a.y,a.width,a.height,t,i,a.width,a.height)}},snapshotArea:function(e,t,i,r,n,s,a){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,n,false,e,t,i,r,s,a)}else{this.renderer.snapshotCanvas(this.canvas,n,false,e,t,i,r,s,a)}return this},snapshot:function(e,t,i){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,e,false,0,0,this.width,this.height,t,i)}else{this.renderer.snapshotCanvas(this.canvas,e,false,0,0,this.width,this.height,t,i)}return this},snapshotPixel:function(e,t,i){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,i,true,e,t)}else{this.renderer.snapshotCanvas(this.canvas,i,true,e,t)}return this},preDestroy:function(){if(!this._saved){CanvasPool_1.remove(this.canvas);if(this.gl){this.renderer.deleteFramebuffer(this.framebuffer)}this.texture.destroy();this.camera.destroy();this.canvas=null;this.context=null;this.framebuffer=null;this.texture=null;this.glTexture=null}}});var RenderTexture_1=RenderTexture;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RETRO_FONT_CONST={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"};var _const$8=RETRO_FONT_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseRetroFont=function(e,t){var i=t.width;var r=t.height;var n=Math.floor(i/2);var s=Math.floor(r/2);var a=GetValue_1(t,"chars","");if(a===""){return}var o=GetValue_1(t,"image","");var l=GetValue_1(t,"offset.x",0);var h=GetValue_1(t,"offset.y",0);var u=GetValue_1(t,"spacing.x",0);var c=GetValue_1(t,"spacing.y",0);var f=GetValue_1(t,"lineSpacing",0);var d=GetValue_1(t,"charsPerRow",null);if(d===null){d=e.sys.textures.getFrame(o).width/i;if(d>a.length){d=a.length}}var v=l;var p=h;var g={retroFont:true,font:o,size:i,lineHeight:r+f,chars:{}};var m=0;for(var _=0;_<a.length;_++){var y=a.charCodeAt(_);g.chars[y]={x:v,y:p,width:i,height:r,centerX:n,centerY:s,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{}};m++;if(m===d){m=0;v=l;p+=r+c}else{v+=i+u}}var T={data:g,frame:null,texture:o};return T};var ParseRetroFont_1=ParseRetroFont;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RetroFont={Parse:ParseRetroFont_1};RetroFont=Extend_1(false,RetroFont,_const$8);var RetroFont_1=RetroFont;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTextSize=function(e,t,i){var r=e.canvas;var n=e.context;var s=e.style;var a=[];var o=0;var l=i.length;if(s.maxLines>0&&s.maxLines<i.length){l=s.maxLines}s.syncFont(r,n);for(var h=0;h<l;h++){var u=s.strokeThickness;u+=n.measureText(i[h]).width;if(s.wordWrap){u-=n.measureText(" ").width}a[h]=Math.ceil(u);o=Math.max(o,a[h])}var c=t.fontSize+s.strokeThickness;var f=c*l;var d=e.lineSpacing;if(l>1){f+=d*(l-1)}return{width:o,height:f,lines:l,lineWidths:a,lineSpacing:d,lineHeight:c}};var GetTextSize_1=GetTextSize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextWebGLRenderer=function(e,t,i,r,n){if(t.width===0||t.height===0){return}var s=t.frame;var a=s.width;var o=s.height;var l=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,s.glTexture,a,o,t.x,t.y,a/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,o,l(t._tintTL,r.alpha*t._alphaTL),l(t._tintTR,r.alpha*t._alphaTR),l(t._tintBL,r.alpha*t._alphaBL),l(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,r,n)};var TextWebGLRenderer_1=TextWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextCanvasRenderer=function(e,t,i,r,n){if(t.width===0||t.height===0){return}e.batchSprite(t,t.frame,r,n)};var TextCanvasRenderer_1=TextCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$b=NOOP_1;var renderCanvas$b=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$b=TextWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$b=TextCanvasRenderer_1}var TextRender={renderWebGL:renderWebGL$b,renderCanvas:renderCanvas$b};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MeasureText=function(e){var t=CanvasPool_1.create(this);var i=t.getContext("2d");e.syncFont(t,i);var r=Math.ceil(i.measureText(e.testString).width*e.baselineX);var n=r;var s=2*n;n=n*e.baselineY|0;t.width=r;t.height=s;i.fillStyle="#f00";i.fillRect(0,0,r,s);i.font=e._font;i.textBaseline="alphabetic";i.fillStyle="#000";i.fillText(e.testString,0,n);var a={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,r,s)){a.ascent=n;a.descent=n+6;a.fontSize=a.ascent+a.descent;CanvasPool_1.remove(t);return a}var o=i.getImageData(0,0,r,s).data;var l=o.length;var h=r*4;var u;var c;var f=0;var d=false;for(u=0;u<n;u++){for(c=0;c<h;c+=4){if(o[f+c]!==255){d=true;break}}if(!d){f+=h}else{break}}a.ascent=n-u;f=l-h;d=false;for(u=s;u>n;u--){for(c=0;c<h;c+=4){if(o[f+c]!==255){d=true;break}}if(!d){f-=h}else{break}}a.descent=u-n;a.fontSize=a.ascent+a.descent;CanvasPool_1.remove(t);return a};var MeasureText_1=MeasureText;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var propertyMap={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",false],shadowFill:["shadow.fill",false],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",false],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",false]};var TextStyle=new Class_1({initialize:function e(t,i){this.parent=t;this.setStyle(i,false,true);var r=GetValue_1(i,"metrics",false);if(r){this.metrics={ascent:GetValue_1(r,"ascent",0),descent:GetValue_1(r,"descent",0),fontSize:GetValue_1(r,"fontSize",0)}}else{this.metrics=MeasureText_1(this)}},setStyle:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=false}if(e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize==="number"){e.fontSize=e.fontSize.toString()+"px"}for(var r in propertyMap){var n=i?propertyMap[r][1]:this[r];if(r==="wordWrapCallback"||r==="wordWrapCallbackScope"){this[r]=GetValue_1(e,propertyMap[r][0],n)}else{this[r]=GetAdvancedValue_1(e,propertyMap[r][0],n)}}var s=GetValue_1(e,"font",null);if(s!==null){this.setFont(s,false)}this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var a=GetValue_1(e,"fill",null);if(a!==null){this.color=a}if(t){return this.update(true)}else{return this.parent}},syncFont:function(e,t){t.font=this._font},syncStyle:function(e,t){t.textBaseline="alphabetic";t.fillStyle=this.color;t.strokeStyle=this.stroke;t.lineWidth=this.strokeThickness;t.lineCap="round";t.lineJoin="round"},syncShadow:function(e,t){if(t){e.shadowOffsetX=this.shadowOffsetX;e.shadowOffsetY=this.shadowOffsetY;e.shadowColor=this.shadowColor;e.shadowBlur=this.shadowBlur}else{e.shadowOffsetX=0;e.shadowOffsetY=0;e.shadowColor=0;e.shadowBlur=0}},update:function(e){if(e){this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();this.metrics=MeasureText_1(this)}return this.parent.updateText()},setFont:function(e,t){if(t===undefined){t=true}var i=e;var r="";var n="";if(typeof e!=="string"){i=GetValue_1(e,"fontFamily","Courier");r=GetValue_1(e,"fontSize","16px");n=GetValue_1(e,"fontStyle","")}else{var s=e.split(" ");var a=0;n=s.length>2?s[a++]:"";r=s[a++]||"16px";i=s[a++]||"Courier"}if(i!==this.fontFamily||r!==this.fontSize||n!==this.fontStyle){this.fontFamily=i;this.fontSize=r;this.fontStyle=n;if(t){this.update(true)}}return this.parent},setFontFamily:function(e){if(this.fontFamily!==e){this.fontFamily=e;this.update(true)}return this.parent},setFontStyle:function(e){if(this.fontStyle!==e){this.fontStyle=e;this.update(true)}return this.parent},setFontSize:function(e){if(typeof e==="number"){e=e.toString()+"px"}if(this.fontSize!==e){this.fontSize=e;this.update(true)}return this.parent},setTestString:function(e){this.testString=e;return this.update(true)},setFixedSize:function(e,t){this.fixedWidth=e;this.fixedHeight=t;if(e){this.parent.width=e}if(t){this.parent.height=t}return this.update(false)},setBackgroundColor:function(e){this.backgroundColor=e;return this.update(false)},setFill:function(e){this.color=e;return this.update(false)},setColor:function(e){this.color=e;return this.update(false)},setResolution:function(e){this.resolution=e;return this.update(false)},setStroke:function(e,t){if(t===undefined){t=this.strokeThickness}if(e===undefined&&this.strokeThickness!==0){this.strokeThickness=0;this.update(true)}else if(this.stroke!==e||this.strokeThickness!==t){this.stroke=e;this.strokeThickness=t;this.update(true)}return this.parent},setShadow:function(e,t,i,r,n,s){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i="#000"}if(r===undefined){r=0}if(n===undefined){n=false}if(s===undefined){s=true}this.shadowOffsetX=e;this.shadowOffsetY=t;this.shadowColor=i;this.shadowBlur=r;this.shadowStroke=n;this.shadowFill=s;return this.update(false)},setShadowOffset:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this.shadowOffsetX=e;this.shadowOffsetY=t;return this.update(false)},setShadowColor:function(e){if(e===undefined){e="#000"}this.shadowColor=e;return this.update(false)},setShadowBlur:function(e){if(e===undefined){e=0}this.shadowBlur=e;return this.update(false)},setShadowStroke:function(e){this.shadowStroke=e;return this.update(false)},setShadowFill:function(e){this.shadowFill=e;return this.update(false)},setWordWrapWidth:function(e,t){if(t===undefined){t=false}this.wordWrapWidth=e;this.wordWrapUseAdvanced=t;return this.update(false)},setWordWrapCallback:function(e,t){if(t===undefined){t=null}this.wordWrapCallback=e;this.wordWrapCallbackScope=t;return this.update(false)},setAlign:function(e){if(e===undefined){e="left"}this.align=e;return this.update(false)},setMaxLines:function(e){if(e===undefined){e=0}this.maxLines=e;return this.update(false)},getTextMetrics:function(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function(){var e={};for(var t in propertyMap){e[t]=this[t]}e.metrics=this.getTextMetrics();return e},destroy:function(){this.parent=undefined}});var TextStyle_1=TextStyle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Text=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Crop,components.Depth,components.Flip,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Tint,components.Transform,components.Visible,TextRender],initialize:function e(t,i,r,n,s){if(i===undefined){i=0}if(r===undefined){r=0}GameObject_1.call(this,t,"Text");this.renderer=t.sys.game.renderer;this.setPosition(i,r);this.setOrigin(0,0);this.initPipeline();this.canvas=CanvasPool_1.create(this);this.context=this.canvas.getContext("2d");this.style=new TextStyle_1(this,s);this.autoRound=true;this.splitRegExp=/(?:\r\n|\r|\n)/;this._text=undefined;this.padding={left:0,right:0,top:0,bottom:0};this.width=1;this.height=1;this.lineSpacing=0;this.dirty=false;if(this.style.resolution===0){this.style.resolution=t.sys.game.config.resolution}this._crop=this.resetCropObject();this.texture=t.sys.textures.addCanvas(null,this.canvas,true);this.frame=this.texture.get();this.frame.source.resolution=this.style.resolution;if(this.renderer&&this.renderer.gl){this.renderer.deleteTexture(this.frame.source.glTexture);this.frame.source.glTexture=null}this.initRTL();this.setText(n);if(s&&s.padding){this.setPadding(s.padding)}if(s&&s.lineSpacing){this.lineSpacing=s.lineSpacing}t.sys.game.events.on(events$1.CONTEXT_RESTORED,(function(){this.dirty=true}),this)},initRTL:function(){if(!this.style.rtl){return}this.canvas.dir="rtl";this.context.direction="rtl";this.canvas.style.display="none";AddToDOM_1(this.canvas,this.scene.sys.canvas);this.originX=1},runWordWrap:function(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);if(Array.isArray(i)){i=i.join("\n")}return i}else if(t.wordWrapWidth){if(t.wordWrapUseAdvanced){return this.advancedWordWrap(e,this.context,this.style.wordWrapWidth)}else{return this.basicWordWrap(e,this.context,this.style.wordWrapWidth)}}else{return e}},advancedWordWrap:function(e,t,i){var r="";var n=e.replace(/ +/gi," ").split(this.splitRegExp);var s=n.length;for(var a=0;a<s;a++){var o=n[a];var l="";o=o.replace(/^ *|\s*$/gi,"");var h=t.measureText(o).width;if(h<i){r+=o+"\n";continue}var u=i;var c=o.split(" ");for(var f=0;f<c.length;f++){var d=c[f];var v=d+" ";var p=t.measureText(v).width;if(p>u){if(f===0){var g=v;while(g.length){g=g.slice(0,-1);p=t.measureText(g).width;if(p<=u){break}}if(!g.length){throw new Error("This text's wordWrapWidth setting is less than a single character!")}var m=d.substr(g.length);c[f]=m;l+=g}var _=c[f].length?f:f+1;var y=c.slice(_).join(" ").replace(/[ \n]*$/gi,"");n[a+1]=y+" "+(n[a+1]||"");s=n.length;break}else{l+=v;u-=p}}r+=l.replace(/[ \n]*$/gi,"")+"\n"}r=r.replace(/[\s|\n]*$/gi,"");return r},basicWordWrap:function(e,t,i){var r="";var n=e.split(this.splitRegExp);for(var s=0;s<n.length;s++){var a=i;var o=n[s].split(" ");for(var l=0;l<o.length;l++){var h=t.measureText(o[l]).width;var u=h+t.measureText(" ").width;if(u>a){if(l>0){r+="\n"}r+=o[l]+" ";a=i-u}else{a-=u;r+=o[l];if(l<o.length-1){r+=" "}}}if(s<n.length-1){r+="\n"}}return r},getWrappedText:function(e){if(e===undefined){e=this._text}this.style.syncFont(this.canvas,this.context);var t=this.runWordWrap(e);return t.split(this.splitRegExp)},setText:function(e){if(!e&&e!==0){e=""}if(Array.isArray(e)){e=e.join("\n")}if(e!==this._text){this._text=e.toString();this.updateText()}return this},setStyle:function(e){return this.style.setStyle(e)},setFont:function(e){return this.style.setFont(e)},setFontFamily:function(e){return this.style.setFontFamily(e)},setFontSize:function(e){return this.style.setFontSize(e)},setFontStyle:function(e){return this.style.setFontStyle(e)},setFixedSize:function(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function(e){return this.style.setBackgroundColor(e)},setFill:function(e){return this.style.setFill(e)},setColor:function(e){return this.style.setColor(e)},setStroke:function(e,t){return this.style.setStroke(e,t)},setShadow:function(e,t,i,r,n,s){return this.style.setShadow(e,t,i,r,n,s)},setShadowOffset:function(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function(e){return this.style.setShadowColor(e)},setShadowBlur:function(e){return this.style.setShadowBlur(e)},setShadowStroke:function(e){return this.style.setShadowStroke(e)},setShadowFill:function(e){return this.style.setShadowFill(e)},setWordWrapWidth:function(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function(e){return this.style.setAlign(e)},setResolution:function(e){return this.style.setResolution(e)},setLineSpacing:function(e){this.lineSpacing=e;return this.updateText()},setPadding:function(e,t,i,r){if(typeof e==="object"){var n=e;var s=GetValue_1(n,"x",null);if(s!==null){e=s;i=s}else{e=GetValue_1(n,"left",0);i=GetValue_1(n,"right",e)}var a=GetValue_1(n,"y",null);if(a!==null){t=a;r=a}else{t=GetValue_1(n,"top",0);r=GetValue_1(n,"bottom",t)}}else{if(e===undefined){e=0}if(t===undefined){t=e}if(i===undefined){i=e}if(r===undefined){r=t}}this.padding.left=e;this.padding.top=t;this.padding.right=i;this.padding.bottom=r;return this.updateText()},setMaxLines:function(e){return this.style.setMaxLines(e)},updateText:function(){var e=this.canvas;var t=this.context;var i=this.style;var r=i.resolution;var n=i.metrics;i.syncFont(e,t);var s=this._text;if(i.wordWrapWidth||i.wordWrapCallback){s=this.runWordWrap(this._text)}var a=s.split(this.splitRegExp);var o=GetTextSize_1(this,n,a);var l=this.padding;var h;if(i.fixedWidth===0){this.width=o.width+l.left+l.right;h=o.width}else{this.width=i.fixedWidth;h=this.width-l.left-l.right;if(h<o.width){h=o.width}}if(i.fixedHeight===0){this.height=o.height+l.top+l.bottom}else{this.height=i.fixedHeight}var u=this.width;var c=this.height;this.updateDisplayOrigin();u*=r;c*=r;u=Math.max(u,1);c=Math.max(c,1);if(e.width!==u||e.height!==c){e.width=u;e.height=c;this.frame.setSize(u,c);i.syncFont(e,t)}else{t.clearRect(0,0,u,c)}t.save();t.scale(r,r);if(i.backgroundColor){t.fillStyle=i.backgroundColor;t.fillRect(0,0,u,c)}i.syncStyle(e,t);t.textBaseline="alphabetic";t.translate(l.left,l.top);var f;var d;for(var v=0;v<o.lines;v++){f=i.strokeThickness/2;d=i.strokeThickness/2+v*o.lineHeight+n.ascent;if(v>0){d+=o.lineSpacing*v}if(i.rtl){f=u-f}else if(i.align==="right"){f+=h-o.lineWidths[v]}else if(i.align==="center"){f+=(h-o.lineWidths[v])/2}else if(i.align==="justify"){var p=.85;if(o.lineWidths[v]/o.width>=p){var g=o.width-o.lineWidths[v];var m=t.measureText(" ").width;var _=a[v].trim();var y=_.split(" ");g+=(a[v].length-_.length)*m;var T=Math.floor(g/m);var x=0;while(T>0){y[x]+=" ";x=(x+1)%(y.length-1||1);--T}a[v]=y.join(" ")}}if(this.autoRound){f=Math.round(f);d=Math.round(d)}if(i.strokeThickness){this.style.syncShadow(t,i.shadowStroke);t.strokeText(a[v],f,d)}if(i.color){this.style.syncShadow(t,i.shadowFill);t.fillText(a[v],f,d)}}t.restore();if(this.renderer.gl){this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,true);this.frame.glTexture=this.frame.source.glTexture}this.dirty=true;var E=this.input;if(E&&!E.customHitArea){E.hitArea.width=this.width;E.hitArea.height=this.height}return this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(e){this.setText(e)}},toJSON:function(){var e=components.ToJSON(this);var t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};e.data=t;return e},preDestroy:function(){if(this.style.rtl){RemoveFromDOM_1(this.canvas)}CanvasPool_1.remove(this.canvas);this.texture.destroy()}});var Text_1=Text;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileSpriteWebGLRenderer=function(e,t,i,r,n){t.updateCanvas();var s=Utils.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,t.width,t.height,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*t.width,t.originY*t.height,0,0,t.width,t.height,s(t._tintTL,r.alpha*t._alphaTL),s(t._tintTR,r.alpha*t._alphaTR),s(t._tintBL,r.alpha*t._alphaBL),s(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,r,n)};var TileSpriteWebGLRenderer_1=TileSpriteWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileSpriteCanvasRenderer=function(e,t,i,r,n){t.updateCanvas();e.batchSprite(t,t.frame,r,n)};var TileSpriteCanvasRenderer_1=TileSpriteCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$c=NOOP_1;var renderCanvas$c=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$c=TileSpriteWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$c=TileSpriteCanvasRenderer_1}var TileSpriteRender={renderWebGL:renderWebGL$c,renderCanvas:renderCanvas$c};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$5=8;var TileSprite=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Crop,components.Depth,components.Flip,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Tint,components.Transform,components.Visible,TileSpriteRender],initialize:function e(t,i,r,n,s,a,o){var l=t.sys.game.renderer;GameObject_1.call(this,t,"TileSprite");var h=t.sys.textures.get(a);var u=h.get(o);if(!n||!s){n=u.width;s=u.height}else{n=Math.floor(n);s=Math.floor(s)}this._tilePosition=new Vector2_1;this._tileScale=new Vector2_1(1,1);this.dirty=false;this.renderer=l;this.canvas=CanvasPool_1.create(this,n,s);this.context=this.canvas.getContext("2d");this.displayTexture=h;this.displayFrame=u;this._crop=this.resetCropObject();this.texture=t.sys.textures.addCanvas(null,this.canvas,true);this.frame=this.texture.get();this.potWidth=GetPowerOfTwo_1(u.width);this.potHeight=GetPowerOfTwo_1(u.height);this.fillCanvas=CanvasPool_1.create2D(this,this.potWidth,this.potHeight);this.fillContext=this.fillCanvas.getContext("2d");this.fillPattern=null;this.setPosition(i,r);this.setSize(n,s);this.setFrame(o);this.setOriginFromFrame();this.initPipeline();t.sys.game.events.on(events$1.CONTEXT_RESTORED,(function(e){var t=e.gl;this.dirty=true;this.fillPattern=null;this.fillPattern=e.createTexture2D(0,t.LINEAR,t.LINEAR,t.REPEAT,t.REPEAT,t.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}),this)},setTexture:function(e,t){this.displayTexture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function(e){this.displayFrame=this.displayTexture.get(e);if(!this.displayFrame.cutWidth||!this.displayFrame.cutHeight){this.renderFlags&=~_FLAG$5}else{this.renderFlags|=_FLAG$5}this.dirty=true;this.updateTileTexture();return this},setTilePosition:function(e,t){if(e!==undefined){this.tilePositionX=e}if(t!==undefined){this.tilePositionY=t}return this},setTileScale:function(e,t){if(e===undefined){e=this.tileScaleX}if(t===undefined){t=e}this.tileScaleX=e;this.tileScaleY=t;return this},updateTileTexture:function(){if(!this.dirty||!this.renderer){return}var e=this.displayFrame;var t=this.fillContext;var i=this.fillCanvas;var r=this.potWidth;var n=this.potHeight;if(!this.renderer.gl){r=e.cutWidth;n=e.cutHeight}t.clearRect(0,0,r,n);i.width=r;i.height=n;t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,r,n);if(this.renderer.gl){this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern)}else{this.fillPattern=t.createPattern(i,"repeat")}this.updateCanvas();this.dirty=false},updateCanvas:function(){var e=this.canvas;if(e.width!==this.width||e.height!==this.height){e.width=this.width;e.height=this.height;this.frame.setSize(this.width,this.height);this.updateDisplayOrigin();this.dirty=true}if(!this.dirty||this.renderer&&this.renderer.gl){this.dirty=false;return}var t=this.context;if(!this.scene.sys.game.config.antialias){Smoothing_1.disable(t)}var i=this._tileScale.x;var r=this._tileScale.y;var n=this._tilePosition.x;var s=this._tilePosition.y;t.clearRect(0,0,this.width,this.height);t.save();t.scale(i,r);t.translate(-n,-s);t.fillStyle=this.fillPattern;t.fillRect(n,s,this.width/i,this.height/r);t.restore();this.dirty=false},preDestroy:function(){if(this.renderer&&this.renderer.gl){this.renderer.deleteTexture(this.fillPattern)}CanvasPool_1.remove(this.canvas);CanvasPool_1.remove(this.fillCanvas);this.fillPattern=null;this.fillContext=null;this.fillCanvas=null;this.displayTexture=null;this.displayFrame=null;this.texture.destroy();this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(e){this._tilePosition.x=e;this.dirty=true}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(e){this._tilePosition.y=e;this.dirty=true}},tileScaleX:{get:function(){return this._tileScale.x},set:function(e){this._tileScale.x=e;this.dirty=true}},tileScaleY:{get:function(){return this._tileScale.y},set:function(e){this._tileScale.y=e;this.dirty=true}}});var TileSprite_1=TileSprite;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shape=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Depth,components.GetBounds,components.Mask,components.Origin,components.Pipeline,components.ScrollFactor,components.Transform,components.Visible],initialize:function e(t,i,r){if(i===undefined){i="Shape"}GameObject_1.call(this,t,i);this.geom=r;this.pathData=[];this.pathIndexes=[];this.fillColor=16777215;this.fillAlpha=1;this.strokeColor=16777215;this.strokeAlpha=1;this.lineWidth=1;this.isFilled=false;this.isStroked=false;this.closePath=true;this._tempLine=new Line_1;this.initPipeline()},setFillStyle:function(e,t){if(t===undefined){t=1}if(e===undefined){this.isFilled=false}else{this.fillColor=e;this.fillAlpha=t;this.isFilled=true}return this},setStrokeStyle:function(e,t,i){if(i===undefined){i=1}if(e===undefined){this.isStroked=false}else{this.lineWidth=e;this.strokeColor=t;this.strokeAlpha=i;this.isStroked=true}return this},setClosePath:function(e){this.closePath=e;return this},preDestroy:function(){this.geom=null;this._tempLine=null;this.pathData=[];this.pathIndexes=[]}});var Shape_1=Shape;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FillPathWebGL=function(e,t,i,r,n,s){var a=Utils.getTintAppendFloatAlphaAndSwap(i.fillColor,i.fillAlpha*r);var o=i.pathData;var l=i.pathIndexes;for(var h=0;h<l.length;h+=3){var u=l[h]*2;var c=l[h+1]*2;var f=l[h+2]*2;var d=o[u+0]-n;var v=o[u+1]-s;var p=o[c+0]-n;var g=o[c+1]-s;var m=o[f+0]-n;var _=o[f+1]-s;var y=t.getX(d,v);var T=t.getY(d,v);var x=t.getX(p,g);var E=t.getY(p,g);var C=t.getX(m,_);var S=t.getY(m,_);e.setTexture2D();e.batchTri(y,T,x,E,C,S,0,0,1,1,a,a,a,e.tintEffect)}};var FillPathWebGL_1=FillPathWebGL;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StrokePathWebGL=function(e,t,i,r,n){var s=e.strokeTint;var a=Utils.getTintAppendFloatAlphaAndSwap(t.strokeColor,t.strokeAlpha*i);s.TL=a;s.TR=a;s.BL=a;s.BR=a;var o=t.pathData;var l=o.length-1;var h=t.lineWidth;var u=h/2;var c=o[0]-r;var f=o[1]-n;if(!t.closePath){l-=2}for(var d=2;d<l;d+=2){var v=o[d]-r;var p=o[d+1]-n;e.setTexture2D();e.batchLine(c,f,v,p,u,u,h,d-2,t.closePath?d===l-1:false);c=v;f=p}};var StrokePathWebGL_1=StrokePathWebGL;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ArcWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){FillPathWebGL_1(s,l,t,c,h,u)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var ArcWebGLRenderer_1=ArcWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FillStyleCanvas=function(e,t,i,r){var n=i?i:t.fillColor;var s=r?r:t.fillAlpha;var a=(n&16711680)>>>16;var o=(n&65280)>>>8;var l=n&255;e.fillStyle="rgba("+a+","+o+","+l+","+s+")"};var FillStyleCanvas_1=FillStyleCanvas;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LineStyleCanvas=function(e,t,i,r){var n=i?i:t.strokeColor;var s=r?r:t.strokeAlpha;var a=(n&16711680)>>>16;var o=(n&65280)>>>8;var l=n&255;e.strokeStyle="rgba("+a+","+o+","+l+","+s+")";e.lineWidth=t.lineWidth};var LineStyleCanvas_1=LineStyleCanvas;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ArcCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t.radius;s.beginPath();s.arc(a-t.originX*(a*2),a-t.originY*(a*2),a,DegToRad_1(t._startAngle),DegToRad_1(t._endAngle),t.anticlockwise);if(t.closePath){s.closePath()}if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var ArcCanvasRenderer_1=ArcCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$d=NOOP_1;var renderCanvas$d=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$d=ArcWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$d=ArcCanvasRenderer_1}var ArcRender={renderWebGL:renderWebGL$d,renderCanvas:renderCanvas$d};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Arc=new Class_1({Extends:Shape_1,Mixins:[ArcRender],initialize:function e(t,i,r,n,s,a,o,l,h){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=128}if(s===undefined){s=0}if(a===undefined){a=360}if(o===undefined){o=false}Shape_1.call(this,t,"Arc",new Circle_1(0,0,n));this._startAngle=s;this._endAngle=a;this._anticlockwise=o;this._iterations=.01;this.setPosition(i,r);var u=this.geom.radius*2;this.setSize(u,u);if(l!==undefined){this.setFillStyle(l,h)}this.updateDisplayOrigin();this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e;this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;var t=e*2;this.setSize(t,t);this.updateDisplayOrigin();this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e;this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e;this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e;this.updateData()}},setRadius:function(e){this.radius=e;return this},setIterations:function(e){if(e===undefined){e=.01}this.iterations=e;return this},setStartAngle:function(e,t){this._startAngle=e;if(t!==undefined){this._anticlockwise=t}return this.updateData()},setEndAngle:function(e,t){this._endAngle=e;if(t!==undefined){this._anticlockwise=t}return this.updateData()},updateData:function(){var e=this._iterations;var t=e;var i=this.geom.radius;var r=DegToRad_1(this._startAngle);var n=DegToRad_1(this._endAngle);var s=this._anticlockwise;var a=i;var o=i;n-=r;if(s){if(n<-_const$3.PI2){n=-_const$3.PI2}else if(n>0){n=-_const$3.PI2+n%_const$3.PI2}}else if(n>_const$3.PI2){n=_const$3.PI2}else if(n<0){n=_const$3.PI2+n%_const$3.PI2}var l=[a+Math.cos(r)*i,o+Math.sin(r)*i];var h;while(t<1){h=n*t+r;l.push(a+Math.cos(h)*i,o+Math.sin(h)*i);t+=e}h=n+r;l.push(a+Math.cos(h)*i,o+Math.sin(h)*i);l.push(a+Math.cos(r)*i,o+Math.sin(r)*i);this.pathIndexes=Earcut(l);this.pathData=l;return this}});var Arc_1=Arc;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CurveWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX+t._curveBounds.x;var u=t._displayOriginY+t._curveBounds.y;var c=r.alpha*t.alpha;if(t.isFilled){FillPathWebGL_1(s,l,t,c,h,u)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var CurveWebGLRenderer_1=CurveWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CurveCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX+t._curveBounds.x;var o=t._displayOriginY+t._curveBounds.y;var l=t.pathData;var h=l.length-1;var u=l[0]-a;var c=l[1]-o;s.beginPath();s.moveTo(u,c);if(!t.closePath){h-=2}for(var f=2;f<h;f+=2){var d=l[f]-a;var v=l[f+1]-o;s.lineTo(d,v)}if(t.closePath){s.closePath()}if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var CurveCanvasRenderer_1=CurveCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$e=NOOP_1;var renderCanvas$e=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$e=CurveWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$e=CurveCanvasRenderer_1}var CurveRender={renderWebGL:renderWebGL$e,renderCanvas:renderCanvas$e};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Curve$1=new Class_1({Extends:Shape_1,Mixins:[CurveRender],initialize:function e(t,i,r,n,s,a){if(i===undefined){i=0}if(r===undefined){r=0}Shape_1.call(this,t,"Curve",n);this._smoothness=32;this._curveBounds=new Rectangle_1;this.closePath=false;this.setPosition(i,r);if(s!==undefined){this.setFillStyle(s,a)}this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e;this.updateData()}},setSmoothness:function(e){this._smoothness=e;return this.updateData()},updateData:function(){var e=this._curveBounds;var t=this._smoothness;this.geom.getBounds(e,t);this.setSize(e.width,e.height);this.updateDisplayOrigin();var i=[];var r=this.geom.getPoints(t);for(var n=0;n<r.length;n++){i.push(r[n].x,r[n].y)}i.push(r[0].x,r[0].y);this.pathIndexes=Earcut(i);this.pathData=i;return this}});var Curve_1$1=Curve$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EllipseWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){FillPathWebGL_1(s,l,t,c,h,u)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var EllipseWebGLRenderer_1=EllipseWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var EllipseCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;var l=t.pathData;var h=l.length-1;var u=l[0]-a;var c=l[1]-o;s.beginPath();s.moveTo(u,c);if(!t.closePath){h-=2}for(var f=2;f<h;f+=2){var d=l[f]-a;var v=l[f+1]-o;s.lineTo(d,v)}s.closePath();if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var EllipseCanvasRenderer_1=EllipseCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$f=NOOP_1;var renderCanvas$f=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$f=EllipseWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$f=EllipseCanvasRenderer_1}var EllipseRender={renderWebGL:renderWebGL$f,renderCanvas:renderCanvas$f};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Ellipse$1=new Class_1({Extends:Shape_1,Mixins:[EllipseRender],initialize:function e(t,i,r,n,s,a,o){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=128}if(s===undefined){s=128}Shape_1.call(this,t,"Ellipse",new Ellipse_1(n/2,s/2,n,s));this._smoothness=64;this.setPosition(i,r);this.width=n;this.height=s;if(a!==undefined){this.setFillStyle(a,o)}this.updateDisplayOrigin();this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e;this.updateData()}},setSize:function(e,t){this.geom.setSize(e,t);return this.updateData()},setSmoothness:function(e){this._smoothness=e;return this.updateData()},updateData:function(){var e=[];var t=this.geom.getPoints(this._smoothness);for(var i=0;i<t.length;i++){e.push(t[i].x,t[i].y)}e.push(t[0].x,t[0].y);this.pathIndexes=Earcut(e);this.pathData=e;return this}});var Ellipse_1$1=Ellipse$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GridWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);l.translate(-t._displayOriginX,-t._displayOriginY);var h=r.alpha*t.alpha;var u=t.width;var c=t.height;var f=t.cellWidth;var d=t.cellHeight;var v=Math.ceil(u/f);var p=Math.ceil(c/d);var g=f;var m=d;var _=f-(v*f-u);var y=d-(p*d-c);var T;var x;var E=t.showCells;var C=t.showAltCells;var S=t.showOutline;var A=0;var b=0;var w=0;var P=0;var R=0;if(S){g--;m--;if(_===f){_--}if(y===d){y--}}if(E&&t.fillAlpha>0){T=s.fillTint;x=Utils.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*h);T.TL=x;T.TR=x;T.BL=x;T.BR=x;for(b=0;b<p;b++){if(C){w=b%2}for(A=0;A<v;A++){if(C&&w){w=0;continue}w++;P=A<v-1?g:_;R=b<p-1?m:y;s.setTexture2D();s.batchFillRect(A*f,b*d,P,R)}}}if(C&&t.altFillAlpha>0){T=s.fillTint;x=Utils.getTintAppendFloatAlphaAndSwap(t.altFillColor,t.altFillAlpha*h);T.TL=x;T.TR=x;T.BL=x;T.BR=x;for(b=0;b<p;b++){if(C){w=b%2}for(A=0;A<v;A++){if(C&&!w){w=1;continue}w=0;P=A<v-1?g:_;R=b<p-1?m:y;s.setTexture2D();s.batchFillRect(A*f,b*d,P,R)}}}if(S&&t.outlineFillAlpha>0){var O=s.strokeTint;var M=Utils.getTintAppendFloatAlphaAndSwap(t.outlineFillColor,t.outlineFillAlpha*h);O.TL=M;O.TR=M;O.BL=M;O.BR=M;for(A=1;A<v;A++){var F=A*f;s.setTexture2D();s.batchLine(F,0,F,c,1,1,1,0,false)}for(b=1;b<p;b++){var L=b*d;s.setTexture2D();s.batchLine(0,L,u,L,1,1,1,0,false)}}};var GridWebGLRenderer_1=GridWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GridCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=-t._displayOriginX;var o=-t._displayOriginY;var l=r.alpha*t.alpha;var h=t.width;var u=t.height;var c=t.cellWidth;var f=t.cellHeight;var d=Math.ceil(h/c);var v=Math.ceil(u/f);var p=c;var g=f;var m=c-(d*c-h);var _=f-(v*f-u);var y=t.showCells;var T=t.showAltCells;var x=t.showOutline;var E=0;var C=0;var S=0;var A=0;var b=0;if(x){p--;g--;if(m===c){m--}if(_===f){_--}}if(y&&t.fillAlpha>0){FillStyleCanvas_1(s,t);for(C=0;C<v;C++){if(T){S=C%2}for(E=0;E<d;E++){if(T&&S){S=0;continue}S++;A=E<d-1?p:m;b=C<v-1?g:_;s.fillRect(a+E*c,o+C*f,A,b)}}}if(T&&t.altFillAlpha>0){FillStyleCanvas_1(s,t,t.altFillColor,t.altFillAlpha*l);for(C=0;C<v;C++){if(T){S=C%2}for(E=0;E<d;E++){if(T&&!S){S=1;continue}S=0;A=E<d-1?p:m;b=C<v-1?g:_;s.fillRect(a+E*c,o+C*f,A,b)}}}if(x&&t.outlineFillAlpha>0){LineStyleCanvas_1(s,t,t.outlineFillColor,t.outlineFillAlpha*l);for(E=1;E<d;E++){var w=E*c;s.beginPath();s.moveTo(w+a,o);s.lineTo(w+a,u+o);s.stroke()}for(C=1;C<v;C++){var P=C*f;s.beginPath();s.moveTo(a,P+o);s.lineTo(a+h,P+o);s.stroke()}}s.restore()}};var GridCanvasRenderer_1=GridCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$g=NOOP_1;var renderCanvas$g=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$g=GridWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$g=GridCanvasRenderer_1}var GridRender={renderWebGL:renderWebGL$g,renderCanvas:renderCanvas$g};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Grid=new Class_1({Extends:Shape_1,Mixins:[GridRender],initialize:function e(t,i,r,n,s,a,o,l,h,u,c){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=128}if(s===undefined){s=128}if(a===undefined){a=32}if(o===undefined){o=32}Shape_1.call(this,t,"Grid",null);this.cellWidth=a;this.cellHeight=o;this.showCells=true;this.outlineFillColor=0;this.outlineFillAlpha=0;this.showOutline=true;this.showAltCells=false;this.setPosition(i,r);this.setSize(n,s);if(l!==undefined){this.setFillStyle(l,h)}if(u!==undefined){this.setOutlineStyle(u,c)}this.updateDisplayOrigin()},setFillStyle:function(e,t){if(t===undefined){t=1}if(e===undefined){this.showCells=false}else{this.fillColor=e;this.fillAlpha=t;this.showCells=true}return this},setAltFillStyle:function(e,t){if(t===undefined){t=1}if(e===undefined){this.showAltCells=false}else{this.altFillColor=e;this.altFillAlpha=t;this.showAltCells=true}return this},setOutlineStyle:function(e,t){if(t===undefined){t=1}if(e===undefined){this.showOutline=false}else{this.outlineFillColor=e;this.outlineFillAlpha=t;this.showOutline=true}return this}});var Grid_1=Grid;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoBoxWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t.width;var u=t.height;var c=h/2;var f=h/t.projection;var d=r.alpha*t.alpha;if(!t.isFilled){return}var v;var p;var g;var m;var _;var y;var T;var x;var E;if(t.showTop){v=Utils.getTintAppendFloatAlphaAndSwap(t.fillTop,d);p=l.getX(-c,-u);g=l.getY(-c,-u);m=l.getX(0,-f-u);_=l.getY(0,-f-u);y=l.getX(c,-u);T=l.getY(c,-u);x=l.getX(0,f-u);E=l.getY(0,f-u);s.setTexture2D();s.batchQuad(p,g,m,_,y,T,x,E,0,0,1,1,v,v,v,v,2)}if(t.showLeft){v=Utils.getTintAppendFloatAlphaAndSwap(t.fillLeft,d);p=l.getX(-c,0);g=l.getY(-c,0);m=l.getX(0,f);_=l.getY(0,f);y=l.getX(0,f-u);T=l.getY(0,f-u);x=l.getX(-c,-u);E=l.getY(-c,-u);s.setTexture2D();s.batchQuad(p,g,m,_,y,T,x,E,0,0,1,1,v,v,v,v,2)}if(t.showRight){v=Utils.getTintAppendFloatAlphaAndSwap(t.fillRight,d);p=l.getX(c,0);g=l.getY(c,0);m=l.getX(0,f);_=l.getY(0,f);y=l.getX(0,f-u);T=l.getY(0,f-u);x=l.getX(c,-u);E=l.getY(c,-u);s.setTexture2D();s.batchQuad(p,g,m,_,y,T,x,E,0,0,1,1,v,v,v,v,2)}};var IsoBoxWebGLRenderer_1=IsoBoxWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoBoxCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)&&t.isFilled){var a=t.width;var o=t.height;var l=a/2;var h=a/t.projection;if(t.showTop){FillStyleCanvas_1(s,t,t.fillTop);s.beginPath();s.moveTo(-l,-o);s.lineTo(0,-h-o);s.lineTo(l,-o);s.lineTo(l,-1);s.lineTo(0,h-1);s.lineTo(-l,-1);s.lineTo(-l,-o);s.fill()}if(t.showLeft){FillStyleCanvas_1(s,t,t.fillLeft);s.beginPath();s.moveTo(-l,0);s.lineTo(0,h);s.lineTo(0,h-o);s.lineTo(-l,-o);s.lineTo(-l,0);s.fill()}if(t.showRight){FillStyleCanvas_1(s,t,t.fillRight);s.beginPath();s.moveTo(l,0);s.lineTo(0,h);s.lineTo(0,h-o);s.lineTo(l,-o);s.lineTo(l,0);s.fill()}s.restore()}};var IsoBoxCanvasRenderer_1=IsoBoxCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$h=NOOP_1;var renderCanvas$h=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$h=IsoBoxWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$h=IsoBoxCanvasRenderer_1}var IsoBoxRender={renderWebGL:renderWebGL$h,renderCanvas:renderCanvas$h};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoBox=new Class_1({Extends:Shape_1,Mixins:[IsoBoxRender],initialize:function e(t,i,r,n,s,a,o,l){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=48}if(s===undefined){s=32}if(a===undefined){a=15658734}if(o===undefined){o=10066329}if(l===undefined){l=13421772}Shape_1.call(this,t,"IsoBox",null);this.projection=4;this.fillTop=a;this.fillLeft=o;this.fillRight=l;this.showTop=true;this.showLeft=true;this.showRight=true;this.isFilled=true;this.setPosition(i,r);this.setSize(n,s);this.updateDisplayOrigin()},setProjection:function(e){this.projection=e;return this},setFaces:function(e,t,i){if(e===undefined){e=true}if(t===undefined){t=true}if(i===undefined){i=true}this.showTop=e;this.showLeft=t;this.showRight=i;return this},setFillStyle:function(e,t,i){this.fillTop=e;this.fillLeft=t;this.fillRight=i;this.isFilled=true;return this}});var IsoBox_1=IsoBox;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoTriangleWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t.width;var u=t.height;var c=h/2;var f=h/t.projection;var d=t.isReversed;var v=r.alpha*t.alpha;if(!t.isFilled){return}var p;var g;var m;var _;var y;var T;var x;if(t.showTop&&d){p=Utils.getTintAppendFloatAlphaAndSwap(t.fillTop,v);g=l.getX(-c,-u);m=l.getY(-c,-u);_=l.getX(0,-f-u);y=l.getY(0,-f-u);T=l.getX(c,-u);x=l.getY(c,-u);var E=l.getX(0,f-u);var C=l.getY(0,f-u);s.setTexture2D();s.batchQuad(g,m,_,y,T,x,E,C,0,0,1,1,p,p,p,p,2)}if(t.showLeft){p=Utils.getTintAppendFloatAlphaAndSwap(t.fillLeft,v);if(d){g=l.getX(-c,-u);m=l.getY(-c,-u);_=l.getX(0,f);y=l.getY(0,f);T=l.getX(0,f-u);x=l.getY(0,f-u)}else{g=l.getX(-c,0);m=l.getY(-c,0);_=l.getX(0,f);y=l.getY(0,f);T=l.getX(0,f-u);x=l.getY(0,f-u)}s.batchTri(g,m,_,y,T,x,0,0,1,1,p,p,p,2)}if(t.showRight){p=Utils.getTintAppendFloatAlphaAndSwap(t.fillRight,v);if(d){g=l.getX(c,-u);m=l.getY(c,-u);_=l.getX(0,f);y=l.getY(0,f);T=l.getX(0,f-u);x=l.getY(0,f-u)}else{g=l.getX(c,0);m=l.getY(c,0);_=l.getX(0,f);y=l.getY(0,f);T=l.getX(0,f-u);x=l.getY(0,f-u)}s.setTexture2D();s.batchTri(g,m,_,y,T,x,0,0,1,1,p,p,p,2)}};var IsoTriangleWebGLRenderer_1=IsoTriangleWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoTriangleCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)&&t.isFilled){var a=t.width;var o=t.height;var l=a/2;var h=a/t.projection;var u=t.isReversed;if(t.showTop&&u){FillStyleCanvas_1(s,t,t.fillTop);s.beginPath();s.moveTo(-l,-o);s.lineTo(0,-h-o);s.lineTo(l,-o);s.lineTo(0,h-o);s.fill()}if(t.showLeft){FillStyleCanvas_1(s,t,t.fillLeft);s.beginPath();if(u){s.moveTo(-l,-o);s.lineTo(0,h);s.lineTo(0,h-o)}else{s.moveTo(-l,0);s.lineTo(0,h);s.lineTo(0,h-o)}s.fill()}if(t.showRight){FillStyleCanvas_1(s,t,t.fillRight);s.beginPath();if(u){s.moveTo(l,-o);s.lineTo(0,h);s.lineTo(0,h-o)}else{s.moveTo(l,0);s.lineTo(0,h);s.lineTo(0,h-o)}s.fill()}s.restore()}};var IsoTriangleCanvasRenderer_1=IsoTriangleCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$i=NOOP_1;var renderCanvas$i=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$i=IsoTriangleWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$i=IsoTriangleCanvasRenderer_1}var IsoTriangleRender={renderWebGL:renderWebGL$i,renderCanvas:renderCanvas$i};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsoTriangle=new Class_1({Extends:Shape_1,Mixins:[IsoTriangleRender],initialize:function e(t,i,r,n,s,a,o,l,h){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=48}if(s===undefined){s=32}if(a===undefined){a=false}if(o===undefined){o=15658734}if(l===undefined){l=10066329}if(h===undefined){h=13421772}Shape_1.call(this,t,"IsoTriangle",null);this.projection=4;this.fillTop=o;this.fillLeft=l;this.fillRight=h;this.showTop=true;this.showLeft=true;this.showRight=true;this.isReversed=a;this.isFilled=true;this.setPosition(i,r);this.setSize(n,s);this.updateDisplayOrigin()},setProjection:function(e){this.projection=e;return this},setReversed:function(e){this.isReversed=e;return this},setFaces:function(e,t,i){if(e===undefined){e=true}if(t===undefined){t=true}if(i===undefined){i=true}this.showTop=e;this.showLeft=t;this.showRight=i;return this},setFillStyle:function(e,t,i){this.fillTop=e;this.fillLeft=t;this.fillRight=i;this.isFilled=true;return this}});var IsoTriangle_1=IsoTriangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LineWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}var l=t._displayOriginX;var h=t._displayOriginY;var u=r.alpha*t.alpha;if(t.isStroked){var c=s.strokeTint;var f=Utils.getTintAppendFloatAlphaAndSwap(t.strokeColor,t.strokeAlpha*u);c.TL=f;c.TR=f;c.BL=f;c.BR=f;var d=t._startWidth;var v=t._endWidth;s.setTexture2D();s.batchLine(t.geom.x1-l,t.geom.y1-h,t.geom.x2-l,t.geom.y2-h,d,v,1,0,false,o,a)}};var LineWebGLRenderer_1=LineWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LineCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;if(t.isStroked){LineStyleCanvas_1(s,t);s.beginPath();s.moveTo(t.geom.x1-a,t.geom.y1-o);s.lineTo(t.geom.x2-a,t.geom.y2-o);s.stroke()}s.restore()}};var LineCanvasRenderer_1=LineCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$j=NOOP_1;var renderCanvas$j=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$j=LineWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$j=LineCanvasRenderer_1}var LineRender={renderWebGL:renderWebGL$j,renderCanvas:renderCanvas$j};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Line$1=new Class_1({Extends:Shape_1,Mixins:[LineRender],initialize:function e(t,i,r,n,s,a,o,l,h){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=0}if(a===undefined){a=128}if(o===undefined){o=0}Shape_1.call(this,t,"Line",new Line_1(n,s,a,o));var u=this.geom.right-this.geom.left;var c=this.geom.bottom-this.geom.top;this.lineWidth=1;this._startWidth=1;this._endWidth=1;this.setPosition(i,r);this.setSize(u,c);if(l!==undefined){this.setStrokeStyle(1,l,h)}this.updateDisplayOrigin()},setLineWidth:function(e,t){if(t===undefined){t=e}this._startWidth=e;this._endWidth=t;this.lineWidth=e;return this},setTo:function(e,t,i,r){this.geom.setTo(e,t,i,r);return this}});var Line_1$1=Line$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PolygonWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){FillPathWebGL_1(s,l,t,c,h,u)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var PolygonWebGLRenderer_1=PolygonWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PolygonCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;var l=t.pathData;var h=l.length-1;var u=l[0]-a;var c=l[1]-o;s.beginPath();s.moveTo(u,c);if(!t.closePath){h-=2}for(var f=2;f<h;f+=2){var d=l[f]-a;var v=l[f+1]-o;s.lineTo(d,v)}s.closePath();if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var PolygonCanvasRenderer_1=PolygonCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$k=NOOP_1;var renderCanvas$k=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$k=PolygonWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$k=PolygonCanvasRenderer_1}var PolygonRender={renderWebGL:renderWebGL$k,renderCanvas:renderCanvas$k};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetAABB=function(e,t){if(t===undefined){t=new Rectangle_1}var i=Infinity;var r=Infinity;var n=-i;var s=-r;var a;for(var o=0;o<e.points.length;o++){a=e.points[o];i=Math.min(i,a.x);r=Math.min(r,a.y);n=Math.max(n,a.x);s=Math.max(s,a.y)}t.x=i;t.y=r;t.width=n-i;t.height=s-r;return t};var GetAABB_1=GetAABB;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Contains$3=function(e,t,i){var r=false;for(var n=-1,s=e.points.length-1;++n<e.points.length;s=n){var a=e.points[n].x;var o=e.points[n].y;var l=e.points[s].x;var h=e.points[s].y;if((o<=i&&i<h||h<=i&&i<o)&&t<(l-a)*(i-o)/(h-o)+a){r=!r}}return r};var Contains_1$3=Contains$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Perimeter$1=function(e){var t=e.points;var i=0;for(var r=0;r<t.length;r++){var n=t[r];var s=t[(r+1)%t.length];var a=new Line_1(n.x,n.y,s.x,s.y);i+=Length_1(a)}return i};var Perimeter_1$1=Perimeter$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints$4=function(e,t,i,r){if(r===undefined){r=[]}var n=e.points;var s=Perimeter_1$1(e);if(!t){t=s/i}for(var a=0;a<t;a++){var o=s*(a/t);var l=0;for(var h=0;h<n.length;h++){var u=n[h];var c=n[(h+1)%n.length];var f=new Line_1(u.x,u.y,c.x,c.y);var d=Length_1(f);if(o<l||o>l+d){l+=d;continue}var v=f.getPoint((o-l)/d);r.push(v);break}}return r};var GetPoints_1$4=GetPoints$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Polygon=new Class_1({initialize:function e(t){this.type=_const$2.POLYGON;this.area=0;this.points=[];if(t){this.setTo(t)}},contains:function(e,t){return Contains_1$3(this,e,t)},setTo:function(e){this.area=0;this.points=[];if(typeof e==="string"){e=e.split(" ")}if(!Array.isArray(e)){return this}var t;var i=Number.MAX_VALUE;for(var r=0;r<e.length;r++){t={x:0,y:0};if(typeof e[r]==="number"||typeof e[r]==="string"){t.x=parseFloat(e[r]);t.y=parseFloat(e[r+1]);r++}else if(Array.isArray(e[r])){t.x=e[r][0];t.y=e[r][1]}else{t.x=e[r].x;t.y=e[r].y}this.points.push(t);if(t.y<i){i=t.y}}this.calculateArea(i);return this},calculateArea:function(){if(this.points.length<3){this.area=0;return this.area}var e=0;var t;var i;for(var r=0;r<this.points.length-1;r++){t=this.points[r];i=this.points[r+1];e+=(i.x-t.x)*(t.y+i.y)}t=this.points[0];i=this.points[this.points.length-1];e+=(t.x-i.x)*(i.y+t.y);this.area=-e*.5;return this.area},getPoints:function(e,t,i){return GetPoints_1$4(this,e,t,i)}});var Polygon_1=Polygon;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var copy=function(e,t){e[0]=t[0];e[1]=t[1];return e};var Smooth=function(e){var t;var i=[];var r=e.points;for(t=0;t<r.length;t++){i.push([r[t].x,r[t].y])}var n=[];if(i.length>0){n.push(copy([0,0],i[0]))}for(t=0;t<i.length-1;t++){var s=i[t];var a=i[t+1];var o=s[0];var l=s[1];var h=a[0];var u=a[1];n.push([.85*o+.15*h,.85*l+.15*u]);n.push([.15*o+.85*h,.15*l+.85*u])}if(i.length>1){n.push(copy([0,0],i[i.length-1]))}return e.setTo(n)};var Smooth_1=Smooth;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Polygon$1=new Class_1({Extends:Shape_1,Mixins:[PolygonRender],initialize:function e(t,i,r,n,s,a){if(i===undefined){i=0}if(r===undefined){r=0}Shape_1.call(this,t,"Polygon",new Polygon_1(n));var o=GetAABB_1(this.geom);this.setPosition(i,r);this.setSize(o.width,o.height);if(s!==undefined){this.setFillStyle(s,a)}this.updateDisplayOrigin();this.updateData()},smooth:function(e){if(e===undefined){e=1}for(var t=0;t<e;t++){Smooth_1(this.geom)}return this.updateData()},updateData:function(){var e=[];var t=this.geom.points;for(var i=0;i<t.length;i++){e.push(t[i].x,t[i].y)}e.push(t[0].x,t[0].y);this.pathIndexes=Earcut(e);this.pathData=e;return this}});var Polygon_1$1=Polygon$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RectangleWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){var f=s.fillTint;var d=Utils.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*c);f.TL=d;f.TR=d;f.BL=d;f.BR=d;s.setTexture2D();s.batchFillRect(-h,-u,t.width,t.height)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var RectangleWebGLRenderer_1=RectangleWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RectangleCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;if(t.isFilled){FillStyleCanvas_1(s,t);s.fillRect(-a,-o,t.width,t.height)}if(t.isStroked){LineStyleCanvas_1(s,t);s.beginPath();s.rect(-a,-o,t.width,t.height);s.stroke()}s.restore()}};var RectangleCanvasRenderer_1=RectangleCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$l=NOOP_1;var renderCanvas$l=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$l=RectangleWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$l=RectangleCanvasRenderer_1}var RectangleRender={renderWebGL:renderWebGL$l,renderCanvas:renderCanvas$l};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rectangle$1=new Class_1({Extends:Shape_1,Mixins:[RectangleRender],initialize:function e(t,i,r,n,s,a,o){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=128}if(s===undefined){s=128}Shape_1.call(this,t,"Rectangle",new Rectangle_1(0,0,n,s));this.setPosition(i,r);this.setSize(n,s);if(a!==undefined){this.setFillStyle(a,o)}this.updateDisplayOrigin();this.updateData()},updateData:function(){var e=[];var t=this.geom;var i=this._tempLine;t.getLineA(i);e.push(i.x1,i.y1,i.x2,i.y2);t.getLineB(i);e.push(i.x2,i.y2);t.getLineC(i);e.push(i.x2,i.y2);t.getLineD(i);e.push(i.x2,i.y2);this.pathData=e;return this}});var Rectangle_1$1=Rectangle$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StarWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){FillPathWebGL_1(s,l,t,c,h,u)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var StarWebGLRenderer_1=StarWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StarCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;var l=t.pathData;var h=l.length-1;var u=l[0]-a;var c=l[1]-o;s.beginPath();s.moveTo(u,c);if(!t.closePath){h-=2}for(var f=2;f<h;f+=2){var d=l[f]-a;var v=l[f+1]-o;s.lineTo(d,v)}s.closePath();if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var StarCanvasRenderer_1=StarCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$m=NOOP_1;var renderCanvas$m=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$m=StarWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$m=StarCanvasRenderer_1}var StarRender={renderWebGL:renderWebGL$m,renderCanvas:renderCanvas$m};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Star=new Class_1({Extends:Shape_1,Mixins:[StarRender],initialize:function e(t,i,r,n,s,a,o,l){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=5}if(s===undefined){s=32}if(a===undefined){a=64}Shape_1.call(this,t,"Star",null);this._points=n;this._innerRadius=s;this._outerRadius=a;this.setPosition(i,r);this.setSize(a*2,a*2);if(o!==undefined){this.setFillStyle(o,l)}this.updateDisplayOrigin();this.updateData()},setPoints:function(e){this._points=e;return this.updateData()},setInnerRadius:function(e){this._innerRadius=e;return this.updateData()},setOuterRadius:function(e){this._outerRadius=e;return this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e;this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e;this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e;this.updateData()}},updateData:function(){var e=[];var t=this._points;var i=this._innerRadius;var r=this._outerRadius;var n=Math.PI/2*3;var s=Math.PI/t;var a=r;var o=r;e.push(a,o+-r);for(var l=0;l<t;l++){e.push(a+Math.cos(n)*r,o+Math.sin(n)*r);n+=s;e.push(a+Math.cos(n)*i,o+Math.sin(n)*i);n+=s}e.push(a,o+-r);this.pathIndexes=Earcut(e);this.pathData=e;return this}});var Star_1=Star;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Contains$4=function(e,t,i){var r=e.x3-e.x1;var n=e.y3-e.y1;var s=e.x2-e.x1;var a=e.y2-e.y1;var o=t-e.x1;var l=i-e.y1;var h=r*r+n*n;var u=r*s+n*a;var c=r*o+n*l;var f=s*s+a*a;var d=s*o+a*l;var v=h*f-u*u;var p=v===0?0:1/v;var g=(f*c-u*d)*p;var m=(h*d-u*c)*p;return g>=0&&m>=0&&g+m<1};var Contains_1$4=Contains$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoint$4=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.getLineA();var n=e.getLineB();var s=e.getLineC();if(t<=0||t>=1){i.x=r.x1;i.y=r.y1;return i}var a=Length_1(r);var o=Length_1(n);var l=Length_1(s);var h=a+o+l;var u=h*t;var c=0;if(u<a){c=u/a;i.x=r.x1+(r.x2-r.x1)*c;i.y=r.y1+(r.y2-r.y1)*c}else if(u>a+o){u-=a+o;c=u/l;i.x=s.x1+(s.x2-s.x1)*c;i.y=s.y1+(s.y2-s.y1)*c}else{u-=a;c=u/o;i.x=n.x1+(n.x2-n.x1)*c;i.y=n.y1+(n.y2-n.y1)*c}return i};var GetPoint_1$4=GetPoint$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetPoints$5=function(e,t,i,r){if(r===undefined){r=[]}var n=e.getLineA();var s=e.getLineB();var a=e.getLineC();var o=Length_1(n);var l=Length_1(s);var h=Length_1(a);var u=o+l+h;if(!t){t=u/i}for(var c=0;c<t;c++){var f=u*(c/t);var d=0;var v=new Point_1;if(f<o){d=f/o;v.x=n.x1+(n.x2-n.x1)*d;v.y=n.y1+(n.y2-n.y1)*d}else if(f>o+l){f-=o+l;d=f/h;v.x=a.x1+(a.x2-a.x1)*d;v.y=a.y1+(a.y2-a.y1)*d}else{f-=o;d=f/l;v.x=s.x1+(s.x2-s.x1)*d;v.y=s.y1+(s.y2-s.y1)*d}r.push(v)}return r};var GetPoints_1$5=GetPoints$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Triangle=new Class_1({initialize:function e(t,i,r,n,s,a){if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=0}if(a===undefined){a=0}this.type=_const$2.TRIANGLE;this.x1=t;this.y1=i;this.x2=r;this.y2=n;this.x3=s;this.y3=a},contains:function(e,t){return Contains_1$4(this,e,t)},getPoint:function(e,t){return GetPoint_1$4(this,e,t)},getPoints:function(e,t,i){return GetPoints_1$5(this,e,t,i)},getRandomPoint:function(e){return Random_1$4(this,e)},setTo:function(e,t,i,r,n,s){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=0}this.x1=e;this.y1=t;this.x2=i;this.y2=r;this.x3=n;this.y3=s;return this},getLineA:function(e){if(e===undefined){e=new Line_1}e.setTo(this.x1,this.y1,this.x2,this.y2);return e},getLineB:function(e){if(e===undefined){e=new Line_1}e.setTo(this.x2,this.y2,this.x3,this.y3);return e},getLineC:function(e){if(e===undefined){e=new Line_1}e.setTo(this.x3,this.y3,this.x1,this.y1);return e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var t=0;if(this.x1<=this.x2&&this.x1<=this.x3){t=this.x1-e}else if(this.x2<=this.x1&&this.x2<=this.x3){t=this.x2-e}else{t=this.x3-e}this.x1-=t;this.x2-=t;this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var t=0;if(this.x1>=this.x2&&this.x1>=this.x3){t=this.x1-e}else if(this.x2>=this.x1&&this.x2>=this.x3){t=this.x2-e}else{t=this.x3-e}this.x1-=t;this.x2-=t;this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var t=0;if(this.y1<=this.y2&&this.y1<=this.y3){t=this.y1-e}else if(this.y2<=this.y1&&this.y2<=this.y3){t=this.y2-e}else{t=this.y3-e}this.y1-=t;this.y2-=t;this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var t=0;if(this.y1>=this.y2&&this.y1>=this.y3){t=this.y1-e}else if(this.y2>=this.y1&&this.y2>=this.y3){t=this.y2-e}else{t=this.y3-e}this.y1-=t;this.y2-=t;this.y3-=t}}});var Triangle_1=Triangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;e.setPipeline(s);o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);var h=t._displayOriginX;var u=t._displayOriginY;var c=r.alpha*t.alpha;if(t.isFilled){var f=s.fillTint;var d=Utils.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*c);f.TL=d;f.TR=d;f.BL=d;f.BR=d;var v=t.geom.x1-h;var p=t.geom.y1-u;var g=t.geom.x2-h;var m=t.geom.y2-u;var _=t.geom.x3-h;var y=t.geom.y3-u;s.setTexture2D();s.batchFillTriangle(v,p,g,m,_,y,o,a)}if(t.isStroked){StrokePathWebGL_1(s,t,c,h,u)}};var TriangleWebGLRenderer_1=TriangleWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleCanvasRenderer=function(e,t,i,r,n){var s=e.currentContext;if(SetTransform_1(e,s,t,r,n)){var a=t._displayOriginX;var o=t._displayOriginY;var l=t.geom.x1-a;var h=t.geom.y1-o;var u=t.geom.x2-a;var c=t.geom.y2-o;var f=t.geom.x3-a;var d=t.geom.y3-o;s.beginPath();s.moveTo(l,h);s.lineTo(u,c);s.lineTo(f,d);s.closePath();if(t.isFilled){FillStyleCanvas_1(s,t);s.fill()}if(t.isStroked){LineStyleCanvas_1(s,t);s.stroke()}s.restore()}};var TriangleCanvasRenderer_1=TriangleCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$n=NOOP_1;var renderCanvas$n=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$n=TriangleWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$n=TriangleCanvasRenderer_1}var TriangleRender={renderWebGL:renderWebGL$n,renderCanvas:renderCanvas$n};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Triangle$1=new Class_1({Extends:Shape_1,Mixins:[TriangleRender],initialize:function e(t,i,r,n,s,a,o,l,h,u,c){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=128}if(a===undefined){a=64}if(o===undefined){o=0}if(l===undefined){l=128}if(h===undefined){h=128}Shape_1.call(this,t,"Triangle",new Triangle_1(n,s,a,o,l,h));var f=this.geom.right-this.geom.left;var d=this.geom.bottom-this.geom.top;this.setPosition(i,r);this.setSize(f,d);if(u!==undefined){this.setFillStyle(u,c)}this.updateDisplayOrigin();this.updateData()},setTo:function(e,t,i,r,n,s){this.geom.setTo(e,t,i,r,n,s);return this.updateData()},updateData:function(){var e=[];var t=this.geom;var i=this._tempLine;t.getLineA(i);e.push(i.x1,i.y1,i.x2,i.y2);t.getLineB(i);e.push(i.x2,i.y2);t.getLineC(i);e.push(i.x2,i.y2);this.pathData=e;return this}});var Triangle_1$1=Triangle$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("blitter",(function(e,t,i,r){return this.displayList.add(new Blitter_1(this.scene,e,t,i,r))}));var BlitterFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("container",(function(e,t,i){return this.displayList.add(new Container_1(this.scene,e,t,i))}));var ContainerFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("dom",(function(e,t,i,r,n){var s=new DOMElement_1(this.scene,e,t,i,r,n);this.displayList.add(s);this.updateList.add(s);return s}));var DOMElementFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("dynamicBitmapText",(function(e,t,i,r,n){return this.displayList.add(new DynamicBitmapText_1(this.scene,e,t,i,r,n))}));var DynamicBitmapTextFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("extern",(function(){var e=new Extern_1(this.scene);this.displayList.add(e);this.updateList.add(e);return e}));var ExternFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("graphics",(function(e){return this.displayList.add(new Graphics_1(this.scene,e))}));var GraphicsFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("group",(function(e,t){return this.updateList.add(new Group_1(this.scene,e,t))}));var GroupFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("image",(function(e,t,i,r){return this.displayList.add(new Image_1$1(this.scene,e,t,i,r))}));var ImageFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("particles",(function(e,t,i){var r=new ParticleEmitterManager_1(this.scene,e,t,i);this.displayList.add(r);this.updateList.add(r);return r}));var ParticleManagerFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("follower",(function(e,t,i,r,n){var s=new PathFollower_1$1(this.scene,e,t,i,r,n);this.displayList.add(s);this.updateList.add(s);return s}));var PathFollowerFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("renderTexture",(function(e,t,i,r,n,s){return this.displayList.add(new RenderTexture_1(this.scene,e,t,i,r,n,s))}));var RenderTextureFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("sprite",(function(e,t,i,r){var n=new Sprite_1(this.scene,e,t,i,r);this.displayList.add(n);this.updateList.add(n);return n}));var SpriteFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("bitmapText",(function(e,t,i,r,n,s){return this.displayList.add(new BitmapText_1(this.scene,e,t,i,r,n,s))}));var BitmapTextFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("text",(function(e,t,i,r){return this.displayList.add(new Text_1(this.scene,e,t,i,r))}));var TextFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("tileSprite",(function(e,t,i,r,n,s){return this.displayList.add(new TileSprite_1(this.scene,e,t,i,r,n,s))}));var TileSpriteFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("zone",(function(e,t,i,r){return this.displayList.add(new Zone_1(this.scene,e,t,i,r))}));var ZoneFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("arc",(function(e,t,i,r,n,s,a,o){return this.displayList.add(new Arc_1(this.scene,e,t,i,r,n,s,a,o))}));GameObjectFactory_1.register("circle",(function(e,t,i,r,n){return this.displayList.add(new Arc_1(this.scene,e,t,i,0,360,false,r,n))}));var ArcFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("curve",(function(e,t,i,r,n){return this.displayList.add(new Curve_1$1(this.scene,e,t,i,r,n))}));var CurveFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("ellipse",(function(e,t,i,r,n,s){return this.displayList.add(new Ellipse_1$1(this.scene,e,t,i,r,n,s))}));var EllipseFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("grid",(function(e,t,i,r,n,s,a,o,l,h){return this.displayList.add(new Grid_1(this.scene,e,t,i,r,n,s,a,o,l,h))}));var GridFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("isobox",(function(e,t,i,r,n,s,a){return this.displayList.add(new IsoBox_1(this.scene,e,t,i,r,n,s,a))}));var IsoBoxFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("isotriangle",(function(e,t,i,r,n,s,a,o){return this.displayList.add(new IsoTriangle_1(this.scene,e,t,i,r,n,s,a,o))}));var IsoTriangleFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("line",(function(e,t,i,r,n,s,a,o){return this.displayList.add(new Line_1$1(this.scene,e,t,i,r,n,s,a,o))}));var LineFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("polygon",(function(e,t,i,r,n){return this.displayList.add(new Polygon_1$1(this.scene,e,t,i,r,n))}));var PolygonFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("rectangle",(function(e,t,i,r,n,s){return this.displayList.add(new Rectangle_1$1(this.scene,e,t,i,r,n,s))}));var RectangleFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("star",(function(e,t,i,r,n,s,a){return this.displayList.add(new Star_1(this.scene,e,t,i,r,n,s,a))}));var StarFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("triangle",(function(e,t,i,r,n,s,a,o,l,h){return this.displayList.add(new Triangle_1$1(this.scene,e,t,i,r,n,s,a,o,l,h))}));var TriangleFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("blitter",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=new Blitter_1(this.scene,0,0,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,n,e);return n}));var BlitterCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Felipe Alfonso <@bitnenfer>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("container",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"x",0);var r=GetAdvancedValue_1(e,"y",0);var n=new Container_1(this.scene,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,n,e);return n}));var ContainerCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("dynamicBitmapText",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"font","");var r=GetAdvancedValue_1(e,"text","");var n=GetAdvancedValue_1(e,"size",false);var s=new DynamicBitmapText_1(this.scene,0,0,i,r,n);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,s,e);return s}));var DynamicBitmapTextCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("graphics",(function(e,t){if(e===undefined){e={}}if(t!==undefined){e.add=t}var i=new Graphics_1(this.scene,e);if(e.add){this.scene.sys.displayList.add(i)}return i}));var GraphicsCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("group",(function(e){return new Group_1(this.scene,null,e)}));var GroupCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("image",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=new Image_1$1(this.scene,0,0,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,n,e);return n}));var ImageCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("particles",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=GetFastValue_1(e,"emitters",null);var s=new ParticleEmitterManager_1(this.scene,i,r,n);if(t!==undefined){e.add=t}var a=GetFastValue_1(e,"add",false);if(a){this.displayList.add(s)}this.updateList.add(s);return s}));var ParticleManagerCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("renderTexture",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"x",0);var r=GetAdvancedValue_1(e,"y",0);var n=GetAdvancedValue_1(e,"width",32);var s=GetAdvancedValue_1(e,"height",32);var a=GetAdvancedValue_1(e,"key",undefined);var o=GetAdvancedValue_1(e,"frame",undefined);var l=new RenderTexture_1(this.scene,i,r,n,s,a,o);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,l,e);return l}));var RenderTextureCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("sprite",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=new Sprite_1(this.scene,0,0,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,n,e);BuildGameObjectAnimation_1(n,e);return n}));var SpriteCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("bitmapText",(function(e,t){if(e===undefined){e={}}var i=GetValue_1(e,"font","");var r=GetAdvancedValue_1(e,"text","");var n=GetAdvancedValue_1(e,"size",false);var s=GetValue_1(e,"align",0);var a=new BitmapText_1(this.scene,0,0,i,r,n,s);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,a,e);return a}));var BitmapTextCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("text",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"text","");var r=GetAdvancedValue_1(e,"style",null);var n=GetAdvancedValue_1(e,"padding",null);if(n!==null){r.padding=n}var s=new Text_1(this.scene,0,0,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,s,e);s.autoRound=GetAdvancedValue_1(e,"autoRound",true);s.resolution=GetAdvancedValue_1(e,"resolution",1);return s}));var TextCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("tileSprite",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"x",0);var r=GetAdvancedValue_1(e,"y",0);var n=GetAdvancedValue_1(e,"width",512);var s=GetAdvancedValue_1(e,"height",512);var a=GetAdvancedValue_1(e,"key","");var o=GetAdvancedValue_1(e,"frame","");var l=new TileSprite_1(this.scene,i,r,n,s,a,o);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,l,e);return l}));var TileSpriteCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("zone",(function(e){var t=GetAdvancedValue_1(e,"x",0);var i=GetAdvancedValue_1(e,"y",0);var r=GetAdvancedValue_1(e,"width",1);var n=GetAdvancedValue_1(e,"height",r);return new Zone_1(this.scene,t,i,r,n)}));var ZoneCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MeshWebGLRenderer=function(e,t,i,r,n){var s=this.pipeline;e.setPipeline(s,t);var a=s._tempMatrix1;var o=s._tempMatrix2;var l=s._tempMatrix3;o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y;a.multiply(o,l)}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY;a.multiply(o,l)}var h=t.frame;var u=h.glTexture;var c=t.vertices;var f=t.uv;var d=t.colors;var v=t.alphas;var p=c.length;var g=Math.floor(p*.5);if(s.vertexCount+g>s.vertexCapacity){s.flush()}s.setTexture2D(u,0);var m=s.vertexViewF32;var _=s.vertexViewU32;var y=s.vertexCount*s.vertexComponentCount-1;var T=0;var x=t.tintFill;for(var E=0;E<p;E+=2){var C=c[E+0];var S=c[E+1];var A=C*l.a+S*l.c+l.e;var b=C*l.b+S*l.d+l.f;if(r.roundPixels){A=Math.round(A);b=Math.round(b)}m[++y]=A;m[++y]=b;m[++y]=f[E+0];m[++y]=f[E+1];m[++y]=x;_[++y]=Utils.getTintAppendFloatAlpha(d[T],r.alpha*v[T]);T++}s.vertexCount+=g};var MeshWebGLRenderer_1=MeshWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MeshCanvasRenderer=function(){};var MeshCanvasRenderer_1=MeshCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$o=NOOP_1;var renderCanvas$o=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$o=MeshWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$o=MeshCanvasRenderer_1}var MeshRender={renderWebGL:renderWebGL$o,renderCanvas:renderCanvas$o};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Mesh=new Class_1({Extends:GameObject_1,Mixins:[components.BlendMode,components.Depth,components.GetBounds,components.Mask,components.Pipeline,components.Size,components.Texture,components.Transform,components.Visible,components.ScrollFactor,MeshRender],initialize:function e(t,i,r,n,s,a,o,l,h){GameObject_1.call(this,t,"Mesh");if(n.length!==s.length){throw new Error("Mesh Vertex count must match UV count")}var u=n.length/2|0;if(a.length>0&&a.length<u){throw new Error("Mesh Color count must match Vertex count")}if(o.length>0&&o.length<u){throw new Error("Mesh Alpha count must match Vertex count")}var c;if(a.length===0){for(c=0;c<u;++c){a[c]=16777215}}if(o.length===0){for(c=0;c<u;++c){o[c]=1}}this.vertices=new Float32Array(n);this.uv=new Float32Array(s);this.colors=new Uint32Array(a);this.alphas=new Float32Array(o);this.tintFill=false;this.setTexture(l,h);this.setPosition(i,r);this.setSizeToFrame();this.initPipeline()},setAlpha:NOOP_1});var Mesh_1=Mesh;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Quad=new Class_1({Extends:Mesh_1,initialize:function e(t,i,r,n,s){var a=[0,0,0,0,0,0,0,0,0,0,0,0];var o=[0,0,0,1,1,1,0,0,1,1,1,0];var l=[16777215,16777215,16777215,16777215,16777215,16777215];var h=[1,1,1,1,1,1];Mesh_1.call(this,t,i,r,a,o,l,h,n,s);this.resetPosition()},setFrame:function(e){this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=~8}else{this.renderFlags|=8}e=this.frame;this.uv[0]=e.u0;this.uv[1]=e.v0;this.uv[2]=e.u0;this.uv[3]=e.v1;this.uv[4]=e.u1;this.uv[5]=e.v1;this.uv[6]=e.u0;this.uv[7]=e.v0;this.uv[8]=e.u1;this.uv[9]=e.v1;this.uv[10]=e.u1;this.uv[11]=e.v0;return this},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(e){this.vertices[0]=e-this.x;this.vertices[6]=e-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(e){this.vertices[1]=e-this.y;this.vertices[7]=e-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(e){this.vertices[10]=e-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(e){this.vertices[11]=e-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(e){this.vertices[2]=e-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(e){this.vertices[3]=e-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(e){this.vertices[4]=e-this.x;this.vertices[8]=e-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(e){this.vertices[5]=e-this.y;this.vertices[9]=e-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(e){this.alphas[0]=e;this.alphas[3]=e}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(e){this.alphas[5]=e}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(e){this.alphas[1]=e}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(e){this.alphas[2]=e;this.alphas[4]=e}},topLeftColor:{get:function(){return this.colors[0]},set:function(e){this.colors[0]=e;this.colors[3]=e}},topRightColor:{get:function(){return this.colors[5]},set:function(e){this.colors[5]=e}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(e){this.colors[1]=e}},bottomRightColor:{get:function(){return this.colors[2]},set:function(e){this.colors[2]=e;this.colors[4]=e}},setTopLeft:function(e,t){this.topLeftX=e;this.topLeftY=t;return this},setTopRight:function(e,t){this.topRightX=e;this.topRightY=t;return this},setBottomLeft:function(e,t){this.bottomLeftX=e;this.bottomLeftY=t;return this},setBottomRight:function(e,t){this.bottomRightX=e;this.bottomRightY=t;return this},resetPosition:function(){var e=this.x;var t=this.y;var i=Math.floor(this.width/2);var r=Math.floor(this.height/2);this.setTopLeft(e-i,t-r);this.setTopRight(e+i,t-r);this.setBottomLeft(e-i,t+r);this.setBottomRight(e+i,t+r);return this},resetAlpha:function(){var e=this.alphas;e[0]=1;e[1]=1;e[2]=1;e[3]=1;e[4]=1;e[5]=1;return this},resetColors:function(){var e=this.colors;e[0]=16777215;e[1]=16777215;e[2]=16777215;e[3]=16777215;e[4]=16777215;e[5]=16777215;return this},reset:function(){this.resetPosition();this.resetAlpha();return this.resetColors()}});var Quad_1=Quad;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetValue=function(e,t,i){if(!e||typeof e==="number"){return false}else if(e.hasOwnProperty(t)){e[t]=i;return true}else if(t.indexOf(".")!==-1){var r=t.split(".");var n=e;var s=e;for(var a=0;a<r.length;a++){if(n.hasOwnProperty(r[a])){s=n;n=n[r[a]]}else{return false}}s[r[r.length-1]]=i;return true}return false};var SetValue_1=SetValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ShaderWebGLRenderer=function(e,t,i,r,n){if(!t.shader){return}var s=e.currentPipeline;e.clearPipeline();if(t.renderToTexture){t.load();t.flush()}else{var a=t._tempMatrix1;var o=t._tempMatrix2;var l=t._tempMatrix3;o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);a.copyFrom(r.matrix);if(n){a.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);o.e=t.x;o.f=t.y}else{o.e-=r.scrollX*t.scrollFactorX;o.f-=r.scrollY*t.scrollFactorY}a.multiply(o,l);if(e.width!==t._rendererWidth||e.height!==t._rendererHeight){t.projOrtho(0,e.width,e.height,0)}t.load(l.matrix);t.flush()}e.rebindPipeline(s)};var ShaderWebGLRenderer_1=ShaderWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ShaderCanvasRenderer=function(){};var ShaderCanvasRenderer_1=ShaderCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$p=NOOP_1;var renderCanvas$p=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$p=ShaderWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$p=ShaderCanvasRenderer_1}var ShaderRender={renderWebGL:renderWebGL$p,renderCanvas:renderCanvas$p};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shader=new Class_1({Extends:GameObject_1,Mixins:[components.ComputedSize,components.Depth,components.GetBounds,components.Mask,components.Origin,components.ScrollFactor,components.Transform,components.Visible,ShaderRender],initialize:function e(t,i,r,n,s,a,o){if(r===undefined){r=0}if(n===undefined){n=0}if(s===undefined){s=128}if(a===undefined){a=128}GameObject_1.call(this,t,"Shader");this.blendMode=-1;var l=t.sys.renderer;this.renderer=l;this.gl=l.gl;this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2));this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=null;this.bytes=new Uint8Array(this.vertexData);this.vertexViewF32=new Float32Array(this.vertexData);this._tempMatrix1=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;this._tempMatrix3=new TransformMatrix_1;this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.uniforms={};this.pointer=null;this._rendererWidth=l.width;this._rendererHeight=l.height;this._textureCount=0;this.framebuffer=null;this.glTexture=null;this.renderToTexture=false;this.texture=null;this._savedKey="";this.setPosition(r,n);this.setSize(s,a);this.setOrigin(.5,.5);this.setShader(i,o)},willRender:function(e){if(this.renderToTexture){return true}else{return!(GameObject_1.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&e.id)}},setRenderToTexture:function(e,t){if(t===undefined){t=false}if(!this.renderToTexture){var i=this.width;var r=this.height;var n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,r,0);this.glTexture.flipY=t;this.framebuffer=n.createFramebuffer(i,r,this.glTexture,false);this._rendererWidth=i;this._rendererHeight=r;this.renderToTexture=true;this.projOrtho(0,this.width,this.height,0);if(e){this._savedKey=e;this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,i,r)}}return this},setShader:function(e,t){if(t===undefined){t=[]}if(typeof e==="string"){var i=this.scene.sys.cache.shader;if(!i.has(e)){console.warn("Shader missing: "+e);return this}this.shader=i.get(e)}else{this.shader=e}var r=this.gl;var n=this.renderer;if(this.program){r.deleteProgram(this.program)}var s=n.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.setMatrix4(s,"uViewMatrix",false,this.viewMatrix);n.setMatrix4(s,"uProjectionMatrix",false,this.projectionMatrix);n.setFloat2(s,"uResolution",this.width,this.height);this.program=s;var a=new Date;var o={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours()*60*60+a.getMinutes()*60+a.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:true}}};if(this.shader.uniforms){this.uniforms=Extend_1(true,{},this.shader.uniforms,o)}else{this.uniforms=o}for(var l=0;l<4;l++){if(t[l]){this.setSampler2D("iChannel"+l,t[l],l)}}this.initUniforms();this.projOrtho(0,this._rendererWidth,this._rendererHeight,0);return this},setPointer:function(e){this.pointer=e;return this},projOrtho:function(e,t,i,r){var n=-1e3;var s=1e3;var a=1/(e-t);var o=1/(i-r);var l=1/(n-s);var h=this.projectionMatrix;h[0]=-2*a;h[5]=-2*o;h[10]=2*l;h[12]=(e+t)*a;h[13]=(r+i)*o;h[14]=(s+n)*l;var u=this.program;this.renderer.setMatrix4(u,"uProjectionMatrix",false,this.projectionMatrix);this._rendererWidth=t;this._rendererHeight=i},initUniforms:function(){var e=this.gl;var t=this.renderer.glFuncMap;var i=this.program;this._textureCount=0;for(var r in this.uniforms){var n=this.uniforms[r];var s=n.type;var a=t[s];n.uniformLocation=e.getUniformLocation(i,r);if(s!=="sampler2D"){n.glMatrix=a.matrix;n.glValueLength=a.length;n.glFunc=a.func}}},setSampler2DBuffer:function(e,t,i,r,n,s){if(n===undefined){n=0}if(s===undefined){s={}}var a=this.uniforms[e];a.value=t;s.width=i;s.height=r;a.textureData=s;this._textureCount=n;this.initSampler2D(a);return this},setSampler2D:function(e,t,i,r){if(i===undefined){i=0}var n=this.scene.sys.textures;if(n.exists(t)){var s=n.getFrame(t);var a=this.uniforms[e];var o=s.source;a.textureKey=t;a.source=o.image;a.value=s.glTexture;if(o.isGLTexture){if(!r){r={}}r.width=o.width;r.height=o.height}if(r){a.textureData=r}this._textureCount=i;this.initSampler2D(a)}return this},setUniform:function(e,t){SetValue_1(this.uniforms,e,t);return this},getUniform:function(e){return GetFastValue_1(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(!e.value){return}var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount);t.bindTexture(t.TEXTURE_2D,e.value);var i=e.textureData;if(i){var r=t[GetFastValue_1(i,"magFilter","linear").toUpperCase()];var n=t[GetFastValue_1(i,"minFilter","linear").toUpperCase()];var s=t[GetFastValue_1(i,"wrapS","repeat").toUpperCase()];var a=t[GetFastValue_1(i,"wrapT","repeat").toUpperCase()];var o=t[GetFastValue_1(i,"format","rgba").toUpperCase()];if(i.repeat){s=t.REPEAT;a=t.REPEAT}t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY);if(i.width){var l=GetFastValue_1(i,"width",512);var h=GetFastValue_1(i,"height",2);var u=GetFastValue_1(i,"border",0);t.texImage2D(t.TEXTURE_2D,0,o,l,h,u,o,t.UNSIGNED_BYTE,null)}else{t.texImage2D(t.TEXTURE_2D,0,o,t.RGBA,t.UNSIGNED_BYTE,e.source)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,s);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program);t.uniform1i(e.uniformLocation,this._textureCount);this._textureCount++},syncUniforms:function(){var e=this.gl;var t=this.uniforms;var i;var r;var n;var s;var a;var o=0;for(var l in t){i=t[l];n=i.glFunc;r=i.glValueLength;s=i.uniformLocation;a=i.value;if(a===null){continue}if(r===1){if(i.glMatrix){n.call(e,s,i.transpose,a)}else{n.call(e,s,a)}}else if(r===2){n.call(e,s,a.x,a.y)}else if(r===3){n.call(e,s,a.x,a.y,a.z)}else if(r===4){n.call(e,s,a.x,a.y,a.z,a.w)}else if(i.type==="sampler2D"){e.activeTexture(e["TEXTURE"+o]);e.bindTexture(e.TEXTURE_2D,a);e.uniform1i(s,o);o++}}},load:function(e){var t=this.gl;var i=this.width;var r=this.height;var n=this.renderer;var s=this.program;var a=this.viewMatrix;if(!this.renderToTexture){var o=-this._displayOriginX;var l=-this._displayOriginY;a[0]=e[0];a[1]=e[1];a[4]=e[2];a[5]=e[3];a[8]=e[4];a[9]=e[5];a[12]=a[0]*o+a[4]*l;a[13]=a[1]*o+a[5]*l}t.useProgram(s);t.uniformMatrix4fv(t.getUniformLocation(s,"uViewMatrix"),false,a);t.uniform2f(t.getUniformLocation(s,"uResolution"),this.width,this.height);var h=this.uniforms;var u=h.resolution;u.value.x=i;u.value.y=r;h.time.value=n.game.loop.getDuration();var c=this.pointer;if(c){var f=h.mouse;var d=c.x/i;var v=1-c.y/r;f.value.x=d.toFixed(2);f.value.y=v.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width;var t=this.height;var i=this.program;var r=this.gl;var n=this.vertexBuffer;var s=this.renderer;var a=Float32Array.BYTES_PER_ELEMENT*2;if(this.renderToTexture){s.setFramebuffer(this.framebuffer);r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT)}r.bindBuffer(r.ARRAY_BUFFER,n);var o=r.getAttribLocation(i,"inPosition");if(o!==-1){r.enableVertexAttribArray(o);r.vertexAttribPointer(o,2,r.FLOAT,false,a,0)}var l=this.vertexViewF32;l[3]=t;l[4]=e;l[5]=t;l[8]=e;l[9]=t;l[10]=e;var h=6;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,h*a));r.drawArrays(r.TRIANGLES,0,h);if(this.renderToTexture){s.setFramebuffer(null,false)}},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var e=this.gl;e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer);if(this.renderToTexture){this.renderer.deleteFramebuffer(this.framebuffer);this.texture.destroy();this.framebuffer=null;this.glTexture=null;this.texture=null}}});var Shader_1=Shader;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */if(typeof WEBGL_RENDERER){GameObjectFactory_1.register("mesh",(function(e,t,i,r,n,s,a,o){return this.displayList.add(new Mesh_1(this.scene,e,t,i,r,n,s,a,o))}))}var MeshFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */if(typeof WEBGL_RENDERER){GameObjectFactory_1.register("quad",(function(e,t,i,r){return this.displayList.add(new Quad_1(this.scene,e,t,i,r))}))}var QuadFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */if(typeof WEBGL_RENDERER){GameObjectFactory_1.register("shader",(function(e,t,i,r,n,s){return this.displayList.add(new Shader_1(this.scene,e,t,i,r,n,s))}))}var ShaderFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("mesh",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=GetValue_1(e,"vertices",[]);var s=GetValue_1(e,"colors",[]);var a=GetValue_1(e,"alphas",[]);var o=GetValue_1(e,"uv",[]);var l=new Mesh_1(this.scene,0,0,n,o,s,a,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,l,e);return l}));var MeshCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("quad",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"x",0);var r=GetAdvancedValue_1(e,"y",0);var n=GetAdvancedValue_1(e,"key",null);var s=GetAdvancedValue_1(e,"frame",null);var a=new Quad_1(this.scene,i,r,n,s);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,a,e);return a}));var QuadCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("shader",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"x",0);var n=GetAdvancedValue_1(e,"y",0);var s=GetAdvancedValue_1(e,"width",128);var a=GetAdvancedValue_1(e,"height",128);var o=new Shader_1(this.scene,i,r,n,s,a);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,o,e);return o}));var ShaderCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Light=new Class_1({initialize:function e(t,i,r,n,s,a,o){this.x=t;this.y=i;this.radius=r;this.r=n;this.g=s;this.b=a;this.intensity=o;this.scrollFactorX=1;this.scrollFactorY=1},set:function(e,t,i,r,n,s,a){this.x=e;this.y=t;this.radius=i;this.r=r;this.g=n;this.b=s;this.intensity=a;this.scrollFactorX=1;this.scrollFactorY=1;return this},setScrollFactor:function(e,t){if(e===undefined){e=1}if(t===undefined){t=e}this.scrollFactorX=e;this.scrollFactorY=t;return this},setColor:function(e){var t=Utils.getFloatsFromUintRGB(e);this.r=t[0];this.g=t[1];this.b=t[2];return this},setIntensity:function(e){this.intensity=e;return this},setPosition:function(e,t){this.x=e;this.y=t;return this},setRadius:function(e){this.radius=e;return this}});var Light_1=Light;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LightsManager=new Class_1({initialize:function e(){this.lightPool=[];this.lights=[];this.culledLights=[];this.ambientColor={r:.1,g:.1,b:.1};this.active=false;this.maxLights=-1},enable:function(){if(this.maxLights===-1){this.maxLights=this.scene.sys.game.renderer.config.maxLights}this.active=true;return this},disable:function(){this.active=false;return this},cull:function(e){var t=this.lights;var i=this.culledLights;var r=t.length;var n=e.x+e.width/2;var s=e.y+e.height/2;var a=(e.width+e.height)/2;var o={x:0,y:0};var l=e.matrix;var h=this.systems.game.config.height;i.length=0;for(var u=0;u<r&&i.length<this.maxLights;u++){var c=t[u];l.transformPoint(c.x,c.y,o);var f=n-(o.x-e.scrollX*c.scrollFactorX*e.zoom);var d=s-(h-(o.y-e.scrollY*c.scrollFactorY*e.zoom));var v=Math.sqrt(f*f+d*d);if(v<c.radius+a){i.push(t[u])}}return i},forEachLight:function(e){if(!e){return}var t=this.lights;var i=t.length;for(var r=0;r<i;++r){e(t[r])}return this},setAmbientColor:function(e){var t=Utils.getFloatsFromUintRGB(e);this.ambientColor.r=t[0];this.ambientColor.g=t[1];this.ambientColor.b=t[2];return this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(e,t,i,r,n){var s=null;var a=null;e=e===undefined?0:e;t=t===undefined?0:t;r=r===undefined?16777215:r;i=i===undefined?100:i;n=n===undefined?1:n;s=Utils.getFloatsFromUintRGB(r);a=null;if(this.lightPool.length>0){a=this.lightPool.pop();a.set(e,t,i,s[0],s[1],s[2],n)}else{a=new Light_1(e,t,i,s[0],s[1],s[2],n)}this.lights.push(a);return a},removeLight:function(e){var t=this.lights.indexOf(e);if(t>=0){this.lightPool.push(e);this.lights.splice(t,1)}return this},shutdown:function(){while(this.lights.length>0){this.lightPool.push(this.lights.pop())}this.ambientColor={r:.1,g:.1,b:.1};this.culledLights.length=0;this.lights.length=0},destroy:function(){this.shutdown()}});var LightsManager_1=LightsManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LightsPlugin=new Class_1({Extends:LightsManager_1,initialize:function e(t){this.scene=t;this.systems=t.sys;if(!t.sys.settings.isBooted){t.sys.events.once(events$7.BOOT,this.boot,this)}LightsManager_1.call(this)},boot:function(){var e=this.systems.events;e.on(events$7.SHUTDOWN,this.shutdown,this);e.on(events$7.DESTROY,this.destroy,this)},destroy:function(){this.shutdown();this.scene=undefined;this.systems=undefined}});PluginCache_1.register("LightsPlugin",LightsPlugin,"lights");
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GameObjects={Events:events$3,DisplayList:DisplayList_1,GameObjectCreator:GameObjectCreator_1,GameObjectFactory:GameObjectFactory_1,UpdateList:UpdateList_1,Components:components,BuildGameObject:BuildGameObject_1,BuildGameObjectAnimation:BuildGameObjectAnimation_1,GameObject:GameObject_1,BitmapText:BitmapText_1,Blitter:Blitter_1,Container:Container_1,DOMElement:DOMElement_1,DynamicBitmapText:DynamicBitmapText_1,Extern:Extern_1,Graphics:Graphics_1,Group:Group_1,Image:Image_1$1,Particles:particles,PathFollower:PathFollower_1$1,RenderTexture:RenderTexture_1,RetroFont:RetroFont_1,Sprite:Sprite_1,Text:Text_1,TileSprite:TileSprite_1,Zone:Zone_1,Shape:Shape_1,Arc:Arc_1,Curve:Curve_1$1,Ellipse:Ellipse_1$1,Grid:Grid_1,IsoBox:IsoBox_1,IsoTriangle:IsoTriangle_1,Line:Line_1$1,Polygon:Polygon_1$1,Rectangle:Rectangle_1$1,Star:Star_1,Triangle:Triangle_1$1,Factories:{Blitter:BlitterFactory,Container:ContainerFactory,DOMElement:DOMElementFactory,DynamicBitmapText:DynamicBitmapTextFactory,Extern:ExternFactory,Graphics:GraphicsFactory,Group:GroupFactory,Image:ImageFactory,Particles:ParticleManagerFactory,PathFollower:PathFollowerFactory,RenderTexture:RenderTextureFactory,Sprite:SpriteFactory,StaticBitmapText:BitmapTextFactory,Text:TextFactory,TileSprite:TileSpriteFactory,Zone:ZoneFactory,Arc:ArcFactory,Curve:CurveFactory,Ellipse:EllipseFactory,Grid:GridFactory,IsoBox:IsoBoxFactory,IsoTriangle:IsoTriangleFactory,Line:LineFactory,Polygon:PolygonFactory,Rectangle:RectangleFactory,Star:StarFactory,Triangle:TriangleFactory},Creators:{Blitter:BlitterCreator,Container:ContainerCreator,DynamicBitmapText:DynamicBitmapTextCreator,Graphics:GraphicsCreator,Group:GroupCreator,Image:ImageCreator,Particles:ParticleManagerCreator,RenderTexture:RenderTextureCreator,Sprite:SpriteCreator,StaticBitmapText:BitmapTextCreator,Text:TextCreator,TileSprite:TileSpriteCreator,Zone:ZoneCreator}};if(typeof WEBGL_RENDERER){GameObjects.Mesh=Mesh_1;GameObjects.Quad=Quad_1;GameObjects.Shader=Shader_1;GameObjects.Factories.Mesh=MeshFactory;GameObjects.Factories.Quad=QuadFactory;GameObjects.Factories.Shader=ShaderFactory;GameObjects.Creators.Mesh=MeshCreator;GameObjects.Creators.Quad=QuadCreator;GameObjects.Creators.Shader=ShaderCreator;GameObjects.Light=Light_1}var gameobjects=GameObjects;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Area=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};var Area_1=Area;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$1=function(e){return new Circle_1(e.x,e.y,e.radius)};var Clone_1$1=Clone$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsPoint=function(e,t){return Contains_1(e,t.x,t.y)};var ContainsPoint_1=ContainsPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsRect=function(e,t){return Contains_1(e,t.x,t.y)&&Contains_1(e,t.right,t.y)&&Contains_1(e,t.x,t.bottom)&&Contains_1(e,t.right,t.bottom)};var ContainsRect_1=ContainsRect;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom=function(e,t){return t.setTo(e.x,e.y,e.radius)};var CopyFrom_1=CopyFrom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius};var Equals_1=Equals;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBounds$1=function(e,t){if(t===undefined){t=new Rectangle_1}t.x=e.left;t.y=e.top;t.width=e.diameter;t.height=e.diameter;return t};var GetBounds_1$1=GetBounds$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset=function(e,t,i){e.x+=t;e.y+=i;return e};var Offset_1=Offset;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var OffsetPoint=function(e,t){e.x+=t.x;e.y+=t.y;return e};var OffsetPoint_1=OffsetPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Circle_1.Area=Area_1;Circle_1.Circumference=Circumference_1;Circle_1.CircumferencePoint=CircumferencePoint_1;Circle_1.Clone=Clone_1$1;Circle_1.Contains=Contains_1;Circle_1.ContainsPoint=ContainsPoint_1;Circle_1.ContainsRect=ContainsRect_1;Circle_1.CopyFrom=CopyFrom_1;Circle_1.Equals=Equals_1;Circle_1.GetBounds=GetBounds_1$1;Circle_1.GetPoint=GetPoint_1;Circle_1.GetPoints=GetPoints_1;Circle_1.Offset=Offset_1;Circle_1.OffsetPoint=OffsetPoint_1;Circle_1.Random=Random_1;var circle=Circle_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Area$1=function(e){if(e.isEmpty()){return 0}return e.getMajorRadius()*e.getMinorRadius()*Math.PI};var Area_1$1=Area$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$2=function(e){return new Ellipse_1(e.x,e.y,e.width,e.height)};var Clone_1$2=Clone$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsPoint$1=function(e,t){return Contains_1$2(e,t.x,t.y)};var ContainsPoint_1$1=ContainsPoint$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsRect$1=function(e,t){return Contains_1$2(e,t.x,t.y)&&Contains_1$2(e,t.right,t.y)&&Contains_1$2(e,t.x,t.bottom)&&Contains_1$2(e,t.right,t.bottom)};var ContainsRect_1$1=ContainsRect$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom$1=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};var CopyFrom_1$1=CopyFrom$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals$1=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};var Equals_1$1=Equals$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetBounds$2=function(e,t){if(t===undefined){t=new Rectangle_1}t.x=e.left;t.y=e.top;t.width=e.width;t.height=e.height;return t};var GetBounds_1$2=GetBounds$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset$1=function(e,t,i){e.x+=t;e.y+=i;return e};var Offset_1$1=Offset$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var OffsetPoint$1=function(e,t){e.x+=t.x;e.y+=t.y;return e};var OffsetPoint_1$1=OffsetPoint$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Ellipse_1.Area=Area_1$1;Ellipse_1.Circumference=Circumference_1$1;Ellipse_1.CircumferencePoint=CircumferencePoint_1$1;Ellipse_1.Clone=Clone_1$2;Ellipse_1.Contains=Contains_1$2;Ellipse_1.ContainsPoint=ContainsPoint_1$1;Ellipse_1.ContainsRect=ContainsRect_1$1;Ellipse_1.CopyFrom=CopyFrom_1$1;Ellipse_1.Equals=Equals_1$1;Ellipse_1.GetBounds=GetBounds_1$2;Ellipse_1.GetPoint=GetPoint_1$3;Ellipse_1.GetPoints=GetPoints_1$3;Ellipse_1.Offset=Offset_1$1;Ellipse_1.OffsetPoint=OffsetPoint_1$1;Ellipse_1.Random=Random_1$3;var ellipse=Ellipse_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CircleToCircle=function(e,t){return DistanceBetween_1(e.x,e.y,t.x,t.y)<=e.radius+t.radius};var CircleToCircle_1=CircleToCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CircleToRectangle=function(e,t){var i=t.width/2;var r=t.height/2;var n=Math.abs(e.x-t.x-i);var s=Math.abs(e.y-t.y-r);var a=i+e.radius;var o=r+e.radius;if(n>a||s>o){return false}else if(n<=i||s<=r){return true}else{var l=n-i;var h=s-r;var u=l*l;var c=h*h;var f=e.radius*e.radius;return u+c<=f}};var CircleToRectangle_1=CircleToRectangle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCircleToCircle=function(e,t,i){if(i===undefined){i=[]}if(CircleToCircle_1(e,t)){var r=e.x;var n=e.y;var s=e.radius;var a=t.x;var o=t.y;var l=t.radius;var h,u,c,f,d;if(n===o){d=(l*l-s*s-a*a+r*r)/(2*(r-a));h=1;u=-2*o;c=a*a+d*d-2*a*d+o*o-l*l;f=u*u-4*h*c;if(f===0){i.push(new Point_1(d,-u/(2*h)))}else if(f>0){i.push(new Point_1(d,(-u+Math.sqrt(f))/(2*h)));i.push(new Point_1(d,(-u-Math.sqrt(f))/(2*h)))}}else{var v=(r-a)/(n-o);var p=(l*l-s*s-a*a+r*r-o*o+n*n)/(2*(n-o));h=v*v+1;u=2*n*v-2*p*v-2*r;c=r*r+n*n+p*p-s*s-2*n*p;f=u*u-4*h*c;if(f===0){d=-u/(2*h);i.push(new Point_1(d,p-d*v))}else if(f>0){d=(-u+Math.sqrt(f))/(2*h);i.push(new Point_1(d,p-d*v));d=(-u-Math.sqrt(f))/(2*h);i.push(new Point_1(d,p-d*v))}}}return i};var GetCircleToCircle_1=GetCircleToCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tmp$1=new Point_1;var LineToCircle=function(e,t,i){if(i===undefined){i=tmp$1}if(Contains_1(t,e.x1,e.y1)){i.x=e.x1;i.y=e.y1;return true}if(Contains_1(t,e.x2,e.y2)){i.x=e.x2;i.y=e.y2;return true}var r=e.x2-e.x1;var n=e.y2-e.y1;var s=t.x-e.x1;var a=t.y-e.y1;var o=r*r+n*n;var l=r;var h=n;if(o>0){var u=(s*r+a*n)/o;l*=u;h*=u}i.x=e.x1+l;i.y=e.y1+h;var c=l*l+h*h;return c<=o&&l*r+h*n>=0&&Contains_1(t,i.x,i.y)};var LineToCircle_1=LineToCircle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetLineToCircle=function(e,t,i){if(i===undefined){i=[]}if(LineToCircle_1(e,t)){var r=e.x1;var n=e.y1;var s=e.x2;var a=e.y2;var o=t.x;var l=t.y;var h=t.radius;var u=s-r;var c=a-n;var f=r-o;var d=n-l;var v=u*u+c*c;var p=2*(u*f+c*d);var g=f*f+d*d-h*h;var m=p*p-4*v*g;var _,y;if(m===0){var T=-p/(2*v);_=r+T*u;y=n+T*c;if(T>=0&&T<=1){i.push(new Point_1(_,y))}}else if(m>0){var x=(-p-Math.sqrt(m))/(2*v);_=r+x*u;y=n+x*c;if(x>=0&&x<=1){i.push(new Point_1(_,y))}var E=(-p+Math.sqrt(m))/(2*v);_=r+E*u;y=n+E*c;if(E>=0&&E<=1){i.push(new Point_1(_,y))}}}return i};var GetLineToCircle_1=GetLineToCircle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCircleToRectangle=function(e,t,i){if(i===undefined){i=[]}if(CircleToRectangle_1(e,t)){var r=t.getLineA();var n=t.getLineB();var s=t.getLineC();var a=t.getLineD();GetLineToCircle_1(r,e,i);GetLineToCircle_1(n,e,i);GetLineToCircle_1(s,e,i);GetLineToCircle_1(a,e,i)}return i};var GetCircleToRectangle_1=GetCircleToRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LineToLine=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.x1;var n=e.y1;var s=e.x2;var a=e.y2;var o=t.x1;var l=t.y1;var h=t.x2;var u=t.y2;var c=(h-o)*(n-l)-(u-l)*(r-o);var f=(s-r)*(n-l)-(a-n)*(r-o);var d=(u-l)*(s-r)-(h-o)*(a-n);if(d===0){return false}var v=c/d;var p=f/d;if(v>=0&&v<=1&&p>=0&&p<=1){i.x=r+v*(s-r);i.y=n+v*(a-n);return true}return false};var LineToLine_1=LineToLine;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LineToRectangle=function(e,t){var i=e.x1;var r=e.y1;var n=e.x2;var s=e.y2;var a=t.x;var o=t.y;var l=t.right;var h=t.bottom;var u=0;if(i>=a&&i<=l&&r>=o&&r<=h||n>=a&&n<=l&&s>=o&&s<=h){return true}if(i<a&&n>=a){u=r+(s-r)*(a-i)/(n-i);if(u>o&&u<=h){return true}}else if(i>l&&n<=l){u=r+(s-r)*(l-i)/(n-i);if(u>=o&&u<=h){return true}}if(r<o&&s>=o){u=i+(n-i)*(o-r)/(s-r);if(u>=a&&u<=l){return true}}else if(r>h&&s<=h){u=i+(n-i)*(h-r)/(s-r);if(u>=a&&u<=l){return true}}return false};var LineToRectangle_1=LineToRectangle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetLineToRectangle=function(e,t,i){if(i===undefined){i=[]}if(LineToRectangle_1(e,t)){var r=t.getLineA();var n=t.getLineB();var s=t.getLineC();var a=t.getLineD();var o=[new Point_1,new Point_1,new Point_1,new Point_1];var l=[LineToLine_1(r,e,o[0]),LineToLine_1(n,e,o[1]),LineToLine_1(s,e,o[2]),LineToLine_1(a,e,o[3])];for(var h=0;h<4;h++){if(l[h]){i.push(o[h])}}}return i};var GetLineToRectangle_1=GetLineToRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RectangleToRectangle=function(e,t){if(e.width<=0||e.height<=0||t.width<=0||t.height<=0){return false}return!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)};var RectangleToRectangle_1=RectangleToRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRectangleIntersection=function(e,t,i){if(i===undefined){i=new Rectangle_1}if(RectangleToRectangle_1(e,t)){i.x=Math.max(e.x,t.x);i.y=Math.max(e.y,t.y);i.width=Math.min(e.right,t.right)-i.x;i.height=Math.min(e.bottom,t.bottom)-i.y}return i};var GetRectangleIntersection_1=GetRectangleIntersection;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRectangleToRectangle=function(e,t,i){if(i===undefined){i=[]}if(RectangleToRectangle_1(e,t)){var r=e.getLineA();var n=e.getLineB();var s=e.getLineC();var a=e.getLineD();GetLineToRectangle_1(r,t,i);GetLineToRectangle_1(n,t,i);GetLineToRectangle_1(s,t,i);GetLineToRectangle_1(a,t,i)}return i};var GetRectangleToRectangle_1=GetRectangleToRectangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsArray=function(e,t,i,r){if(i===undefined){i=false}if(r===undefined){r=[]}var n=e.x3-e.x1;var s=e.y3-e.y1;var a=e.x2-e.x1;var o=e.y2-e.y1;var l=n*n+s*s;var h=n*a+s*o;var u=a*a+o*o;var c=l*u-h*h;var f=c===0?0:1/c;var d;var v;var p;var g;var m;var _;var y=e.x1;var T=e.y1;for(var x=0;x<t.length;x++){p=t[x].x-y;g=t[x].y-T;m=n*p+s*g;_=a*p+o*g;d=(u*m-h*_)*f;v=(l*_-h*m)*f;if(d>=0&&v>=0&&d+v<1){r.push({x:t[x].x,y:t[x].y});if(i){break}}}return r};var ContainsArray_1=ContainsArray;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Decompose=function(e,t){if(t===undefined){t=[]}t.push({x:e.x,y:e.y});t.push({x:e.right,y:e.y});t.push({x:e.right,y:e.bottom});t.push({x:e.x,y:e.bottom});return t};var Decompose_1=Decompose;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RectangleToTriangle=function(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top){return false}var i=t.getLineA();var r=t.getLineB();var n=t.getLineC();if(Contains_1$1(e,i.x1,i.y1)||Contains_1$1(e,i.x2,i.y2)){return true}if(Contains_1$1(e,r.x1,r.y1)||Contains_1$1(e,r.x2,r.y2)){return true}if(Contains_1$1(e,n.x1,n.y1)||Contains_1$1(e,n.x2,n.y2)){return true}var s=e.getLineA();var a=e.getLineB();var o=e.getLineC();var l=e.getLineD();if(LineToLine_1(i,s)||LineToLine_1(i,a)||LineToLine_1(i,o)||LineToLine_1(i,l)){return true}if(LineToLine_1(r,s)||LineToLine_1(r,a)||LineToLine_1(r,o)||LineToLine_1(r,l)){return true}if(LineToLine_1(n,s)||LineToLine_1(n,a)||LineToLine_1(n,o)||LineToLine_1(n,l)){return true}var h=Decompose_1(e);var u=ContainsArray_1(t,h,true);return u.length>0};var RectangleToTriangle_1=RectangleToTriangle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRectangleToTriangle=function(e,t,i){if(i===undefined){i=[]}if(RectangleToTriangle_1(e,t)){var r=t.getLineA();var n=t.getLineB();var s=t.getLineC();GetLineToRectangle_1(r,e,i);GetLineToRectangle_1(n,e,i);GetLineToRectangle_1(s,e,i)}return i};var GetRectangleToTriangle_1=GetRectangleToTriangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleToCircle=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top){return false}if(Contains_1$4(e,t.x,t.y)){return true}if(LineToCircle_1(e.getLineA(),t)){return true}if(LineToCircle_1(e.getLineB(),t)){return true}if(LineToCircle_1(e.getLineC(),t)){return true}return false};var TriangleToCircle_1=TriangleToCircle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTriangleToCircle=function(e,t,i){if(i===undefined){i=[]}if(TriangleToCircle_1(e,t)){var r=e.getLineA();var n=e.getLineB();var s=e.getLineC();GetLineToCircle_1(r,t,i);GetLineToCircle_1(n,t,i);GetLineToCircle_1(s,t,i)}return i};var GetTriangleToCircle_1=GetTriangleToCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleToLine=function(e,t){if(Contains_1$4(e,t.getPointA())||Contains_1$4(e,t.getPointB())){return true}if(LineToLine_1(e.getLineA(),t)){return true}if(LineToLine_1(e.getLineB(),t)){return true}if(LineToLine_1(e.getLineC(),t)){return true}return false};var TriangleToLine_1=TriangleToLine;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTriangleToLine=function(e,t,i){if(i===undefined){i=[]}if(TriangleToLine_1(e,t)){var r=e.getLineA();var n=e.getLineB();var s=e.getLineC();var a=[new Point_1,new Point_1,new Point_1];var o=[LineToLine_1(r,t,a[0]),LineToLine_1(n,t,a[1]),LineToLine_1(s,t,a[2])];for(var l=0;l<3;l++){if(o[l]){i.push(a[l])}}}return i};var GetTriangleToLine_1=GetTriangleToLine;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Decompose$1=function(e,t){if(t===undefined){t=[]}t.push({x:e.x1,y:e.y1});t.push({x:e.x2,y:e.y2});t.push({x:e.x3,y:e.y3});return t};var Decompose_1$1=Decompose$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleToTriangle=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top){return false}var i=e.getLineA();var r=e.getLineB();var n=e.getLineC();var s=t.getLineA();var a=t.getLineB();var o=t.getLineC();if(LineToLine_1(i,s)||LineToLine_1(i,a)||LineToLine_1(i,o)){return true}if(LineToLine_1(r,s)||LineToLine_1(r,a)||LineToLine_1(r,o)){return true}if(LineToLine_1(n,s)||LineToLine_1(n,a)||LineToLine_1(n,o)){return true}var l=Decompose_1$1(e);var h=ContainsArray_1(t,l,true);if(h.length>0){return true}l=Decompose_1$1(t);h=ContainsArray_1(e,l,true);if(h.length>0){return true}return false};var TriangleToTriangle_1=TriangleToTriangle;
/**
             * @author       Florian Vazelle
             * @author       Geoffrey Glaive
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTriangleToTriangle=function(e,t,i){if(i===undefined){i=[]}if(TriangleToTriangle_1(e,t)){var r=t.getLineA();var n=t.getLineB();var s=t.getLineC();GetTriangleToLine_1(e,r,i);GetTriangleToLine_1(e,n,i);GetTriangleToLine_1(e,s,i)}return i};var GetTriangleToTriangle_1=GetTriangleToTriangle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Florian Mertens
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PointToLine=function(e,t,i){if(i===undefined){i=1}var r=t.x1;var n=t.y1;var s=t.x2;var a=t.y2;var o=e.x;var l=e.y;var h=(s-r)*(s-r)+(a-n)*(a-n);if(h===0){return false}var u=((o-r)*(s-r)+(l-n)*(a-n))/h;if(u<0){return Math.sqrt((r-o)*(r-o)+(n-l)*(n-l))<=i}else if(u>=0&&u<=1){var c=((n-l)*(s-r)-(r-o)*(a-n))/h;return Math.abs(c)*Math.sqrt(h)<=i}else{return Math.sqrt((s-o)*(s-o)+(a-l)*(a-l))<=i}};var PointToLine_1=PointToLine;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PointToLineSegment=function(e,t){if(!PointToLine_1(e,t)){return false}var i=Math.min(t.x1,t.x2);var r=Math.max(t.x1,t.x2);var n=Math.min(t.y1,t.y2);var s=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=r&&(e.y>=n&&e.y<=s)};var PointToLineSegment_1=PointToLineSegment;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RectangleToValues=function(e,t,i,r,n,s){if(s===undefined){s=0}return!(t>e.right+s||i<e.left-s||r>e.bottom+s||n<e.top-s)};var RectangleToValues_1=RectangleToValues;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var intersects$1={CircleToCircle:CircleToCircle_1,CircleToRectangle:CircleToRectangle_1,GetCircleToCircle:GetCircleToCircle_1,GetCircleToRectangle:GetCircleToRectangle_1,GetLineToCircle:GetLineToCircle_1,GetLineToRectangle:GetLineToRectangle_1,GetRectangleIntersection:GetRectangleIntersection_1,GetRectangleToRectangle:GetRectangleToRectangle_1,GetRectangleToTriangle:GetRectangleToTriangle_1,GetTriangleToCircle:GetTriangleToCircle_1,GetTriangleToLine:GetTriangleToLine_1,GetTriangleToTriangle:GetTriangleToTriangle_1,LineToCircle:LineToCircle_1,LineToLine:LineToLine_1,LineToRectangle:LineToRectangle_1,PointToLine:PointToLine_1,PointToLineSegment:PointToLineSegment_1,RectangleToRectangle:RectangleToRectangle_1,RectangleToTriangle:RectangleToTriangle_1,RectangleToValues:RectangleToValues_1,TriangleToCircle:TriangleToCircle_1,TriangleToLine:TriangleToLine_1,TriangleToTriangle:TriangleToTriangle_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Angle$1=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};var Angle_1$1=Angle$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CenterOn$2=function(e,t,i){var r=t-(e.x1+e.x2)/2;var n=i-(e.y1+e.y2)/2;e.x1+=r;e.y1+=n;e.x2+=r;e.y2+=n;return e};var CenterOn_1$2=CenterOn$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$3=function(e){return new Line_1(e.x1,e.y1,e.x2,e.y2)};var Clone_1$3=Clone$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom$2=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)};var CopyFrom_1$2=CopyFrom$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals$2=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2};var Equals_1$2=Equals$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Extend$1=function(e,t,i){if(i===undefined){i=t}var r=Length_1(e);var n=e.x2-e.x1;var s=e.y2-e.y1;if(t){e.x1=e.x1-n/r*t;e.y1=e.y1-s/r*t}if(i){e.x2=e.x2+n/r*i;e.y2=e.y2+s/r*i}return e};var Extend_1$1=Extend$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetMidPoint=function(e,t){if(t===undefined){t=new Point_1}t.x=(e.x1+e.x2)/2;t.y=(e.y1+e.y2)/2;return t};var GetMidPoint_1=GetMidPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Florian Mertens
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetNearestPoint=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.x1;var n=e.y1;var s=e.x2;var a=e.y2;var o=(s-r)*(s-r)+(a-n)*(a-n);if(o===0){return i}var l=((t.x-r)*(s-r)+(t.y-n)*(a-n))/o;i.x=r+l*(s-r);i.y=n+l*(a-n);return i};var GetNearestPoint_1=GetNearestPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetNormal=function(e,t){if(t===undefined){t=new Point_1}var i=Angle_1$1(e)-_const$3.TAU;t.x=Math.cos(i);t.y=Math.sin(i);return t};var GetNormal_1=GetNormal;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Florian Mertens
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetShortestDistance=function(e,t){var i=e.x1;var r=e.y1;var n=e.x2;var s=e.y2;var a=(n-i)*(n-i)+(s-r)*(s-r);if(a===0){return false}var o=((r-t.y)*(n-i)-(i-t.x)*(s-r))/a;return Math.abs(o)*Math.sqrt(a)};var GetShortestDistance_1=GetShortestDistance;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Height=function(e){return Math.abs(e.y1-e.y2)};var Height_1=Height;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NormalAngle=function(e){var t=Angle_1$1(e)-_const$3.TAU;return Wrap_1(t,-Math.PI,Math.PI)};var NormalAngle_1=NormalAngle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NormalX=function(e){return Math.cos(Angle_1$1(e)-_const$3.TAU)};var NormalX_1=NormalX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NormalY=function(e){return Math.sin(Angle_1$1(e)-_const$3.TAU)};var NormalY_1=NormalY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset$2=function(e,t,i){e.x1+=t;e.y1+=i;e.x2+=t;e.y2+=i;return e};var Offset_1$2=Offset$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PerpSlope=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};var PerpSlope_1=PerpSlope;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ReflectAngle=function(e,t){return 2*NormalAngle_1(t)-Math.PI-Angle_1$1(e)};var ReflectAngle_1=ReflectAngle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundXY=function(e,t,i,r){var n=Math.cos(r);var s=Math.sin(r);var a=e.x1-t;var o=e.y1-i;e.x1=a*n-o*s+t;e.y1=a*s+o*n+i;a=e.x2-t;o=e.y2-i;e.x2=a*n-o*s+t;e.y2=a*s+o*n+i;return e};var RotateAroundXY_1=RotateAroundXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rotate$2=function(e,t){var i=(e.x1+e.x2)/2;var r=(e.y1+e.y2)/2;return RotateAroundXY_1(e,i,r,t)};var Rotate_1$2=Rotate$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundPoint=function(e,t,i){return RotateAroundXY_1(e,t.x,t.y,i)};var RotateAroundPoint_1=RotateAroundPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetToAngle=function(e,t,i,r,n){e.x1=t;e.y1=i;e.x2=t+Math.cos(r)*n;e.y2=i+Math.sin(r)*n;return e};var SetToAngle_1=SetToAngle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Slope=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};var Slope_1=Slope;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Width=function(e){return Math.abs(e.x1-e.x2)};var Width_1=Width;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Line_1.Angle=Angle_1$1;Line_1.BresenhamPoints=BresenhamPoints_1;Line_1.CenterOn=CenterOn_1$2;Line_1.Clone=Clone_1$3;Line_1.CopyFrom=CopyFrom_1$2;Line_1.Equals=Equals_1$2;Line_1.Extend=Extend_1$1;Line_1.GetMidPoint=GetMidPoint_1;Line_1.GetNearestPoint=GetNearestPoint_1;Line_1.GetNormal=GetNormal_1;Line_1.GetPoint=GetPoint_1$2;Line_1.GetPoints=GetPoints_1$2;Line_1.GetShortestDistance=GetShortestDistance_1;Line_1.Height=Height_1;Line_1.Length=Length_1;Line_1.NormalAngle=NormalAngle_1;Line_1.NormalX=NormalX_1;Line_1.NormalY=NormalY_1;Line_1.Offset=Offset_1$2;Line_1.PerpSlope=PerpSlope_1;Line_1.Random=Random_1$1;Line_1.ReflectAngle=ReflectAngle_1;Line_1.Rotate=Rotate_1$2;Line_1.RotateAroundPoint=RotateAroundPoint_1;Line_1.RotateAroundXY=RotateAroundXY_1;Line_1.SetToAngle=SetToAngle_1;Line_1.Slope=Slope_1;Line_1.Width=Width_1;var line=Line_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Ceil$1=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};var Ceil_1$1=Ceil$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$4=function(e){return new Point_1(e.x,e.y)};var Clone_1$4=Clone$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom$3=function(e,t){return t.setTo(e.x,e.y)};var CopyFrom_1$3=CopyFrom$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals$3=function(e,t){return e.x===t.x&&e.y===t.y};var Equals_1$3=Equals$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Floor$1=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};var Floor_1$1=Floor$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCentroid=function(e,t){if(t===undefined){t=new Point_1}if(!Array.isArray(e)){throw new Error("GetCentroid points argument must be an array")}var i=e.length;if(i<1){throw new Error("GetCentroid points array must not be empty")}else if(i===1){t.x=e[0].x;t.y=e[0].y}else{for(var r=0;r<i;r++){t.x+=e[r].x;t.y+=e[r].y}t.x/=i;t.y/=i}return t};var GetCentroid_1=GetCentroid;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetMagnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};var GetMagnitude_1=GetMagnitude;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetMagnitudeSq=function(e){return e.x*e.x+e.y*e.y};var GetMagnitudeSq_1=GetMagnitudeSq;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetRectangleFromPoints=function(e,t){if(t===undefined){t=new Rectangle_1}var i=Number.NEGATIVE_INFINITY;var r=Number.POSITIVE_INFINITY;var n=Number.NEGATIVE_INFINITY;var s=Number.POSITIVE_INFINITY;for(var a=0;a<e.length;a++){var o=e[a];if(o.x>i){i=o.x}if(o.x<r){r=o.x}if(o.y>n){n=o.y}if(o.y<s){s=o.y}}t.x=r;t.y=s;t.width=i-r;t.height=n-s;return t};var GetRectangleFromPoints_1=GetRectangleFromPoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Interpolate$1=function(e,t,i,r){if(i===undefined){i=0}if(r===undefined){r=new Point_1}r.x=e.x+(t.x-e.x)*i;r.y=e.y+(t.y-e.y)*i;return r};var Interpolate_1=Interpolate$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Invert=function(e){return e.setTo(e.y,e.x)};var Invert_1=Invert;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Negative=function(e,t){if(t===undefined){t=new Point_1}return t.setTo(-e.x,-e.y)};var Negative_1=Negative;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Project=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.x*t.x+e.y*t.y;var n=r/GetMagnitudeSq_1(t);if(n!==0){i.x=n*t.x;i.y=n*t.y}return i};var Project_1=Project;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProjectUnit=function(e,t,i){if(i===undefined){i=new Point_1}var r=e.x*t.x+e.y*t.y;if(r!==0){i.x=r*t.x;i.y=r*t.y}return i};var ProjectUnit_1=ProjectUnit;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetMagnitude=function(e,t){if(e.x!==0||e.y!==0){var i=GetMagnitude_1(e);e.x/=i;e.y/=i}e.x*=t;e.y*=t;return e};var SetMagnitude_1=SetMagnitude;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Point_1.Ceil=Ceil_1$1;Point_1.Clone=Clone_1$4;Point_1.CopyFrom=CopyFrom_1$3;Point_1.Equals=Equals_1$3;Point_1.Floor=Floor_1$1;Point_1.GetCentroid=GetCentroid_1;Point_1.GetMagnitude=GetMagnitude_1;Point_1.GetMagnitudeSq=GetMagnitudeSq_1;Point_1.GetRectangleFromPoints=GetRectangleFromPoints_1;Point_1.Interpolate=Interpolate_1;Point_1.Invert=Invert_1;Point_1.Negative=Negative_1;Point_1.Project=Project_1;Point_1.ProjectUnit=ProjectUnit_1;Point_1.SetMagnitude=SetMagnitude_1;var point=Point_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$5=function(e){return new Polygon_1(e.points)};var Clone_1$5=Clone$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsPoint$2=function(e,t){return Contains_1$3(e,t.x,t.y)};var ContainsPoint_1$2=ContainsPoint$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetNumberArray=function(e,t){if(t===undefined){t=[]}for(var i=0;i<e.points.length;i++){t.push(e.points[i].x);t.push(e.points[i].y)}return t};var GetNumberArray_1=GetNumberArray;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Reverse$1=function(e){e.points.reverse();return e};var Reverse_1$1=Reverse$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Polygon_1.Clone=Clone_1$5;Polygon_1.Contains=Contains_1$3;Polygon_1.ContainsPoint=ContainsPoint_1$2;Polygon_1.GetAABB=GetAABB_1;Polygon_1.GetNumberArray=GetNumberArray_1;Polygon_1.GetPoints=GetPoints_1$4;Polygon_1.Perimeter=Perimeter_1$1;Polygon_1.Reverse=Reverse_1$1;Polygon_1.Smooth=Smooth_1;var polygon=Polygon_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Area$2=function(e){return e.width*e.height};var Area_1$2=Area$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Ceil$2=function(e){e.x=Math.ceil(e.x);e.y=Math.ceil(e.y);return e};var Ceil_1$2=Ceil$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CeilAll=function(e){e.x=Math.ceil(e.x);e.y=Math.ceil(e.y);e.width=Math.ceil(e.width);e.height=Math.ceil(e.height);return e};var CeilAll_1=CeilAll;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$6=function(e){return new Rectangle_1(e.x,e.y,e.width,e.height)};var Clone_1$6=Clone$6;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsPoint$3=function(e,t){return Contains_1$1(e,t.x,t.y)};var ContainsPoint_1$3=ContainsPoint$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsRect$2=function(e,t){if(t.width*t.height>e.width*e.height){return false}return t.x>e.x&&t.x<e.right&&(t.right>e.x&&t.right<e.right)&&(t.y>e.y&&t.y<e.bottom)&&(t.bottom>e.y&&t.bottom<e.bottom)};var ContainsRect_1$2=ContainsRect$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom$4=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)};var CopyFrom_1$4=CopyFrom$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals$4=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};var Equals_1$4=Equals$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetAspectRatio=function(e){return e.height===0?NaN:e.width/e.height};var GetAspectRatio_1=GetAspectRatio;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FitInside=function(e,t){var i=GetAspectRatio_1(e);if(i<GetAspectRatio_1(t)){e.setSize(t.height*i,t.height)}else{e.setSize(t.width,t.width/i)}return e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};var FitInside_1=FitInside;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FitOutside=function(e,t){var i=GetAspectRatio_1(e);if(i>GetAspectRatio_1(t)){e.setSize(t.height*i,t.height)}else{e.setSize(t.width,t.width/i)}return e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)};var FitOutside_1=FitOutside;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Floor$2=function(e){e.x=Math.floor(e.x);e.y=Math.floor(e.y);return e};var Floor_1$2=Floor$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FloorAll=function(e){e.x=Math.floor(e.x);e.y=Math.floor(e.y);e.width=Math.floor(e.width);e.height=Math.floor(e.height);return e};var FloorAll_1=FloorAll;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetCenter=function(e,t){if(t===undefined){t=new Point_1}t.x=e.centerX;t.y=e.centerY;return t};var GetCenter_1=GetCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetSize=function(e,t){if(t===undefined){t=new Point_1}t.x=e.width;t.y=e.height;return t};var GetSize_1=GetSize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Inflate=function(e,t,i){var r=e.centerX;var n=e.centerY;e.setSize(e.width+t*2,e.height+i*2);return CenterOn_1$1(e,r,n)};var Inflate_1=Inflate;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Intersection=function(e,t,i){if(i===undefined){i=new Rectangle_1}if(RectangleToRectangle_1(e,t)){i.x=Math.max(e.x,t.x);i.y=Math.max(e.y,t.y);i.width=Math.min(e.right,t.right)-i.x;i.height=Math.min(e.bottom,t.bottom)-i.y}else{i.setEmpty()}return i};var Intersection_1=Intersection;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MergePoints=function(e,t){var i=e.x;var r=e.right;var n=e.y;var s=e.bottom;for(var a=0;a<t.length;a++){i=Math.min(i,t[a].x);r=Math.max(r,t[a].x);n=Math.min(n,t[a].y);s=Math.max(s,t[a].y)}e.x=i;e.y=n;e.width=r-i;e.height=s-n;return e};var MergePoints_1=MergePoints;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MergeRect=function(e,t){var i=Math.min(e.x,t.x);var r=Math.max(e.right,t.right);e.x=i;e.width=r-i;var n=Math.min(e.y,t.y);var s=Math.max(e.bottom,t.bottom);e.y=n;e.height=s-n;return e};var MergeRect_1=MergeRect;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MergeXY=function(e,t,i){var r=Math.min(e.x,t);var n=Math.max(e.right,t);e.x=r;e.width=n-r;var s=Math.min(e.y,i);var a=Math.max(e.bottom,i);e.y=s;e.height=a-s;return e};var MergeXY_1=MergeXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset$3=function(e,t,i){e.x+=t;e.y+=i;return e};var Offset_1$3=Offset$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var OffsetPoint$2=function(e,t){e.x+=t.x;e.y+=t.y;return e};var OffsetPoint_1$2=OffsetPoint$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Overlaps=function(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y};var Overlaps_1=Overlaps;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PerimeterPoint=function(e,t,i){if(i===undefined){i=new Point_1}t=DegToRad_1(t);var r=Math.sin(t);var n=Math.cos(t);var s=n>0?e.width/2:e.width/-2;var a=r>0?e.height/2:e.height/-2;if(Math.abs(s*r)<Math.abs(a*n)){a=s*r/n}else{s=a*n/r}i.x=s+e.centerX;i.y=a+e.centerY;return i};var PerimeterPoint_1=PerimeterPoint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RandomOutside=function(e,t,i){if(i===undefined){i=new Point_1}if(ContainsRect_1$2(e,t)){switch(Between_1$1(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x);i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x);i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x);i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right);i.y=e.y+Math.random()*(t.bottom-e.y);break}}return i};var RandomOutside_1=RandomOutside;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SameDimensions=function(e,t){return e.width===t.width&&e.height===t.height};var SameDimensions_1=SameDimensions;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Scale=function(e,t,i){if(i===undefined){i=t}e.width*=t;e.height*=i;return e};var Scale_1=Scale;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Rectangle_1.Area=Area_1$2;Rectangle_1.Ceil=Ceil_1$2;Rectangle_1.CeilAll=CeilAll_1;Rectangle_1.CenterOn=CenterOn_1$1;Rectangle_1.Clone=Clone_1$6;Rectangle_1.Contains=Contains_1$1;Rectangle_1.ContainsPoint=ContainsPoint_1$3;Rectangle_1.ContainsRect=ContainsRect_1$2;Rectangle_1.CopyFrom=CopyFrom_1$4;Rectangle_1.Decompose=Decompose_1;Rectangle_1.Equals=Equals_1$4;Rectangle_1.FitInside=FitInside_1;Rectangle_1.FitOutside=FitOutside_1;Rectangle_1.Floor=Floor_1$2;Rectangle_1.FloorAll=FloorAll_1;Rectangle_1.FromPoints=FromPoints_1;Rectangle_1.GetAspectRatio=GetAspectRatio_1;Rectangle_1.GetCenter=GetCenter_1;Rectangle_1.GetPoint=GetPoint_1$1;Rectangle_1.GetPoints=GetPoints_1$1;Rectangle_1.GetSize=GetSize_1;Rectangle_1.Inflate=Inflate_1;Rectangle_1.Intersection=Intersection_1;Rectangle_1.MarchingAnts=MarchingAnts_1;Rectangle_1.MergePoints=MergePoints_1;Rectangle_1.MergeRect=MergeRect_1;Rectangle_1.MergeXY=MergeXY_1;Rectangle_1.Offset=Offset_1$3;Rectangle_1.OffsetPoint=OffsetPoint_1$2;Rectangle_1.Overlaps=Overlaps_1;Rectangle_1.Perimeter=Perimeter_1;Rectangle_1.PerimeterPoint=PerimeterPoint_1;Rectangle_1.Random=Random_1$2;Rectangle_1.RandomOutside=RandomOutside_1;Rectangle_1.SameDimensions=SameDimensions_1;Rectangle_1.Scale=Scale_1;Rectangle_1.Union=Union_1;var rectangle=Rectangle_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Area$3=function(e){var t=e.x1;var i=e.y1;var r=e.x2;var n=e.y2;var s=e.x3;var a=e.y3;return Math.abs(((s-t)*(n-i)-(r-t)*(a-i))/2)};var Area_1$3=Area$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildEquilateral=function(e,t,i){var r=i*(Math.sqrt(3)/2);var n=e;var s=t;var a=e+i/2;var o=t+r;var l=e-i/2;var h=t+r;return new Triangle_1(n,s,a,o,l,h)};var BuildEquilateral_1=BuildEquilateral;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildFromPolygon=function(e,t,i,r,n){if(t===undefined){t=null}if(i===undefined){i=1}if(r===undefined){r=1}if(n===undefined){n=[]}var s=Earcut(e,t);var a;var o;var l;var h;var u;var c;var f;var d;var v;for(var p=0;p<s.length;p+=3){a=s[p];o=s[p+1];l=s[p+2];h=e[a*2]*i;u=e[a*2+1]*r;c=e[o*2]*i;f=e[o*2+1]*r;d=e[l*2]*i;v=e[l*2+1]*r;n.push(new Triangle_1(h,u,c,f,d,v))}return n};var BuildFromPolygon_1=BuildFromPolygon;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildRight=function(e,t,i,r){if(r===undefined){r=i}var n=e;var s=t;var a=e;var o=t-r;var l=e+i;var h=t;return new Triangle_1(n,s,a,o,l,h)};var BuildRight_1=BuildRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Centroid=function(e,t){if(t===undefined){t=new Point_1}t.x=(e.x1+e.x2+e.x3)/3;t.y=(e.y1+e.y2+e.y3)/3;return t};var Centroid_1=Centroid;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset$4=function(e,t,i){e.x1+=t;e.y1+=i;e.x2+=t;e.y2+=i;e.x3+=t;e.y3+=i;return e};var Offset_1$4=Offset$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CenterOn$3=function(e,t,i,r){if(r===undefined){r=Centroid_1}var n=r(e);var s=t-n.x;var a=i-n.y;return Offset_1$4(e,s,a)};var CenterOn_1$3=CenterOn$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function det(e,t,i,r){return e*r-t*i}var CircumCenter=function(e,t){if(t===undefined){t=new Vector2_1}var i=e.x3;var r=e.y3;var n=e.x1-i;var s=e.y1-r;var a=e.x2-i;var o=e.y2-r;var l=2*det(n,s,a,o);var h=det(s,n*n+s*s,o,a*a+o*o);var u=det(n,n*n+s*s,a,a*a+o*o);t.x=i-h/l;t.y=r+u/l;return t};var CircumCenter_1=CircumCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CircumCircle=function(e,t){if(t===undefined){t=new Circle_1}var i=e.x1;var r=e.y1;var n=e.x2;var s=e.y2;var a=e.x3;var o=e.y3;var l=n-i;var h=s-r;var u=a-i;var c=o-r;var f=l*(i+n)+h*(r+s);var d=u*(i+a)+c*(r+o);var v=2*(l*(o-s)-h*(a-n));var p;var g;if(Math.abs(v)<1e-6){var m=Math.min(i,n,a);var _=Math.min(r,s,o);p=(Math.max(i,n,a)-m)*.5;g=(Math.max(r,s,o)-_)*.5;t.x=m+p;t.y=_+g;t.radius=Math.sqrt(p*p+g*g)}else{t.x=(c*f-h*d)/v;t.y=(l*d-u*f)/v;p=t.x-i;g=t.y-r;t.radius=Math.sqrt(p*p+g*g)}return t};var CircumCircle_1=CircumCircle;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clone$7=function(e){return new Triangle_1(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};var Clone_1$7=Clone$7;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ContainsPoint$4=function(e,t){return Contains_1$4(e,t.x,t.y)};var ContainsPoint_1$4=ContainsPoint$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CopyFrom$5=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};var CopyFrom_1$5=CopyFrom$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Equals$5=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3};var Equals_1$5=Equals$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function getLength(e,t,i,r){var n=e-i;var s=t-r;var a=n*n+s*s;return Math.sqrt(a)}var InCenter=function(e,t){if(t===undefined){t=new Point_1}var i=e.x1;var r=e.y1;var n=e.x2;var s=e.y2;var a=e.x3;var o=e.y3;var l=getLength(a,o,n,s);var h=getLength(i,r,a,o);var u=getLength(n,s,i,r);var c=l+h+u;t.x=(i*l+n*h+a*u)/c;t.y=(r*l+s*h+o*u)/c;return t};var InCenter_1=InCenter;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Perimeter$2=function(e){var t=e.getLineA();var i=e.getLineB();var r=e.getLineC();return Length_1(t)+Length_1(i)+Length_1(r)};var Perimeter_1$2=Perimeter$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundXY$1=function(e,t,i,r){var n=Math.cos(r);var s=Math.sin(r);var a=e.x1-t;var o=e.y1-i;e.x1=a*n-o*s+t;e.y1=a*s+o*n+i;a=e.x2-t;o=e.y2-i;e.x2=a*n-o*s+t;e.y2=a*s+o*n+i;a=e.x3-t;o=e.y3-i;e.x3=a*n-o*s+t;e.y3=a*s+o*n+i;return e};var RotateAroundXY_1$1=RotateAroundXY$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Rotate$3=function(e,t){var i=InCenter_1(e);return RotateAroundXY_1$1(e,i.x,i.y,t)};var Rotate_1$3=Rotate$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RotateAroundPoint$1=function(e,t,i){return RotateAroundXY_1$1(e,t.x,t.y,i)};var RotateAroundPoint_1$1=RotateAroundPoint$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Triangle_1.Area=Area_1$3;Triangle_1.BuildEquilateral=BuildEquilateral_1;Triangle_1.BuildFromPolygon=BuildFromPolygon_1;Triangle_1.BuildRight=BuildRight_1;Triangle_1.CenterOn=CenterOn_1$3;Triangle_1.Centroid=Centroid_1;Triangle_1.CircumCenter=CircumCenter_1;Triangle_1.CircumCircle=CircumCircle_1;Triangle_1.Clone=Clone_1$7;Triangle_1.Contains=Contains_1$4;Triangle_1.ContainsArray=ContainsArray_1;Triangle_1.ContainsPoint=ContainsPoint_1$4;Triangle_1.CopyFrom=CopyFrom_1$5;Triangle_1.Decompose=Decompose_1$1;Triangle_1.Equals=Equals_1$5;Triangle_1.GetPoint=GetPoint_1$4;Triangle_1.GetPoints=GetPoints_1$5;Triangle_1.InCenter=InCenter_1;Triangle_1.Perimeter=Perimeter_1$2;Triangle_1.Offset=Offset_1$4;Triangle_1.Random=Random_1$4;Triangle_1.Rotate=Rotate_1$3;Triangle_1.RotateAroundPoint=RotateAroundPoint_1$1;Triangle_1.RotateAroundXY=RotateAroundXY_1$1;var triangle=Triangle_1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Geom={Circle:circle,Ellipse:ellipse,Intersects:intersects$1,Line:line,Point:point,Polygon:polygon,Rectangle:rectangle,Triangle:triangle};Geom=Extend_1(false,Geom,_const$2);var geom=Geom;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CreateInteractiveObject=function(e,t,i){return{gameObject:e,enabled:true,draggable:false,dropZone:false,cursor:false,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:false,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};var CreateInteractiveObject_1=CreateInteractiveObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Axis=new Class_1({initialize:function e(t,i){this.pad=t;this.events=t.events;this.index=i;this.value=0;this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null;this.events=null}});var Axis_1=Axis;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BUTTON_DOWN_EVENT="down";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BUTTON_UP_EVENT="up";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONNECTED_EVENT="connected";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DISCONNECTED_EVENT="disconnected";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEPAD_BUTTON_DOWN_EVENT="down";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GAMEPAD_BUTTON_UP_EVENT="up";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$d={BUTTON_DOWN:BUTTON_DOWN_EVENT,BUTTON_UP:BUTTON_UP_EVENT,CONNECTED:CONNECTED_EVENT,DISCONNECTED:DISCONNECTED_EVENT,GAMEPAD_BUTTON_DOWN:GAMEPAD_BUTTON_DOWN_EVENT,GAMEPAD_BUTTON_UP:GAMEPAD_BUTTON_UP_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Button=new Class_1({initialize:function e(t,i){this.pad=t;this.events=t.manager;this.index=i;this.value=0;this.threshold=1;this.pressed=false},update:function(e){this.value=e;var t=this.pad;var i=this.index;if(e>=this.threshold){if(!this.pressed){this.pressed=true;this.events.emit(events$d.BUTTON_DOWN,t,this,e);this.pad.emit(events$d.GAMEPAD_BUTTON_DOWN,i,e,this)}}else if(this.pressed){this.pressed=false;this.events.emit(events$d.BUTTON_UP,t,this,e);this.pad.emit(events$d.GAMEPAD_BUTTON_UP,i,e,this)}},destroy:function(){this.pad=null;this.events=null}});var Button_1=Button;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Gamepad=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.manager=t;this.pad=i;this.id=i.id;this.index=i.index;var r=[];for(var n=0;n<i.buttons.length;n++){r.push(new Button_1(this,n))}this.buttons=r;var s=[];for(n=0;n<i.axes.length;n++){s.push(new Axis_1(this,n))}this.axes=s;this.vibration=i.vibrationActuator;var a={value:0,pressed:false};this._LCLeft=r[14]?r[14]:a;this._LCRight=r[15]?r[15]:a;this._LCTop=r[12]?r[12]:a;this._LCBottom=r[13]?r[13]:a;this._RCLeft=r[2]?r[2]:a;this._RCRight=r[1]?r[1]:a;this._RCTop=r[3]?r[3]:a;this._RCBottom=r[0]?r[0]:a;this._FBLeftTop=r[4]?r[4]:a;this._FBLeftBottom=r[6]?r[6]:a;this._FBRightTop=r[5]?r[5]:a;this._FBRightBottom=r[7]?r[7]:a;var o={value:0};this._HAxisLeft=s[0]?s[0]:o;this._VAxisLeft=s[1]?s[1]:o;this._HAxisRight=s[2]?s[2]:o;this._VAxisRight=s[3]?s[3]:o;this.leftStick=new Vector2_1;this.rightStick=new Vector2_1},getAxisTotal:function(){return this.axes.length},getAxisValue:function(e){return this.axes[e].getValue()},setAxisThreshold:function(e){for(var t=0;t<this.axes.length;t++){this.axes[t].threshold=e}},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(e){return this.buttons[e].value},isButtonDown:function(e){return this.buttons[e].pressed},update:function(e){var t;var i=this.buttons;var r=e.buttons;var n=i.length;for(t=0;t<n;t++){i[t].update(r[t].value)}var s=this.axes;var a=e.axes;n=s.length;for(t=0;t<n;t++){s[t].update(a[t])}if(n>=2){this.leftStick.set(s[0].getValue(),s[1].getValue());if(n>=4){this.rightStick.set(s[2].getValue(),s[3].getValue())}}},destroy:function(){this.removeAllListeners();this.manager=null;this.pad=null;var e;for(e=0;e<this.buttons.length;e++){this.buttons[e].destroy()}for(e=0;e<this.axes.length;e++){this.axes[e].destroy()}this.buttons=[];this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});var Gamepad_1=Gamepad;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var inputPlugins={};var InputPluginCache={};InputPluginCache.register=function(e,t,i,r,n){inputPlugins[e]={plugin:t,mapping:i,settingsKey:r,configKey:n}};InputPluginCache.getPlugin=function(e){return inputPlugins[e]};InputPluginCache.install=function(e){var t=e.scene.sys;var i=t.settings.input;var r=t.game.config;for(var n in inputPlugins){var s=inputPlugins[n].plugin;var a=inputPlugins[n].mapping;var o=inputPlugins[n].settingsKey;var l=inputPlugins[n].configKey;if(GetValue_1(i,o,r[l])){e[a]=new s(e)}}};InputPluginCache.remove=function(e){if(inputPlugins.hasOwnProperty(e)){delete inputPlugins[e]}};var InputPluginCache_1=InputPluginCache;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GamepadPlugin=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.scene=t.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=t;this.enabled=true;this.gamepads=[];this.queue=[];t.pluginEvents.once(events$a.BOOT,this.boot,this);t.pluginEvents.on(events$a.START,this.start,this)},boot:function(){var e=this.scene.sys.game;var t=this.settings.input;var i=e.config;this.enabled=GetValue_1(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads;this.target=GetValue_1(t,"gamepad.target",i.inputGamepadEventTarget);this.sceneInputPlugin.pluginEvents.once(events$a.DESTROY,this.destroy,this)},start:function(){if(this.enabled){this.startListeners()}this.sceneInputPlugin.pluginEvents.once(events$a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this;var t=this.target;var i=function(t){if(t.defaultPrevented||!e.isActive()){return}e.refreshPads();e.queue.push(t)};this.onGamepadHandler=i;t.addEventListener("gamepadconnected",i,false);t.addEventListener("gamepaddisconnected",i,false);this.sceneInputPlugin.pluginEvents.on(events$a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler);this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler);this.sceneInputPlugin.pluginEvents.off(events$a.UPDATE,this.update)},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++){this.gamepads.connected=false}},refreshPads:function(){var e=navigator.getGamepads();if(!e){this.disconnectAll()}else{var t=this.gamepads;for(var i=0;i<e.length;i++){var r=e[i];if(!r){continue}var n=r.id;var s=r.index;var a=t[s];if(!a){var o=new Gamepad_1(this,r);t[s]=o;if(!this._pad1){this._pad1=o}else if(!this._pad2){this._pad2=o}else if(!this._pad3){this._pad3=o}else if(!this._pad4){this._pad4=o}}else if(a.id!==n){a.destroy();t[s]=new Gamepad_1(this,r)}else{a.update(r)}}}},getAll:function(){var e=[];var t=this.gamepads;for(var i=0;i<t.length;i++){if(t[i]){e.push(t[i])}}return e},getPad:function(e){var t=this.gamepads;for(var i=0;i<t.length;i++){if(t[i]&&t[i].index===e){return t[i]}}},update:function(){if(!this.enabled){return}this.refreshPads();var e=this.queue.length;if(e===0){return}var t=this.queue.splice(0,e);for(var i=0;i<e;i++){var r=t[i];var n=this.getPad(r.gamepad.index);if(r.type==="gamepadconnected"){this.emit(events$d.CONNECTED,n,r)}else if(r.type==="gamepaddisconnected"){this.emit(events$d.DISCONNECTED,n,r)}}},shutdown:function(){this.stopListeners();this.disconnectAll();this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++){if(this.gamepads[e]){this.gamepads[e].destroy()}}this.gamepads=[];this.scene=null;this.settings=null;this.sceneInputPlugin=null;this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});InputPluginCache_1.register("GamepadPlugin",GamepadPlugin,"gamepad","gamepad","inputGamepad");var GamepadPlugin_1=GamepadPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Sony_PlayStation_DualShock_4={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SNES_USB_Controller={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var XBox360_Controller={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var configs={DUALSHOCK_4:Sony_PlayStation_DualShock_4,SNES_USB:SNES_USB_Controller,XBOX_360:XBox360_Controller};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var gamepad={Axis:Axis_1,Button:Button_1,Events:events$d,Gamepad:Gamepad_1,GamepadPlugin:GamepadPlugin_1,Configs:configs};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CreatePixelPerfectHandler=function(e,t){return function(i,r,n,s){var a=e.getPixelAlpha(r,n,s.texture.key,s.frame.name);return a&&a>=t}};var CreatePixelPerfectHandler_1=CreatePixelPerfectHandler;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var InputPlugin=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.scene=t;this.systems=t.sys;this.settings=t.sys.settings;this.manager=t.sys.game.input;this.pluginEvents=new eventemitter3;this.enabled=true;InputPluginCache_1.install(this);this.mouse=this.manager.mouse;this.topOnly=true;this.pollRate=-1;this._pollTimer=0;var i={cancelled:false};this._eventContainer={stopPropagation:function(){i.cancelled=true}};this._eventData=i;this.dragDistanceThreshold=0;this.dragTimeThreshold=0;this._temp=[];this._tempZones=[];this._list=[];this._pendingInsertion=[];this._pendingRemoval=[];this._draggable=[];this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._dragState=[];this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"];this._updatedThisFrame=false;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras;this.displayList=this.systems.displayList;this.systems.events.once(events$7.DESTROY,this.destroy,this);this.pluginEvents.emit(events$a.BOOT)},start:function(){var e=this.systems.events;e.on(events$7.TRANSITION_START,this.transitionIn,this);e.on(events$7.TRANSITION_OUT,this.transitionOut,this);e.on(events$7.TRANSITION_COMPLETE,this.transitionComplete,this);e.on(events$7.PRE_UPDATE,this.preUpdate,this);e.once(events$7.SHUTDOWN,this.shutdown,this);this.manager.events.on(events$a.GAME_OUT,this.onGameOut,this);this.manager.events.on(events$a.GAME_OVER,this.onGameOver,this);this.enabled=true;this._dragState=[0,0,0,0,0,0,0,0,0,0];this.pluginEvents.emit(events$a.START)},onGameOver:function(e){if(this.isActive()){this.emit(events$a.GAME_OVER,e.timeStamp,e)}},onGameOut:function(e){if(this.isActive()){this.emit(events$a.GAME_OUT,e.timeStamp,e)}},preUpdate:function(){this.pluginEvents.emit(events$a.PRE_UPDATE);var e=this._pendingRemoval;var t=this._pendingInsertion;var i=e.length;var r=t.length;if(i===0&&r===0){return}var n=this._list;for(var s=0;s<i;s++){var a=e[s];var o=n.indexOf(a);if(o>-1){n.splice(o,1);this.clear(a,true)}}e.length=0;this._pendingRemoval.length=0;this._list=n.concat(t.splice(0))},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(e,t){if(!this.isActive()){return false}this.pluginEvents.emit(events$a.UPDATE,e,t);if(this._updatedThisFrame){this._updatedThisFrame=false;return false}var i;var r=this.manager;var n=r.pointers;var s=r.pointersTotal;for(i=0;i<s;i++){n[i].updateMotion()}if(this._list.length===0){return false}var a=this.pollRate;if(a===-1){return false}else if(a>0){this._pollTimer-=t;if(this._pollTimer<0){this._pollTimer=this.pollRate}else{return false}}var o=false;for(i=0;i<s;i++){var l=0;var h=n[i];this._tempZones=[];this._temp=this.hitTestPointer(h);this.sortGameObjects(this._temp);this.sortGameObjects(this._tempZones);if(this.topOnly){if(this._temp.length){this._temp.splice(1)}if(this._tempZones.length){this._tempZones.splice(1)}}l+=this.processOverOutEvents(h);this.processDragThresholdEvent(h);if(l>0){o=true}}return o},update:function(e,t){if(!this.isActive()){return false}var i=t.length;var r=false;for(var n=0;n<i;n++){var s=0;var a=t[n];this._tempZones=[];this._temp=this.hitTestPointer(a);this.sortGameObjects(this._temp);this.sortGameObjects(this._tempZones);if(this.topOnly){if(this._temp.length){this._temp.splice(1)}if(this._tempZones.length){this._tempZones.splice(1)}}switch(e){case _const$6.MOUSE_DOWN:s+=this.processDragDownEvent(a);s+=this.processDownEvents(a);s+=this.processOverOutEvents(a);break;case _const$6.MOUSE_UP:s+=this.processDragUpEvent(a);s+=this.processUpEvents(a);s+=this.processOverOutEvents(a);break;case _const$6.TOUCH_START:s+=this.processDragDownEvent(a);s+=this.processDownEvents(a);s+=this.processOverEvents(a);break;case _const$6.TOUCH_END:case _const$6.TOUCH_CANCEL:s+=this.processDragUpEvent(a);s+=this.processUpEvents(a);s+=this.processOutEvents(a);break;case _const$6.MOUSE_MOVE:case _const$6.TOUCH_MOVE:s+=this.processDragMoveEvent(a);s+=this.processMoveEvents(a);s+=this.processOverOutEvents(a);break;case _const$6.MOUSE_WHEEL:s+=this.processWheelEvent(a);break}if(s>0){r=true}}this._updatedThisFrame=true;return r},clear:function(e,t){if(t===undefined){t=false}var i=e.input;if(!i){return}if(!t){this.queueForRemoval(e)}i.gameObject=undefined;i.target=undefined;i.hitArea=undefined;i.hitAreaCallback=undefined;i.callbackContext=undefined;this.manager.resetCursor(i);e.input=null;var r=this._draggable.indexOf(e);if(r>-1){this._draggable.splice(r,1)}r=this._drag[0].indexOf(e);if(r>-1){this._drag[0].splice(r,1)}r=this._over[0].indexOf(e);if(r>-1){this._over[0].splice(r,1)}return e},disable:function(e){e.input.enabled=false},enable:function(e,t,i,r){if(r===undefined){r=false}if(e.input){e.input.enabled=true}else{this.setHitArea(e,t,i)}if(e.input&&r&&!e.input.dropZone){e.input.dropZone=r}return this},hitTestPointer:function(e){var t=this.cameras.getCamerasBelowPointer(e);for(var i=0;i<t.length;i++){var r=t[i];var n=this.manager.hitTest(e,this._list,r);for(var s=0;s<n.length;s++){var a=n[s];if(a.input.dropZone){this._tempZones.push(a)}}if(n.length>0){e.camera=r;return n}}e.camera=t[0];return[]},processDownEvents:function(e){var t=0;var i=this._temp;var r=this._eventData;var n=this._eventContainer;r.cancelled=false;var s=false;for(var a=0;a<i.length;a++){var o=i[a];if(!o.input){continue}t++;o.emit(events$a.GAMEOBJECT_POINTER_DOWN,e,o.input.localX,o.input.localY,n);if(r.cancelled||!o.input){s=true;break}this.emit(events$a.GAMEOBJECT_DOWN,e,o,n);if(r.cancelled||!o.input){s=true;break}}if(!s&&this.manager){if(e.downElement===this.manager.game.canvas){this.emit(events$a.POINTER_DOWN,e,i)}else{this.emit(events$a.POINTER_DOWN_OUTSIDE,e)}}return t},getDragState:function(e){return this._dragState[e.id]},setDragState:function(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function(e,t){var i=false;var r=this.dragTimeThreshold;var n=this.dragDistanceThreshold;if(n>0&&DistanceBetween_1(e.x,e.y,e.downX,e.downY)>=n){i=true}else if(r>0&&t>=e.downTime+r){i=true}if(i){this.setDragState(e,3);return this.processDragStartList(e)}},processDragStartList:function(e){if(this.getDragState(e)!==3){return 0}var t=this._drag[e.id];for(var i=0;i<t.length;i++){var r=t[i];var n=r.input;n.dragState=2;n.dragStartX=r.x;n.dragStartY=r.y;n.dragStartXGlobal=e.x;n.dragStartYGlobal=e.y;n.dragX=n.dragStartXGlobal-n.dragStartX;n.dragY=n.dragStartYGlobal-n.dragStartY;r.emit(events$a.GAMEOBJECT_DRAG_START,e,n.dragX,n.dragY);this.emit(events$a.DRAG_START,e,r)}this.setDragState(e,4);return t.length},processDragDownEvent:function(e){var t=this._temp;if(this._draggable.length===0||t.length===0||!e.primaryDown||this.getDragState(e)!==0){return 0}this.setDragState(e,1);var i=[];for(var r=0;r<t.length;r++){var n=t[r];if(n.input.draggable&&n.input.dragState===0){i.push(n)}}if(i.length===0){this.setDragState(e,0);return 0}else if(i.length>1){this.sortGameObjects(i);if(this.topOnly){i.splice(1)}}this._drag[e.id]=i;if(this.dragDistanceThreshold===0||this.dragTimeThreshold===0){this.setDragState(e,3);return this.processDragStartList(e)}else{this.setDragState(e,2);return 0}},processDragMoveEvent:function(e){if(this.getDragState(e)!==4){return 0}var t=this._tempZones;var i=this._drag[e.id];for(var r=0;r<i.length;r++){var n=i[r];var s=n.input;var a=s.target;if(a){var o=t.indexOf(a);if(o===0){n.emit(events$a.GAMEOBJECT_DRAG_OVER,e,a);this.emit(events$a.DRAG_OVER,e,n,a)}else if(o>0){n.emit(events$a.GAMEOBJECT_DRAG_LEAVE,e,a);this.emit(events$a.DRAG_LEAVE,e,n,a);s.target=t[0];a=s.target;n.emit(events$a.GAMEOBJECT_DRAG_ENTER,e,a);this.emit(events$a.DRAG_ENTER,e,n,a)}else{n.emit(events$a.GAMEOBJECT_DRAG_LEAVE,e,a);this.emit(events$a.DRAG_LEAVE,e,n,a);if(t[0]){s.target=t[0];a=s.target;n.emit(events$a.GAMEOBJECT_DRAG_ENTER,e,a);this.emit(events$a.DRAG_ENTER,e,n,a)}else{s.target=null}}}else if(!a&&t[0]){s.target=t[0];a=s.target;n.emit(events$a.GAMEOBJECT_DRAG_ENTER,e,a);this.emit(events$a.DRAG_ENTER,e,n,a)}var l;var h;if(!n.parentContainer){l=e.x-s.dragX;h=e.y-s.dragY}else{var u=e.x-s.dragStartXGlobal;var c=e.y-s.dragStartYGlobal;var f=n.getParentRotation();var d=u*Math.cos(f)+c*Math.sin(f);var v=c*Math.cos(f)-u*Math.sin(f);l=d+s.dragStartX;h=v+s.dragStartY}n.emit(events$a.GAMEOBJECT_DRAG,e,l,h);this.emit(events$a.DRAG,e,n,l,h)}return i.length},processDragUpEvent:function(e){var t=this._drag[e.id];for(var i=0;i<t.length;i++){var r=t[i];var n=r.input;if(n&&n.dragState===2){n.dragState=0;n.dragX=n.localX-r.displayOriginX;n.dragY=n.localY-r.displayOriginY;var s=false;var a=n.target;if(a){r.emit(events$a.GAMEOBJECT_DROP,e,a);this.emit(events$a.DROP,e,r,a);n.target=null;s=true}if(r.input){r.emit(events$a.GAMEOBJECT_DRAG_END,e,n.dragX,n.dragY,s);this.emit(events$a.DRAG_END,e,r,s)}}}this.setDragState(e,0);t.splice(0);return 0},processMoveEvents:function(e){var t=0;var i=this._temp;var r=this._eventData;var n=this._eventContainer;r.cancelled=false;var s=false;for(var a=0;a<i.length;a++){var o=i[a];if(!o.input){continue}t++;o.emit(events$a.GAMEOBJECT_POINTER_MOVE,e,o.input.localX,o.input.localY,n);if(r.cancelled||!o.input){s=true;break}this.emit(events$a.GAMEOBJECT_MOVE,e,o,n);if(r.cancelled||!o.input){s=true;break}if(this.topOnly){break}}if(!s){this.emit(events$a.POINTER_MOVE,e,i)}return t},processWheelEvent:function(e){var t=0;var i=this._temp;var r=this._eventData;var n=this._eventContainer;r.cancelled=false;var s=false;var a=e.deltaX;var o=e.deltaY;var l=e.deltaZ;for(var h=0;h<i.length;h++){var u=i[h];if(!u.input){continue}t++;u.emit(events$a.GAMEOBJECT_POINTER_WHEEL,e,a,o,l,n);if(r.cancelled||!u.input){s=true;break}this.emit(events$a.GAMEOBJECT_WHEEL,e,u,a,o,l,n);if(r.cancelled||!u.input){s=true;break}}if(!s){this.emit(events$a.POINTER_WHEEL,e,i,a,o,l)}return t},processOverEvents:function(e){var t=this._temp;var i=0;var r=t.length;var n=[];if(r>0){var s=this.manager;var a=this._eventData;var o=this._eventContainer;a.cancelled=false;var l=false;for(var h=0;h<r;h++){var u=t[h];if(!u.input){continue}n.push(u);s.setCursor(u.input);u.emit(events$a.GAMEOBJECT_POINTER_OVER,e,u.input.localX,u.input.localY,o);i++;if(a.cancelled||!u.input){l=true;break}this.emit(events$a.GAMEOBJECT_OVER,e,u,o);if(a.cancelled||!u.input){l=true;break}}if(!l){this.emit(events$a.POINTER_OVER,e,n)}}this._over[e.id]=n;return i},processOutEvents:function(e){var t=this._over[e.id];var i=0;var r=t.length;if(r>0){var n=this.manager;var s=this._eventData;var a=this._eventContainer;s.cancelled=false;var o=false;this.sortGameObjects(t);for(var l=0;l<r;l++){var h=t[l];for(l=0;l<r;l++){h=t[l];if(!h.input){continue}n.resetCursor(h.input);h.emit(events$a.GAMEOBJECT_POINTER_OUT,e,a);i++;if(s.cancelled||!h.input){o=true;break}this.emit(events$a.GAMEOBJECT_OUT,e,h,a);if(s.cancelled||!h.input){o=true;break}}if(!o){this.emit(events$a.POINTER_OUT,e,t)}}this._over[e.id]=[]}return i},processOverOutEvents:function(e){var t=this._temp;var i;var r;var n=[];var s=[];var a=[];var o=this._over[e.id];var l=this._drag[e.id];var h=this.manager;for(i=0;i<o.length;i++){r=o[i];if(t.indexOf(r)===-1&&l.indexOf(r)===-1){n.push(r)}else{a.push(r)}}for(i=0;i<t.length;i++){r=t[i];if(o.indexOf(r)===-1){s.push(r)}}var u=n.length;var c=0;var f=this._eventData;var d=this._eventContainer;f.cancelled=false;var v=false;if(u>0){this.sortGameObjects(n);for(i=0;i<u;i++){r=n[i];if(!r.input){continue}h.resetCursor(r.input);r.emit(events$a.GAMEOBJECT_POINTER_OUT,e,d);c++;if(f.cancelled||!r.input){v=true;break}this.emit(events$a.GAMEOBJECT_OUT,e,r,d);if(f.cancelled||!r.input){v=true;break}}if(!v){this.emit(events$a.POINTER_OUT,e,n)}}u=s.length;f.cancelled=false;v=false;if(u>0){this.sortGameObjects(s);for(i=0;i<u;i++){r=s[i];if(!r.input){continue}h.setCursor(r.input);r.emit(events$a.GAMEOBJECT_POINTER_OVER,e,r.input.localX,r.input.localY,d);c++;if(f.cancelled||!r.input){v=true;break}this.emit(events$a.GAMEOBJECT_OVER,e,r,d);if(f.cancelled||!r.input){v=true;break}}if(!v){this.emit(events$a.POINTER_OVER,e,s)}}o=a.concat(s);this._over[e.id]=this.sortGameObjects(o);return c},processUpEvents:function(e){var t=this._temp;var i=this._eventData;var r=this._eventContainer;i.cancelled=false;var n=false;for(var s=0;s<t.length;s++){var a=t[s];if(!a.input){continue}a.emit(events$a.GAMEOBJECT_POINTER_UP,e,a.input.localX,a.input.localY,r);if(i.cancelled||!a.input){n=true;break}this.emit(events$a.GAMEOBJECT_UP,e,a,r);if(i.cancelled||!a.input){n=true;break}}if(!n&&this.manager){if(e.upElement===this.manager.game.canvas){this.emit(events$a.POINTER_UP,e,t)}else{this.emit(events$a.POINTER_UP_OUTSIDE,e)}}return t.length},queueForInsertion:function(e){if(this._pendingInsertion.indexOf(e)===-1&&this._list.indexOf(e)===-1){this._pendingInsertion.push(e)}return this},queueForRemoval:function(e){this._pendingRemoval.push(e);return this},setDraggable:function(e,t){if(t===undefined){t=true}if(!Array.isArray(e)){e=[e]}for(var i=0;i<e.length;i++){var r=e[i];r.input.draggable=t;var n=this._draggable.indexOf(r);if(t&&n===-1){this._draggable.push(r)}else if(!t&&n>-1){this._draggable.splice(n,1)}}return this},makePixelPerfect:function(e){if(e===undefined){e=1}var t=this.systems.textures;return CreatePixelPerfectHandler_1(t,e)},setHitArea:function(e,t,i){if(t===undefined){return this.setHitAreaFromTexture(e)}if(!Array.isArray(e)){e=[e]}var r=false;var n=false;var s=false;var a=false;var o=false;var l=true;if(IsPlainObject_1(t)){var h=t;t=GetFastValue_1(h,"hitArea",null);i=GetFastValue_1(h,"hitAreaCallback",null);r=GetFastValue_1(h,"draggable",false);n=GetFastValue_1(h,"dropZone",false);s=GetFastValue_1(h,"cursor",false);a=GetFastValue_1(h,"useHandCursor",false);o=GetFastValue_1(h,"pixelPerfect",false);var u=GetFastValue_1(h,"alphaTolerance",1);if(o){t={};i=this.makePixelPerfect(u)}if(!t||!i){this.setHitAreaFromTexture(e);l=false}}else if(typeof t==="function"&&!i){i=t;t={}}for(var c=0;c<e.length;c++){var f=e[c];if(o&&f.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var d=!f.input?CreateInteractiveObject_1(f,t,i):f.input;d.customHitArea=l;d.dropZone=n;d.cursor=a?"pointer":s;f.input=d;if(r){this.setDraggable(f)}this.queueForInsertion(f)}return this},setHitAreaCircle:function(e,t,i,r,n){if(n===undefined){n=Contains_1}var s=new Circle_1(t,i,r);return this.setHitArea(e,s,n)},setHitAreaEllipse:function(e,t,i,r,n,s){if(s===undefined){s=Contains_1$2}var a=new Ellipse_1(t,i,r,n);return this.setHitArea(e,a,s)},setHitAreaFromTexture:function(e,t){if(t===undefined){t=Contains_1$1}if(!Array.isArray(e)){e=[e]}for(var i=0;i<e.length;i++){var r=e[i];var n=r.frame;var s=0;var a=0;if(r.width){s=r.width;a=r.height}else if(n){s=n.realWidth;a=n.realHeight}if(r.type==="Container"&&(s===0||a===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}if(s!==0&&a!==0){r.input=CreateInteractiveObject_1(r,new Rectangle_1(0,0,s,a),t);this.queueForInsertion(r)}}return this},setHitAreaRectangle:function(e,t,i,r,n,s){if(s===undefined){s=Contains_1$1}var a=new Rectangle_1(t,i,r,n);return this.setHitArea(e,a,s)},setHitAreaTriangle:function(e,t,i,r,n,s,a,o){if(o===undefined){o=Contains_1$4}var l=new Triangle_1(t,i,r,n,s,a);return this.setHitArea(e,l,o)},enableDebug:function(e,t){if(t===undefined){t=65280}var i=e.input;if(!i||!i.hitArea){return this}var r=i.hitArea;var n=r.type;var s=i.hitAreaDebug;var a=this.systems.add;var o=this.systems.updateList;if(s){o.remove(s);s.destroy();s=null}switch(n){case _const$2.CIRCLE:s=a.arc(0,0,r.radius);break;case _const$2.ELLIPSE:s=a.ellipse(0,0,r.width,r.height);break;case _const$2.LINE:s=a.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case _const$2.POLYGON:s=a.polygon(0,0,r.points);break;case _const$2.RECTANGLE:s=a.rectangle(0,0,r.width,r.height);break;case _const$2.TRIANGLE:s=a.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3);break}if(s){s.isFilled=false;s.preUpdate=function(){s.setStrokeStyle(1/e.scale,t);s.setDisplayOrigin(e.displayOriginX,e.displayOriginY);s.setRotation(e.rotation);s.setScale(e.scaleX,e.scaleY);s.setPosition(e.x,e.y);s.setScrollFactor(e.scrollFactorX,e.scrollFactorY)};o.add(s);i.hitAreaDebug=s}return this},removeDebug:function(e){var t=e.input;if(t&&t.hitAreaDebug){var i=t.hitAreaDebug;this.systems.updateList.remove(i);i.destroy();t.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(e){this.pollRate=e;this._pollTimer=0;return this},setGlobalTopOnly:function(e){this.manager.globalTopOnly=e;return this},setTopOnly:function(e){this.topOnly=e;return this},sortGameObjects:function(e){if(e.length<2){return e}this.scene.sys.depthSort();return e.sort(this.sortHandlerGO.bind(this))},sortHandlerGO:function(e,t){if(!e.parentContainer&&!t.parentContainer){return this.displayList.getIndex(t)-this.displayList.getIndex(e)}else if(e.parentContainer===t.parentContainer){return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e)}else if(e.parentContainer===t){return-1}else if(t.parentContainer===e){return 1}else{var i=e.getIndexList();var r=t.getIndexList();var n=Math.min(i.length,r.length);for(var s=0;s<n;s++){var a=i[s];var o=r[s];if(a===o){continue}else{return o-a}}}return 0},stopPropagation:function(){this.manager._tempSkip=true;return this},addPointer:function(e){return this.manager.addPointer(e)},setDefaultCursor:function(e){this.manager.setDefaultCursor(e);return this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){if(!this.settings.transitionAllowInput){this.enabled=true}},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(events$a.SHUTDOWN);this._temp.length=0;this._list.length=0;this._draggable.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;this._dragState.length=0;for(var e=0;e<10;e++){this._drag[e]=[];this._over[e]=[]}this.removeAllListeners();var t=this.systems.events;t.off(events$7.TRANSITION_START,this.transitionIn,this);t.off(events$7.TRANSITION_OUT,this.transitionOut,this);t.off(events$7.TRANSITION_COMPLETE,this.transitionComplete,this);t.off(events$7.PRE_UPDATE,this.preUpdate,this);this.manager.events.off(events$a.GAME_OUT,this.onGameOut,this);this.manager.events.off(events$a.GAME_OVER,this.onGameOver,this);t.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.pluginEvents.emit(events$a.DESTROY);this.pluginEvents.removeAllListeners();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.cameras=null;this.manager=null;this.events=null;this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});PluginCache_1.register("InputPlugin",InputPlugin,"input");var InputPlugin_1=InputPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANY_KEY_DOWN_EVENT="keydown";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ANY_KEY_UP_EVENT="keyup";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COMBO_MATCH_EVENT="keycombomatch";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DOWN_EVENT="down";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KEY_DOWN_EVENT="keydown-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KEY_UP_EVENT="keyup-";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UP_EVENT="up";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$e={ANY_KEY_DOWN:ANY_KEY_DOWN_EVENT,ANY_KEY_UP:ANY_KEY_UP_EVENT,COMBO_MATCH:COMBO_MATCH_EVENT,DOWN:DOWN_EVENT,KEY_DOWN:KEY_DOWN_EVENT,KEY_UP:KEY_UP_EVENT,UP:UP_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Key=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.plugin=t;this.keyCode=i;this.originalEvent=undefined;this.enabled=true;this.isDown=false;this.isUp=true;this.altKey=false;this.ctrlKey=false;this.shiftKey=false;this.metaKey=false;this.location=0;this.timeDown=0;this.duration=0;this.timeUp=0;this.emitOnRepeat=false;this.repeats=0;this._justDown=false;this._justUp=false;this._tick=-1},setEmitOnRepeat:function(e){this.emitOnRepeat=e;return this},onDown:function(e){this.originalEvent=e;if(!this.enabled){return}this.altKey=e.altKey;this.ctrlKey=e.ctrlKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.location=e.location;this.repeats++;if(!this.isDown){this.isDown=true;this.isUp=false;this.timeDown=e.timeStamp;this.duration=0;this._justDown=true;this._justUp=false;this.emit(events$e.DOWN,this,e)}else if(this.emitOnRepeat){this.emit(events$e.DOWN,this,e)}},onUp:function(e){this.originalEvent=e;if(!this.enabled){return}this.isDown=false;this.isUp=true;this.timeUp=e.timeStamp;this.duration=this.timeUp-this.timeDown;this.repeats=0;this._justDown=false;this._justUp=true;this._tick=-1;this.emit(events$e.UP,this,e)},reset:function(){this.preventDefault=true;this.enabled=true;this.isDown=false;this.isUp=true;this.altKey=false;this.ctrlKey=false;this.shiftKey=false;this.metaKey=false;this.timeDown=0;this.duration=0;this.timeUp=0;this.repeats=0;this._justDown=false;this._justUp=false;this._tick=-1;return this},getDuration:function(){if(this.isDown){return this.plugin.game.loop.time-this.timeDown}else{return 0}},destroy:function(){this.removeAllListeners();this.originalEvent=null;this.plugin=null}});var Key_1=Key;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AdvanceKeyCombo=function(e,t){t.timeLastMatched=e.timeStamp;t.index++;if(t.index===t.size){return true}else{t.current=t.keyCodes[t.index];return false}};var AdvanceKeyCombo_1=AdvanceKeyCombo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProcessKeyCombo=function(e,t){if(t.matched){return true}var i=false;var r=false;if(e.keyCode===t.current){if(t.index>0&&t.maxKeyDelay>0){var n=t.timeLastMatched+t.maxKeyDelay;if(e.timeStamp<=n){r=true;i=AdvanceKeyCombo_1(e,t)}}else{r=true;i=AdvanceKeyCombo_1(e,t)}}if(!r&&t.resetOnWrongKey){t.index=0;t.current=t.keyCodes[0]}if(i){t.timeLastMatched=e.timeStamp;t.matched=true;t.timeMatched=e.timeStamp}return i};var ProcessKeyCombo_1=ProcessKeyCombo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ResetKeyCombo=function(e){e.current=e.keyCodes[0];e.index=0;e.timeLastMatched=0;e.matched=false;e.timeMatched=0;return e};var ResetKeyCombo_1=ResetKeyCombo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KeyCombo=new Class_1({initialize:function e(t,i,r){if(r===undefined){r={}}if(i.length<2){return false}this.manager=t;this.enabled=true;this.keyCodes=[];for(var n=0;n<i.length;n++){var s=i[n];if(typeof s==="string"){this.keyCodes.push(s.toUpperCase().charCodeAt(0))}else if(typeof s==="number"){this.keyCodes.push(s)}else if(s.hasOwnProperty("keyCode")){this.keyCodes.push(s.keyCode)}}this.current=this.keyCodes[0];this.index=0;this.size=this.keyCodes.length;this.timeLastMatched=0;this.matched=false;this.timeMatched=0;this.resetOnWrongKey=GetFastValue_1(r,"resetOnWrongKey",true);this.maxKeyDelay=GetFastValue_1(r,"maxKeyDelay",0);this.resetOnMatch=GetFastValue_1(r,"resetOnMatch",false);this.deleteOnMatch=GetFastValue_1(r,"deleteOnMatch",false);var a=this;var o=function(e){if(a.matched||!a.enabled){return}var t=ProcessKeyCombo_1(e,a);if(t){a.manager.emit(events$e.COMBO_MATCH,a,e);if(a.resetOnMatch){ResetKeyCombo_1(a)}else if(a.deleteOnMatch){a.destroy()}}};this.onKeyDown=o;this.manager.on(events$e.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=false;this.keyCodes=[];this.manager.off(events$e.ANY_KEY_DOWN,this.onKeyDown);this.manager=null}});var KeyCombo_1=KeyCombo;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KeyMap={};for(var key in KeyCodes_1){KeyMap[KeyCodes_1[key]]=key}var KeyMap_1=KeyMap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var KeyboardPlugin=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.game=t.systems.game;this.scene=t.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=t;this.manager=t.manager.keyboard;this.enabled=true;this.keys=[];this.combos=[];t.pluginEvents.once(events$a.BOOT,this.boot,this);t.pluginEvents.on(events$a.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=GetValue_1(e,"keyboard",true);var t=GetValue_1(e,"keyboard.capture",null);if(t){this.addCaptures(t)}this.sceneInputPlugin.pluginEvents.once(events$a.DESTROY,this.destroy,this)},start:function(){if(this.sceneInputPlugin.manager.useQueue){this.sceneInputPlugin.pluginEvents.on(events$a.UPDATE,this.update,this)}else{this.sceneInputPlugin.manager.events.on(events$a.MANAGER_PROCESS,this.update,this)}this.sceneInputPlugin.pluginEvents.once(events$a.SHUTDOWN,this.shutdown,this);this.game.events.on(events$1.BLUR,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(e){this.manager.addCapture(e);return this},removeCapture:function(e){this.manager.removeCapture(e);return this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){this.manager.preventDefault=true;return this},disableGlobalCapture:function(){this.manager.preventDefault=false;return this},clearCaptures:function(){this.manager.clearCaptures();return this},createCursorKeys:function(){return this.addKeys({up:KeyCodes_1.UP,down:KeyCodes_1.DOWN,left:KeyCodes_1.LEFT,right:KeyCodes_1.RIGHT,space:KeyCodes_1.SPACE,shift:KeyCodes_1.SHIFT})},addKeys:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=false}var r={};if(typeof e==="string"){e=e.split(",");for(var n=0;n<e.length;n++){var s=e[n].trim();if(s){r[s]=this.addKey(s,t,i)}}}else{for(var a in e){r[a]=this.addKey(e[a],t,i)}}return r},addKey:function(e,t,i){if(t===undefined){t=true}if(i===undefined){i=false}var r=this.keys;if(e instanceof Key_1){var n=r.indexOf(e);if(n>-1){r[n]=e}else{r[e.keyCode]=e}if(t){this.addCapture(e.keyCode)}e.setEmitOnRepeat(i);return e}if(typeof e==="string"){e=KeyCodes_1[e.toUpperCase()]}if(!r[e]){r[e]=new Key_1(this,e);if(t){this.addCapture(e)}r[e].setEmitOnRepeat(i)}return r[e]},removeKey:function(e,t){if(t===undefined){t=false}var i=this.keys;var r;if(e instanceof Key_1){var n=i.indexOf(e);if(n>-1){r=this.keys[n];this.keys[n]=undefined}}else if(typeof e==="string"){e=KeyCodes_1[e.toUpperCase()]}if(i[e]){r=i[e];i[e]=undefined}if(r){r.plugin=null;if(t){r.destroy()}}return this},createCombo:function(e,t){return new KeyCombo_1(this,e,t)},checkDown:function(e,t){if(this.enabled&&e.isDown){var i=SnapFloor_1(this.time-e.timeDown,t);if(i>e._tick){e._tick=i;return true}}return false},update:function(){var e=this.manager.queue;var t=e.length;if(!this.isActive()||t===0){return}var i=this.keys;for(var r=0;r<t;r++){var n=e[r];var s=n.keyCode;var a=i[s];var o=false;if(n.cancelled===undefined){n.cancelled=0;n.stopImmediatePropagation=function(){n.cancelled=1};n.stopPropagation=function(){n.cancelled=-1}}if(n.cancelled===-1){continue}if(n.type==="keydown"){if(a){o=a.isDown;a.onDown(n)}if(!n.cancelled&&(!a||!o)){if(KeyMap_1[s]){this.emit(events$e.KEY_DOWN+KeyMap_1[s],n);this.emit("keydown_"+KeyMap_1[s],n)}if(!n.cancelled){this.emit(events$e.ANY_KEY_DOWN,n)}}}else{if(a){a.onUp(n)}if(!n.cancelled){if(KeyMap_1[s]){this.emit(events$e.KEY_UP+KeyMap_1[s],n);this.emit("keyup_"+KeyMap_1[s],n)}if(!n.cancelled){this.emit(events$e.ANY_KEY_UP,n)}}}if(n.cancelled===1){n.cancelled=0}}},resetKeys:function(){var e=this.keys;for(var t=0;t<e.length;t++){if(e[t]){e[t].reset()}}return this},shutdown:function(){this.resetKeys();if(this.sceneInputPlugin.manager.useQueue){this.sceneInputPlugin.pluginEvents.off(events$a.UPDATE,this.update,this)}else{this.sceneInputPlugin.manager.events.off(events$a.MANAGER_PROCESS,this.update,this)}this.game.events.off(events$1.BLUR,this.resetKeys);this.removeAllListeners();this.queue=[]},destroy:function(){this.shutdown();var e=this.keys;for(var t=0;t<e.length;t++){if(e[t]){e[t].destroy()}}this.keys=[];this.combos=[];this.queue=[];this.scene=null;this.settings=null;this.sceneInputPlugin=null;this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});InputPluginCache_1.register("KeyboardPlugin",KeyboardPlugin,"keyboard","keyboard","inputKeyboard");var KeyboardPlugin_1=KeyboardPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JustDown=function(e){if(e._justDown){e._justDown=false;return true}else{return false}};var JustDown_1=JustDown;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JustUp=function(e){if(e._justUp){e._justUp=false;return true}else{return false}};var JustUp_1=JustUp;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DownDuration=function(e,t){if(t===undefined){t=50}var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t};var DownDuration_1=DownDuration;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UpDuration=function(e,t){if(t===undefined){t=50}var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t};var UpDuration_1=UpDuration;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var keyboard={Events:events$e,KeyboardManager:KeyboardManager_1,KeyboardPlugin:KeyboardPlugin_1,Key:Key_1,KeyCodes:KeyCodes_1,KeyCombo:KeyCombo_1,JustDown:JustDown_1,JustUp:JustUp_1,DownDuration:DownDuration_1,UpDuration:UpDuration_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var mouse={MouseManager:MouseManager_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var touch={TouchManager:TouchManager_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Input$1={CreateInteractiveObject:CreateInteractiveObject_1,Events:events$a,Gamepad:gamepad,InputManager:InputManager_1,InputPlugin:InputPlugin_1,InputPluginCache:InputPluginCache_1,Keyboard:keyboard,Mouse:mouse,Pointer:Pointer_1,Touch:touch};Input$1=Extend_1(false,Input$1,_const$6);var input=Input$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FILE_CONST={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};var _const$9=FILE_CONST;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetURL=function(e,t){if(!e.url){return false}if(e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)){return e.url}else{return t+e.url}};var GetURL_1=GetURL;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var XHRSettings=function(e,t,i,r,n){if(e===undefined){e=""}if(t===undefined){t=true}if(i===undefined){i=""}if(r===undefined){r=""}if(n===undefined){n=0}return{responseType:e,async:t,user:i,password:r,timeout:n,header:undefined,headerValue:undefined,requestedWith:false,overrideMimeType:undefined}};var XHRSettings_1=XHRSettings;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MergeXHRSettings=function(e,t){var i=e===undefined?XHRSettings_1():Extend_1({},e);if(t){for(var r in t){if(t[r]!==undefined){i[r]=t[r]}}}return i};var MergeXHRSettings_1=MergeXHRSettings;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var XHRLoader=function(e,t){var i=MergeXHRSettings_1(t,e.xhrSettings);var r=new XMLHttpRequest;r.open("GET",e.src,i.async,i.user,i.password);r.responseType=e.xhrSettings.responseType;r.timeout=i.timeout;if(i.header&&i.headerValue){r.setRequestHeader(i.header,i.headerValue)}if(i.requestedWith){r.setRequestHeader("X-Requested-With",i.requestedWith)}if(i.overrideMimeType){r.overrideMimeType(i.overrideMimeType)}r.onload=e.onLoad.bind(e,r);r.onerror=e.onError.bind(e,r);r.onprogress=e.onProgress.bind(e);r.send();return r};var XHRLoader_1=XHRLoader;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var File=new Class_1({initialize:function e(t,i){this.loader=t;this.cache=GetFastValue_1(i,"cache",false);this.type=GetFastValue_1(i,"type",false);this.key=GetFastValue_1(i,"key",false);var r=this.key;if(t.prefix&&t.prefix!==""){this.key=t.prefix+r}if(!this.type||!this.key){throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.")}this.url=GetFastValue_1(i,"url");if(this.url===undefined){this.url=t.path+r+"."+GetFastValue_1(i,"extension","")}else if(typeof this.url!=="function"){this.url=t.path+this.url}this.src="";this.xhrSettings=XHRSettings_1(GetFastValue_1(i,"responseType",undefined));if(GetFastValue_1(i,"xhrSettings",false)){this.xhrSettings=MergeXHRSettings_1(this.xhrSettings,GetFastValue_1(i,"xhrSettings",{}))}this.xhrLoader=null;this.state=typeof this.url==="function"?_const$9.FILE_POPULATED:_const$9.FILE_PENDING;this.bytesTotal=0;this.bytesLoaded=-1;this.percentComplete=-1;this.crossOrigin=undefined;this.data=undefined;this.config=GetFastValue_1(i,"config",{})},setLink:function(e){this.linkFile=e;e.linkFile=this},resetXHR:function(){if(this.xhrLoader){this.xhrLoader.onload=undefined;this.xhrLoader.onerror=undefined;this.xhrLoader.onprogress=undefined}},load:function(){if(this.state===_const$9.FILE_POPULATED){this.loader.nextFile(this,true)}else{this.src=GetURL_1(this,this.loader.baseURL);if(this.src.indexOf("data:")===0){console.warn("Local data URIs are not supported: "+this.key)}else{this.xhrLoader=XHRLoader_1(this,this.loader.xhr)}}},onLoad:function(e,t){var i=e.responseURL&&e.responseURL.indexOf("file://")===0&&t.target.status===0;var r=!(t.target&&t.target.status!==200)||i;if(e.readyState===4&&e.status>=400&&e.status<=599){r=false}this.resetXHR();this.loader.nextFile(this,r)},onError:function(){this.resetXHR();this.loader.nextFile(this,false)},onProgress:function(e){if(e.lengthComputable){this.bytesLoaded=e.loaded;this.bytesTotal=e.total;this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1);this.loader.emit(events$b.FILE_PROGRESS,this,this.percentComplete)}},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.onProcessComplete()},onProcessComplete:function(){this.state=_const$9.FILE_COMPLETE;if(this.multiFile){this.multiFile.onFileComplete(this)}this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=_const$9.FILE_ERRORED;if(this.multiFile){this.multiFile.onFileFailed(this)}this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){if(this.cache){this.cache.add(this.key,this.data)}this.pendingDestroy()},pendingDestroy:function(e){if(e===undefined){e=this.data}var t=this.key;var i=this.type;this.loader.emit(events$b.FILE_COMPLETE,t,i,e);this.loader.emit(events$b.FILE_KEY_COMPLETE+i+"-"+t,t,i,e);this.loader.flagForRemoval(this)},destroy:function(){this.loader=null;this.cache=null;this.xhrSettings=null;this.multiFile=null;this.linkFile=null;this.data=null}});File.createObjectURL=function(e,t,i){if(typeof URL==="function"){e.src=URL.createObjectURL(t)}else{var r=new FileReader;r.onload=function(){e.removeAttribute("crossOrigin");e.src="data:"+(t.type||i)+";base64,"+r.result.split(",")[1]};r.onerror=e.onerror;r.readAsDataURL(t)}};File.revokeObjectURL=function(e){if(typeof URL==="function"){URL.revokeObjectURL(e.src)}};var File_1=File;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var JSONFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){var a="json";if(IsPlainObject_1(i)){var o=i;i=GetFastValue_1(o,"key");r=GetFastValue_1(o,"url");n=GetFastValue_1(o,"xhrSettings");a=GetFastValue_1(o,"extension",a);s=GetFastValue_1(o,"dataKey",s)}var l={type:"json",cache:t.cacheManager.json,extension:a,responseType:"text",key:i,url:r,xhrSettings:n,config:s};File_1.call(this,t,l);if(IsPlainObject_1(r)){if(s){this.data=GetValue_1(r,s)}else{this.data=r}this.state=_const$9.FILE_POPULATED}},onProcess:function(){if(this.state!==_const$9.FILE_POPULATED){this.state=_const$9.FILE_PROCESSING;var e=JSON.parse(this.xhrLoader.responseText);var t=this.config;if(typeof t==="string"){this.data=GetValue_1(e,t,e)}else{this.data=e}}this.onProcessComplete()}});FileTypesManager_1.register("json",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new JSONFile(this,e[n]))}}else{this.addFile(new JSONFile(this,e,t,r,i))}return this}));var JSONFile_1=JSONFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AnimationJSONFile=new Class_1({Extends:JSONFile_1,initialize:function e(t,i,r,n,s){JSONFile_1.call(this,t,i,r,n,s);this.type="animationJSON"},onProcess:function(){this.loader.once(events$b.POST_PROCESS,this.onLoadComplete,this);JSONFile_1.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data);this.pendingDestroy()}});FileTypesManager_1.register("animation",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new AnimationJSONFile(this,e[n]))}}else{this.addFile(new AnimationJSONFile(this,e,t,r,i))}return this}));var AnimationJSONFile_1=AnimationJSONFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImageFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){var a="png";var o;if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"url");o=GetFastValue_1(l,"normalMap");n=GetFastValue_1(l,"xhrSettings");a=GetFastValue_1(l,"extension",a);s=GetFastValue_1(l,"frameConfig")}if(Array.isArray(r)){o=r[1];r=r[0]}var h={type:"image",cache:t.textureManager,extension:a,responseType:"blob",key:i,url:r,xhrSettings:n,config:s};File_1.call(this,t,h);if(o){var u=new e(t,this.key,o,n,s);u.type="normalMap";this.setLink(u);t.addFile(u)}},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=new Image;this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){File_1.revokeObjectURL(e.data);e.onProcessComplete()};this.data.onerror=function(){File_1.revokeObjectURL(e.data);e.onProcessError()};File_1.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var e;var t=this.linkFile;if(t&&t.state===_const$9.FILE_COMPLETE){if(this.type==="image"){e=this.cache.addImage(this.key,this.data,t.data)}else{e=this.cache.addImage(t.key,t.data,this.data)}this.pendingDestroy(e);t.pendingDestroy(e)}else if(!t){e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}}});FileTypesManager_1.register("image",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new ImageFile(this,e[r]))}}else{this.addFile(new ImageFile(this,e,t,i))}return this}));var ImageFile_1=ImageFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MultiFile=new Class_1({initialize:function e(t,i,r,n){this.loader=t;this.type=i;this.key=r;this.files=n;this.complete=false;this.pending=n.length;this.failed=0;this.config={};for(var s=0;s<n.length;s++){n[s].multiFile=this}},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(e){this.files.push(e);e.multiFile=this;this.pending++;this.complete=false;return this},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1){this.pending--}},onFileFailed:function(e){var t=this.files.indexOf(e);if(t!==-1){this.failed++}}});var MultiFile_1=MultiFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AtlasJSONFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a){var o;var l;if(IsPlainObject_1(i)){var h=i;i=GetFastValue_1(h,"key");o=new ImageFile_1(t,{key:i,url:GetFastValue_1(h,"textureURL"),extension:GetFastValue_1(h,"textureExtension","png"),normalMap:GetFastValue_1(h,"normalMap"),xhrSettings:GetFastValue_1(h,"textureXhrSettings")});l=new JSONFile_1(t,{key:i,url:GetFastValue_1(h,"atlasURL"),extension:GetFastValue_1(h,"atlasExtension","json"),xhrSettings:GetFastValue_1(h,"atlasXhrSettings")})}else{o=new ImageFile_1(t,i,r,s);l=new JSONFile_1(t,i,n,a)}if(o.linkFile){MultiFile_1.call(this,t,"atlasjson",i,[o,l,o.linkFile])}else{MultiFile_1.call(this,t,"atlasjson",i,[o,l])}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];var t=this.files[1];var i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i);t.addToCache();this.complete=true}}});FileTypesManager_1.register("atlas",(function(e,t,i,r,n){var s;if(Array.isArray(e)){for(var a=0;a<e.length;a++){s=new AtlasJSONFile(this,e[a]);this.addFile(s.files)}}else{s=new AtlasJSONFile(this,e,t,i,r,n);this.addFile(s.files)}return this}));var AtlasJSONFile_1=AtlasJSONFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var XMLFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="xml";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"xml",cache:t.cacheManager.xml,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=ParseXML_1(this.xhrLoader.responseText);if(this.data){this.onProcessComplete()}else{console.warn("Invalid XMLFile: "+this.key);this.onProcessError()}}});FileTypesManager_1.register("xml",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new XMLFile(this,e[r]))}}else{this.addFile(new XMLFile(this,e,t,i))}return this}));var XMLFile_1=XMLFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AtlasXMLFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a){var o;var l;if(IsPlainObject_1(i)){var h=i;i=GetFastValue_1(h,"key");o=new ImageFile_1(t,{key:i,url:GetFastValue_1(h,"textureURL"),extension:GetFastValue_1(h,"textureExtension","png"),normalMap:GetFastValue_1(h,"normalMap"),xhrSettings:GetFastValue_1(h,"textureXhrSettings")});l=new XMLFile_1(t,{key:i,url:GetFastValue_1(h,"atlasURL"),extension:GetFastValue_1(h,"atlasExtension","xml"),xhrSettings:GetFastValue_1(h,"atlasXhrSettings")})}else{o=new ImageFile_1(t,i,r,s);l=new XMLFile_1(t,i,n,a)}if(o.linkFile){MultiFile_1.call(this,t,"atlasxml",i,[o,l,o.linkFile])}else{MultiFile_1.call(this,t,"atlasxml",i,[o,l])}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];var t=this.files[1];var i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i);t.addToCache();this.complete=true}}});FileTypesManager_1.register("atlasXML",(function(e,t,i,r,n){var s;if(Array.isArray(e)){for(var a=0;a<e.length;a++){s=new AtlasXMLFile(this,e[a]);this.addFile(s.files)}}else{s=new AtlasXMLFile(this,e,t,i,r,n);this.addFile(s.files)}return this}));var AtlasXMLFile_1=AtlasXMLFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HTML5AudioFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){if(IsPlainObject_1(i)){var s=i;i=GetFastValue_1(s,"key");n=GetFastValue_1(s,"config",n)}var a={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:i,url:r.url,config:n};File_1.call(this,t,a);this.locked="ontouchstart"in window;this.loaded=false;this.filesLoaded=0;this.filesTotal=0},onLoad:function(){if(this.loaded){return}this.loaded=true;this.loader.nextFile(this,true)},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null;t.onerror=null}this.loader.nextFile(this,false)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null;t.onerror=null;this.filesLoaded++;this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1);this.loader.emit(events$b.FILE_PROGRESS,this,this.percentComplete);if(this.filesLoaded===this.filesTotal){this.onLoad()}},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e;this.filesLoaded=0;this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset={};i.dataset.name=this.key+("0"+t).slice(-2);i.dataset.used="false";if(this.locked){i.dataset.locked="true"}else{i.dataset.locked="false";i.preload="auto";i.oncanplaythrough=this.onProgress.bind(this);i.onerror=this.onError.bind(this)}this.data.push(i)}for(t=0;t<this.data.length;t++){i=this.data[t];i.src=GetURL_1(this,this.loader.baseURL);if(!this.locked){i.load()}}if(this.locked){setTimeout(this.onLoad.bind(this))}}});var HTML5AudioFile_1=HTML5AudioFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AudioFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"context",s)}var o={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:i,url:r.url,xhrSettings:n,config:{context:s}};File_1.call(this,t,o)},onProcess:function(){this.state=_const.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(t){e.data=t;e.onProcessComplete()}),(function(t){console.error("Error decoding audio: "+this.key+" - ",t?t.message:null);e.onProcessError()}));this.config.context=null}});AudioFile.create=function(e,t,i,r,n){var s=e.systems.game;var a=s.config.audio;var o=s.device.audio;if(IsPlainObject_1(t)){i=GetFastValue_1(t,"url",[]);r=GetFastValue_1(t,"config",{})}var l=AudioFile.getAudioURL(s,i);if(!l){return null}if(o.webAudio&&!(a&&a.disableWebAudio)){return new AudioFile(e,t,l,n,s.sound.context)}else{return new HTML5AudioFile_1(e,t,l,r)}};AudioFile.getAudioURL=function(e,t){if(!Array.isArray(t)){t=[t]}for(var i=0;i<t.length;i++){var r=GetFastValue_1(t[i],"url",t[i]);if(r.indexOf("blob:")===0||r.indexOf("data:")===0){return r}var n=r.match(/\.([a-zA-Z0-9]+)($|\?)/);n=GetFastValue_1(t[i],"type",n?n[1]:"").toLowerCase();if(e.device.audio[n]){return{url:r,type:n}}}return null};FileTypesManager_1.register("audio",(function(e,t,i,r){var n=this.systems.game;var s=n.config.audio;var a=n.device.audio;if(s&&s.noAudio||!a.webAudio&&!a.audioData){return this}var o;if(Array.isArray(e)){for(var l=0;l<e.length;l++){o=AudioFile.create(this,e[l]);if(o){this.addFile(o)}}}else{o=AudioFile.create(this,e,t,i,r);if(o){this.addFile(o)}}return this}));var AudioFile_1=AudioFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AudioSpriteFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a,o){if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"jsonURL");n=GetFastValue_1(l,"audioURL");s=GetFastValue_1(l,"audioConfig");a=GetFastValue_1(l,"audioXhrSettings");o=GetFastValue_1(l,"jsonXhrSettings")}var h;if(!n){h=new JSONFile_1(t,i,r,o);MultiFile_1.call(this,t,"audiosprite",i,[h]);this.config.resourceLoad=true;this.config.audioConfig=s;this.config.audioXhrSettings=a}else{var u=AudioFile_1.create(t,i,n,s,a);if(u){h=new JSONFile_1(t,i,r,o);MultiFile_1.call(this,t,"audiosprite",i,[u,h]);this.config.resourceLoad=false}}},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1){this.pending--;if(this.config.resourceLoad&&e.type==="json"&&e.data.hasOwnProperty("resources")){var i=e.data.resources;var r=GetFastValue_1(this.config,"audioConfig");var n=GetFastValue_1(this.config,"audioXhrSettings");var s=AudioFile_1.create(this.loader,e.key,i,r,n);if(s){this.addToMultiFile(s);this.loader.addFile(s)}}}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];var t=this.files[1];e.addToCache();t.addToCache();this.complete=true}}});FileTypesManager_1.register("audioSprite",(function(e,t,i,r,n,s){var a=this.systems.game;var o=a.config.audio;var l=a.device.audio;if(o&&o.noAudio||!l.webAudio&&!l.audioData){return this}var h;if(Array.isArray(e)){for(var u=0;u<e.length;u++){h=new AudioSpriteFile(this,e[u]);if(h.files){this.addFile(h.files)}}}else{h=new AudioSpriteFile(this,e,t,i,r,n,s);if(h.files){this.addFile(h.files)}}return this}));var AudioSpriteFile_1={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BinaryFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){var a="bin";if(IsPlainObject_1(i)){var o=i;i=GetFastValue_1(o,"key");r=GetFastValue_1(o,"url");n=GetFastValue_1(o,"xhrSettings");a=GetFastValue_1(o,"extension",a);s=GetFastValue_1(o,"dataType",s)}var l={type:"binary",cache:t.cacheManager.binary,extension:a,responseType:"arraybuffer",key:i,url:r,xhrSettings:n,config:{dataType:s}};File_1.call(this,t,l)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response;this.onProcessComplete()}});FileTypesManager_1.register("binary",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new BinaryFile(this,e[n]))}}else{this.addFile(new BinaryFile(this,e,t,r,i))}return this}));var BinaryFile_1=BinaryFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BitmapFontFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a){var o;var l;if(IsPlainObject_1(i)){var h=i;i=GetFastValue_1(h,"key");o=new ImageFile_1(t,{key:i,url:GetFastValue_1(h,"textureURL"),extension:GetFastValue_1(h,"textureExtension","png"),normalMap:GetFastValue_1(h,"normalMap"),xhrSettings:GetFastValue_1(h,"textureXhrSettings")});l=new XMLFile_1(t,{key:i,url:GetFastValue_1(h,"fontDataURL"),extension:GetFastValue_1(h,"fontDataExtension","xml"),xhrSettings:GetFastValue_1(h,"fontDataXhrSettings")})}else{o=new ImageFile_1(t,i,r,s);l=new XMLFile_1(t,i,n,a)}if(o.linkFile){MultiFile_1.call(this,t,"bitmapfont",i,[o,l,o.linkFile])}else{MultiFile_1.call(this,t,"bitmapfont",i,[o,l])}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];var t=this.files[1];e.addToCache();t.addToCache();this.loader.cacheManager.bitmapFont.add(e.key,{data:ParseXMLBitmapFont_1(t.data),texture:e.key,frame:null});this.complete=true}}});FileTypesManager_1.register("bitmapFont",(function(e,t,i,r,n){var s;if(Array.isArray(e)){for(var a=0;a<e.length;a++){s=new BitmapFontFile(this,e[a]);this.addFile(s.files)}}else{s=new BitmapFontFile(this,e,t,i,r,n);this.addFile(s.files)}return this}));var BitmapFontFile_1=BitmapFontFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CSSFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="css";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"script",cache:false,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=document.createElement("style");this.data.defer=false;this.data.innerHTML=this.xhrLoader.responseText;document.head.appendChild(this.data);this.onProcessComplete()}});FileTypesManager_1.register("css",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new CSSFile(this,e[r]))}}else{this.addFile(new CSSFile(this,e,t,i))}return this}));var CSSFile_1=CSSFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GLSLFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){var a="glsl";if(IsPlainObject_1(i)){var o=i;i=GetFastValue_1(o,"key");r=GetFastValue_1(o,"url");n=GetFastValue_1(o,"shaderType","fragment");s=GetFastValue_1(o,"xhrSettings");a=GetFastValue_1(o,"extension",a)}else if(n===undefined){n="fragment"}var l={type:"glsl",cache:t.cacheManager.shader,extension:a,responseType:"text",key:i,url:r,config:{shaderType:n},xhrSettings:s};File_1.call(this,t,l)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function(){var e=this.data.split("\n");var t=this.extractBlock(e,0);if(t){while(t){var i=this.getShaderName(t.header);var r=this.getShaderType(t.header);var n=this.getShaderUniforms(t.header);var s=t.shader;if(this.cache.has(i)){var a=this.cache.get(i);if(r==="fragment"){a.fragmentSrc=s}else{a.vertexSrc=s}if(!a.uniforms){a.uniforms=n}}else if(r==="fragment"){this.cache.add(i,new BaseShader_1(i,s,"",n))}else{this.cache.add(i,new BaseShader_1(i,"",s,n))}t=this.extractBlock(e,t.offset)}}else if(this.config.shaderType==="fragment"){this.cache.add(this.key,new BaseShader_1(this.key,this.data))}else{this.cache.add(this.key,new BaseShader_1(this.key,"",this.data))}this.pendingDestroy()},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="name:"){return i.substring(5).trim()}}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if(i.substring(0,5)==="type:"){return i.substring(5).trim()}}return this.config.shaderType},getShaderUniforms:function(e){var t={};for(var i=0;i<e.length;i++){var r=e[i].trim();if(r.substring(0,8)==="uniform."){var n=r.indexOf(":");if(n){var s=r.substring(8,n);try{t[s]=JSON.parse(r.substring(n+1))}catch(a){console.warn("Invalid uniform JSON: "+s)}}}}return t},extractBlock:function(e,t){var i=-1;var r=-1;var n=-1;var s=false;var a=false;var o=[];var l=[];for(var h=t;h<e.length;h++){var u=e[h].trim();if(u==="---"){if(i===-1){i=h;s=true}else if(s){r=h;s=false;a=true}else{a=false;break}}else if(s){o.push(u)}else if(a){l.push(u);n=h}}if(!s&&r!==-1){return{header:o,shader:l.join("\n"),offset:n}}else{return null}}});FileTypesManager_1.register("glsl",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new GLSLFile(this,e[n]))}}else{this.addFile(new GLSLFile(this,e,t,i,r))}return this}));var GLSLFile_1=GLSLFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HTMLFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="html";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"text",cache:t.cacheManager.html,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});FileTypesManager_1.register("html",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new HTMLFile(this,e[r]))}}else{this.addFile(new HTMLFile(this,e,t,i))}return this}));var HTMLFile_1=HTMLFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HTMLTextureFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s,a){if(n===undefined){n=512}if(s===undefined){s=512}var o="html";if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"url");a=GetFastValue_1(l,"xhrSettings");o=GetFastValue_1(l,"extension",o);n=GetFastValue_1(l,"width",n);s=GetFastValue_1(l,"height",s)}var h={type:"html",cache:t.textureManager,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{width:n,height:s}};File_1.call(this,t,h)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;var e=this.config.width;var t=this.config.height;var i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">');i.push('<foreignObject width="100%" height="100%">');i.push('<body xmlns="http://www.w3.org/1999/xhtml">');i.push(this.xhrLoader.responseText);i.push("</body>");i.push("</foreignObject>");i.push("</svg>");var r=[i.join("\n")];var n=this;try{var s=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(a){n.state=_const$9.FILE_ERRORED;n.onProcessComplete();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;this.data.onload=function(){File_1.revokeObjectURL(n.data);n.onProcessComplete()};this.data.onerror=function(){File_1.revokeObjectURL(n.data);n.onProcessError()};File_1.createObjectURL(this.data,s,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});FileTypesManager_1.register("htmlTexture",(function(e,t,i,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++){this.addFile(new HTMLTextureFile(this,e[s]))}}else{this.addFile(new HTMLTextureFile(this,e,t,i,r,n))}return this}));var HTMLTextureFile_1=HTMLTextureFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MultiAtlasFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a,o){if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"url");a=GetFastValue_1(l,"xhrSettings");n=GetFastValue_1(l,"path");s=GetFastValue_1(l,"baseURL");o=GetFastValue_1(l,"textureXhrSettings")}var h=new JSONFile_1(t,i,r,a);MultiFile_1.call(this,t,"multiatlas",i,[h]);this.config.path=n;this.config.baseURL=s;this.config.textureXhrSettings=o},onFileComplete:function(e){var t=this.files.indexOf(e);if(t!==-1){this.pending--;if(e.type==="json"&&e.data.hasOwnProperty("textures")){var i=e.data.textures;var r=this.config;var n=this.loader;var s=n.baseURL;var a=n.path;var o=n.prefix;var l=GetFastValue_1(r,"baseURL",s);var h=GetFastValue_1(r,"path",a);var u=GetFastValue_1(r,"prefix",o);var c=GetFastValue_1(r,"textureXhrSettings");n.setBaseURL(l);n.setPath(h);n.setPrefix(u);for(var f=0;f<i.length;f++){var d=i[f].image;var v="_MA_"+d;var p=new ImageFile_1(n,v,d,c);this.addToMultiFile(p);n.addFile(p);if(i[f].normalMap){var g=new ImageFile_1(n,v,i[f].normalMap,c);g.type="normalMap";p.setLink(g);this.addToMultiFile(g);n.addFile(g)}}n.setBaseURL(s);n.setPath(a);n.setPrefix(o)}}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];e.addToCache();var t=[];var i=[];var r=[];for(var n=1;n<this.files.length;n++){var s=this.files[n];if(s.type==="normalMap"){continue}var a=s.key.substr(4);var o=s.data;for(var l=0;l<e.data.textures.length;l++){var h=e.data.textures[l];if(h.image===a){i.push(o);t.push(h);if(s.linkFile){r.push(s.linkFile.data)}break}}}if(r.length===0){r=undefined}this.loader.textureManager.addAtlasJSONArray(this.key,i,t,r);this.complete=true;for(n=0;n<this.files.length;n++){this.files[n].pendingDestroy()}}}});FileTypesManager_1.register("multiatlas",(function(e,t,i,r,n){var s;if(Array.isArray(e)){for(var a=0;a<e.length;a++){s=new MultiAtlasFile(this,e[a]);this.addFile(s.files)}}else{s=new MultiAtlasFile(this,e,t,i,r,n);this.addFile(s.files)}return this}));var MultiAtlasFile_1=MultiAtlasFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScriptFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="js";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"script",cache:false,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=false;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);this.onProcessComplete()}});FileTypesManager_1.register("script",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new ScriptFile(this,e[r]))}}else{this.addFile(new ScriptFile(this,e,t,i))}return this}));var ScriptFile_1=ScriptFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MultiScriptFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n){var s="js";var a=[];if(IsPlainObject_1(i)){var o=i;i=GetFastValue_1(o,"key");r=GetFastValue_1(o,"url");n=GetFastValue_1(o,"xhrSettings");s=GetFastValue_1(o,"extension",s)}if(!Array.isArray(r)){r=[r]}for(var l=0;l<r.length;l++){var h=new ScriptFile_1(t,{key:i+"_"+l.toString(),url:r[l],extension:s,xhrSettings:n});h.onProcess=function(){this.onProcessComplete()};a.push(h)}MultiFile_1.call(this,t,"scripts",i,a)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script");t.data.language="javascript";t.data.type="text/javascript";t.data.defer=false;t.data.text=t.xhrLoader.responseText;document.head.appendChild(t.data)}this.complete=true}}});FileTypesManager_1.register("scripts",(function(e,t,i){var r;if(Array.isArray(e)){for(var n=0;n<e.length;n++){r=new MultiScriptFile(this,e[n]);this.addFile(r.files)}}else{r=new MultiScriptFile(this,e,t,i);this.addFile(r.files)}return this}));var MultiScriptFile_1=MultiScriptFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PackFile=new Class_1({Extends:JSONFile_1,initialize:function e(t,i,r,n,s){JSONFile_1.call(this,t,i,r,n,s);this.type="packfile"},onProcess:function(){if(this.state!==_const$9.FILE_POPULATED){this.state=_const$9.FILE_PROCESSING;this.data=JSON.parse(this.xhrLoader.responseText)}this.loader.addPack(this.data,this.config);this.onProcessComplete()}});FileTypesManager_1.register("pack",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new PackFile(this,e[n]))}}else{this.addFile(new PackFile(this,e,t,r,i))}return this}));var PackFile_1=PackFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PluginFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s,a){var o="js";if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"url");a=GetFastValue_1(l,"xhrSettings");o=GetFastValue_1(l,"extension",o);n=GetFastValue_1(l,"start");s=GetFastValue_1(l,"mapping")}var h={type:"plugin",cache:false,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{start:n,mapping:s}};File_1.call(this,t,h);if(typeof r==="function"){this.data=r;this.state=_const$9.FILE_POPULATED}},onProcess:function(){var e=this.loader.systems.plugins;var t=this.config;var i=GetFastValue_1(t,"start",false);var r=GetFastValue_1(t,"mapping",null);if(this.state===_const$9.FILE_POPULATED){e.install(this.key,this.data,i,r)}else{this.state=_const$9.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=false;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);var n=e.install(this.key,window[this.key],i,r);if(i||r){this.loader.systems[r]=n;this.loader.scene[r]=n}}this.onProcessComplete()}});FileTypesManager_1.register("plugin",(function(e,t,i,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++){this.addFile(new PluginFile(this,e[s]))}}else{this.addFile(new PluginFile(this,e,t,i,r,n))}return this}));var PluginFile_1=PluginFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SceneFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="js";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"text",cache:t.cacheManager.text,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function(){var code=this.data.concat("(function(){\n"+"return new "+this.key+"();\n"+"}).call(this);");this.loader.sceneManager.add(this.key,eval(code));this.complete=true}});FileTypesManager_1.register("sceneFile",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new SceneFile(this,e[r]))}}else{this.addFile(new SceneFile(this,e,t,i))}return this}));var SceneFile_1=SceneFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScenePluginFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s,a){var o="js";if(IsPlainObject_1(i)){var l=i;i=GetFastValue_1(l,"key");r=GetFastValue_1(l,"url");a=GetFastValue_1(l,"xhrSettings");o=GetFastValue_1(l,"extension",o);n=GetFastValue_1(l,"systemKey");s=GetFastValue_1(l,"sceneKey")}var h={type:"scenePlugin",cache:false,extension:o,responseType:"text",key:i,url:r,xhrSettings:a,config:{systemKey:n,sceneKey:s}};File_1.call(this,t,h);if(typeof r==="function"){this.data=r;this.state=_const$9.FILE_POPULATED}},onProcess:function(){var e=this.loader.systems.plugins;var t=this.config;var i=this.key;var r=GetFastValue_1(t,"systemKey",i);var n=GetFastValue_1(t,"sceneKey",i);if(this.state===_const$9.FILE_POPULATED){e.installScenePlugin(r,this.data,n,this.loader.scene,true)}else{this.state=_const$9.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=false;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);e.installScenePlugin(r,window[this.key],n,this.loader.scene,true)}this.onProcessComplete()}});FileTypesManager_1.register("scenePlugin",(function(e,t,i,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++){this.addFile(new ScenePluginFile(this,e[s]))}}else{this.addFile(new ScenePluginFile(this,e,t,i,r,n))}return this}));var ScenePluginFile_1=ScenePluginFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SpriteSheetFile=new Class_1({Extends:ImageFile_1,initialize:function e(t,i,r,n,s){ImageFile_1.call(this,t,i,r,s,n);this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});FileTypesManager_1.register("spritesheet",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new SpriteSheetFile(this,e[n]))}}else{this.addFile(new SpriteSheetFile(this,e,t,i,r))}return this}));var SpriteSheetFile_1=SpriteSheetFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SVGFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n,s){var a="svg";if(IsPlainObject_1(i)){var o=i;i=GetFastValue_1(o,"key");r=GetFastValue_1(o,"url");n=GetFastValue_1(o,"svgConfig",{});s=GetFastValue_1(o,"xhrSettings");a=GetFastValue_1(o,"extension",a)}var l={type:"svg",cache:t.textureManager,extension:a,responseType:"text",key:i,url:r,xhrSettings:s,config:{width:GetFastValue_1(n,"width"),height:GetFastValue_1(n,"height"),scale:GetFastValue_1(n,"scale")}};File_1.call(this,t,l)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;var e=this.xhrLoader.responseText;var t=[e];var i=this.config.width;var r=this.config.height;var n=this.config.scale;e:if(i&&r||n){var s=null;var a=new DOMParser;s=a.parseFromString(e,"text/xml");var o=s.getElementsByTagName("svg")[0];var l=o.hasAttribute("viewBox");var h=parseFloat(o.getAttribute("width"));var u=parseFloat(o.getAttribute("height"));if(!l&&h&&u){o.setAttribute("viewBox","0  0 "+h+" "+u)}else if(l&&!h&&!u){var c=o.getAttribute("viewBox").split(/\s+|,/);h=c[2];u=c[3]}if(n){if(h&&u){i=h*n;r=u*n}else{break e}}o.setAttribute("width",i.toString()+"px");o.setAttribute("height",r.toString()+"px");t=[(new XMLSerializer).serializeToString(o)]}try{var f=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(p){this.onProcessError();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;var d=this;var v=false;this.data.onload=function(){if(!v){File_1.revokeObjectURL(d.data)}d.onProcessComplete()};this.data.onerror=function(){if(!v){v=true;File_1.revokeObjectURL(d.data);d.data.src="data:image/svg+xml,"+encodeURIComponent(t.join(""))}else{d.onProcessError()}};File_1.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});FileTypesManager_1.register("svg",(function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new SVGFile(this,e[n]))}}else{this.addFile(new SVGFile(this,e,t,i,r))}return this}));var SVGFile_1=SVGFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TextFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="txt";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"text",cache:t.cacheManager.text,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o)},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});FileTypesManager_1.register("text",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new TextFile(this,e[r]))}}else{this.addFile(new TextFile(this,e,t,i))}return this}));var TextFile_1=TextFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Formats={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TilemapCSVFile=new Class_1({Extends:File_1,initialize:function e(t,i,r,n){var s="csv";if(IsPlainObject_1(i)){var a=i;i=GetFastValue_1(a,"key");r=GetFastValue_1(a,"url");n=GetFastValue_1(a,"xhrSettings");s=GetFastValue_1(a,"extension",s)}var o={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:s,responseType:"text",key:i,url:r,xhrSettings:n};File_1.call(this,t,o);this.tilemapFormat=Formats.CSV},onProcess:function(){this.state=_const$9.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});FileTypesManager_1.register("tilemapCSV",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new TilemapCSVFile(this,e[r]))}}else{this.addFile(new TilemapCSVFile(this,e,t,i))}return this}));var TilemapCSVFile_1=TilemapCSVFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TilemapImpactFile=new Class_1({Extends:JSONFile_1,initialize:function e(t,i,r,n){JSONFile_1.call(this,t,i,r,n);this.type="tilemapJSON";this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:Formats.WELTMEISTER,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});FileTypesManager_1.register("tilemapImpact",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new TilemapImpactFile(this,e[r]))}}else{this.addFile(new TilemapImpactFile(this,e,t,i))}return this}));var TilemapImpactFile_1=TilemapImpactFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TilemapJSONFile=new Class_1({Extends:JSONFile_1,initialize:function e(t,i,r,n){JSONFile_1.call(this,t,i,r,n);this.type="tilemapJSON";this.cache=t.cacheManager.tilemap},addToCache:function(){var e={format:Formats.TILED_JSON,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});FileTypesManager_1.register("tilemapTiledJSON",(function(e,t,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new TilemapJSONFile(this,e[r]))}}else{this.addFile(new TilemapJSONFile(this,e,t,i))}return this}));var TilemapJSONFile_1=TilemapJSONFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UnityAtlasFile=new Class_1({Extends:MultiFile_1,initialize:function e(t,i,r,n,s,a){var o;var l;if(IsPlainObject_1(i)){var h=i;i=GetFastValue_1(h,"key");o=new ImageFile_1(t,{key:i,url:GetFastValue_1(h,"textureURL"),extension:GetFastValue_1(h,"textureExtension","png"),normalMap:GetFastValue_1(h,"normalMap"),xhrSettings:GetFastValue_1(h,"textureXhrSettings")});l=new TextFile_1(t,{key:i,url:GetFastValue_1(h,"atlasURL"),extension:GetFastValue_1(h,"atlasExtension","txt"),xhrSettings:GetFastValue_1(h,"atlasXhrSettings")})}else{o=new ImageFile_1(t,i,r,s);l=new TextFile_1(t,i,n,a)}if(o.linkFile){MultiFile_1.call(this,t,"unityatlas",i,[o,l,o.linkFile])}else{MultiFile_1.call(this,t,"unityatlas",i,[o,l])}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0];var t=this.files[1];var i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i);t.addToCache();this.complete=true}}});FileTypesManager_1.register("unityAtlas",(function(e,t,i,r,n){var s;if(Array.isArray(e)){for(var a=0;a<e.length;a++){s=new UnityAtlasFile(this,e[a]);this.addFile(s.files)}}else{s=new UnityAtlasFile(this,e,t,i,r,n);this.addFile(s.files)}return this}));var UnityAtlasFile_1=UnityAtlasFile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var filetypes={AnimationJSONFile:AnimationJSONFile_1,AtlasJSONFile:AtlasJSONFile_1,AtlasXMLFile:AtlasXMLFile_1,AudioFile:AudioFile_1,AudioSpriteFile:AudioSpriteFile_1,BinaryFile:BinaryFile_1,BitmapFontFile:BitmapFontFile_1,CSSFile:CSSFile_1,GLSLFile:GLSLFile_1,HTML5AudioFile:HTML5AudioFile_1,HTMLFile:HTMLFile_1,HTMLTextureFile:HTMLTextureFile_1,ImageFile:ImageFile_1,JSONFile:JSONFile_1,MultiAtlasFile:MultiAtlasFile_1,MultiScriptFile:MultiScriptFile_1,PackFile:PackFile_1,PluginFile:PluginFile_1,SceneFile:SceneFile_1,ScenePluginFile:ScenePluginFile_1,ScriptFile:ScriptFile_1,SpriteSheetFile:SpriteSheetFile_1,SVGFile:SVGFile_1,TextFile:TextFile_1,TilemapCSVFile:TilemapCSVFile_1,TilemapImpactFile:TilemapImpactFile_1,TilemapJSONFile:TilemapJSONFile_1,UnityAtlasFile:UnityAtlasFile_1,XMLFile:XMLFile_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LoaderPlugin=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);var i=t.sys.game.config;var r=t.sys.settings.loader;this.scene=t;this.systems=t.sys;this.cacheManager=t.sys.cache;this.textureManager=t.sys.textures;this.sceneManager=t.sys.game.scene;FileTypesManager_1.install(this);this.prefix="";this.path="";this.baseURL="";this.setBaseURL(GetFastValue_1(r,"baseURL",i.loaderBaseURL));this.setPath(GetFastValue_1(r,"path",i.loaderPath));this.setPrefix(GetFastValue_1(r,"prefix",i.loaderPrefix));this.maxParallelDownloads=GetFastValue_1(r,"maxParallelDownloads",i.loaderMaxParallelDownloads);this.xhr=XHRSettings_1(GetFastValue_1(r,"responseType",i.loaderResponseType),GetFastValue_1(r,"async",i.loaderAsync),GetFastValue_1(r,"user",i.loaderUser),GetFastValue_1(r,"password",i.loaderPassword),GetFastValue_1(r,"timeout",i.loaderTimeout));this.crossOrigin=GetFastValue_1(r,"crossOrigin",i.loaderCrossOrigin);this.totalToLoad=0;this.progress=0;this.list=new _Set;this.inflight=new _Set;this.queue=new _Set;this._deleteQueue=new _Set;this.totalFailed=0;this.totalComplete=0;this.state=_const$9.LOADER_IDLE;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.pluginStart,this)},boot:function(){this.systems.events.once(events$7.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(events$7.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){if(e===undefined){e=""}if(e!==""&&e.substr(-1)!=="/"){e=e.concat("/")}this.baseURL=e;return this},setPath:function(e){if(e===undefined){e=""}if(e!==""&&e.substr(-1)!=="/"){e=e.concat("/")}this.path=e;return this},setPrefix:function(e){if(e===undefined){e=""}this.prefix=e;return this},setCORS:function(e){this.crossOrigin=e;return this},addFile:function(e){if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){var i=e[t];if(!this.keyExists(i)){this.list.set(i);this.emit(events$b.ADD,i.key,i.type,this,i);if(this.isLoading()){this.totalToLoad++;this.updateProgress()}}}},keyExists:function(e){var t=e.hasCacheConflict();if(!t){this.list.iterate((function(i){if(i.type===e.type&&i.key===e.key){t=true;return false}}))}if(!t&&this.isLoading()){this.inflight.iterate((function(i){if(i.type===e.type&&i.key===e.key){t=true;return false}}));this.queue.iterate((function(i){if(i.type===e.type&&i.key===e.key){t=true;return false}}))}return t},addPack:function(e,t){if(t&&e.hasOwnProperty(t)){e={packKey:e[t]}}var i=0;var r=this.baseURL;var n=this.path;var s=this.prefix;for(var a in e){var o=e[a];var l=GetFastValue_1(o,"baseURL",r);var h=GetFastValue_1(o,"path",n);var u=GetFastValue_1(o,"prefix",s);var c=GetFastValue_1(o,"files",null);var f=GetFastValue_1(o,"defaultType","void");if(Array.isArray(c)){this.setBaseURL(l);this.setPath(h);this.setPrefix(u);for(var d=0;d<c.length;d++){var v=c[d];var p=v.hasOwnProperty("type")?v.type:f;if(this[p]){this[p](v);i++}}}}this.setBaseURL(r);this.setPath(n);this.setPrefix(s);return i>0},isLoading:function(){return this.state===_const$9.LOADER_LOADING||this.state===_const$9.LOADER_PROCESSING},isReady:function(){return this.state===_const$9.LOADER_IDLE||this.state===_const$9.LOADER_COMPLETE},start:function(){if(!this.isReady()){return}this.progress=0;this.totalFailed=0;this.totalComplete=0;this.totalToLoad=this.list.size;this.emit(events$b.START,this);if(this.list.size===0){this.loadComplete()}else{this.state=_const$9.LOADER_LOADING;this.inflight.clear();this.queue.clear();this.updateProgress();this.checkLoadQueue();this.systems.events.on(events$7.UPDATE,this.update,this)}},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad;this.emit(events$b.PROGRESS,this.progress)},update:function(){if(this.state===_const$9.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads){this.checkLoadQueue()}},checkLoadQueue:function(){this.list.each((function(e){if(e.state===_const$9.FILE_POPULATED||e.state===_const$9.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads){this.inflight.set(e);this.list.delete(e);if(!e.crossOrigin){e.crossOrigin=this.crossOrigin}e.load()}if(this.inflight.size===this.maxParallelDownloads){return false}}),this)},nextFile:function(e,t){if(!this.inflight){return}this.inflight.delete(e);this.updateProgress();if(t){this.totalComplete++;this.queue.set(e);this.emit(events$b.FILE_LOAD,e);e.onProcess()}else{this.totalFailed++;this._deleteQueue.set(e);this.emit(events$b.FILE_LOAD_ERROR,e);this.fileProcessComplete(e)}},fileProcessComplete:function(e){if(!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy){return}if(e.state===_const$9.FILE_ERRORED){if(e.multiFile){e.multiFile.onFileFailed(e)}}else if(e.state===_const$9.FILE_COMPLETE){if(e.multiFile){if(e.multiFile.isReadyToProcess()){e.multiFile.addToCache()}}else{e.addToCache()}}this.queue.delete(e);if(this.list.size===0&&this.inflight.size===0&&this.queue.size===0){this.loadComplete()}},loadComplete:function(){this.emit(events$b.POST_PROCESS,this);this.list.clear();this.inflight.clear();this.queue.clear();this.progress=1;this.state=_const$9.LOADER_COMPLETE;this.systems.events.off(events$7.UPDATE,this.update,this);this._deleteQueue.iterateLocal("destroy");this._deleteQueue.clear();this.emit(events$b.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){if(t===undefined){t="file.json"}if(i===undefined){i="application/json"}var r=new Blob([e],{type:i});var n=URL.createObjectURL(r);var s=document.createElement("a");s.download=t;s.textContent="Download "+t;s.href=n;s.click();return this},reset:function(){this.list.clear();this.inflight.clear();this.queue.clear();var e=this.systems.game.config;var t=this.systems.settings.loader;this.setBaseURL(GetFastValue_1(t,"baseURL",e.loaderBaseURL));this.setPath(GetFastValue_1(t,"path",e.loaderPath));this.setPrefix(GetFastValue_1(t,"prefix",e.loaderPrefix));this.state=_const$9.LOADER_IDLE},shutdown:function(){this.reset();this.state=_const$9.LOADER_SHUTDOWN;this.systems.events.off(events$7.UPDATE,this.update,this);this.systems.events.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.state=_const$9.LOADER_DESTROYED;this.systems.events.off(events$7.UPDATE,this.update,this);this.systems.events.off(events$7.START,this.pluginStart,this);this.list=null;this.inflight=null;this.queue=null;this.scene=null;this.systems=null;this.textureManager=null;this.cacheManager=null;this.sceneManager=null}});PluginCache_1.register("Loader",LoaderPlugin,"load");var LoaderPlugin_1=LoaderPlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Loader={Events:events$b,FileTypes:filetypes,File:File_1,FileTypesManager:FileTypesManager_1,GetURL:GetURL_1,LoaderPlugin:LoaderPlugin_1,MergeXHRSettings:MergeXHRSettings_1,MultiFile:MultiFile_1,XHRLoader:XHRLoader_1,XHRSettings:XHRSettings_1};Loader=Extend_1(false,Loader,_const$9);var loader=Loader;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONST$3={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};var _const$a=CONST$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Acceleration={setAcceleration:function(e,t){this.body.acceleration.set(e,t);return this},setAccelerationX:function(e){this.body.acceleration.x=e;return this},setAccelerationY:function(e){this.body.acceleration.y=e;return this}};var Acceleration_1=Acceleration;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Angular={setAngularVelocity:function(e){this.body.angularVelocity=e;return this},setAngularAcceleration:function(e){this.body.angularAcceleration=e;return this},setAngularDrag:function(e){this.body.angularDrag=e;return this}};var Angular_1=Angular;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Bounce={setBounce:function(e,t){this.body.bounce.set(e,t);return this},setBounceX:function(e){this.body.bounce.x=e;return this},setBounceY:function(e){this.body.bounce.y=e;return this},setCollideWorldBounds:function(e,t,i){this.body.setCollideWorldBounds(e,t,i);return this}};var Bounce_1=Bounce;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Debug={setDebug:function(e,t,i){this.debugShowBody=e;this.debugShowVelocity=t;this.debugBodyColor=i;return this},setDebugBodyColor:function(e){this.body.debugBodyColor=e;return this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};var Debug_1=Debug;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Drag={setDrag:function(e,t){this.body.drag.set(e,t);return this},setDragX:function(e){this.body.drag.x=e;return this},setDragY:function(e){this.body.drag.y=e;return this},setDamping:function(e){this.body.useDamping=e;return this}};var Drag_1=Drag;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Enable={enableBody:function(e,t,i,r,n){if(e){this.body.reset(t,i)}if(r){this.body.gameObject.active=true}if(n){this.body.gameObject.visible=true}this.body.enable=true;return this},disableBody:function(e,t){if(e===undefined){e=false}if(t===undefined){t=false}this.body.stop();this.body.enable=false;if(e){this.body.gameObject.active=false}if(t){this.body.gameObject.visible=false}return this},refreshBody:function(){this.body.updateFromGameObject();return this}};var Enable_1=Enable;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Friction={setFriction:function(e,t){this.body.friction.set(e,t);return this},setFrictionX:function(e){this.body.friction.x=e;return this},setFrictionY:function(e){this.body.friction.y=e;return this}};var Friction_1=Friction;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Gravity={setGravity:function(e,t){this.body.gravity.set(e,t);return this},setGravityX:function(e){this.body.gravity.x=e;return this},setGravityY:function(e){this.body.gravity.y=e;return this}};var Gravity_1=Gravity;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Immovable={setImmovable:function(e){if(e===undefined){e=true}this.body.immovable=e;return this}};var Immovable_1=Immovable;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Mass={setMass:function(e){this.body.mass=e;return this}};var Mass_1=Mass;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Size$2={setOffset:function(e,t){this.body.setOffset(e,t);return this},setSize:function(e,t,i){this.body.setSize(e,t,i);return this},setCircle:function(e,t,i){this.body.setCircle(e,t,i);return this}};var Size_1$2=Size$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Velocity={setVelocity:function(e,t){this.body.setVelocity(e,t);return this},setVelocityX:function(e){this.body.setVelocityX(e);return this},setVelocityY:function(e){this.body.setVelocityY(e);return this},setMaxVelocity:function(e,t){this.body.maxVelocity.set(e,t);return this}};var Velocity_1=Velocity;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var components$1={Acceleration:Acceleration_1,Angular:Angular_1,Bounce:Bounce_1,Debug:Debug_1,Drag:Drag_1,Enable:Enable_1,Friction:Friction_1,Gravity:Gravity_1,Immovable:Immovable_1,Mass:Mass_1,Size:Size_1$2,Velocity:Velocity_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ArcadeImage=new Class_1({Extends:Image_1$1,Mixins:[components$1.Acceleration,components$1.Angular,components$1.Bounce,components$1.Debug,components$1.Drag,components$1.Enable,components$1.Friction,components$1.Gravity,components$1.Immovable,components$1.Mass,components$1.Size,components$1.Velocity],initialize:function e(t,i,r,n,s){Image_1$1.call(this,t,i,r,n,s);this.body=null}});var ArcadeImage_1=ArcadeImage;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ArcadeSprite=new Class_1({Extends:Sprite_1,Mixins:[components$1.Acceleration,components$1.Angular,components$1.Bounce,components$1.Debug,components$1.Drag,components$1.Enable,components$1.Friction,components$1.Gravity,components$1.Immovable,components$1.Mass,components$1.Size,components$1.Velocity],initialize:function e(t,i,r,n,s){Sprite_1.call(this,t,i,r,n,s);this.body=null}});var ArcadeSprite_1=ArcadeSprite;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PhysicsGroup=new Class_1({Extends:Group_1,initialize:function e(t,i,r,n){if(!r&&!n){n={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler}}else if(IsPlainObject_1(r)){n=r;r=null;n.createCallback=this.createCallbackHandler;n.removeCallback=this.removeCallbackHandler}else if(Array.isArray(r)&&IsPlainObject_1(r[0])){n=r[0];var s=this;r.forEach((function(e){e.createCallback=s.createCallbackHandler;e.removeCallback=s.removeCallbackHandler}))}else{n={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler}}this.world=t;n.classType=GetFastValue_1(n,"classType",ArcadeSprite_1);this.physicsType=_const$a.DYNAMIC_BODY;this.defaults={setCollideWorldBounds:GetFastValue_1(n,"collideWorldBounds",false),setAccelerationX:GetFastValue_1(n,"accelerationX",0),setAccelerationY:GetFastValue_1(n,"accelerationY",0),setAllowDrag:GetFastValue_1(n,"allowDrag",true),setAllowGravity:GetFastValue_1(n,"allowGravity",true),setAllowRotation:GetFastValue_1(n,"allowRotation",true),setBounceX:GetFastValue_1(n,"bounceX",0),setBounceY:GetFastValue_1(n,"bounceY",0),setDragX:GetFastValue_1(n,"dragX",0),setDragY:GetFastValue_1(n,"dragY",0),setEnable:GetFastValue_1(n,"enable",true),setGravityX:GetFastValue_1(n,"gravityX",0),setGravityY:GetFastValue_1(n,"gravityY",0),setFrictionX:GetFastValue_1(n,"frictionX",0),setFrictionY:GetFastValue_1(n,"frictionY",0),setVelocityX:GetFastValue_1(n,"velocityX",0),setVelocityY:GetFastValue_1(n,"velocityY",0),setAngularVelocity:GetFastValue_1(n,"angularVelocity",0),setAngularAcceleration:GetFastValue_1(n,"angularAcceleration",0),setAngularDrag:GetFastValue_1(n,"angularDrag",0),setMass:GetFastValue_1(n,"mass",1),setImmovable:GetFastValue_1(n,"immovable",false)};if(Array.isArray(r)){n=null}Group_1.call(this,i,r,n)},createCallbackHandler:function(e){if(!e.body){this.world.enableBody(e,_const$a.DYNAMIC_BODY)}var t=e.body;for(var i in this.defaults){t[i](this.defaults[i])}},removeCallbackHandler:function(e){if(e.body){this.world.disableBody(e)}},setVelocity:function(e,t,i){if(i===undefined){i=0}var r=this.getChildren();for(var n=0;n<r.length;n++){r[n].body.velocity.set(e+n*i,t+n*i)}return this},setVelocityX:function(e,t){if(t===undefined){t=0}var i=this.getChildren();for(var r=0;r<i.length;r++){i[r].body.velocity.x=e+r*t}return this},setVelocityY:function(e,t){if(t===undefined){t=0}var i=this.getChildren();for(var r=0;r<i.length;r++){i[r].body.velocity.y=e+r*t}return this}});var PhysicsGroup_1=PhysicsGroup;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaticPhysicsGroup=new Class_1({Extends:Group_1,initialize:function e(t,i,r,n){if(!r&&!n){n={createCallback:this.createCallbackHandler,removeCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:ArcadeSprite_1}}else if(IsPlainObject_1(r)){n=r;r=null;n.createCallback=this.createCallbackHandler;n.removeCallback=this.removeCallbackHandler;n.createMultipleCallback=this.createMultipleCallbackHandler;n.classType=GetFastValue_1(n,"classType",ArcadeSprite_1)}else if(Array.isArray(r)&&IsPlainObject_1(r[0])){n=r;r=null;n.forEach((function(e){e.createCallback=this.createCallbackHandler;e.removeCallback=this.removeCallbackHandler;e.createMultipleCallback=this.createMultipleCallbackHandler;e.classType=GetFastValue_1(e,"classType",ArcadeSprite_1)}))}this.world=t;this.physicsType=_const$a.STATIC_BODY;Group_1.call(this,i,r,n)},createCallbackHandler:function(e){if(!e.body){this.world.enableBody(e,_const$a.STATIC_BODY)}},removeCallbackHandler:function(e){if(e.body){this.world.disableBody(e)}},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){var e=this.children.entries;for(var t=0;t<e.length;t++){e[t].body.reset()}return this}});var StaticPhysicsGroup_1=StaticPhysicsGroup;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Factory=new Class_1({initialize:function e(t){this.world=t;this.scene=t.scene;this.sys=t.scene.sys},collider:function(e,t,i,r,n){return this.world.addCollider(e,t,i,r,n)},overlap:function(e,t,i,r,n){return this.world.addOverlap(e,t,i,r,n)},existing:function(e,t){var i=t?_const$a.STATIC_BODY:_const$a.DYNAMIC_BODY;this.world.enableBody(e,i);return e},staticImage:function(e,t,i,r){var n=new ArcadeImage_1(this.scene,e,t,i,r);this.sys.displayList.add(n);this.world.enableBody(n,_const$a.STATIC_BODY);return n},image:function(e,t,i,r){var n=new ArcadeImage_1(this.scene,e,t,i,r);this.sys.displayList.add(n);this.world.enableBody(n,_const$a.DYNAMIC_BODY);return n},staticSprite:function(e,t,i,r){var n=new ArcadeSprite_1(this.scene,e,t,i,r);this.sys.displayList.add(n);this.sys.updateList.add(n);this.world.enableBody(n,_const$a.STATIC_BODY);return n},sprite:function(e,t,i,r){var n=new ArcadeSprite_1(this.scene,e,t,i,r);this.sys.displayList.add(n);this.sys.updateList.add(n);this.world.enableBody(n,_const$a.DYNAMIC_BODY);return n},staticGroup:function(e,t){return this.sys.updateList.add(new StaticPhysicsGroup_1(this.world,this.world.scene,e,t))},group:function(e,t){return this.sys.updateList.add(new PhysicsGroup_1(this.world,this.world.scene,e,t))},destroy:function(){this.world=null;this.scene=null;this.sys=null}});var Factory_1=Factory;var OverlapRect=function(e,t,i,r,n,s,a){if(s===undefined){s=true}if(a===undefined){a=false}var o=[];var l=[];var h=e.treeMinMax;h.minX=t;h.minY=i;h.maxX=t+r;h.maxY=i+n;if(a){l=e.staticTree.search(h)}if(s&&e.useTree){o=e.tree.search(h)}else if(s){var u=e.bodies;var c={position:{x:t,y:i},left:t,top:i,right:t+r,bottom:i+n,isCircle:false};var f=e.intersects;u.iterate((function(e){if(f(e,c)){o.push(e)}}))}return l.concat(o)};var OverlapRect_1=OverlapRect;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLIDE_EVENT="collide";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var OVERLAP_EVENT="overlap";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT$3="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT$3="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TILE_COLLIDE_EVENT="tilecollide";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TILE_OVERLAP_EVENT="tileoverlap";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WORLD_BOUNDS_EVENT="worldbounds";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WORLD_STEP_EVENT="worldstep";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$f={COLLIDE:COLLIDE_EVENT,OVERLAP:OVERLAP_EVENT,PAUSE:PAUSE_EVENT$3,RESUME:RESUME_EVENT$3,TILE_COLLIDE:TILE_COLLIDE_EVENT,TILE_OVERLAP:TILE_OVERLAP_EVENT,WORLD_BOUNDS:WORLD_BOUNDS_EVENT,WORLD_STEP:WORLD_STEP_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Body=new Class_1({initialize:function e(t,i){var r=i.width?i.width:64;var n=i.height?i.height:64;this.world=t;this.gameObject=i;this.transform={x:i.x,y:i.y,rotation:i.angle,scaleX:i.scaleX,scaleY:i.scaleY,displayOriginX:i.displayOriginX,displayOriginY:i.displayOriginY};this.debugShowBody=t.defaults.debugShowBody;this.debugShowVelocity=t.defaults.debugShowVelocity;this.debugBodyColor=t.defaults.bodyDebugColor;this.enable=true;this.isCircle=false;this.radius=0;this.offset=new Vector2_1;this.position=new Vector2_1(i.x,i.y);this.prev=new Vector2_1(i.x,i.y);this.allowRotation=true;this.rotation=i.angle;this.preRotation=i.angle;this.width=r;this.height=n;this.sourceWidth=r;this.sourceHeight=n;if(i.frame){this.sourceWidth=i.frame.realWidth;this.sourceHeight=i.frame.realHeight}this.halfWidth=Math.abs(r/2);this.halfHeight=Math.abs(n/2);this.center=new Vector2_1(i.x+this.halfWidth,i.y+this.halfHeight);this.velocity=new Vector2_1;this.newVelocity=new Vector2_1;this.deltaMax=new Vector2_1;this.acceleration=new Vector2_1;this.allowDrag=true;this.drag=new Vector2_1;this.allowGravity=true;this.gravity=new Vector2_1;this.bounce=new Vector2_1;this.worldBounce=null;this.onWorldBounds=false;this.onCollide=false;this.onOverlap=false;this.maxVelocity=new Vector2_1(1e4,1e4);this.maxSpeed=-1;this.friction=new Vector2_1(1,0);this.useDamping=false;this.angularVelocity=0;this.angularAcceleration=0;this.angularDrag=0;this.maxAngular=1e3;this.mass=1;this.angle=0;this.speed=0;this.facing=_const$a.FACING_NONE;this.immovable=false;this.moves=true;this.customSeparateX=false;this.customSeparateY=false;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=false;this.collideWorldBounds=false;this.checkCollision={none:false,up:true,down:true,left:true,right:true};this.touching={none:true,up:false,down:false,left:false,right:false};this.wasTouching={none:true,up:false,down:false,left:false,right:false};this.blocked={none:true,up:false,down:false,left:false,right:false};this.syncBounds=false;this.physicsType=_const$a.DYNAMIC_BODY;this._reset=true;this._sx=i.scaleX;this._sy=i.scaleY;this._dx=0;this._dy=0;this._bounds=new Rectangle_1},updateBounds:function(){var e=this.gameObject;var t=this.transform;if(e.parentContainer){var i=e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);t.x=i.tx;t.y=i.ty;t.rotation=RadToDeg_1(i.rotation);t.scaleX=i.scaleX;t.scaleY=i.scaleY;t.displayOriginX=e.displayOriginX;t.displayOriginY=e.displayOriginY}else{t.x=e.x;t.y=e.y;t.rotation=e.angle;t.scaleX=e.scaleX;t.scaleY=e.scaleY;t.displayOriginX=e.displayOriginX;t.displayOriginY=e.displayOriginY}var r=false;if(this.syncBounds){var n=e.getBounds(this._bounds);this.width=n.width;this.height=n.height;r=true}else{var s=Math.abs(t.scaleX);var a=Math.abs(t.scaleY);if(this._sx!==s||this._sy!==a){this.width=this.sourceWidth*s;this.height=this.sourceHeight*a;this._sx=s;this._sy=a;r=true}}if(r){this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.updateCenter()}},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},resetFlags:function(){this.wasTouching.none=this.touching.none;this.wasTouching.up=this.touching.up;this.wasTouching.down=this.touching.down;this.wasTouching.left=this.touching.left;this.wasTouching.right=this.touching.right;this.touching.none=true;this.touching.up=false;this.touching.down=false;this.touching.left=false;this.touching.right=false;this.blocked.none=true;this.blocked.up=false;this.blocked.down=false;this.blocked.left=false;this.blocked.right=false;this.overlapR=0;this.overlapX=0;this.overlapY=0;this.embedded=false},preUpdate:function(e,t){if(e){this.resetFlags()}this.updateBounds();var i=this.transform;this.position.x=i.x+i.scaleX*(this.offset.x-i.displayOriginX);this.position.y=i.y+i.scaleY*(this.offset.y-i.displayOriginY);this.updateCenter();this.rotation=i.rotation;this.preRotation=this.rotation;if(this._reset){this.prev.x=this.position.x;this.prev.y=this.position.y}if(e){this.update(t)}},update:function(e){if(this.moves){this.world.updateMotion(this,e);var t=this.velocity.x;var i=this.velocity.y;this.newVelocity.set(t*e,i*e);this.position.add(this.newVelocity);this.updateCenter();this.angle=Math.atan2(i,t);this.speed=Math.sqrt(t*t+i*i);if(this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){this.world.emit(events$f.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}}this._dx=this.position.x-this.prev.x;this._dy=this.position.y-this.prev.y},postUpdate:function(){var e=this.position.x-this.prev.x;var t=this.position.y-this.prev.y;if(this.moves){var i=this.deltaMax.x;var r=this.deltaMax.y;if(i!==0&&e!==0){if(e<0&&e<-i){e=-i}else if(e>0&&e>i){e=i}}if(r!==0&&t!==0){if(t<0&&t<-r){t=-r}else if(t>0&&t>r){t=r}}this.gameObject.x+=e;this.gameObject.y+=t;this._reset=true}if(e<0){this.facing=_const$a.FACING_LEFT}else if(e>0){this.facing=_const$a.FACING_RIGHT}if(t<0){this.facing=_const$a.FACING_UP}else if(t>0){this.facing=_const$a.FACING_DOWN}this._dx=e;this._dy=t;if(this.allowRotation){this.gameObject.angle+=this.deltaZ()}this.prev.x=this.position.x;this.prev.y=this.position.y},checkWorldBounds:function(){var e=this.position;var t=this.world.bounds;var i=this.world.checkCollision;var r=this.worldBounce?-this.worldBounce.x:-this.bounce.x;var n=this.worldBounce?-this.worldBounce.y:-this.bounce.y;if(e.x<t.x&&i.left){e.x=t.x;this.velocity.x*=r;this.blocked.left=true;this.blocked.none=false}else if(this.right>t.right&&i.right){e.x=t.right-this.width;this.velocity.x*=r;this.blocked.right=true;this.blocked.none=false}if(e.y<t.y&&i.up){e.y=t.y;this.velocity.y*=n;this.blocked.up=true;this.blocked.none=false}else if(this.bottom>t.bottom&&i.down){e.y=t.bottom-this.height;this.velocity.y*=n;this.blocked.down=true;this.blocked.none=false}return!this.blocked.none},setOffset:function(e,t){if(t===undefined){t=e}this.offset.set(e,t);return this},setSize:function(e,t,i){if(i===undefined){i=true}var r=this.gameObject;if(!e&&r.frame){e=r.frame.realWidth}if(!t&&r.frame){t=r.frame.realHeight}this.sourceWidth=e;this.sourceHeight=t;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.updateCenter();if(i&&r.getCenter){var n=r.displayWidth/2;var s=r.displayHeight/2;this.offset.set(n-this.halfWidth,s-this.halfHeight)}this.isCircle=false;this.radius=0;return this},setCircle:function(e,t,i){if(t===undefined){t=this.offset.x}if(i===undefined){i=this.offset.y}if(e>0){this.isCircle=true;this.radius=e;this.sourceWidth=e*2;this.sourceHeight=e*2;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.set(t,i);this.updateCenter()}else{this.isCircle=false}return this},reset:function(e,t){this.stop();var i=this.gameObject;i.setPosition(e,t);if(i.getTopLeft){i.getTopLeft(this.position)}else{this.position.set(e,t)}this.prev.copy(this.position);this.rotation=i.angle;this.preRotation=i.angle;this.updateBounds();this.updateCenter()},stop:function(){this.velocity.set(0);this.acceleration.set(0);this.speed=0;this.angularVelocity=0;this.angularAcceleration=0;return this},getBounds:function(e){e.x=this.x;e.y=this.y;e.right=this.right;e.bottom=this.bottom;return e},hitTest:function(e,t){return this.isCircle?Contains_1(this,e,t):Contains_1$1(this,e,t)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=false;if(this.world){this.world.pendingDestroy.set(this)}},drawDebug:function(e){var t=this.position;var i=t.x+this.halfWidth;var r=t.y+this.halfHeight;if(this.debugShowBody){e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor);if(this.isCircle){e.strokeCircle(i,r,this.width/2)}else{if(this.checkCollision.up){e.lineBetween(t.x,t.y,t.x+this.width,t.y)}if(this.checkCollision.right){e.lineBetween(t.x+this.width,t.y,t.x+this.width,t.y+this.height)}if(this.checkCollision.down){e.lineBetween(t.x,t.y+this.height,t.x+this.width,t.y+this.height)}if(this.checkCollision.left){e.lineBetween(t.x,t.y,t.x,t.y+this.height)}}}if(this.debugShowVelocity){e.lineStyle(e.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1);e.lineBetween(i,r,i+this.velocity.x/2,r+this.velocity.y/2)}},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(e,t,i){if(e===undefined){e=true}this.collideWorldBounds=e;var r=t!==undefined;var n=i!==undefined;if(r||n){if(!this.worldBounce){this.worldBounce=new Vector2_1}if(r){this.worldBounce.x=t}if(n){this.worldBounce.y=i}}return this},setVelocity:function(e,t){this.velocity.set(e,t);e=this.velocity.x;t=this.velocity.y;this.speed=Math.sqrt(e*e+t*t);return this},setVelocityX:function(e){this.velocity.x=e;var t=e;var i=this.velocity.y;this.speed=Math.sqrt(t*t+i*i);return this},setVelocityY:function(e){this.velocity.y=e;var t=this.velocity.x;var i=e;this.speed=Math.sqrt(t*t+i*i);return this},setMaxVelocity:function(e,t){this.maxVelocity.set(e,t);return this},setMaxSpeed:function(e){this.maxSpeed=e;return this},setBounce:function(e,t){this.bounce.set(e,t);return this},setBounceX:function(e){this.bounce.x=e;return this},setBounceY:function(e){this.bounce.y=e;return this},setAcceleration:function(e,t){this.acceleration.set(e,t);return this},setAccelerationX:function(e){this.acceleration.x=e;return this},setAccelerationY:function(e){this.acceleration.y=e;return this},setAllowDrag:function(e){if(e===undefined){e=true}this.allowDrag=e;return this},setAllowGravity:function(e){if(e===undefined){e=true}this.allowGravity=e;return this},setAllowRotation:function(e){if(e===undefined){e=true}this.allowRotation=e;return this},setDrag:function(e,t){this.drag.set(e,t);return this},setDragX:function(e){this.drag.x=e;return this},setDragY:function(e){this.drag.y=e;return this},setGravity:function(e,t){this.gravity.set(e,t);return this},setGravityX:function(e){this.gravity.x=e;return this},setGravityY:function(e){this.gravity.y=e;return this},setFriction:function(e,t){this.friction.set(e,t);return this},setFrictionX:function(e){this.friction.x=e;return this},setFrictionY:function(e){this.friction.y=e;return this},setAngularVelocity:function(e){this.angularVelocity=e;return this},setAngularAcceleration:function(e){this.angularAcceleration=e;return this},setAngularDrag:function(e){this.angularDrag=e;return this},setMass:function(e){this.mass=e;return this},setImmovable:function(e){if(e===undefined){e=true}this.immovable=e;return this},setEnable:function(e){if(e===undefined){e=true}this.enable=e;return this},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});var Body_1=Body;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Collider=new Class_1({initialize:function e(t,i,r,n,s,a,o){this.world=t;this.name="";this.active=true;this.overlapOnly=i;this.object1=r;this.object2=n;this.collideCallback=s;this.processCallback=a;this.callbackContext=o},setName:function(e){this.name=e;return this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this);this.active=false;this.world=null;this.object1=null;this.object2=null;this.collideCallback=null;this.processCallback=null;this.callbackContext=null}});var Collider_1=Collider;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetOverlapX=function(e,t,i,r){var n=0;var s=e.deltaAbsX()+t.deltaAbsX()+r;if(e._dx===0&&t._dx===0){e.embedded=true;t.embedded=true}else if(e._dx>t._dx){n=e.right-t.x;if(n>s&&!i||e.checkCollision.right===false||t.checkCollision.left===false){n=0}else{e.touching.none=false;e.touching.right=true;t.touching.none=false;t.touching.left=true;if(t.physicsType===_const$a.STATIC_BODY){e.blocked.none=false;e.blocked.right=true}if(e.physicsType===_const$a.STATIC_BODY){t.blocked.none=false;t.blocked.left=true}}}else if(e._dx<t._dx){n=e.x-t.width-t.x;if(-n>s&&!i||e.checkCollision.left===false||t.checkCollision.right===false){n=0}else{e.touching.none=false;e.touching.left=true;t.touching.none=false;t.touching.right=true;if(t.physicsType===_const$a.STATIC_BODY){e.blocked.none=false;e.blocked.left=true}if(e.physicsType===_const$a.STATIC_BODY){t.blocked.none=false;t.blocked.right=true}}}e.overlapX=n;t.overlapX=n;return n};var GetOverlapX_1=GetOverlapX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetOverlapY=function(e,t,i,r){var n=0;var s=e.deltaAbsY()+t.deltaAbsY()+r;if(e._dy===0&&t._dy===0){e.embedded=true;t.embedded=true}else if(e._dy>t._dy){n=e.bottom-t.y;if(n>s&&!i||e.checkCollision.down===false||t.checkCollision.up===false){n=0}else{e.touching.none=false;e.touching.down=true;t.touching.none=false;t.touching.up=true;if(t.physicsType===_const$a.STATIC_BODY){e.blocked.none=false;e.blocked.down=true}if(e.physicsType===_const$a.STATIC_BODY){t.blocked.none=false;t.blocked.up=true}}}else if(e._dy<t._dy){n=e.y-t.bottom;if(-n>s&&!i||e.checkCollision.up===false||t.checkCollision.down===false){n=0}else{e.touching.none=false;e.touching.up=true;t.touching.none=false;t.touching.down=true;if(t.physicsType===_const$a.STATIC_BODY){e.blocked.none=false;e.blocked.up=true}if(e.physicsType===_const$a.STATIC_BODY){t.blocked.none=false;t.blocked.down=true}}}e.overlapY=n;t.overlapY=n;return n};var GetOverlapY_1=GetOverlapY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProcessQueue=new Class_1({initialize:function e(){this._pending=[];this._active=[];this._destroy=[];this._toProcess=0},add:function(e){this._pending.push(e);this._toProcess++;return this},remove:function(e){this._destroy.push(e);this._toProcess++;return this},update:function(){if(this._toProcess===0){return this._active}var e=this._destroy;var t=this._active;var i;var r;for(i=0;i<e.length;i++){r=e[i];var n=t.indexOf(r);if(n!==-1){t.splice(n,1)}}e.length=0;e=this._pending;for(i=0;i<e.length;i++){r=e[i];this._active.push(r)}e.length=0;this._toProcess=0;return this._active},getActive:function(){return this._active},destroy:function(){this._toProcess=0;this._pending=[];this._active=[];this._destroy=[]}});var ProcessQueue_1=ProcessQueue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProcessTileCallbacks=function(e,t){if(e.collisionCallback){return!e.collisionCallback.call(e.collisionCallbackContext,t,e)}else if(e.layer.callbacks[e.index]){return!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,t,e)}return true};var ProcessTileCallbacks_1=ProcessTileCallbacks;
/**
             * @author       Vladimir Agafonkin
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function rbush(e){var t=[".left",".top",".right",".bottom"];if(!(this instanceof rbush))return new rbush(e,t);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));this.clear()}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!intersects$2(e,t))return i;var n=[],s,a,o,l;while(t){for(s=0,a=t.children.length;s<a;s++){o=t.children[s];l=t.leaf?r(o):o;if(intersects$2(e,l)){if(t.leaf)i.push(o);else if(contains(e,l))this._all(o,i);else n.push(o)}}t=n.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!intersects$2(e,t))return false;var r=[],n,s,a,o;while(t){for(n=0,s=t.children.length;n<s;n++){a=t.children[n];o=t.leaf?i(a):a;if(intersects$2(e,o)){if(t.leaf||contains(e,o))return true;r.push(a)}}t=r.pop()}return false},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++){this.insert(e[t])}return this}var r=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=r}else if(this.data.height===r.height){this._splitRoot(this.data,r)}else{if(this.data.height<r.height){var n=this.data;this.data=r;r=n}this._insert(r,this.data.height-r.height-1,true)}return this},insert:function(e){if(e)this._insert(e,this.data.height-1);return this},clear:function(){this.data=createNode([]);return this},remove:function(e,t){if(!e)return this;var i=this.data,r=this.toBBox(e),n=[],s=[],a,o,l,h;while(i||n.length){if(!i){i=n.pop();o=n[n.length-1];a=s.pop();h=true}if(i.leaf){l=findItem(e,i.children,t);if(l!==-1){i.children.splice(l,1);n.push(i);this._condense(n);return this}}if(!h&&!i.leaf&&contains(i,r)){n.push(i);s.push(a);a=0;o=i;i=i.children[0]}else if(o){a++;i=o.children[a];h=false}else i=null}return this},toBBox:function(e){return e},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,t){var i=[];while(e){if(e.leaf)t.push.apply(t,e.children);else i.push.apply(i,e.children);e=i.pop()}return t},_build:function(e,t,i,r){var n=i-t+1,s=this._maxEntries,a;if(n<=s){a=createNode(e.slice(t,i+1));calcBBox(a,this.toBBox);return a}if(!r){r=Math.ceil(Math.log(n)/Math.log(s));s=Math.ceil(n/Math.pow(s,r-1))}a=createNode([]);a.leaf=false;a.height=r;var o=Math.ceil(n/s),l=o*Math.ceil(Math.sqrt(s)),h,u,c,f;multiSelect(e,t,i,l,this.compareMinX);for(h=t;h<=i;h+=l){c=Math.min(h+l-1,i);multiSelect(e,h,c,o,this.compareMinY);for(u=h;u<=c;u+=o){f=Math.min(u+o-1,c);a.children.push(this._build(e,u,f,r-1))}}calcBBox(a,this.toBBox);return a},_chooseSubtree:function(e,t,i,r){var n,s,a,o,l,h,u,c;while(true){r.push(t);if(t.leaf||r.length-1===i)break;u=c=Infinity;for(n=0,s=t.children.length;n<s;n++){a=t.children[n];l=bboxArea(a);h=enlargedArea(e,a)-l;if(h<c){c=h;u=l<u?l:u;o=a}else if(h===c){if(l<u){u=l;o=a}}}t=o||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[];var a=this._chooseSubtree(n,this.data,t,s);a.children.push(e);extend$1(a,n);while(t>=0){if(s[t].children.length>this._maxEntries){this._split(s,t);t--}else break}this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r);var a=createNode(i.children.splice(s,i.children.length-s));a.height=i.height;a.leaf=i.leaf;calcBBox(i,this.toBBox);calcBBox(a,this.toBBox);if(t)e[t-1].children.push(a);else this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=createNode([e,t]);this.data.height=e.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,s,a,o,l,h,u;l=h=Infinity;for(r=t;r<=i-t;r++){n=distBBox(e,0,r,this.toBBox);s=distBBox(e,r,i,this.toBBox);a=intersectionArea(n,s);o=bboxArea(n)+bboxArea(s);if(a<l){l=a;u=r;h=o<h?o:h}else if(a===l){if(o<h){h=o;u=r}}}return u},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:compareNodeMinX,n=e.leaf?this.compareMinY:compareNodeMinY,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,n);if(s<a)e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n=this.toBBox,s=distBBox(e,0,t,n),a=distBBox(e,i-t,i,n),o=bboxMargin(s)+bboxMargin(a),l,h;for(l=t;l<i-t;l++){h=e.children[l];extend$1(s,e.leaf?n(h):h);o+=bboxMargin(s)}for(l=i-t-1;l>=t;l--){h=e.children[l];extend$1(a,e.leaf?n(h):h);o+=bboxMargin(a)}return o},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--){extend$1(t[r],e)}},_condense:function(e){for(var t=e.length-1,i;t>=0;t--){if(e[t].children.length===0){if(t>0){i=e[t-1].children;i.splice(i.indexOf(e[t]),1)}else this.clear()}else calcBBox(e[t],this.toBBox)}},compareMinX:function(e,t){return e.left-t.left},compareMinY:function(e,t){return e.top-t.top},toBBox:function(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}};function findItem(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++){if(i(e,t[r]))return r}return-1}function calcBBox(e,t){distBBox(e,0,e.children.length,t,e)}function distBBox(e,t,i,r,n){if(!n)n=createNode(null);n.minX=Infinity;n.minY=Infinity;n.maxX=-Infinity;n.maxY=-Infinity;for(var s=t,a;s<i;s++){a=e.children[s];extend$1(n,e.leaf?r(a):a)}return n}function extend$1(e,t){e.minX=Math.min(e.minX,t.minX);e.minY=Math.min(e.minY,t.minY);e.maxX=Math.max(e.maxX,t.maxX);e.maxY=Math.max(e.maxY,t.maxY);return e}function compareNodeMinX(e,t){return e.minX-t.minX}function compareNodeMinY(e,t){return e.minY-t.minY}function bboxArea(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function bboxMargin(e){return e.maxX-e.minX+(e.maxY-e.minY)}function enlargedArea(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function intersectionArea(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function contains(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function intersects$2(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function createNode(e){return{children:e,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(e,t,i,r,n){var s=[t,i],a;while(s.length){i=s.pop();t=s.pop();if(i-t<=r)continue;a=t+Math.ceil((i-t)/r/2)*r;QuickSelect_1(e,a,t,i,n);s.push(t,a,a,i)}}var RTree=rbush;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProcessTileSeparationX=function(e,t){if(t<0){e.blocked.none=false;e.blocked.left=true}else if(t>0){e.blocked.none=false;e.blocked.right=true}e.position.x-=t;if(e.bounce.x===0){e.velocity.x=0}else{e.velocity.x=-e.velocity.x*e.bounce.x}};var ProcessTileSeparationX_1=ProcessTileSeparationX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileCheckX=function(e,t,i,r,n,s){var a=0;var o=t.faceLeft;var l=t.faceRight;var h=t.collideLeft;var u=t.collideRight;if(!s){o=true;l=true;h=true;u=true}if(e.deltaX()<0&&!e.blocked.left&&u&&e.checkCollision.left){if(l&&e.x<r){a=e.x-r;if(a<-n){a=0}}}else if(e.deltaX()>0&&!e.blocked.right&&h&&e.checkCollision.right){if(o&&e.right>i){a=e.right-i;if(a>n){a=0}}}if(a!==0){if(e.customSeparateX){e.overlapX=a}else{ProcessTileSeparationX_1(e,a)}}return a};var TileCheckX_1=TileCheckX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ProcessTileSeparationY=function(e,t){if(t<0){e.blocked.none=false;e.blocked.up=true}else if(t>0){e.blocked.none=false;e.blocked.down=true}e.position.y-=t;if(e.bounce.y===0){e.velocity.y=0}else{e.velocity.y=-e.velocity.y*e.bounce.y}};var ProcessTileSeparationY_1=ProcessTileSeparationY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileCheckY=function(e,t,i,r,n,s){var a=0;var o=t.faceTop;var l=t.faceBottom;var h=t.collideUp;var u=t.collideDown;if(!s){o=true;l=true;h=true;u=true}if(e.deltaY()<0&&!e.blocked.up&&u&&e.checkCollision.up){if(l&&e.y<r){a=e.y-r;if(a<-n){a=0}}}else if(e.deltaY()>0&&!e.blocked.down&&h&&e.checkCollision.down){if(o&&e.bottom>i){a=e.bottom-i;if(a>n){a=0}}}if(a!==0){if(e.customSeparateY){e.overlapY=a}else{ProcessTileSeparationY_1(e,a)}}return a};var TileCheckY_1=TileCheckY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileIntersectsBody=function(e,t){return!(t.right<=e.left||t.bottom<=e.top||t.position.x>=e.right||t.position.y>=e.bottom)};var TileIntersectsBody_1=TileIntersectsBody;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SeparateTile=function(e,t,i,r,n,s,a){var o=r.left;var l=r.top;var h=r.right;var u=r.bottom;var c=i.faceLeft||i.faceRight;var f=i.faceTop||i.faceBottom;if(!a){c=true;f=true}if(!c&&!f){return false}var d=0;var v=0;var p=0;var g=1;if(t.deltaAbsX()>t.deltaAbsY()){p=-1}else if(t.deltaAbsX()<t.deltaAbsY()){g=-1}if(t.deltaX()!==0&&t.deltaY()!==0&&c&&f){p=Math.min(Math.abs(t.position.x-h),Math.abs(t.right-o));g=Math.min(Math.abs(t.position.y-u),Math.abs(t.bottom-l))}if(p<g){if(c){d=TileCheckX_1(t,i,o,h,s,a);if(d!==0&&!TileIntersectsBody_1(r,t)){return true}}if(f){v=TileCheckY_1(t,i,l,u,s,a)}}else{if(f){v=TileCheckY_1(t,i,l,u,s,a);if(v!==0&&!TileIntersectsBody_1(r,t)){return true}}if(c){d=TileCheckX_1(t,i,o,h,s,a)}}return d!==0||v!==0};var SeparateTile_1=SeparateTile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SeparateX=function(e,t,i,r){var n=GetOverlapX_1(e,t,i,r);if(i||n===0||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX){return n!==0||e.embedded&&t.embedded}var s=e.velocity.x;var a=t.velocity.x;if(!e.immovable&&!t.immovable){n*=.5;e.x-=n;t.x+=n;var o=Math.sqrt(a*a*t.mass/e.mass)*(a>0?1:-1);var l=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1);var h=(o+l)*.5;o-=h;l-=h;e.velocity.x=h+o*e.bounce.x;t.velocity.x=h+l*t.bounce.x}else if(!e.immovable){e.x-=n;e.velocity.x=a-s*e.bounce.x;if(t.moves){e.y+=(t.y-t.prev.y)*t.friction.y}}else{t.x+=n;t.velocity.x=s-a*t.bounce.x;if(e.moves){t.y+=(e.y-e.prev.y)*e.friction.y}}return true};var SeparateX_1=SeparateX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SeparateY=function(e,t,i,r){var n=GetOverlapY_1(e,t,i,r);if(i||n===0||e.immovable&&t.immovable||e.customSeparateY||t.customSeparateY){return n!==0||e.embedded&&t.embedded}var s=e.velocity.y;var a=t.velocity.y;if(!e.immovable&&!t.immovable){n*=.5;e.y-=n;t.y+=n;var o=Math.sqrt(a*a*t.mass/e.mass)*(a>0?1:-1);var l=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1);var h=(o+l)*.5;o-=h;l-=h;e.velocity.y=h+o*e.bounce.y;t.velocity.y=h+l*t.bounce.y}else if(!e.immovable){e.y-=n;e.velocity.y=a-s*e.bounce.y;if(t.moves){e.x+=(t.x-t.prev.x)*t.friction.x}}else{t.y+=n;t.velocity.y=s-a*t.bounce.y;if(e.moves){t.x+=(e.x-e.prev.x)*e.friction.x}}return true};var SeparateY_1=SeparateY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaticBody=new Class_1({initialize:function e(t,i){var r=i.width?i.width:64;var n=i.height?i.height:64;this.world=t;this.gameObject=i;this.debugShowBody=t.defaults.debugShowStaticBody;this.debugBodyColor=t.defaults.staticBodyDebugColor;this.enable=true;this.isCircle=false;this.radius=0;this.offset=new Vector2_1;this.position=new Vector2_1(i.x-i.displayOriginX,i.y-i.displayOriginY);this.width=r;this.height=n;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center=new Vector2_1(i.x+this.halfWidth,i.y+this.halfHeight);this.velocity=Vector2_1.ZERO;this.allowGravity=false;this.gravity=Vector2_1.ZERO;this.bounce=Vector2_1.ZERO;this.onWorldBounds=false;this.onCollide=false;this.onOverlap=false;this.mass=1;this.immovable=true;this.customSeparateX=false;this.customSeparateY=false;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=false;this.collideWorldBounds=false;this.checkCollision={none:false,up:true,down:true,left:true,right:true};this.touching={none:true,up:false,down:false,left:false,right:false};this.wasTouching={none:true,up:false,down:false,left:false,right:false};this.blocked={none:true,up:false,down:false,left:false,right:false};this.physicsType=_const$a.STATIC_BODY;this._dx=0;this._dy=0},setGameObject:function(e,t){if(e&&e!==this.gameObject){this.gameObject.body=null;e.body=this;this.gameObject=e}if(t){this.updateFromGameObject()}return this},updateFromGameObject:function(){this.world.staticTree.remove(this);var e=this.gameObject;e.getTopLeft(this.position);this.width=e.displayWidth;this.height=e.displayHeight;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.world.staticTree.insert(this);return this},setOffset:function(e,t){if(t===undefined){t=e}this.world.staticTree.remove(this);this.position.x-=this.offset.x;this.position.y-=this.offset.y;this.offset.set(e,t);this.position.x+=this.offset.x;this.position.y+=this.offset.y;this.updateCenter();this.world.staticTree.insert(this);return this},setSize:function(e,t,i){if(i===undefined){i=true}var r=this.gameObject;if(!e&&r.frame){e=r.frame.realWidth}if(!t&&r.frame){t=r.frame.realHeight}this.world.staticTree.remove(this);this.width=e;this.height=t;this.halfWidth=Math.floor(e/2);this.halfHeight=Math.floor(t/2);if(i&&r.getCenter){var n=r.displayWidth/2;var s=r.displayHeight/2;this.position.x-=this.offset.x;this.position.y-=this.offset.y;this.offset.set(n-this.halfWidth,s-this.halfHeight);this.position.x+=this.offset.x;this.position.y+=this.offset.y}this.updateCenter();this.isCircle=false;this.radius=0;this.world.staticTree.insert(this);return this},setCircle:function(e,t,i){if(t===undefined){t=this.offset.x}if(i===undefined){i=this.offset.y}if(e>0){this.world.staticTree.remove(this);this.isCircle=true;this.radius=e;this.width=e*2;this.height=e*2;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.set(t,i);this.updateCenter();this.world.staticTree.insert(this)}else{this.isCircle=false}return this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(e,t){var i=this.gameObject;if(e===undefined){e=i.x}if(t===undefined){t=i.y}this.world.staticTree.remove(this);i.setPosition(e,t);i.getTopLeft(this.position);this.updateCenter();this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(e){e.x=this.x;e.y=this.y;e.right=this.right;e.bottom=this.bottom;return e},hitTest:function(e,t){return this.isCircle?Contains_1(this,e,t):Contains_1$1(this,e,t)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=false;this.world.pendingDestroy.set(this)},drawDebug:function(e){var t=this.position;var i=t.x+this.halfWidth;var r=t.y+this.halfHeight;if(this.debugShowBody){e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor,1);if(this.isCircle){e.strokeCircle(i,r,this.width/2)}else{e.strokeRect(t.x,t.y,this.width,this.height)}}},willDrawDebug:function(){return this.debugShowBody},setMass:function(e){if(e<=0){e=.1}this.mass=e;return this},x:{get:function(){return this.position.x},set:function(e){this.world.staticTree.remove(this);this.position.x=e;this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(e){this.world.staticTree.remove(this);this.position.y=e;this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});var StaticBody_1=StaticBody;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var World=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.scene=t;this.bodies=new _Set;this.staticBodies=new _Set;this.pendingDestroy=new _Set;this.colliders=new ProcessQueue_1;this.gravity=new Vector2_1(GetValue_1(i,"gravity.x",0),GetValue_1(i,"gravity.y",0));this.bounds=new Rectangle_1(GetValue_1(i,"x",0),GetValue_1(i,"y",0),GetValue_1(i,"width",t.sys.scale.width),GetValue_1(i,"height",t.sys.scale.height));this.checkCollision={up:GetValue_1(i,"checkCollision.up",true),down:GetValue_1(i,"checkCollision.down",true),left:GetValue_1(i,"checkCollision.left",true),right:GetValue_1(i,"checkCollision.right",true)};this.fps=GetValue_1(i,"fps",60);this._elapsed=0;this._frameTime=1/this.fps;this._frameTimeMS=1e3*this._frameTime;this.stepsLastFrame=0;this.timeScale=GetValue_1(i,"timeScale",1);this.OVERLAP_BIAS=GetValue_1(i,"overlapBias",4);this.TILE_BIAS=GetValue_1(i,"tileBias",16);this.forceX=GetValue_1(i,"forceX",false);this.isPaused=GetValue_1(i,"isPaused",false);this._total=0;this.drawDebug=GetValue_1(i,"debug",false);this.defaults={debugShowBody:GetValue_1(i,"debugShowBody",true),debugShowStaticBody:GetValue_1(i,"debugShowStaticBody",true),debugShowVelocity:GetValue_1(i,"debugShowVelocity",true),bodyDebugColor:GetValue_1(i,"debugBodyColor",16711935),staticBodyDebugColor:GetValue_1(i,"debugStaticBodyColor",255),velocityDebugColor:GetValue_1(i,"debugVelocityColor",65280)};this.maxEntries=GetValue_1(i,"maxEntries",16);this.useTree=GetValue_1(i,"useTree",true);this.tree=new RTree(this.maxEntries);this.staticTree=new RTree(this.maxEntries);this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0};this._tempMatrix=new TransformMatrix_1;this._tempMatrix2=new TransformMatrix_1;if(this.drawDebug){this.createDebugGraphic()}},enable:function(e,t){if(t===undefined){t=_const$a.DYNAMIC_BODY}if(!Array.isArray(e)){e=[e]}for(var i=0;i<e.length;i++){var r=e[i];if(r.isParent){var n=r.getChildren();for(var s=0;s<n.length;s++){var a=n[s];if(a.isParent){this.enable(a,t)}else{this.enableBody(a,t)}}}else{this.enableBody(r,t)}}},enableBody:function(e,t){if(t===undefined){t=_const$a.DYNAMIC_BODY}if(!e.body){if(t===_const$a.DYNAMIC_BODY){e.body=new Body_1(this,e)}else if(t===_const$a.STATIC_BODY){e.body=new StaticBody_1(this,e)}}this.add(e.body);return e},add:function(e){if(e.physicsType===_const$a.DYNAMIC_BODY){this.bodies.set(e)}else if(e.physicsType===_const$a.STATIC_BODY){this.staticBodies.set(e);this.staticTree.insert(e)}e.enable=true;return e},disable:function(e){if(!Array.isArray(e)){e=[e]}for(var t=0;t<e.length;t++){var i=e[t];if(i.isParent){var r=i.getChildren();for(var n=0;n<r.length;n++){var s=r[n];if(s.isParent){this.disable(s)}else{this.disableBody(s.body)}}}else{this.disableBody(i.body)}}},disableBody:function(e){this.remove(e);e.enable=false},remove:function(e){if(e.physicsType===_const$a.DYNAMIC_BODY){this.tree.remove(e);this.bodies.delete(e)}else if(e.physicsType===_const$a.STATIC_BODY){this.staticBodies.delete(e);this.staticTree.remove(e)}},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=true;return e},setBounds:function(e,t,i,r,n,s,a,o){this.bounds.setTo(e,t,i,r);if(n!==undefined){this.setBoundsCollision(n,s,a,o)}return this},setBoundsCollision:function(e,t,i,r){if(e===undefined){e=true}if(t===undefined){t=true}if(i===undefined){i=true}if(r===undefined){r=true}this.checkCollision.left=e;this.checkCollision.right=t;this.checkCollision.up=i;this.checkCollision.down=r;return this},pause:function(){this.isPaused=true;this.emit(events$f.PAUSE);return this},resume:function(){this.isPaused=false;this.emit(events$f.RESUME);return this},addCollider:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}var s=new Collider_1(this,false,e,t,i,r,n);this.colliders.add(s);return s},addOverlap:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}var s=new Collider_1(this,true,e,t,i,r,n);this.colliders.add(s);return s},removeCollider:function(e){this.colliders.remove(e);return this},setFPS:function(e){this.fps=e;this._frameTime=1/this.fps;this._frameTimeMS=1e3*this._frameTime;return this},update:function(e,t){if(this.isPaused||this.bodies.size===0){return}var i;var r=this._frameTime;var n=this._frameTimeMS*this.timeScale;this._elapsed+=t;var s;var a=this.bodies.entries;var o=this._elapsed>=n;for(i=0;i<a.length;i++){s=a[i];if(s.enable){s.preUpdate(o,r)}}if(o){this._elapsed-=n;this.stepsLastFrame=1;if(this.useTree){this.tree.clear();this.tree.load(a)}var l=this.colliders.update();for(i=0;i<l.length;i++){var h=l[i];if(h.active){h.update()}}this.emit(events$f.WORLD_STEP)}while(this._elapsed>=n){this._elapsed-=n;this.step(r)}},step:function(e){var t;var i;var r=this.bodies.entries;var n=r.length;for(t=0;t<n;t++){i=r[t];if(i.enable){i.update(e)}}if(this.useTree){this.tree.clear();this.tree.load(r)}var s=this.colliders.update();for(t=0;t<s.length;t++){var a=s[t];if(a.active){a.update()}}this.emit(events$f.WORLD_STEP);this.stepsLastFrame++},postUpdate:function(){var e;var t;var i=this.bodies.entries;var r=i.length;var n=this.bodies;var s=this.staticBodies;if(this.stepsLastFrame){for(e=0;e<r;e++){t=i[e];if(t.enable){t.postUpdate()}}}if(this.drawDebug){var a=this.debugGraphic;a.clear();for(e=0;e<r;e++){t=i[e];if(t.willDrawDebug()){t.drawDebug(a)}}i=s.entries;r=i.length;for(e=0;e<r;e++){t=i[e];if(t.willDrawDebug()){t.drawDebug(a)}}}var o=this.pendingDestroy;if(o.size>0){var l=this.tree;var h=this.staticTree;i=o.entries;r=i.length;for(e=0;e<r;e++){t=i[e];if(t.physicsType===_const$a.DYNAMIC_BODY){l.remove(t);n.delete(t)}else if(t.physicsType===_const$a.STATIC_BODY){h.remove(t);s.delete(t)}t.world=undefined;t.gameObject=undefined}o.clear()}},updateMotion:function(e,t){if(e.allowRotation){this.computeAngularVelocity(e,t)}this.computeVelocity(e,t)},computeAngularVelocity:function(e,t){var i=e.angularVelocity;var r=e.angularAcceleration;var n=e.angularDrag;var s=e.maxAngular;if(r){i+=r*t}else if(e.allowDrag&&n){n*=t;if(GreaterThan_1(i-n,0,.1)){i-=n}else if(LessThan_1(i+n,0,.1)){i+=n}else{i=0}}i=Clamp_1(i,-s,s);var a=i-e.angularVelocity;e.angularVelocity+=a;e.rotation+=e.angularVelocity*t},computeVelocity:function(e,t){var i=e.velocity.x;var r=e.acceleration.x;var n=e.drag.x;var s=e.maxVelocity.x;var a=e.velocity.y;var o=e.acceleration.y;var l=e.drag.y;var h=e.maxVelocity.y;var u=e.speed;var c=e.maxSpeed;var f=e.allowDrag;var d=e.useDamping;if(e.allowGravity){i+=(this.gravity.x+e.gravity.x)*t;a+=(this.gravity.y+e.gravity.y)*t}if(r){i+=r*t}else if(f&&n){if(d){i*=n;u=Math.sqrt(i*i+a*a);if(Equal_1(u,0,.001)){i=0}}else{n*=t;if(GreaterThan_1(i-n,0,.01)){i-=n}else if(LessThan_1(i+n,0,.01)){i+=n}else{i=0}}}if(o){a+=o*t}else if(f&&l){if(d){a*=l;u=Math.sqrt(i*i+a*a);if(Equal_1(u,0,.001)){a=0}}else{l*=t;if(GreaterThan_1(a-l,0,.01)){a-=l}else if(LessThan_1(a+l,0,.01)){a+=l}else{a=0}}}i=Clamp_1(i,-s,s);a=Clamp_1(a,-h,h);e.velocity.set(i,a);if(c>-1&&u>c){e.velocity.normalize().scale(c);u=c}e.speed=u},separate:function(e,t,i,r,n){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t)){return false}if(i&&i.call(r,e.gameObject,t.gameObject)===false){return false}if(e.isCircle&&t.isCircle){return this.separateCircle(e,t,n)}if(e.isCircle!==t.isCircle){var s=e.isCircle?t:e;var a=e.isCircle?e:t;var o={x:s.x,y:s.y,right:s.right,bottom:s.bottom};var l=a.center;if(l.y<o.y||l.y>o.bottom){if(l.x<o.x||l.x>o.right){return this.separateCircle(e,t,n)}}}var h=false;var u=false;if(this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)){h=SeparateX_1(e,t,n,this.OVERLAP_BIAS);if(this.intersects(e,t)){u=SeparateY_1(e,t,n,this.OVERLAP_BIAS)}}else{u=SeparateY_1(e,t,n,this.OVERLAP_BIAS);if(this.intersects(e,t)){h=SeparateX_1(e,t,n,this.OVERLAP_BIAS)}}var c=h||u;if(c){if(n){if(e.onOverlap||t.onOverlap){this.emit(events$f.OVERLAP,e.gameObject,t.gameObject,e,t)}}else if(e.onCollide||t.onCollide){this.emit(events$f.COLLIDE,e.gameObject,t.gameObject,e,t)}}return c},separateCircle:function(e,t,i,r){GetOverlapX_1(e,t,false,r);GetOverlapY_1(e,t,false,r);var n=0;if(e.isCircle!==t.isCircle){var s={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom};var a={x:e.isCircle?e.center.x:t.center.x,y:e.isCircle?e.center.y:t.center.y,radius:e.isCircle?e.halfWidth:t.halfWidth};if(a.y<s.y){if(a.x<s.x){n=DistanceBetween_1(a.x,a.y,s.x,s.y)-a.radius}else if(a.x>s.right){n=DistanceBetween_1(a.x,a.y,s.right,s.y)-a.radius}}else if(a.y>s.bottom){if(a.x<s.x){n=DistanceBetween_1(a.x,a.y,s.x,s.bottom)-a.radius}else if(a.x>s.right){n=DistanceBetween_1(a.x,a.y,s.right,s.bottom)-a.radius}}n*=-1}else{n=e.halfWidth+t.halfWidth-DistanceBetween_1(e.center.x,e.center.y,t.center.x,t.center.y)}if(i||n===0||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX){if(n!==0&&(e.onOverlap||t.onOverlap)){this.emit(events$f.OVERLAP,e.gameObject,t.gameObject,e,t)}return n!==0}var o=e.position.x-t.position.x;var l=e.position.y-t.position.y;var h=Math.sqrt(Math.pow(o,2)+Math.pow(l,2));var u=(t.position.x-e.position.x)/h||0;var c=(t.position.y-e.position.y)/h||0;var f=2*(e.velocity.x*u+e.velocity.y*c-t.velocity.x*u-t.velocity.y*c)/(e.mass+t.mass);if(!e.immovable){e.velocity.x=(e.velocity.x-f*e.mass*u)*e.bounce.x;e.velocity.y=(e.velocity.y-f*e.mass*c)*e.bounce.y}if(!t.immovable){t.velocity.x=(t.velocity.x+f*t.mass*u)*t.bounce.x;t.velocity.y=(t.velocity.y+f*t.mass*c)*t.bounce.y}var d=t.velocity.x-e.velocity.x;var v=t.velocity.y-e.velocity.y;var p=Math.atan2(v,d);var g=this._frameTime;if(!e.immovable){e.x+=e.velocity.x*g-n*Math.cos(p);e.y+=e.velocity.y*g-n*Math.sin(p)}if(!t.immovable){t.x+=t.velocity.x*g+n*Math.cos(p);t.y+=t.velocity.y*g+n*Math.sin(p)}if(e.onCollide||t.onCollide){this.emit(events$f.COLLIDE,e.gameObject,t.gameObject,e,t)}return true},intersects:function(e,t){if(e===t){return false}if(!e.isCircle&&!t.isCircle){return!(e.right<=t.position.x||e.bottom<=t.position.y||e.position.x>=t.right||e.position.y>=t.bottom)}else if(e.isCircle){if(t.isCircle){return DistanceBetween_1(e.center.x,e.center.y,t.center.x,t.center.y)<=e.halfWidth+t.halfWidth}else{return this.circleBodyIntersects(e,t)}}else{return this.circleBodyIntersects(t,e)}},circleBodyIntersects:function(e,t){var i=Clamp_1(e.center.x,t.left,t.right);var r=Clamp_1(e.center.y,t.top,t.bottom);var n=(e.center.x-i)*(e.center.x-i);var s=(e.center.y-r)*(e.center.y-r);return n+s<=e.halfWidth*e.halfWidth},overlap:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}return this.collideObjects(e,t,i,r,n,true)},collide:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}return this.collideObjects(e,t,i,r,n,false)},collideObjects:function(e,t,i,r,n,s){var a;var o;if(e.isParent&&e.physicsType===undefined){e=e.children.entries}if(t&&t.isParent&&t.physicsType===undefined){t=t.children.entries}var l=Array.isArray(e);var h=Array.isArray(t);this._total=0;if(!l&&!h){this.collideHandler(e,t,i,r,n,s)}else if(!l&&h){for(a=0;a<t.length;a++){this.collideHandler(e,t[a],i,r,n,s)}}else if(l&&!h){if(!t){for(a=0;a<e.length;a++){var u=e[a];for(o=a+1;o<e.length;o++){if(a===o){continue}this.collideHandler(u,e[o],i,r,n,s)}}}else{for(a=0;a<e.length;a++){this.collideHandler(e[a],t,i,r,n,s)}}}else{for(a=0;a<e.length;a++){for(o=0;o<t.length;o++){this.collideHandler(e[a],t[o],i,r,n,s)}}}return this._total>0},collideHandler:function(e,t,i,r,n,s){if(t===undefined&&e.isParent){return this.collideGroupVsGroup(e,e,i,r,n,s)}if(!e||!t){return false}if(e.body){if(t.body){return this.collideSpriteVsSprite(e,t,i,r,n,s)}else if(t.isParent){return this.collideSpriteVsGroup(e,t,i,r,n,s)}else if(t.isTilemap){return this.collideSpriteVsTilemapLayer(e,t,i,r,n,s)}}else if(e.isParent){if(t.body){return this.collideSpriteVsGroup(t,e,i,r,n,s)}else if(t.isParent){return this.collideGroupVsGroup(e,t,i,r,n,s)}else if(t.isTilemap){return this.collideGroupVsTilemapLayer(e,t,i,r,n,s)}}else if(e.isTilemap){if(t.body){return this.collideSpriteVsTilemapLayer(t,e,i,r,n,s)}else if(t.isParent){return this.collideGroupVsTilemapLayer(t,e,i,r,n,s)}}},collideSpriteVsSprite:function(e,t,i,r,n,s){if(!e.body||!t.body){return false}if(this.separate(e.body,t.body,r,n,s)){if(i){i.call(n,e,t)}this._total++}return true},collideSpriteVsGroup:function(e,t,i,r,n,s){var a=e.body;if(t.length===0||!a||!a.enable){return}var o;var l;var h;if(this.useTree){var u=this.treeMinMax;u.minX=a.left;u.minY=a.top;u.maxX=a.right;u.maxY=a.bottom;var c=t.physicsType===_const$a.DYNAMIC_BODY?this.tree.search(u):this.staticTree.search(u);l=c.length;for(o=0;o<l;o++){h=c[o];if(a===h||!t.contains(h.gameObject)){continue}if(this.separate(a,h,r,n,s)){if(i){i.call(n,a.gameObject,h.gameObject)}this._total++}}}else{var f=t.getChildren();var d=t.children.entries.indexOf(e);l=f.length;for(o=0;o<l;o++){h=f[o].body;if(!h||o===d||!h.enable){continue}if(this.separate(a,h,r,n,s)){if(i){i.call(n,a.gameObject,h.gameObject)}this._total++}}}},collideGroupVsTilemapLayer:function(e,t,i,r,n,s){var a=e.getChildren();if(a.length===0){return false}var o=false;for(var l=0;l<a.length;l++){if(a[l].body){if(this.collideSpriteVsTilemapLayer(a[l],t,i,r,n,s)){o=true}}}return o},collideTiles:function(e,t,i,r,n){if(!e.body.enable||t.length===0){return false}else{return this.collideSpriteVsTilesHandler(e,t,i,r,n,false,false)}},overlapTiles:function(e,t,i,r,n){if(!e.body.enable||t.length===0){return false}else{return this.collideSpriteVsTilesHandler(e,t,i,r,n,true,false)}},collideSpriteVsTilemapLayer:function(e,t,i,r,n,s){var a=e.body;if(!a.enable){return false}var o=a.position.x;var l=a.position.y;var h=a.width;var u=a.height;var c=t.layer;if(c.tileWidth>c.baseTileWidth){var f=(c.tileWidth-c.baseTileWidth)*t.scaleX;o-=f;h+=f}if(c.tileHeight>c.baseTileHeight){var d=(c.tileHeight-c.baseTileHeight)*t.scaleY;u+=d}var v=t.getTilesWithinWorldXY(o,l,h,u);if(v.length===0){return false}else{return this.collideSpriteVsTilesHandler(e,v,i,r,n,s,true)}},collideSpriteVsTilesHandler:function(e,t,i,r,n,s,a){var o=e.body;var l;var h={left:0,right:0,top:0,bottom:0};var u;var c=false;for(var f=0;f<t.length;f++){l=t[f];u=l.tilemapLayer;h.left=u.tileToWorldX(l.x);h.top=u.tileToWorldY(l.y);if(l.baseHeight!==l.height){h.top-=(l.height-l.baseHeight)*u.scaleY}h.right=h.left+l.width*u.scaleX;h.bottom=h.top+l.height*u.scaleY;if(TileIntersectsBody_1(h,o)&&(!r||r.call(n,e,l))&&ProcessTileCallbacks_1(l,e)&&(s||SeparateTile_1(f,o,l,h,u,this.TILE_BIAS,a))){this._total++;c=true;if(i){i.call(n,e,l)}if(s&&o.onOverlap){this.emit(events$f.TILE_OVERLAP,e,l,o)}else if(o.onCollide){this.emit(events$f.TILE_COLLIDE,e,l,o)}}}return c},collideGroupVsGroup:function(e,t,i,r,n,s){if(e.length===0||t.length===0){return}var a=e.getChildren();for(var o=0;o<a.length;o++){this.collideSpriteVsGroup(a[o],t,i,r,n,s)}},wrap:function(e,t){if(e.body){this.wrapObject(e,t)}else if(e.getChildren){this.wrapArray(e.getChildren(),t)}else if(Array.isArray(e)){this.wrapArray(e,t)}else{this.wrapObject(e,t)}},wrapArray:function(e,t){for(var i=0;i<e.length;i++){this.wrapObject(e[i],t)}},wrapObject:function(e,t){if(t===undefined){t=0}e.x=Wrap_1(e.x,this.bounds.left-t,this.bounds.right+t);e.y=Wrap_1(e.y,this.bounds.top-t,this.bounds.bottom+t)},shutdown:function(){this.tree.clear();this.staticTree.clear();this.bodies.clear();this.staticBodies.clear();this.colliders.destroy();this.removeAllListeners()},destroy:function(){this.shutdown();this.scene=null}});var World_1=World;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ArcadePhysics=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.config=this.getConfig();t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.world=new World_1(this.scene,this.config);this.add=new Factory_1(this.world);this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){if(!this.world){this.world=new World_1(this.scene,this.config);this.add=new Factory_1(this.world)}var e=this.systems.events;e.on(events$7.UPDATE,this.world.update,this.world);e.on(events$7.POST_UPDATE,this.world.postUpdate,this.world);e.once(events$7.SHUTDOWN,this.shutdown,this)},getConfig:function(){var e=this.systems.game.config.physics;var t=this.systems.settings.physics;var i=Merge_1(GetFastValue_1(t,"arcade",{}),GetFastValue_1(e,"arcade",{}));return i},overlap:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}return this.world.collideObjects(e,t,i,r,n,true)},collide:function(e,t,i,r,n){if(i===undefined){i=null}if(r===undefined){r=null}if(n===undefined){n=i}return this.world.collideObjects(e,t,i,r,n,false)},collideTiles:function(e,t,i,r,n){return this.world.collideTiles(e,t,i,r,n)},overlapTiles:function(e,t,i,r,n){return this.world.overlapTiles(e,t,i,r,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(e,t,i,r,n,s){if(r===undefined){r=60}var a=Math.atan2(i-e.y,t-e.x);e.body.acceleration.setToPolar(a,r);if(n!==undefined&&s!==undefined){e.body.maxVelocity.set(n,s)}return a},accelerateToObject:function(e,t,i,r,n){return this.accelerateTo(e,t.x,t.y,i,r,n)},closest:function(e){var t=this.world.bodies;var i=Number.MAX_VALUE;var r=null;var n=e.x;var s=e.y;t.iterate((function(e){var t=DistanceSquared_1(n,s,e.x,e.y);if(t<i){r=e;i=t}}));return r},furthest:function(e){var t=this.world.bodies;var i=-1;var r=null;var n=e.x;var s=e.y;t.iterate((function(e){var t=DistanceSquared_1(n,s,e.x,e.y);if(t>i){r=e;i=t}}));return r},moveTo:function(e,t,i,r,n){if(r===undefined){r=60}if(n===undefined){n=0}var s=Math.atan2(i-e.y,t-e.x);if(n>0){r=DistanceBetween_1(e.x,e.y,t,i)/(n/1e3)}e.body.velocity.setToPolar(s,r);return s},moveToObject:function(e,t,i,r){return this.moveTo(e,t.x,t.y,i,r)},velocityFromAngle:function(e,t,i){if(t===undefined){t=60}if(i===undefined){i=new Vector2_1}return i.setToPolar(DegToRad_1(e),t)},velocityFromRotation:function(e,t,i){if(t===undefined){t=60}if(i===undefined){i=new Vector2_1}return i.setToPolar(e,t)},overlapRect:function(e,t,i,r,n,s){return OverlapRect_1(this.world,e,t,i,r,n,s)},shutdown:function(){if(!this.world){return}var e=this.systems.events;e.off(events$7.UPDATE,this.world.update,this.world);e.off(events$7.POST_UPDATE,this.world.postUpdate,this.world);e.off(events$7.SHUTDOWN,this.shutdown,this);this.add.destroy();this.world.destroy();this.add=null;this.world=null},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("ArcadePhysics",ArcadePhysics,"arcadePhysics");var ArcadePhysics_1=ArcadePhysics;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Arcade={ArcadePhysics:ArcadePhysics_1,Body:Body_1,Collider:Collider_1,Components:components$1,Events:events$f,Factory:Factory_1,Group:PhysicsGroup_1,Image:ArcadeImage_1,Sprite:ArcadeSprite_1,StaticBody:StaticBody_1,StaticGroup:StaticPhysicsGroup_1,World:World_1};Arcade=Extend_1(false,Arcade,_const$a);var arcade=Arcade;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetVelocity=function(e,t,i,r,n){if(i){return Clamp_1(t+i*e,-n,n)}else if(r){var s=r*e;if(t-s>0){return t-s}else if(t+s<0){return t+s}else{return 0}}return Clamp_1(t,-n,n)};var GetVelocity_1=GetVelocity;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TYPE={NONE:0,A:1,B:2,BOTH:3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var UpdateMotion=function(e,t){e.standing=false;if(t.collision.y){if(e.bounciness>0&&Math.abs(e.vel.y)>e.minBounceVelocity){e.vel.y*=-e.bounciness}else{if(e.vel.y>0){e.standing=true}e.vel.y=0}}if(t.collision.x){if(e.bounciness>0&&Math.abs(e.vel.x)>e.minBounceVelocity){e.vel.x*=-e.bounciness}else{e.vel.x=0}}if(t.collision.slope){var i=t.collision.slope;if(e.bounciness>0){var r=e.vel.x*i.nx+e.vel.y*i.ny;e.vel.x=(e.vel.x-i.nx*r*2)*e.bounciness;e.vel.y=(e.vel.y-i.ny*r*2)*e.bounciness}else{var n=i.x*i.x+i.y*i.y;var s=(e.vel.x*i.x+e.vel.y*i.y)/n;e.vel.x=i.x*s;e.vel.y=i.y*s;var a=Math.atan2(i.x,i.y);if(a>e.slopeStanding.min&&a<e.slopeStanding.max){e.standing=true}}}e.pos.x=t.pos.x;e.pos.y=t.pos.y};var UpdateMotion_1=UpdateMotion;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Body$1=new Class_1({initialize:function e(t,i,r,n,s){if(n===undefined){n=16}if(s===undefined){s=n}this.world=t;this.gameObject=null;this.enabled=true;this.id=t.getNextID();this.name="";this.size={x:n,y:s};this.offset={x:0,y:0};this.pos={x:i,y:r};this.last={x:i,y:r};this.vel={x:0,y:0};this.accel={x:0,y:0};this.friction={x:0,y:0};this.maxVel={x:t.defaults.maxVelocityX,y:t.defaults.maxVelocityY};this.standing=false;this.gravityFactor=t.defaults.gravityFactor;this.bounciness=t.defaults.bounciness;this.minBounceVelocity=t.defaults.minBounceVelocity;this.accelGround=0;this.accelAir=0;this.jumpSpeed=0;this.type=TYPE.NONE;this.checkAgainst=TYPE.NONE;this.collides=COLLIDES.NEVER;this.debugShowBody=t.defaults.debugShowBody;this.debugShowVelocity=t.defaults.debugShowVelocity;this.debugBodyColor=t.defaults.bodyDebugColor;this.slopeStanding={min:.767944870877505,max:2.3736477827122884}},reset:function(e,t){this.pos={x:e,y:t};this.last={x:e,y:t};this.vel={x:0,y:0};this.accel={x:0,y:0};this.friction={x:0,y:0};this.maxVel={x:100,y:100};this.standing=false;this.gravityFactor=1;this.bounciness=0;this.minBounceVelocity=40;this.accelGround=0;this.accelAir=0;this.jumpSpeed=0;this.type=TYPE.NONE;this.checkAgainst=TYPE.NONE;this.collides=COLLIDES.NEVER},update:function(e){var t=this.pos;this.last.x=t.x;this.last.y=t.y;this.vel.y+=this.world.gravity*e*this.gravityFactor;this.vel.x=GetVelocity_1(e,this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=GetVelocity_1(e,this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var i=this.vel.x*e;var r=this.vel.y*e;var n=this.world.collisionMap.trace(t.x,t.y,i,r,this.size.x,this.size.y);if(this.handleMovementTrace(n)){UpdateMotion_1(this,n)}var s=this.gameObject;if(s){s.x=t.x-this.offset.x+s.displayOriginX*s.scaleX;s.y=t.y-this.offset.y+s.displayOriginY*s.scaleY}if(this.updateCallback){this.updateCallback(this)}},drawDebug:function(e){var t=this.pos;if(this.debugShowBody){e.lineStyle(1,this.debugBodyColor,1);e.strokeRect(t.x,t.y,this.size.x,this.size.y)}if(this.debugShowVelocity){var i=t.x+this.size.x/2;var r=t.y+this.size.y/2;e.lineStyle(1,this.world.defaults.velocityDebugColor,1);e.lineBetween(i,r,i+this.vel.x,r+this.vel.y)}},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},skipHash:function(){return!this.enabled||this.type===0&&this.checkAgainst===0&&this.collides===0},touches:function(e){return!(this.pos.x>=e.pos.x+e.size.x||this.pos.x+this.size.x<=e.pos.x||this.pos.y>=e.pos.y+e.size.y||this.pos.y+this.size.y<=e.pos.y)},resetSize:function(e,t,i,r){this.pos.x=e;this.pos.y=t;this.size.x=i;this.size.y=r;return this},toJSON:function(){var e={name:this.name,size:{x:this.size.x,y:this.size.y},pos:{x:this.pos.x,y:this.pos.y},vel:{x:this.vel.x,y:this.vel.y},accel:{x:this.accel.x,y:this.accel.y},friction:{x:this.friction.x,y:this.friction.y},maxVel:{x:this.maxVel.x,y:this.maxVel.y},gravityFactor:this.gravityFactor,bounciness:this.bounciness,minBounceVelocity:this.minBounceVelocity,type:this.type,checkAgainst:this.checkAgainst,collides:this.collides};return e},fromJSON:function(){},check:function(){},collideWith:function(e,t){if(this.parent&&this.parent._collideCallback){this.parent._collideCallback.call(this.parent._callbackScope,this,e,t)}},handleMovementTrace:function(){return true},destroy:function(){this.world.remove(this);this.enabled=false;this.world=null;this.gameObject=null;this.parent=null}});var Body_1$1=Body$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLIDE_EVENT$1="collide";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT$4="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT$4="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$g={COLLIDE:COLLIDE_EVENT$1,PAUSE:PAUSE_EVENT$4,RESUME:RESUME_EVENT$4};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var H=.5;var N=1/3;var M=2/3;var DefaultDefs={2:[0,1,1,0,true],3:[0,1,1,H,true],4:[0,H,1,0,true],5:[0,1,1,M,true],6:[0,M,1,N,true],7:[0,N,1,0,true],8:[H,1,0,0,true],9:[1,0,H,1,true],10:[H,1,1,0,true],11:[0,0,H,1,true],12:[0,0,1,0,false],13:[1,1,0,0,true],14:[1,H,0,0,true],15:[1,1,0,H,true],16:[1,N,0,0,true],17:[1,M,0,N,true],18:[1,1,0,M,true],19:[1,1,H,0,true],20:[H,0,0,1,true],21:[0,1,H,0,true],22:[H,0,1,1,true],23:[1,1,0,1,false],24:[0,0,1,1,true],25:[0,0,1,H,true],26:[0,H,1,1,true],27:[0,0,1,N,true],28:[0,N,1,M,true],29:[0,M,1,1,true],30:[N,1,0,0,true],31:[1,0,M,1,true],32:[M,1,1,0,true],33:[0,0,N,1,true],34:[1,0,1,1,false],35:[1,0,0,1,true],36:[1,H,0,1,true],37:[1,0,0,H,true],38:[1,M,0,1,true],39:[1,N,0,M,true],40:[1,0,0,N,true],41:[M,1,N,0,true],42:[M,0,N,1,true],43:[N,1,M,0,true],44:[N,0,M,1,true],45:[0,1,0,0,false],52:[1,1,M,0,true],53:[N,0,0,1,true],54:[0,1,N,0,true],55:[M,0,1,1,true]};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CollisionMap=new Class_1({initialize:function e(t,i){if(t===undefined){t=32}this.tilesize=t;this.data=Array.isArray(i)?i:[];this.width=Array.isArray(i)?i[0].length:0;this.height=Array.isArray(i)?i.length:0;this.lastSlope=55;this.tiledef=DefaultDefs},trace:function(e,t,i,r,n,s){var a={collision:{x:false,y:false,slope:false},pos:{x:e+i,y:t+r},tile:{x:0,y:0}};if(!this.data){return a}var o=Math.ceil(Math.max(Math.abs(i),Math.abs(r))/this.tilesize);if(o>1){var l=i/o;var h=r/o;for(var u=0;u<o&&(l||h);u++){this.step(a,e,t,l,h,n,s,i,r,u);e=a.pos.x;t=a.pos.y;if(a.collision.x){l=0;i=0}if(a.collision.y){h=0;r=0}if(a.collision.slope){break}}}else{this.step(a,e,t,i,r,n,s,i,r,0)}return a},step:function(e,t,i,r,n,s,a,o,l,h){var u=0;var c;var f;var d=this.tilesize;var v=this.width;var p=this.height;if(r){var g=r>0?s:0;var m=r<0?d:0;var _=Math.max(Math.floor(i/d),0);var y=Math.min(Math.ceil((i+a)/d),p);c=Math.floor((e.pos.x+g)/d);var T=Math.floor((t+g)/d);if(h>0||c===T||T<0||T>=v){T=-1}if(c>=0&&c<v){for(f=_;f<y;f++){if(T!==-1){u=this.data[f][T];if(u>1&&u<=this.lastSlope&&this.checkDef(e,u,t,i,o,l,s,a,T,f)){break}}u=this.data[f][c];if(u===1||u>this.lastSlope||u>1&&this.checkDef(e,u,t,i,o,l,s,a,c,f)){if(u>1&&u<=this.lastSlope&&e.collision.slope){break}e.collision.x=true;e.tile.x=u;e.pos.x=c*d-g+m;t=e.pos.x;o=0;break}}}}if(n){var x=n>0?a:0;var E=n<0?d:0;var C=Math.max(Math.floor(e.pos.x/d),0);var S=Math.min(Math.ceil((e.pos.x+s)/d),v);f=Math.floor((e.pos.y+x)/d);var A=Math.floor((i+x)/d);if(h>0||f===A||A<0||A>=p){A=-1}if(f>=0&&f<p){for(c=C;c<S;c++){if(A!==-1){u=this.data[A][c];if(u>1&&u<=this.lastSlope&&this.checkDef(e,u,t,i,o,l,s,a,c,A)){break}}u=this.data[f][c];if(u===1||u>this.lastSlope||u>1&&this.checkDef(e,u,t,i,o,l,s,a,c,f)){if(u>1&&u<=this.lastSlope&&e.collision.slope){break}e.collision.y=true;e.tile.y=u;e.pos.y=f*d-x+E;break}}}}},checkDef:function(e,t,i,r,n,s,a,o,l,h){var u=this.tiledef[t];if(!u){return false}var c=this.tilesize;var f=(l+u[0])*c;var d=(h+u[1])*c;var v=(u[2]-u[0])*c;var p=(u[3]-u[1])*c;var g=u[4];var m=i+n+(p<0?a:0)-f;var _=r+s+(v>0?o:0)-d;if(v*_-p*m>0){if(n*-p+s*v<0){return g}var y=Math.sqrt(v*v+p*p);var T=p/y;var x=-v/y;var E=m*T+_*x;var C=T*E;var S=x*E;if(C*C+S*S>=n*n+s*s){return g||v*(_-s)-p*(m-n)<.5}e.pos.x=i+n-C;e.pos.y=r+s-S;e.collision.slope={x:v,y:p,nx:T,ny:x};return true}return false}});var CollisionMap_1=CollisionMap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Acceleration$1={setAccelerationX:function(e){this.accel.x=e;return this},setAccelerationY:function(e){this.accel.y=e;return this},setAcceleration:function(e,t){this.accel.x=e;this.accel.y=t;return this}};var Acceleration_1$1=Acceleration$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BodyScale={setBodySize:function(e,t){if(t===undefined){t=e}this.body.size.x=Math.round(e);this.body.size.y=Math.round(t);return this},setBodyScale:function(e,t){if(t===undefined){t=e}var i=this.body.gameObject;if(i){i.setScale(e,t);return this.setBodySize(i.width*i.scaleX,i.height*i.scaleY)}else{return this.setBodySize(this.body.size.x*e,this.body.size.y*t)}}};var BodyScale_1=BodyScale;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BodyType={getBodyType:function(){return this.body.type},setTypeNone:function(){this.body.type=TYPE.NONE;return this},setTypeA:function(){this.body.type=TYPE.A;return this},setTypeB:function(){this.body.type=TYPE.B;return this}};var BodyType_1=BodyType;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Bounce$1={setBounce:function(e){this.body.bounciness=e;return this},setMinBounceVelocity:function(e){this.body.minBounceVelocity=e;return this},bounce:{get:function(){return this.body.bounciness},set:function(e){this.body.bounciness=e}}};var Bounce_1$1=Bounce$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CheckAgainst={setAvsB:function(){this.setTypeA();return this.setCheckAgainstB()},setBvsA:function(){this.setTypeB();return this.setCheckAgainstA()},setCheckAgainstNone:function(){this.body.checkAgainst=TYPE.NONE;return this},setCheckAgainstA:function(){this.body.checkAgainst=TYPE.A;return this},setCheckAgainstB:function(){this.body.checkAgainst=TYPE.B;return this},checkAgainst:{get:function(){return this.body.checkAgainst},set:function(e){this.body.checkAgainst=e}}};var CheckAgainst_1=CheckAgainst;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Collides={_collideCallback:null,_callbackScope:null,setCollideCallback:function(e,t){this._collideCallback=e;if(t){this._callbackScope=t}return this},setCollidesNever:function(){this.body.collides=COLLIDES.NEVER;return this},setLiteCollision:function(){this.body.collides=COLLIDES.LITE;return this},setPassiveCollision:function(){this.body.collides=COLLIDES.PASSIVE;return this},setActiveCollision:function(){this.body.collides=COLLIDES.ACTIVE;return this},setFixedCollision:function(){this.body.collides=COLLIDES.FIXED;return this},collides:{get:function(){return this.body.collides},set:function(e){this.body.collides=e}}};var Collides_1=Collides;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Debug$1={setDebug:function(e,t,i){this.debugShowBody=e;this.debugShowVelocity=t;this.debugBodyColor=i;return this},setDebugBodyColor:function(e){this.body.debugBodyColor=e;return this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};var Debug_1$1=Debug$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Friction$1={setFrictionX:function(e){this.friction.x=e;return this},setFrictionY:function(e){this.friction.y=e;return this},setFriction:function(e,t){this.friction.x=e;this.friction.y=t;return this}};var Friction_1$1=Friction$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Gravity$1={setGravity:function(e){this.body.gravityFactor=e;return this},gravity:{get:function(){return this.body.gravityFactor},set:function(e){this.body.gravityFactor=e}}};var Gravity_1$1=Gravity$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Offset$5={setOffset:function(e,t,i,r){this.body.offset.x=e;this.body.offset.y=t;if(i){this.setBodySize(i,r)}return this}};var Offset_1$5=Offset$5;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetGameObject={setGameObject:function(e,t){if(t===undefined){t=true}if(e){this.body.gameObject=e;if(t){this.syncGameObject()}}else{this.body.gameObject=null}return this},syncGameObject:function(){var e=this.body.gameObject;if(e){this.setBodySize(e.width*e.scaleX,e.height*e.scaleY)}return this}};var SetGameObject_1=SetGameObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Velocity$1={setVelocityX:function(e){this.vel.x=e;return this},setVelocityY:function(e){this.vel.y=e;return this},setVelocity:function(e,t){if(t===undefined){t=e}this.vel.x=e;this.vel.y=t;return this},setMaxVelocity:function(e,t){if(t===undefined){t=e}this.maxVel.x=e;this.maxVel.y=t;return this}};var Velocity_1$1=Velocity$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var components$2={Acceleration:Acceleration_1$1,BodyScale:BodyScale_1,BodyType:BodyType_1,Bounce:Bounce_1$1,CheckAgainst:CheckAgainst_1,Collides:Collides_1,Debug:Debug_1$1,Friction:Friction_1$1,Gravity:Gravity_1$1,Offset:Offset_1$5,SetGameObject:SetGameObject_1,Velocity:Velocity_1$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImpactBody=new Class_1({Mixins:[components$2.Acceleration,components$2.BodyScale,components$2.BodyType,components$2.Bounce,components$2.CheckAgainst,components$2.Collides,components$2.Debug,components$2.Friction,components$2.Gravity,components$2.Offset,components$2.SetGameObject,components$2.Velocity],initialize:function e(t,i,r,n,s){this.body=t.create(i,r,n,s);this.body.parent=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});var ImpactBody_1=ImpactBody;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImpactImage=new Class_1({Extends:Image_1$1,Mixins:[components$2.Acceleration,components$2.BodyScale,components$2.BodyType,components$2.Bounce,components$2.CheckAgainst,components$2.Collides,components$2.Debug,components$2.Friction,components$2.Gravity,components$2.Offset,components$2.SetGameObject,components$2.Velocity],initialize:function e(t,i,r,n,s){Image_1$1.call(this,t.scene,i,r,n,s);this.body=t.create(i-this.frame.centerX,r-this.frame.centerY,this.width,this.height);this.body.parent=this;this.body.gameObject=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});var ImpactImage_1=ImpactImage;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImpactSprite=new Class_1({Extends:Sprite_1,Mixins:[components$2.Acceleration,components$2.BodyScale,components$2.BodyType,components$2.Bounce,components$2.CheckAgainst,components$2.Collides,components$2.Debug,components$2.Friction,components$2.Gravity,components$2.Offset,components$2.SetGameObject,components$2.Velocity],initialize:function e(t,i,r,n,s){Sprite_1.call(this,t.scene,i,r,n,s);this.body=t.create(i-this.frame.centerX,r-this.frame.centerY,this.width,this.height);this.body.parent=this;this.body.gameObject=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});var ImpactSprite_1=ImpactSprite;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Factory$1=new Class_1({initialize:function e(t){this.world=t;this.sys=t.scene.sys},body:function(e,t,i,r){return new ImpactBody_1(this.world,e,t,i,r)},existing:function(e){var t=e.x-e.frame.centerX;var i=e.y-e.frame.centerY;var r=e.width;var n=e.height;e.body=this.world.create(t,i,r,n);e.body.parent=e;e.body.gameObject=e;return e},image:function(e,t,i,r){var n=new ImpactImage_1(this.world,e,t,i,r);this.sys.displayList.add(n);return n},sprite:function(e,t,i,r){var n=new ImpactSprite_1(this.world,e,t,i,r);this.sys.displayList.add(n);this.sys.updateList.add(n);return n},destroy:function(){this.world=null;this.sys=null}});var Factory_1$1=Factory$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SeparateX$1=function(e,t,i,r){var n=t.pos.x+t.size.x-i.pos.x;if(r){var s=t===r?i:t;r.vel.x=-r.vel.x*r.bounciness+s.vel.x;var a=e.collisionMap.trace(r.pos.x,r.pos.y,r===t?-n:n,0,r.size.x,r.size.y);r.pos.x=a.pos.x}else{var o=(t.vel.x-i.vel.x)/2;t.vel.x=-o;i.vel.x=o;var l=e.collisionMap.trace(t.pos.x,t.pos.y,-n/2,0,t.size.x,t.size.y);t.pos.x=Math.floor(l.pos.x);var h=e.collisionMap.trace(i.pos.x,i.pos.y,n/2,0,i.size.x,i.size.y);i.pos.x=Math.ceil(h.pos.x)}};var SeparateX_1$1=SeparateX$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SeparateY$1=function(e,t,i,r){var n=t.pos.y+t.size.y-i.pos.y;var s;var a;if(r){var o=t===r?i:t;r.vel.y=-r.vel.y*r.bounciness+o.vel.y;s=0;if(r===t&&Math.abs(r.vel.y-o.vel.y)<r.minBounceVelocity){r.standing=true;s=o.vel.x*e.delta}var l=e.collisionMap.trace(r.pos.x,r.pos.y,s,r===t?-n:n,r.size.x,r.size.y);r.pos.y=l.pos.y;r.pos.x=l.pos.x}else if(e.gravity&&(i.standing||t.vel.y>0)){a=e.collisionMap.trace(t.pos.x,t.pos.y,0,-(t.pos.y+t.size.y-i.pos.y),t.size.x,t.size.y);t.pos.y=a.pos.y;if(t.bounciness>0&&t.vel.y>t.minBounceVelocity){t.vel.y*=-t.bounciness}else{t.standing=true;t.vel.y=0}}else{var h=(t.vel.y-i.vel.y)/2;t.vel.y=-h;i.vel.y=h;s=i.vel.x*e.delta;a=e.collisionMap.trace(t.pos.x,t.pos.y,s,-n/2,t.size.x,t.size.y);t.pos.y=a.pos.y;var u=e.collisionMap.trace(i.pos.x,i.pos.y,0,n/2,i.size.x,i.size.y);i.pos.y=u.pos.y}};var SeparateY_1$1=SeparateY$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Solver=function(e,t,i){var r=null;if(t.collides===COLLIDES.LITE||i.collides===COLLIDES.FIXED){r=t}else if(i.collides===COLLIDES.LITE||t.collides===COLLIDES.FIXED){r=i}if(t.last.x+t.size.x>i.last.x&&t.last.x<i.last.x+i.size.x){if(t.last.y<i.last.y){SeparateY_1$1(e,t,i,r)}else{SeparateY_1$1(e,i,t,r)}t.collideWith(i,"y");i.collideWith(t,"y");e.emit(events$g.COLLIDE,t,i,"y")}else if(t.last.y+t.size.y>i.last.y&&t.last.y<i.last.y+i.size.y){if(t.last.x<i.last.x){SeparateX_1$1(e,t,i,r)}else{SeparateX_1$1(e,i,t,r)}t.collideWith(i,"x");i.collideWith(t,"x");e.emit(events$g.COLLIDE,t,i,"x")}};var Solver_1=Solver;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var World$1=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.scene=t;this.bodies=new _Set;this.gravity=GetFastValue_1(i,"gravity",0);this.cellSize=GetFastValue_1(i,"cellSize",64);this.collisionMap=new CollisionMap_1;this.timeScale=GetFastValue_1(i,"timeScale",1);this.maxStep=GetFastValue_1(i,"maxStep",.05);this.enabled=true;this.drawDebug=GetFastValue_1(i,"debug",false);var r=GetFastValue_1(i,"maxVelocity",100);this.defaults={debugShowBody:GetFastValue_1(i,"debugShowBody",true),debugShowVelocity:GetFastValue_1(i,"debugShowVelocity",true),bodyDebugColor:GetFastValue_1(i,"debugBodyColor",16711935),velocityDebugColor:GetFastValue_1(i,"debugVelocityColor",65280),maxVelocityX:GetFastValue_1(i,"maxVelocityX",r),maxVelocityY:GetFastValue_1(i,"maxVelocityY",r),minBounceVelocity:GetFastValue_1(i,"minBounceVelocity",40),gravityFactor:GetFastValue_1(i,"gravityFactor",1),bounciness:GetFastValue_1(i,"bounciness",0)};this.walls={left:null,right:null,top:null,bottom:null};this.delta=0;this._lastId=0;if(GetFastValue_1(i,"setBounds",false)){var n=i["setBounds"];if(typeof n==="boolean"){this.setBounds()}else{var s=GetFastValue_1(n,"x",0);var a=GetFastValue_1(n,"y",0);var o=GetFastValue_1(n,"width",t.sys.scale.width);var l=GetFastValue_1(n,"height",t.sys.scale.height);var h=GetFastValue_1(n,"thickness",64);var u=GetFastValue_1(n,"left",true);var c=GetFastValue_1(n,"right",true);var f=GetFastValue_1(n,"top",true);var d=GetFastValue_1(n,"bottom",true);this.setBounds(s,a,o,l,h,u,c,f,d)}}if(this.drawDebug){this.createDebugGraphic()}},setCollisionMap:function(e,t){if(typeof e==="string"){var i=this.scene.cache.tilemap.get(e);if(!i||i.format!==Formats.WELTMEISTER){console.warn("The specified key does not correspond to a Weltmeister tilemap: "+e);return null}var r=i.data.layer;var n;for(var s=0;s<r.length;s++){if(r[s].name==="collision"){n=r[s];break}}if(t===undefined){t=n.tilesize}this.collisionMap=new CollisionMap_1(t,n.data)}else if(Array.isArray(e)){this.collisionMap=new CollisionMap_1(t,e)}else{console.warn("Invalid Weltmeister collision map data: "+e)}return this.collisionMap},setCollisionMapFromTilemapLayer:function(e,t){if(t===undefined){t={}}var i=GetFastValue_1(t,"slopeProperty",null);var r=GetFastValue_1(t,"slopeMap",null);var n=GetFastValue_1(t,"defaultCollidingSlope",null);var s=GetFastValue_1(t,"defaultNonCollidingSlope",0);var a=e.layer;var o=a.baseTileWidth;var l=[];for(var h=0;h<a.height;h++){l[h]=[];for(var u=0;u<a.width;u++){var c=a.data[h][u];if(c&&c.collides){if(i!==null&&HasValue_1(c.properties,i)){l[h][u]=parseInt(c.properties[i],10)}else if(r!==null&&HasValue_1(r,c.index)){l[h][u]=r[c.index]}else if(n!==null){l[h][u]=n}else{l[h][u]=c.index}}else{l[h][u]=s}}}this.collisionMap=new CollisionMap_1(o,l);return this.collisionMap},setBounds:function(e,t,i,r,n,s,a,o,l){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.scene.sys.scale.width}if(r===undefined){r=this.scene.sys.scale.height}if(n===undefined){n=64}if(s===undefined){s=true}if(a===undefined){a=true}if(o===undefined){o=true}if(l===undefined){l=true}this.updateWall(s,"left",e-n,t,n,r);this.updateWall(a,"right",e+i,t,n,r);this.updateWall(o,"top",e,t-n,i,n);this.updateWall(l,"bottom",e,t+r,i,n);return this},updateWall:function(e,t,i,r,n,s){var a=this.walls[t];if(e){if(a){a.resetSize(i,r,n,s)}else{this.walls[t]=this.create(i,r,n,s);this.walls[t].name=t;this.walls[t].gravityFactor=0;this.walls[t].collides=COLLIDES.FIXED}}else{if(a){this.bodies.remove(a)}this.walls[t]=null}},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=true;return e},getNextID:function(){return this._lastId++},create:function(e,t,i,r){var n=new Body_1$1(this,e,t,i,r);this.bodies.set(n);return n},remove:function(e){this.bodies.delete(e)},pause:function(){this.enabled=false;this.emit(events$g.PAUSE);return this},resume:function(){this.enabled=true;this.emit(events$g.RESUME);return this},update:function(e,t){if(!this.enabled||this.bodies.size===0){return}var i=Math.min(t/1e3,this.maxStep)*this.timeScale;this.delta=i;var r;var n;var s=this.bodies.entries;var a=s.length;var o={};var l=this.cellSize;for(r=0;r<a;r++){n=s[r];if(n.enabled){n.update(i)}}for(r=0;r<a;r++){n=s[r];if(n&&!n.skipHash()){this.checkHash(n,o,l)}}if(this.drawDebug){var h=this.debugGraphic;h.clear();for(r=0;r<a;r++){n=s[r];if(n&&n.willDrawDebug()){n.drawDebug(h)}}}},checkHash:function(e,t,i){var r={};var n=Math.floor(e.pos.x/i);var s=Math.floor(e.pos.y/i);var a=Math.floor((e.pos.x+e.size.x)/i)+1;var o=Math.floor((e.pos.y+e.size.y)/i)+1;for(var l=n;l<a;l++){for(var h=s;h<o;h++){if(!t[l]){t[l]={};t[l][h]=[e]}else if(!t[l][h]){t[l][h]=[e]}else{var u=t[l][h];for(var c=0;c<u.length;c++){if(e.touches(u[c])&&!r[u[c].id]){r[u[c].id]=true;this.checkBodies(e,u[c])}}u.push(e)}}}},checkBodies:function(e,t){if(e.collides===COLLIDES.FIXED&&t.collides===COLLIDES.FIXED){return}if(e.checkAgainst&t.type){e.check(t)}if(t.checkAgainst&e.type){t.check(e)}if(e.collides&&t.collides&&e.collides+t.collides>COLLIDES.ACTIVE){Solver_1(this,e,t)}},setCollidesNever:function(e){for(var t=0;t<e.length;t++){e[t].collides=COLLIDES.NEVER}return this},setLite:function(e){for(var t=0;t<e.length;t++){e[t].collides=COLLIDES.LITE}return this},setPassive:function(e){for(var t=0;t<e.length;t++){e[t].collides=COLLIDES.PASSIVE}return this},setActive:function(e){for(var t=0;t<e.length;t++){e[t].collides=COLLIDES.ACTIVE}return this},setFixed:function(e){for(var t=0;t<e.length;t++){e[t].collides=COLLIDES.FIXED}return this},setTypeNone:function(e){for(var t=0;t<e.length;t++){e[t].type=TYPE.NONE}return this},setTypeA:function(e){for(var t=0;t<e.length;t++){e[t].type=TYPE.A}return this},setTypeB:function(e){for(var t=0;t<e.length;t++){e[t].type=TYPE.B}return this},setAvsB:function(e){for(var t=0;t<e.length;t++){e[t].type=TYPE.A;e[t].checkAgainst=TYPE.B}return this},setBvsA:function(e){for(var t=0;t<e.length;t++){e[t].type=TYPE.B;e[t].checkAgainst=TYPE.A}return this},setCheckAgainstNone:function(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=TYPE.NONE}return this},setCheckAgainstA:function(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=TYPE.A}return this},setCheckAgainstB:function(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=TYPE.B}return this},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners();this.scene=null;this.bodies.clear();this.bodies=null;this.collisionMap=null}});var World_1$1=World$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImpactPhysics=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.config=this.getConfig();t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.world=new World_1$1(this.scene,this.config);this.add=new Factory_1$1(this.world);this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){if(!this.world){this.world=new World_1$1(this.scene,this.config);this.add=new Factory_1$1(this.world)}var e=this.systems.events;e.on(events$7.UPDATE,this.world.update,this.world);e.once(events$7.SHUTDOWN,this.shutdown,this)},getConfig:function(){var e=this.systems.game.config.physics;var t=this.systems.settings.physics;var i=Merge_1(GetFastValue_1(t,"impact",{}),GetFastValue_1(e,"impact",{}));return i},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},shutdown:function(){var e=this.systems.events;e.off(events$7.UPDATE,this.world.update,this.world);e.off(events$7.SHUTDOWN,this.shutdown,this);this.add.destroy();this.world.destroy();this.add=null;this.world=null},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("ImpactPhysics",ImpactPhysics,"impactPhysics");var ImpactPhysics_1=ImpactPhysics;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var impact={Body:Body_1$1,Events:events$g,COLLIDES:COLLIDES,CollisionMap:CollisionMap_1,Factory:Factory_1$1,Image:ImpactImage_1,ImpactBody:ImpactBody_1,ImpactPhysics:ImpactPhysics_1,Sprite:ImpactSprite_1,TYPE:TYPE,World:World_1$1};var Vector={};var Vector_1=Vector;(function(){Vector.create=function(e,t){return{x:e||0,y:t||0}};Vector.clone=function(e){return{x:e.x,y:e.y}};Vector.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};Vector.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};Vector.rotate=function(e,t,i){var r=Math.cos(t),n=Math.sin(t);if(!i)i={};var s=e.x*r-e.y*n;i.y=e.x*n+e.y*r;i.x=s;return i};Vector.rotateAbout=function(e,t,i,r){var n=Math.cos(t),s=Math.sin(t);if(!r)r={};var a=i.x+((e.x-i.x)*n-(e.y-i.y)*s);r.y=i.y+((e.x-i.x)*s+(e.y-i.y)*n);r.x=a;return r};Vector.normalise=function(e){var t=Vector.magnitude(e);if(t===0)return{x:0,y:0};return{x:e.x/t,y:e.y/t}};Vector.dot=function(e,t){return e.x*t.x+e.y*t.y};Vector.cross=function(e,t){return e.x*t.y-e.y*t.x};Vector.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)};Vector.add=function(e,t,i){if(!i)i={};i.x=e.x+t.x;i.y=e.y+t.y;return i};Vector.sub=function(e,t,i){if(!i)i={};i.x=e.x-t.x;i.y=e.y-t.y;return i};Vector.mult=function(e,t){return{x:e.x*t,y:e.y*t}};Vector.div=function(e,t){return{x:e.x/t,y:e.y/t}};Vector.perp=function(e,t){t=t===true?-1:1;return{x:t*-e.y,y:t*e.x}};Vector.neg=function(e){return{x:-e.x,y:-e.y}};Vector.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};Vector._temp=[Vector.create(),Vector.create(),Vector.create(),Vector.create(),Vector.create(),Vector.create()]})();var Common={};var Common_1=Common;(function(){Common._nextId=0;Common._seed=0;Common._nowStartTime=+new Date;Common.extend=function(e,t){var i,r;if(typeof t==="boolean"){i=2;r=t}else{i=1;r=true}for(var n=i;n<arguments.length;n++){var s=arguments[n];if(s){for(var a in s){if(r&&s[a]&&s[a].constructor===Object){if(!e[a]||e[a].constructor===Object){e[a]=e[a]||{};Common.extend(e[a],r,s[a])}else{e[a]=s[a]}}else{e[a]=s[a]}}}}return e};Common.clone=function(e,t){return Common.extend({},t,e)};Common.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t};Common.values=function(e){var t=[];if(Object.keys){var i=Object.keys(e);for(var r=0;r<i.length;r++){t.push(e[i[r]])}return t}for(var n in e)t.push(e[n]);return t};Common.get=function(e,t,i,r){t=t.split(".").slice(i,r);for(var n=0;n<t.length;n+=1){e=e[t[n]]}return e};Common.set=function(e,t,i,r,n){var s=t.split(".").slice(r,n);Common.get(e,t,0,-1)[s[s.length-1]]=i;return i};Common.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Common.random()*(t+1));var r=e[t];e[t]=e[i];e[i]=r}return e};Common.choose=function(e){return e[Math.floor(Common.random()*e.length)]};Common.isElement=function(e){if(typeof HTMLElement!=="undefined"){return e instanceof HTMLElement}return!!(e&&e.nodeType&&e.nodeName)};Common.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"};Common.isFunction=function(e){return typeof e==="function"};Common.isPlainObject=function(e){return typeof e==="object"&&e.constructor===Object};Common.isString=function(e){return toString.call(e)==="[object String]"};Common.clamp=function(e,t,i){if(e<t)return t;if(e>i)return i;return e};Common.sign=function(e){return e<0?-1:1};Common.now=function(){if(window.performance){if(window.performance.now){return window.performance.now()}else if(window.performance.webkitNow){return window.performance.webkitNow()}}return new Date-Common._nowStartTime};Common.random=function(t,i){t=typeof t!=="undefined"?t:0;i=typeof i!=="undefined"?i:1;return t+e()*(i-t)};var e=function(){Common._seed=(Common._seed*9301+49297)%233280;return Common._seed/233280};Common.colorToNumber=function(e){e=e.replace("#","");if(e.length==3){e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)}return parseInt(e,16)};Common.logLevel=1;Common.log=function(){if(console&&Common.logLevel>0&&Common.logLevel<=3){console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};Common.info=function(){if(console&&Common.logLevel>0&&Common.logLevel<=2){console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};Common.warn=function(){if(console&&Common.logLevel>0&&Common.logLevel<=3){console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};Common.nextId=function(){return Common._nextId++};Common.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++){if(e[i]===t)return i}return-1};Common.map=function(e,t){if(e.map){return e.map(t)}var i=[];for(var r=0;r<e.length;r+=1){i.push(t(e[r]))}return i};Common.topologicalSort=function(e){var t=[],i=[],r=[];for(var n in e){if(!i[n]&&!r[n]){Common._topologicalSort(n,i,r,e,t)}}return t};Common._topologicalSort=function(e,t,i,r,n){var s=r[e]||[];i[e]=true;for(var a=0;a<s.length;a+=1){var o=s[a];if(i[o]){continue}if(!t[o]){Common._topologicalSort(o,t,i,r,n)}}i[e]=false;t[e]=true;n.push(e)};Common.chain=function(){var e=[];for(var t=0;t<arguments.length;t+=1){var i=arguments[t];if(i._chained){e.push.apply(e,i._chained)}else{e.push(i)}}var r=function(){var t,i=new Array(arguments.length);for(var r=0,n=arguments.length;r<n;r++){i[r]=arguments[r]}for(r=0;r<e.length;r+=1){var s=e[r].apply(t,i);if(typeof s!=="undefined"){t=s}}return t};r._chained=e;return r};Common.chainPathBefore=function(e,t,i){return Common.set(e,t,Common.chain(i,Common.get(e,t)))};Common.chainPathAfter=function(e,t,i){return Common.set(e,t,Common.chain(Common.get(e,t),i))};Common._requireGlobal=function(e,t){var i=typeof window!=="undefined"?window[e]:typeof commonjsGlobal!=="undefined"?commonjsGlobal[e]:null;return i}})();var Vertices={};var Vertices_1=Vertices;(function(){Vertices.create=function(e,t){var i=[];for(var r=0;r<e.length;r++){var n=e[r],s={x:n.x,y:n.y,index:r,body:t,isInternal:false,contact:null};s.contact={vertex:s,normalImpulse:0,tangentImpulse:0};i.push(s)}return i};Vertices.fromPath=function(e,t){var i=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,r=[];e.replace(i,(function(e,t,i){r.push({x:parseFloat(t),y:parseFloat(i)})}));return Vertices.create(r,t)};Vertices.centre=function(e){var t=Vertices.area(e,true),i={x:0,y:0},r,n,s;for(var a=0;a<e.length;a++){s=(a+1)%e.length;r=Vector_1.cross(e[a],e[s]);n=Vector_1.mult(Vector_1.add(e[a],e[s]),r);i=Vector_1.add(i,n)}return Vector_1.div(i,6*t)};Vertices.mean=function(e){var t={x:0,y:0};for(var i=0;i<e.length;i++){t.x+=e[i].x;t.y+=e[i].y}return Vector_1.div(t,e.length)};Vertices.area=function(e,t){var i=0,r=e.length-1;for(var n=0;n<e.length;n++){i+=(e[r].x-e[n].x)*(e[r].y+e[n].y);r=n}if(t)return i/2;return Math.abs(i)/2};Vertices.inertia=function(e,t){var i=0,r=0,n=e,s,a;for(var o=0;o<n.length;o++){a=(o+1)%n.length;s=Math.abs(Vector_1.cross(n[a],n[o]));i+=s*(Vector_1.dot(n[a],n[a])+Vector_1.dot(n[a],n[o])+Vector_1.dot(n[o],n[o]));r+=s}return t/6*(i/r)};Vertices.translate=function(e,t,i){var r;if(i){for(r=0;r<e.length;r++){e[r].x+=t.x*i;e[r].y+=t.y*i}}else{for(r=0;r<e.length;r++){e[r].x+=t.x;e[r].y+=t.y}}return e};Vertices.rotate=function(e,t,i){if(t===0)return;var r=Math.cos(t),n=Math.sin(t);for(var s=0;s<e.length;s++){var a=e[s],o=a.x-i.x,l=a.y-i.y;a.x=i.x+(o*r-l*n);a.y=i.y+(o*n+l*r)}return e};Vertices.contains=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=e[(i+1)%e.length];if((t.x-r.x)*(n.y-r.y)+(t.y-r.y)*(r.x-n.x)>0){return false}}return true};Vertices.scale=function(e,t,i,r){if(t===1&&i===1)return e;r=r||Vertices.centre(e);var n,s;for(var a=0;a<e.length;a++){n=e[a];s=Vector_1.sub(n,r);e[a].x=r.x+s.x*t;e[a].y=r.y+s.y*i}return e};Vertices.chamfer=function(e,t,i,r,n){if(typeof t==="number"){t=[t]}else{t=t||[8]}i=typeof i!=="undefined"?i:-1;r=r||2;n=n||14;var s=[];for(var a=0;a<e.length;a++){var o=e[a-1>=0?a-1:e.length-1],l=e[a],h=e[(a+1)%e.length],u=t[a<t.length?a:t.length-1];if(u===0){s.push(l);continue}var c=Vector_1.normalise({x:l.y-o.y,y:o.x-l.x});var f=Vector_1.normalise({x:h.y-l.y,y:l.x-h.x});var d=Math.sqrt(2*Math.pow(u,2)),v=Vector_1.mult(Common_1.clone(c),u),p=Vector_1.normalise(Vector_1.mult(Vector_1.add(c,f),.5)),g=Vector_1.sub(l,Vector_1.mult(p,d));var m=i;if(i===-1){m=Math.pow(u,.32)*1.75}m=Common_1.clamp(m,r,n);if(m%2===1)m+=1;var _=Math.acos(Vector_1.dot(c,f)),y=_/m;for(var T=0;T<m;T++){s.push(Vector_1.add(Vector_1.rotate(v,y*T),g))}}return s};Vertices.clockwiseSort=function(e){var t=Vertices.mean(e);e.sort((function(e,i){return Vector_1.angle(t,e)-Vector_1.angle(t,i)}));return e};Vertices.isConvex=function(e){var t=0,i=e.length,r,n,s,a;if(i<3)return null;for(r=0;r<i;r++){n=(r+1)%i;s=(r+2)%i;a=(e[n].x-e[r].x)*(e[s].y-e[n].y);a-=(e[n].y-e[r].y)*(e[s].x-e[n].x);if(a<0){t|=1}else if(a>0){t|=2}if(t===3){return false}}if(t!==0){return true}else{return null}};Vertices.hull=function(e){var t=[],i=[],r,n;e=e.slice(0);e.sort((function(e,t){var i=e.x-t.x;return i!==0?i:e.y-t.y}));for(n=0;n<e.length;n+=1){r=e[n];while(i.length>=2&&Vector_1.cross3(i[i.length-2],i[i.length-1],r)<=0){i.pop()}i.push(r)}for(n=e.length-1;n>=0;n-=1){r=e[n];while(t.length>=2&&Vector_1.cross3(t[t.length-2],t[t.length-1],r)<=0){t.pop()}t.push(r)}t.pop();i.pop();return t.concat(i)}})();var Events={};var Events_1=Events;(function(){Events.on=function(e,t,i){var r=t.split(" "),n;for(var s=0;s<r.length;s++){n=r[s];e.events=e.events||{};e.events[n]=e.events[n]||[];e.events[n].push(i)}return i};Events.off=function(e,t,i){if(!t){e.events={};return}if(typeof t==="function"){i=t;t=Common_1.keys(e.events).join(" ")}var r=t.split(" ");for(var n=0;n<r.length;n++){var s=e.events[r[n]],a=[];if(i&&s){for(var o=0;o<s.length;o++){if(s[o]!==i)a.push(s[o])}}e.events[r[n]]=a}};Events.trigger=function(e,t,i){var r,n,s,a;var o=e.events;if(o&&Common_1.keys(o).length>0){if(!i)i={};r=t.split(" ");for(var l=0;l<r.length;l++){n=r[l];s=o[n];if(s){a=Common_1.clone(i,false);a.name=n;a.source=e;for(var h=0;h<s.length;h++){s[h].apply(e,[a])}}}}}})();var Sleeping={};var Sleeping_1=Sleeping;(function(){Sleeping._motionWakeThreshold=.18;Sleeping._motionSleepThreshold=.08;Sleeping._minBias=.9;Sleeping.update=function(e,t){var i=t*t*t;for(var r=0;r<e.length;r++){var n=e[r],s=n.speed*n.speed+n.angularSpeed*n.angularSpeed;if(n.force.x!==0||n.force.y!==0){Sleeping.set(n,false);continue}var a=Math.min(n.motion,s),o=Math.max(n.motion,s);n.motion=Sleeping._minBias*a+(1-Sleeping._minBias)*o;if(n.sleepThreshold>0&&n.motion<Sleeping._motionSleepThreshold*i){n.sleepCounter+=1;if(n.sleepCounter>=n.sleepThreshold)Sleeping.set(n,true)}else if(n.sleepCounter>0){n.sleepCounter-=1}}};Sleeping.afterCollisions=function(e,t){var i=t*t*t;for(var r=0;r<e.length;r++){var n=e[r];if(!n.isActive)continue;var s=n.collision,a=s.bodyA.parent,o=s.bodyB.parent;if(a.isSleeping&&o.isSleeping||a.isStatic||o.isStatic)continue;if(a.isSleeping||o.isSleeping){var l=a.isSleeping&&!a.isStatic?a:o,h=l===a?o:a;if(!l.isStatic&&h.motion>Sleeping._motionWakeThreshold*i){Sleeping.set(l,false)}}}};Sleeping.set=function(e,t){var i=e.isSleeping;if(t){e.isSleeping=true;e.sleepCounter=e.sleepThreshold;e.positionImpulse.x=0;e.positionImpulse.y=0;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.anglePrev=e.angle;e.speed=0;e.angularSpeed=0;e.motion=0;if(!i){Events_1.trigger(e,"sleepStart")}}else{e.isSleeping=false;e.sleepCounter=0;if(i){Events_1.trigger(e,"sleepEnd")}}}})();var Bounds={};var Bounds_1=Bounds;(function(){Bounds.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};if(e)Bounds.update(t,e);return t};Bounds.update=function(e,t,i){e.min.x=Infinity;e.max.x=-Infinity;e.min.y=Infinity;e.max.y=-Infinity;for(var r=0;r<t.length;r++){var n=t[r];if(n.x>e.max.x)e.max.x=n.x;if(n.x<e.min.x)e.min.x=n.x;if(n.y>e.max.y)e.max.y=n.y;if(n.y<e.min.y)e.min.y=n.y}if(i){if(i.x>0){e.max.x+=i.x}else{e.min.x+=i.x}if(i.y>0){e.max.y+=i.y}else{e.min.y+=i.y}}};Bounds.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y};Bounds.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y};Bounds.translate=function(e,t){e.min.x+=t.x;e.max.x+=t.x;e.min.y+=t.y;e.max.y+=t.y};Bounds.shift=function(e,t){var i=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x;e.max.x=t.x+i;e.min.y=t.y;e.max.y=t.y+r}})();var Axes={};var Axes_1=Axes;(function(){Axes.fromVertices=function(e){var t={};for(var i=0;i<e.length;i++){var r=(i+1)%e.length,n=Vector_1.normalise({x:e[r].y-e[i].y,y:e[i].x-e[r].x}),s=n.y===0?Infinity:n.x/n.y;s=s.toFixed(3).toString();t[s]=n}return Common_1.values(t)};Axes.rotate=function(e,t){if(t===0)return;var i=Math.cos(t),r=Math.sin(t);for(var n=0;n<e.length;n++){var s=e[n],a;a=s.x*i-s.y*r;s.y=s.x*r+s.y*i;s.x=a}}})();var Body$2={};var Body_1$2=Body$2;(function(){Body$2._inertiaScale=4;Body$2._nextCollidingGroupId=1;Body$2._nextNonCollidingGroupId=-1;Body$2._nextCategory=1;Body$2.create=function(t){var i={id:Common_1.nextId(),type:"body",label:"Body",gameObject:null,parts:[],plugin:{},angle:0,vertices:Vertices_1.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:false,isStatic:false,isSleeping:false,ignoreGravity:false,ignorePointer:false,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:true,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null};var r=Common_1.extend(i,t);e(r,t);return r};Body$2.nextGroup=function(e){if(e)return Body$2._nextNonCollidingGroupId--;return Body$2._nextCollidingGroupId++};Body$2.nextCategory=function(){Body$2._nextCategory=Body$2._nextCategory<<1;return Body$2._nextCategory};var e=function(e,t){t=t||{};Body$2.set(e,{bounds:e.bounds||Bounds_1.create(e.vertices),positionPrev:e.positionPrev||Vector_1.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e});Vertices_1.rotate(e.vertices,e.angle,e.position);Axes_1.rotate(e.axes,e.angle);Bounds_1.update(e.bounds,e.vertices,e.velocity);Body$2.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var i=e.isStatic?"#2e2b44":Common_1.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]),r="#000";e.render.fillStyle=e.render.fillStyle||i;e.render.strokeStyle=e.render.strokeStyle||r;e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x);e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};Body$2.set=function(e,t,i){var r;if(typeof t==="string"){r=t;t={};t[r]=i}for(r in t){if(!t.hasOwnProperty(r))continue;i=t[r];switch(r){case"isStatic":Body$2.setStatic(e,i);break;case"isSleeping":Sleeping_1.set(e,i);break;case"mass":Body$2.setMass(e,i);break;case"density":Body$2.setDensity(e,i);break;case"inertia":Body$2.setInertia(e,i);break;case"vertices":Body$2.setVertices(e,i);break;case"position":Body$2.setPosition(e,i);break;case"angle":Body$2.setAngle(e,i);break;case"velocity":Body$2.setVelocity(e,i);break;case"angularVelocity":Body$2.setAngularVelocity(e,i);break;case"parts":Body$2.setParts(e,i);break;default:e[r]=i}}};Body$2.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var r=e.parts[i];r.isStatic=t;if(t){r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia};r.restitution=0;r.friction=1;r.mass=r.inertia=r.density=Infinity;r.inverseMass=r.inverseInertia=0;r.positionPrev.x=r.position.x;r.positionPrev.y=r.position.y;r.anglePrev=r.angle;r.angularVelocity=0;r.speed=0;r.angularSpeed=0;r.motion=0}else if(r._original){r.restitution=r._original.restitution;r.friction=r._original.friction;r.mass=r._original.mass;r.inertia=r._original.inertia;r.density=r._original.density;r.inverseMass=r._original.inverseMass;r.inverseInertia=r._original.inverseInertia;r._original=null}}};Body$2.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6);e.inverseInertia=1/e.inertia;e.mass=t;e.inverseMass=1/e.mass;e.density=e.mass/e.area};Body$2.setDensity=function(e,t){Body$2.setMass(e,t*e.area);e.density=t};Body$2.setInertia=function(e,t){e.inertia=t;e.inverseInertia=1/e.inertia};Body$2.setVertices=function(e,t){if(t[0].body===e){e.vertices=t}else{e.vertices=Vertices_1.create(t,e)}e.axes=Axes_1.fromVertices(e.vertices);e.area=Vertices_1.area(e.vertices);Body$2.setMass(e,e.density*e.area);var i=Vertices_1.centre(e.vertices);Vertices_1.translate(e.vertices,i,-1);Body$2.setInertia(e,Body$2._inertiaScale*Vertices_1.inertia(e.vertices,e.mass));Vertices_1.translate(e.vertices,e.position);Bounds_1.update(e.bounds,e.vertices,e.velocity)};Body$2.setParts=function(e,t,i){var r;t=t.slice(0);e.parts.length=0;e.parts.push(e);e.parent=e;for(r=0;r<t.length;r++){var n=t[r];if(n!==e){n.parent=e;e.parts.push(n)}}if(e.parts.length===1)return;i=typeof i!=="undefined"?i:true;if(i){var s=[];for(r=0;r<t.length;r++){s=s.concat(t[r].vertices)}Vertices_1.clockwiseSort(s);var a=Vertices_1.hull(s),o=Vertices_1.centre(a);Body$2.setVertices(e,a);Vertices_1.translate(e.vertices,o)}var l=Body$2._totalProperties(e);e.area=l.area;e.parent=e;e.position.x=l.centre.x;e.position.y=l.centre.y;e.positionPrev.x=l.centre.x;e.positionPrev.y=l.centre.y;Body$2.setMass(e,l.mass);Body$2.setInertia(e,l.inertia);Body$2.setPosition(e,l.centre)};Body$2.setPosition=function(e,t){var i=Vector_1.sub(t,e.position);e.positionPrev.x+=i.x;e.positionPrev.y+=i.y;for(var r=0;r<e.parts.length;r++){var n=e.parts[r];n.position.x+=i.x;n.position.y+=i.y;Vertices_1.translate(n.vertices,i);Bounds_1.update(n.bounds,n.vertices,e.velocity)}};Body$2.setAngle=function(e,t){var i=t-e.angle;e.anglePrev+=i;for(var r=0;r<e.parts.length;r++){var n=e.parts[r];n.angle+=i;Vertices_1.rotate(n.vertices,i,e.position);Axes_1.rotate(n.axes,i);Bounds_1.update(n.bounds,n.vertices,e.velocity);if(r>0){Vector_1.rotateAbout(n.position,i,e.position,n.position)}}};Body$2.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x;e.positionPrev.y=e.position.y-t.y;e.velocity.x=t.x;e.velocity.y=t.y;e.speed=Vector_1.magnitude(e.velocity)};Body$2.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t;e.angularVelocity=t;e.angularSpeed=Math.abs(e.angularVelocity)};Body$2.translate=function(e,t){Body$2.setPosition(e,Vector_1.add(e.position,t))};Body$2.rotate=function(e,t,i){if(!i){Body$2.setAngle(e,e.angle+t)}else{var r=Math.cos(t),n=Math.sin(t),s=e.position.x-i.x,a=e.position.y-i.y;Body$2.setPosition(e,{x:i.x+(s*r-a*n),y:i.y+(s*n+a*r)});Body$2.setAngle(e,e.angle+t)}};Body$2.scale=function(e,t,i,r){var n=0,s=0;r=r||e.position;for(var a=0;a<e.parts.length;a++){var o=e.parts[a];Vertices_1.scale(o.vertices,t,i,r);o.axes=Axes_1.fromVertices(o.vertices);o.area=Vertices_1.area(o.vertices);Body$2.setMass(o,e.density*o.area);Vertices_1.translate(o.vertices,{x:-o.position.x,y:-o.position.y});Body$2.setInertia(o,Body$2._inertiaScale*Vertices_1.inertia(o.vertices,o.mass));Vertices_1.translate(o.vertices,{x:o.position.x,y:o.position.y});if(a>0){n+=o.area;s+=o.inertia}o.position.x=r.x+(o.position.x-r.x)*t;o.position.y=r.y+(o.position.y-r.y)*i;Bounds_1.update(o.bounds,o.vertices,e.velocity)}if(e.parts.length>1){e.area=n;if(!e.isStatic){Body$2.setMass(e,e.density*n);Body$2.setInertia(e,s)}}if(e.circleRadius){if(t===i){e.circleRadius*=t}else{e.circleRadius=null}}};Body$2.update=function(e,t,i,r){var n=Math.pow(t*i*e.timeScale,2);var s=1-e.frictionAir*i*e.timeScale,a=e.position.x-e.positionPrev.x,o=e.position.y-e.positionPrev.y;e.velocity.x=a*s*r+e.force.x/e.mass*n;e.velocity.y=o*s*r+e.force.y/e.mass*n;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.position.x+=e.velocity.x;e.position.y+=e.velocity.y;e.angularVelocity=(e.angle-e.anglePrev)*s*r+e.torque/e.inertia*n;e.anglePrev=e.angle;e.angle+=e.angularVelocity;e.speed=Vector_1.magnitude(e.velocity);e.angularSpeed=Math.abs(e.angularVelocity);for(var l=0;l<e.parts.length;l++){var h=e.parts[l];Vertices_1.translate(h.vertices,e.velocity);if(l>0){h.position.x+=e.velocity.x;h.position.y+=e.velocity.y}if(e.angularVelocity!==0){Vertices_1.rotate(h.vertices,e.angularVelocity,e.position);Axes_1.rotate(h.axes,e.angularVelocity);if(l>0){Vector_1.rotateAbout(h.position,e.angularVelocity,e.position,h.position)}}Bounds_1.update(h.bounds,h.vertices,e.velocity)}};Body$2.applyForce=function(e,t,i){e.force.x+=i.x;e.force.y+=i.y;var r={x:t.x-e.position.x,y:t.y-e.position.y};e.torque+=r.x*i.y-r.y*i.x};Body$2._totalProperties=function(e){var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}};for(var i=e.parts.length===1?0:1;i<e.parts.length;i++){var r=e.parts[i],n=r.mass!==Infinity?r.mass:1;t.mass+=n;t.area+=r.area;t.inertia+=r.inertia;t.centre=Vector_1.add(t.centre,Vector_1.mult(r.position,n))}t.centre=Vector_1.div(t.centre,t.mass);return t}})();
/**
             * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var polyDecomp={decomp:polygonDecomp,quickDecomp:polygonQuickDecomp,isSimple:polygonIsSimple,removeCollinearPoints:polygonRemoveCollinearPoints,removeDuplicatePoints:polygonRemoveDuplicatePoints,makeCCW:polygonMakeCCW};function lineInt(e,t,i){i=i||0;var r=[0,0];var n,s,a,o,l,h,u;n=e[1][1]-e[0][1];s=e[0][0]-e[1][0];a=n*e[0][0]+s*e[0][1];o=t[1][1]-t[0][1];l=t[0][0]-t[1][0];h=o*t[0][0]+l*t[0][1];u=n*l-o*s;if(!scalar_eq(u,0,i)){r[0]=(l*a-s*h)/u;r[1]=(n*h-o*a)/u}return r}function lineSegmentsIntersect(e,t,i,r){var n=t[0]-e[0];var s=t[1]-e[1];var a=r[0]-i[0];var o=r[1]-i[1];if(a*s-o*n===0){return false}var l=(n*(i[1]-e[1])+s*(e[0]-i[0]))/(a*s-o*n);var h=(a*(e[1]-i[1])+o*(i[0]-e[0]))/(o*n-a*s);return l>=0&&l<=1&&h>=0&&h<=1}function triangleArea(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])}function isLeft(e,t,i){return triangleArea(e,t,i)>0}function isLeftOn(e,t,i){return triangleArea(e,t,i)>=0}function isRight(e,t,i){return triangleArea(e,t,i)<0}function isRightOn(e,t,i){return triangleArea(e,t,i)<=0}var tmpPoint1=[],tmpPoint2=[];function collinear(e,t,i,r){if(!r){return triangleArea(e,t,i)===0}else{var n=tmpPoint1,s=tmpPoint2;n[0]=t[0]-e[0];n[1]=t[1]-e[1];s[0]=i[0]-t[0];s[1]=i[1]-t[1];var a=n[0]*s[0]+n[1]*s[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),h=Math.acos(a/(o*l));return h<r}}function sqdist(e,t){var i=t[0]-e[0];var r=t[1]-e[1];return i*i+r*r}function polygonAt(e,t){var i=e.length;return e[t<0?t%i+i:t%i]}function polygonClear(e){e.length=0}function polygonAppend(e,t,i,r){for(var n=i;n<r;n++){e.push(t[n])}}function polygonMakeCCW(e){var t=0,i=e;for(var r=1;r<e.length;++r){if(i[r][1]<i[t][1]||i[r][1]===i[t][1]&&i[r][0]>i[t][0]){t=r}}if(!isLeft(polygonAt(e,t-1),polygonAt(e,t),polygonAt(e,t+1))){polygonReverse(e);return true}else{return false}}function polygonReverse(e){var t=[];var i=e.length;for(var r=0;r!==i;r++){t.push(e.pop())}for(var r=0;r!==i;r++){e[r]=t[r]}}function polygonIsReflex(e,t){return isRight(polygonAt(e,t-1),polygonAt(e,t),polygonAt(e,t+1))}var tmpLine1=[],tmpLine2=[];function polygonCanSee(e,t,i){var r,n,s=tmpLine1,a=tmpLine2;if(isLeftOn(polygonAt(e,t+1),polygonAt(e,t),polygonAt(e,i))&&isRightOn(polygonAt(e,t-1),polygonAt(e,t),polygonAt(e,i))){return false}n=sqdist(polygonAt(e,t),polygonAt(e,i));for(var o=0;o!==e.length;++o){if((o+1)%e.length===t||o===t){continue}if(isLeftOn(polygonAt(e,t),polygonAt(e,i),polygonAt(e,o+1))&&isRightOn(polygonAt(e,t),polygonAt(e,i),polygonAt(e,o))){s[0]=polygonAt(e,t);s[1]=polygonAt(e,i);a[0]=polygonAt(e,o);a[1]=polygonAt(e,o+1);r=lineInt(s,a);if(sqdist(polygonAt(e,t),r)<n){return false}}}return true}function polygonCanSee2(e,t,i){for(var r=0;r!==e.length;++r){if(r===t||r===i||(r+1)%e.length===t||(r+1)%e.length===i){continue}if(lineSegmentsIntersect(polygonAt(e,t),polygonAt(e,i),polygonAt(e,r),polygonAt(e,r+1))){return false}}return true}function polygonCopy(e,t,i,r){var n=r||[];polygonClear(n);if(t<i){for(var s=t;s<=i;s++){n.push(e[s])}}else{for(var s=0;s<=i;s++){n.push(e[s])}for(var s=t;s<e.length;s++){n.push(e[s])}}return n}function polygonGetCutEdges(e){var t=[],i=[],r=[],n=[];var s=Number.MAX_VALUE;for(var a=0;a<e.length;++a){if(polygonIsReflex(e,a)){for(var o=0;o<e.length;++o){if(polygonCanSee(e,a,o)){i=polygonGetCutEdges(polygonCopy(e,a,o,n));r=polygonGetCutEdges(polygonCopy(e,o,a,n));for(var l=0;l<r.length;l++){i.push(r[l])}if(i.length<s){t=i;s=i.length;t.push([polygonAt(e,a),polygonAt(e,o)])}}}}}return t}function polygonDecomp(e){var t=polygonGetCutEdges(e);if(t.length>0){return polygonSlice(e,t)}else{return[e]}}function polygonSlice(e,t){if(t.length===0){return[e]}if(t instanceof Array&&t.length&&t[0]instanceof Array&&t[0].length===2&&t[0][0]instanceof Array){var i=[e];for(var r=0;r<t.length;r++){var n=t[r];for(var s=0;s<i.length;s++){var a=i[s];var o=polygonSlice(a,n);if(o){i.splice(s,1);i.push(o[0],o[1]);break}}}return i}else{var n=t;var r=e.indexOf(n[0]);var s=e.indexOf(n[1]);if(r!==-1&&s!==-1){return[polygonCopy(e,r,s),polygonCopy(e,s,r)]}else{return false}}}function polygonIsSimple(e){var t=e,i;for(i=0;i<t.length-1;i++){for(var r=0;r<i-1;r++){if(lineSegmentsIntersect(t[i],t[i+1],t[r],t[r+1])){return false}}}for(i=1;i<t.length-2;i++){if(lineSegmentsIntersect(t[0],t[t.length-1],t[i],t[i+1])){return false}}return true}function getIntersectionPoint(e,t,i,r,n){n=n||0;var s=t[1]-e[1];var a=e[0]-t[0];var o=s*e[0]+a*e[1];var l=r[1]-i[1];var h=i[0]-r[0];var u=l*i[0]+h*i[1];var c=s*h-l*a;if(!scalar_eq(c,0,n)){return[(h*o-a*u)/c,(s*u-l*o)/c]}else{return[0,0]}}function polygonQuickDecomp(e,t,i,r,n,s,a){s=s||100;a=a||0;n=n||25;t=typeof t!=="undefined"?t:[];i=i||[];r=r||[];var o=[0,0],l=[0,0],h=[0,0];var u=0,c=0,f=0,d=0;var v=0,p=0,g=0;var m=[],_=[];var y=e,T=e;if(T.length<3){return t}a++;if(a>s){console.warn("quickDecomp: max level ("+s+") reached.");return t}for(var x=0;x<e.length;++x){if(polygonIsReflex(y,x)){i.push(y[x]);u=c=Number.MAX_VALUE;for(var E=0;E<e.length;++E){if(isLeft(polygonAt(y,x-1),polygonAt(y,x),polygonAt(y,E))&&isRightOn(polygonAt(y,x-1),polygonAt(y,x),polygonAt(y,E-1))){h=getIntersectionPoint(polygonAt(y,x-1),polygonAt(y,x),polygonAt(y,E),polygonAt(y,E-1));if(isRight(polygonAt(y,x+1),polygonAt(y,x),h)){f=sqdist(y[x],h);if(f<c){c=f;l=h;p=E}}}if(isLeft(polygonAt(y,x+1),polygonAt(y,x),polygonAt(y,E+1))&&isRightOn(polygonAt(y,x+1),polygonAt(y,x),polygonAt(y,E))){h=getIntersectionPoint(polygonAt(y,x+1),polygonAt(y,x),polygonAt(y,E),polygonAt(y,E+1));if(isLeft(polygonAt(y,x-1),polygonAt(y,x),h)){f=sqdist(y[x],h);if(f<u){u=f;o=h;v=E}}}}if(p===(v+1)%e.length){h[0]=(l[0]+o[0])/2;h[1]=(l[1]+o[1])/2;r.push(h);if(x<v){polygonAppend(m,y,x,v+1);m.push(h);_.push(h);if(p!==0){polygonAppend(_,y,p,y.length)}polygonAppend(_,y,0,x+1)}else{if(x!==0){polygonAppend(m,y,x,y.length)}polygonAppend(m,y,0,v+1);m.push(h);_.push(h);polygonAppend(_,y,p,x+1)}}else{if(p>v){v+=e.length}d=Number.MAX_VALUE;if(v<p){return t}for(var E=p;E<=v;++E){if(isLeftOn(polygonAt(y,x-1),polygonAt(y,x),polygonAt(y,E))&&isRightOn(polygonAt(y,x+1),polygonAt(y,x),polygonAt(y,E))){f=sqdist(polygonAt(y,x),polygonAt(y,E));if(f<d&&polygonCanSee2(y,x,E)){d=f;g=E%e.length}}}if(x<g){polygonAppend(m,y,x,g+1);if(g!==0){polygonAppend(_,y,g,T.length)}polygonAppend(_,y,0,x+1)}else{if(x!==0){polygonAppend(m,y,x,T.length)}polygonAppend(m,y,0,g+1);polygonAppend(_,y,g,x+1)}}if(m.length<_.length){polygonQuickDecomp(m,t,i,r,n,s,a);polygonQuickDecomp(_,t,i,r,n,s,a)}else{polygonQuickDecomp(_,t,i,r,n,s,a);polygonQuickDecomp(m,t,i,r,n,s,a)}return t}}t.push(e);return t}function polygonRemoveCollinearPoints(e,t){var i=0;for(var r=e.length-1;e.length>3&&r>=0;--r){if(collinear(polygonAt(e,r-1),polygonAt(e,r),polygonAt(e,r+1),t)){e.splice(r%e.length,1);i++}}return i}function polygonRemoveDuplicatePoints(e,t){for(var i=e.length-1;i>=1;--i){var r=e[i];for(var n=i-1;n>=0;--n){if(points_eq(r,e[n],t)){e.splice(i,1);continue}}}}function scalar_eq(e,t,i){i=i||0;return Math.abs(e-t)<=i}function points_eq(e,t,i){return scalar_eq(e[0],t[0],i)&&scalar_eq(e[1],t[1],i)}var Bodies={};var Bodies_1=Bodies;(function(){Bodies.rectangle=function(e,t,i,r,n){n=n||{};var s={label:"Rectangle Body",position:{x:e,y:t},vertices:Vertices_1.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(n.chamfer){var a=n.chamfer;s.vertices=Vertices_1.chamfer(s.vertices,a.radius,a.quality,a.qualityMin,a.qualityMax);delete n.chamfer}return Body_1$2.create(Common_1.extend({},s,n))};Bodies.trapezoid=function(e,t,i,r,n,s){s=s||{};n*=.5;var a=(1-n*2)*i;var o=i*n,l=o+a,h=l+o,u;if(n<.5){u="L 0 0 L "+o+" "+-r+" L "+l+" "+-r+" L "+h+" 0"}else{u="L 0 0 L "+l+" "+-r+" L "+h+" 0"}var c={label:"Trapezoid Body",position:{x:e,y:t},vertices:Vertices_1.fromPath(u)};if(s.chamfer){var f=s.chamfer;c.vertices=Vertices_1.chamfer(c.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax);delete s.chamfer}return Body_1$2.create(Common_1.extend({},c,s))};Bodies.circle=function(e,t,i,r,n){r=r||{};var s={label:"Circle Body",circleRadius:i};n=n||25;var a=Math.ceil(Math.max(10,Math.min(n,i)));if(a%2===1)a+=1;return Bodies.polygon(e,t,a,i,Common_1.extend({},s,r))};Bodies.polygon=function(e,t,i,r,n){n=n||{};if(i<3)return Bodies.circle(e,t,r,n);var s=2*Math.PI/i,a="",o=s*.5;for(var l=0;l<i;l+=1){var h=o+l*s,u=Math.cos(h)*r,c=Math.sin(h)*r;a+="L "+u.toFixed(3)+" "+c.toFixed(3)+" "}var f={label:"Polygon Body",position:{x:e,y:t},vertices:Vertices_1.fromPath(a)};if(n.chamfer){var d=n.chamfer;f.vertices=Vertices_1.chamfer(f.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax);delete n.chamfer}return Body_1$2.create(Common_1.extend({},f,n))};Bodies.fromVertices=function(e,t,i,r,n,s,a){var o,l,h,u,c,f,d,v,p;r=r||{};l=[];n=typeof n!=="undefined"?n:false;s=typeof s!=="undefined"?s:.01;a=typeof a!=="undefined"?a:10;if(!polyDecomp){Common_1.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.")}if(!Common_1.isArray(i[0])){i=[i]}for(v=0;v<i.length;v+=1){u=i[v];h=Vertices_1.isConvex(u);if(h||!polyDecomp){if(h){u=Vertices_1.clockwiseSort(u)}else{u=Vertices_1.hull(u)}l.push({position:{x:e,y:t},vertices:u})}else{var g=u.map((function(e){return[e.x,e.y]}));polyDecomp.makeCCW(g);if(s!==false)polyDecomp.removeCollinearPoints(g,s);var m=polyDecomp.quickDecomp(g);for(c=0;c<m.length;c++){var _=m[c];var y=_.map((function(e){return{x:e[0],y:e[1]}}));if(a>0&&Vertices_1.area(y)<a)continue;l.push({position:Vertices_1.centre(y),vertices:y})}}}for(c=0;c<l.length;c++){l[c]=Body_1$2.create(Common_1.extend(l[c],r))}if(n){var T=5;for(c=0;c<l.length;c++){var x=l[c];for(f=c+1;f<l.length;f++){var E=l[f];if(Bounds_1.overlaps(x.bounds,E.bounds)){var C=x.vertices,S=E.vertices;for(d=0;d<x.vertices.length;d++){for(p=0;p<E.vertices.length;p++){var A=Vector_1.magnitudeSquared(Vector_1.sub(C[(d+1)%C.length],S[p])),b=Vector_1.magnitudeSquared(Vector_1.sub(C[d],S[(p+1)%S.length]));if(A<T&&b<T){C[d].isInternal=true;S[p].isInternal=true}}}}}}}if(l.length>1){o=Body_1$2.create(Common_1.extend({parts:l.slice(0)},r));Body_1$2.setPosition(o,{x:e,y:t});return o}else{return l[0]}}})();var Composite={};var Composite_1=Composite;(function(){Composite.create=function(e){return Common_1.extend({id:Common_1.nextId(),type:"composite",parent:null,isModified:false,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)};Composite.setModified=function(e,t,i,r){e.isModified=t;if(i&&e.parent){Composite.setModified(e.parent,t,i,r)}if(r){for(var n=0;n<e.composites.length;n++){var s=e.composites[n];Composite.setModified(s,t,i,r)}}};Composite.add=function(e,t){var i=[].concat(t);Events_1.trigger(e,"beforeAdd",{object:t});for(var r=0;r<i.length;r++){var n=i[r];switch(n.type){case"body":if(n.parent!==n){Common_1.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}Composite.addBody(e,n);break;case"constraint":Composite.addConstraint(e,n);break;case"composite":Composite.addComposite(e,n);break;case"mouseConstraint":Composite.addConstraint(e,n.constraint);break}}Events_1.trigger(e,"afterAdd",{object:t});return e};Composite.remove=function(e,t,i){var r=[].concat(t);Events_1.trigger(e,"beforeRemove",{object:t});for(var n=0;n<r.length;n++){var s=r[n];switch(s.type){case"body":Composite.removeBody(e,s,i);break;case"constraint":Composite.removeConstraint(e,s,i);break;case"composite":Composite.removeComposite(e,s,i);break;case"mouseConstraint":Composite.removeConstraint(e,s.constraint);break}}Events_1.trigger(e,"afterRemove",{object:t});return e};Composite.addComposite=function(e,t){e.composites.push(t);t.parent=e;Composite.setModified(e,true,true,false);return e};Composite.removeComposite=function(e,t,i){var r=e.composites.indexOf(t);if(r!==-1){Composite.removeCompositeAt(e,r);Composite.setModified(e,true,true,false)}if(i){for(var n=0;n<e.composites.length;n++){Composite.removeComposite(e.composites[n],t,true)}}return e};Composite.removeCompositeAt=function(e,t){e.composites.splice(t,1);Composite.setModified(e,true,true,false);return e};Composite.addBody=function(e,t){e.bodies.push(t);Composite.setModified(e,true,true,false);return e};Composite.removeBody=function(e,t,i){var r=e.bodies.indexOf(t);if(r!==-1){Composite.removeBodyAt(e,r);Composite.setModified(e,true,true,false)}if(i){for(var n=0;n<e.composites.length;n++){Composite.removeBody(e.composites[n],t,true)}}return e};Composite.removeBodyAt=function(e,t){e.bodies.splice(t,1);Composite.setModified(e,true,true,false);return e};Composite.addConstraint=function(e,t){e.constraints.push(t);Composite.setModified(e,true,true,false);return e};Composite.removeConstraint=function(e,t,i){var r=e.constraints.indexOf(t);if(r!==-1){Composite.removeConstraintAt(e,r)}if(i){for(var n=0;n<e.composites.length;n++){Composite.removeConstraint(e.composites[n],t,true)}}return e};Composite.removeConstraintAt=function(e,t){e.constraints.splice(t,1);Composite.setModified(e,true,true,false);return e};Composite.clear=function(e,t,i){if(i){for(var r=0;r<e.composites.length;r++){Composite.clear(e.composites[r],t,true)}}if(t){e.bodies=e.bodies.filter((function(e){return e.isStatic}))}else{e.bodies.length=0}e.constraints.length=0;e.composites.length=0;Composite.setModified(e,true,true,false);return e};Composite.allBodies=function(e){var t=[].concat(e.bodies);for(var i=0;i<e.composites.length;i++)t=t.concat(Composite.allBodies(e.composites[i]));return t};Composite.allConstraints=function(e){var t=[].concat(e.constraints);for(var i=0;i<e.composites.length;i++)t=t.concat(Composite.allConstraints(e.composites[i]));return t};Composite.allComposites=function(e){var t=[].concat(e.composites);for(var i=0;i<e.composites.length;i++)t=t.concat(Composite.allComposites(e.composites[i]));return t};Composite.get=function(e,t,i){var r,n;switch(i){case"body":r=Composite.allBodies(e);break;case"constraint":r=Composite.allConstraints(e);break;case"composite":r=Composite.allComposites(e).concat(e);break}if(!r)return null;n=r.filter((function(e){return e.id.toString()===t.toString()}));return n.length===0?null:n[0]};Composite.move=function(e,t,i){Composite.remove(e,t);Composite.add(i,t);return e};Composite.rebase=function(e){var t=Composite.allBodies(e).concat(Composite.allConstraints(e)).concat(Composite.allComposites(e));for(var i=0;i<t.length;i++){t[i].id=Common_1.nextId()}Composite.setModified(e,true,true,false);return e};Composite.translate=function(e,t,i){var r=i?Composite.allBodies(e):e.bodies;for(var n=0;n<r.length;n++){Body_1$2.translate(r[n],t)}Composite.setModified(e,true,true,false);return e};Composite.rotate=function(e,t,i,r){var n=Math.cos(t),s=Math.sin(t),a=r?Composite.allBodies(e):e.bodies;for(var o=0;o<a.length;o++){var l=a[o],h=l.position.x-i.x,u=l.position.y-i.y;Body_1$2.setPosition(l,{x:i.x+(h*n-u*s),y:i.y+(h*s+u*n)});Body_1$2.rotate(l,t)}Composite.setModified(e,true,true,false);return e};Composite.scale=function(e,t,i,r,n){var s=n?Composite.allBodies(e):e.bodies;for(var a=0;a<s.length;a++){var o=s[a],l=o.position.x-r.x,h=o.position.y-r.y;Body_1$2.setPosition(o,{x:r.x+l*t,y:r.y+h*i});Body_1$2.scale(o,t,i)}Composite.setModified(e,true,true,false);return e};Composite.bounds=function(e){var t=Composite.allBodies(e),i=[];for(var r=0;r<t.length;r+=1){var n=t[r];i.push(n.bounds.min,n.bounds.max)}return Bounds_1.create(i)}})();var Constraint={};var Constraint_1=Constraint;(function(){Constraint._warming=.4;Constraint._torqueDampen=1;Constraint._minLength=1e-6;Constraint.create=function(e){var t=e;if(t.bodyA&&!t.pointA)t.pointA={x:0,y:0};if(t.bodyB&&!t.pointB)t.pointB={x:0,y:0};var i=t.bodyA?Vector_1.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?Vector_1.add(t.bodyB.position,t.pointB):t.pointB,n=Vector_1.magnitude(Vector_1.sub(i,r));t.length=typeof t.length!=="undefined"?t.length:n;t.id=t.id||Common_1.nextId();t.label=t.label||"Constraint";t.type="constraint";t.stiffness=t.stiffness||(t.length>0?1:.7);t.damping=t.damping||0;t.angularStiffness=t.angularStiffness||0;t.angleA=t.bodyA?t.bodyA.angle:t.angleA;t.angleB=t.bodyB?t.bodyB.angle:t.angleB;t.plugin={};var s={visible:true,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:true};if(t.length===0&&t.stiffness>.1){s.type="pin";s.anchors=false}else if(t.stiffness<.9){s.type="spring"}t.render=Common_1.extend(s,t.render);return t};Constraint.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],r=i.constraintImpulse;if(i.isStatic||r.x===0&&r.y===0&&r.angle===0){continue}i.position.x+=r.x;i.position.y+=r.y;i.angle+=r.angle}};Constraint.solveAll=function(e,t){for(var i=0;i<e.length;i+=1){var r=e[i],n=!r.bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;if(n||s){Constraint.solve(e[i],t)}}for(i=0;i<e.length;i+=1){r=e[i];n=!r.bodyA||r.bodyA&&r.bodyA.isStatic;s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;if(!n&&!s){Constraint.solve(e[i],t)}}};Constraint.solve=function(e,t){var i=e.bodyA,r=e.bodyB,n=e.pointA,s=e.pointB;if(!i&&!r)return;if(i&&!i.isStatic){Vector_1.rotate(n,i.angle-e.angleA,n);e.angleA=i.angle}if(r&&!r.isStatic){Vector_1.rotate(s,r.angle-e.angleB,s);e.angleB=r.angle}var a=n,o=s;if(i)a=Vector_1.add(i.position,n);if(r)o=Vector_1.add(r.position,s);if(!a||!o)return;var l=Vector_1.sub(a,o),h=Vector_1.magnitude(l);if(h<Constraint._minLength){h=Constraint._minLength}var u=(h-e.length)/h,c=e.stiffness<1?e.stiffness*t:e.stiffness,f=Vector_1.mult(l,u*c),d=(i?i.inverseMass:0)+(r?r.inverseMass:0),v=(i?i.inverseInertia:0)+(r?r.inverseInertia:0),p=d+v,g,m,_,y,T;if(e.damping){var x=Vector_1.create();_=Vector_1.div(l,h);T=Vector_1.sub(r&&Vector_1.sub(r.position,r.positionPrev)||x,i&&Vector_1.sub(i.position,i.positionPrev)||x);y=Vector_1.dot(_,T)}if(i&&!i.isStatic){m=i.inverseMass/d;i.constraintImpulse.x-=f.x*m;i.constraintImpulse.y-=f.y*m;i.position.x-=f.x*m;i.position.y-=f.y*m;if(e.damping){i.positionPrev.x-=e.damping*_.x*y*m;i.positionPrev.y-=e.damping*_.y*y*m}g=Vector_1.cross(n,f)/p*Constraint._torqueDampen*i.inverseInertia*(1-e.angularStiffness);i.constraintImpulse.angle-=g;i.angle-=g}if(r&&!r.isStatic){m=r.inverseMass/d;r.constraintImpulse.x+=f.x*m;r.constraintImpulse.y+=f.y*m;r.position.x+=f.x*m;r.position.y+=f.y*m;if(e.damping){r.positionPrev.x+=e.damping*_.x*y*m;r.positionPrev.y+=e.damping*_.y*y*m}g=Vector_1.cross(s,f)/p*Constraint._torqueDampen*r.inverseInertia*(1-e.angularStiffness);r.constraintImpulse.angle+=g;r.angle+=g}};Constraint.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.constraintImpulse;if(i.isStatic||r.x===0&&r.y===0&&r.angle===0){continue}Sleeping_1.set(i,false);for(var n=0;n<i.parts.length;n++){var s=i.parts[n];Vertices_1.translate(s.vertices,r);if(n>0){s.position.x+=r.x;s.position.y+=r.y}if(r.angle!==0){Vertices_1.rotate(s.vertices,r.angle,i.position);Axes_1.rotate(s.axes,r.angle);if(n>0){Vector_1.rotateAbout(s.position,r.angle,i.position,s.position)}}Bounds_1.update(s.bounds,s.vertices,i.velocity)}r.angle*=Constraint._warming;r.x*=Constraint._warming;r.y*=Constraint._warming}}})();var Composites={};var Composites_1=Composites;(function(){Composites.stack=function(e,t,i,r,n,s,a){var o=Composite_1.create({label:"Stack"}),l=e,h=t,u,c=0;for(var f=0;f<r;f++){var d=0;for(var v=0;v<i;v++){var p=a(l,h,v,f,u,c);if(p){var g=p.bounds.max.y-p.bounds.min.y,m=p.bounds.max.x-p.bounds.min.x;if(g>d)d=g;Body_1$2.translate(p,{x:m*.5,y:g*.5});l=p.bounds.max.x+n;Composite_1.addBody(o,p);u=p;c+=1}else{l+=n}}h+=d+s;l=e}return o};Composites.chain=function(e,t,i,r,n,s){var a=e.bodies;for(var o=1;o<a.length;o++){var l=a[o-1],h=a[o],u=l.bounds.max.y-l.bounds.min.y,c=l.bounds.max.x-l.bounds.min.x,f=h.bounds.max.y-h.bounds.min.y,d=h.bounds.max.x-h.bounds.min.x;var v={bodyA:l,pointA:{x:c*t,y:u*i},bodyB:h,pointB:{x:d*r,y:f*n}};var p=Common_1.extend(v,s);Composite_1.addConstraint(e,Constraint_1.create(p))}e.label+=" Chain";return e};Composites.mesh=function(e,t,i,r,n){var s=e.bodies,a,o,l,h,u;for(a=0;a<i;a++){for(o=1;o<t;o++){l=s[o-1+a*t];h=s[o+a*t];Composite_1.addConstraint(e,Constraint_1.create(Common_1.extend({bodyA:l,bodyB:h},n)))}if(a>0){for(o=0;o<t;o++){l=s[o+(a-1)*t];h=s[o+a*t];Composite_1.addConstraint(e,Constraint_1.create(Common_1.extend({bodyA:l,bodyB:h},n)));if(r&&o>0){u=s[o-1+(a-1)*t];Composite_1.addConstraint(e,Constraint_1.create(Common_1.extend({bodyA:u,bodyB:h},n)))}if(r&&o<t-1){u=s[o+1+(a-1)*t];Composite_1.addConstraint(e,Constraint_1.create(Common_1.extend({bodyA:u,bodyB:h},n)))}}}}e.label+=" Mesh";return e};Composites.pyramid=function(e,t,i,r,n,s,a){return Composites.stack(e,t,i,r,n,s,(function(t,s,o,l,h,u){var c=Math.min(r,Math.ceil(i/2)),f=h?h.bounds.max.x-h.bounds.min.x:0;if(l>c)return;l=c-l;var d=l,v=i-1-l;if(o<d||o>v)return;if(u===1){Body_1$2.translate(h,{x:(o+(i%2===1?1:-1))*f,y:0})}var p=h?o*f:0;return a(e+p+o*n,s,o,l,h,u)}))};Composites.newtonsCradle=function(e,t,i,r,n){var s=Composite_1.create({label:"Newtons Cradle"});for(var a=0;a<i;a++){var o=1.9,l=Bodies_1.circle(e+a*(r*o),t+n,r,{inertia:Infinity,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=Constraint_1.create({pointA:{x:e+a*(r*o),y:t},bodyB:l});Composite_1.addBody(s,l);Composite_1.addConstraint(s,h)}return s};Composites.car=function(e,t,i,r,n){var s=Body_1$2.nextGroup(true),a=20,o=-i*.5+a,l=i*.5-a,h=0;var u=Composite_1.create({label:"Car"}),c=Bodies_1.rectangle(e,t,i,r,{collisionFilter:{group:s},chamfer:{radius:r*.5},density:2e-4});var f=Bodies_1.circle(e+o,t+h,n,{collisionFilter:{group:s},friction:.8});var d=Bodies_1.circle(e+l,t+h,n,{collisionFilter:{group:s},friction:.8});var v=Constraint_1.create({bodyB:c,pointB:{x:o,y:h},bodyA:f,stiffness:1,length:0});var p=Constraint_1.create({bodyB:c,pointB:{x:l,y:h},bodyA:d,stiffness:1,length:0});Composite_1.addBody(u,c);Composite_1.addBody(u,f);Composite_1.addBody(u,d);Composite_1.addConstraint(u,v);Composite_1.addConstraint(u,p);return u};Composites.softBody=function(e,t,i,r,n,s,a,o,l,h){l=Common_1.extend({inertia:Infinity},l);h=Common_1.extend({stiffness:.2,render:{type:"line",anchors:false}},h);var u=Composites.stack(e,t,i,r,n,s,(function(e,t){return Bodies_1.circle(e,t,o,l)}));Composites.mesh(u,i,r,a,h);u.label="Soft Body";return u}})();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Bounce$2={setBounce:function(e){this.body.restitution=e;return this}};var Bounce_1$2=Bounce$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Collision={setCollisionCategory:function(e){this.body.collisionFilter.category=e;return this},setCollisionGroup:function(e){this.body.collisionFilter.group=e;return this},setCollidesWith:function(e){var t=0;if(!Array.isArray(e)){t=e}else{for(var i=0;i<e.length;i++){t|=e[i]}}this.body.collisionFilter.mask=t;return this}};var Collision_1=Collision;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Force={applyForce:function(e){this._tempVec2.set(this.body.position.x,this.body.position.y);Body_1$2.applyForce(this.body,this._tempVec2,e);return this},applyForceFrom:function(e,t){Body_1$2.applyForce(this.body,e,t);return this},thrust:function(e){var t=this.body.angle;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));Body_1$2.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustLeft:function(e){var t=this.body.angle-Math.PI/2;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));Body_1$2.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustRight:function(e){var t=this.body.angle+Math.PI/2;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));Body_1$2.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustBack:function(e){var t=this.body.angle-Math.PI;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));Body_1$2.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this}};var Force_1=Force;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Friction$2={setFriction:function(e,t,i){this.body.friction=e;if(t!==undefined){this.body.frictionAir=t}if(i!==undefined){this.body.frictionStatic=i}return this},setFrictionAir:function(e){this.body.frictionAir=e;return this},setFrictionStatic:function(e){this.body.frictionStatic=e;return this}};var Friction_1$2=Friction$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Gravity$2={setIgnoreGravity:function(e){this.body.ignoreGravity=e;return this}};var Gravity_1$2=Gravity$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Mass$1={setMass:function(e){Body_1$2.setMass(this.body,e);return this},setDensity:function(e){Body_1$2.setDensity(this.body,e);return this},centerOfMass:{get:function(){return new Vector2_1(this.body.render.sprite.xOffset*this.width,this.body.render.sprite.yOffset*this.height)}}};var Mass_1$1=Mass$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Static={setStatic:function(e){Body_1$2.setStatic(this.body,e);return this},isStatic:function(){return this.body.isStatic}};var Static_1=Static;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Sensor={setSensor:function(e){this.body.isSensor=e;return this},isSensor:function(){return this.body.isSensor}};var Sensor_1=Sensor;
/**
             * @author       Joachim Grill <joachim@codeandweb.com>
             * @copyright    2018 CodeAndWeb GmbH
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PhysicsEditorParser={parseBody:function(e,t,i,r,n){var s=GetFastValue_1(n,"fixtures",[]);var a=[];for(var o=0;o<s.length;o++){var l=this.parseFixture(s[o]);for(var h=0;h<l.length;h++){a.push(l[h])}}var u=Common_1.extend({},false,n);delete u.fixtures;delete u.type;var c=Body_1$2.create(u);Body_1$2.setParts(c,a);c.render.sprite.xOffset=c.position.x/i;c.render.sprite.yOffset=c.position.y/r;Body_1$2.setPosition(c,{x:e,y:t});return c},parseFixture:function(e){var t=Common_1.extend({},false,e);delete t.circle;delete t.vertices;var i;if(e.circle){var r=GetFastValue_1(e.circle,"x");var n=GetFastValue_1(e.circle,"y");var s=GetFastValue_1(e.circle,"radius");i=[Bodies_1.circle(r,n,s,t)]}else if(e.vertices){i=this.parseVertices(e.vertices,t)}return i},parseVertices:function(e,t){var i,r,n,s,a;var o=[];t=t||{};for(s=0;s<e.length;s+=1){o.push(Body_1$2.create(Common_1.extend({position:Vertices_1.centre(e[s]),vertices:e[s]},t)))}var l=5;for(i=0;i<o.length;i++){var h=o[i];for(r=i+1;r<o.length;r++){var u=o[r];if(Bounds_1.overlaps(h.bounds,u.bounds)){var c=h.vertices,f=u.vertices;for(n=0;n<h.vertices.length;n++){for(a=0;a<u.vertices.length;a++){var d=Vector_1.magnitudeSquared(Vector_1.sub(c[(n+1)%c.length],f[a])),v=Vector_1.magnitudeSquared(Vector_1.sub(c[n],f[(a+1)%f.length]));if(d<l&&v<l){c[n].isInternal=true;f[a].isInternal=true}}}}}}return o}};var PhysicsEditorParser_1=PhysicsEditorParser;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetBody={setRectangle:function(e,t,i){return this.setBody({type:"rectangle",width:e,height:t},i)},setCircle:function(e,t){return this.setBody({type:"circle",radius:e},t)},setPolygon:function(e,t,i){return this.setBody({type:"polygon",sides:t,radius:e},i)},setTrapezoid:function(e,t,i,r){return this.setBody({type:"trapezoid",width:e,height:t,slope:i},r)},setExistingBody:function(e,t){if(t===undefined){t=true}if(this.body){this.world.remove(this.body)}this.body=e;for(var i=0;i<e.parts.length;i++){e.parts[i].gameObject=this}var r=this;e.destroy=function e(){r.world.remove(r.body);r.body.gameObject=null};if(t){this.world.add(e)}if(this._originComponent){this.setOrigin(e.render.sprite.xOffset,e.render.sprite.yOffset)}return this},setBody:function(e,t){if(!e){return this}var i;if(typeof e==="string"){e={type:e}}var r=GetFastValue_1(e,"type","rectangle");var n=GetFastValue_1(e,"x",this._tempVec2.x);var s=GetFastValue_1(e,"y",this._tempVec2.y);var a=GetFastValue_1(e,"width",this.width);var o=GetFastValue_1(e,"height",this.height);switch(r){case"rectangle":i=Bodies_1.rectangle(n,s,a,o,t);break;case"circle":var l=GetFastValue_1(e,"radius",Math.max(a,o)/2);var h=GetFastValue_1(e,"maxSides",25);i=Bodies_1.circle(n,s,l,t,h);break;case"trapezoid":var u=GetFastValue_1(e,"slope",.5);i=Bodies_1.trapezoid(n,s,a,o,u,t);break;case"polygon":var c=GetFastValue_1(e,"sides",5);var f=GetFastValue_1(e,"radius",Math.max(a,o)/2);i=Bodies_1.polygon(n,s,c,f,t);break;case"fromVertices":case"fromVerts":var d=GetFastValue_1(e,"verts",null);if(d){if(typeof d==="string"){d=Vertices_1.fromPath(d)}if(this.body&&!this.body.hasOwnProperty("temp")){Body_1$2.setVertices(this.body,d);i=this.body}else{var v=GetFastValue_1(e,"flagInternal",false);var p=GetFastValue_1(e,"removeCollinear",.01);var g=GetFastValue_1(e,"minimumArea",10);i=Bodies_1.fromVertices(n,s,d,t,v,p,g)}}break;case"fromPhysicsEditor":i=PhysicsEditorParser_1.parseBody(n,s,a,o,e);break}if(i){this.setExistingBody(i,e.addToWorld)}return this}};var SetBody_1=SetBody;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AFTER_UPDATE_EVENT="afterupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BEFORE_UPDATE_EVENT="beforeupdate";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLISION_ACTIVE_EVENT="collisionactive";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLISION_END_EVENT="collisionend";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var COLLISION_START_EVENT="collisionstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_END_EVENT$1="dragend";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_EVENT$1="drag";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DRAG_START_EVENT$1="dragstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PAUSE_EVENT$5="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RESUME_EVENT$5="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SLEEP_END_EVENT="sleepend";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SLEEP_START_EVENT="sleepstart";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$h={AFTER_UPDATE:AFTER_UPDATE_EVENT,BEFORE_UPDATE:BEFORE_UPDATE_EVENT,COLLISION_ACTIVE:COLLISION_ACTIVE_EVENT,COLLISION_END:COLLISION_END_EVENT,COLLISION_START:COLLISION_START_EVENT,DRAG_END:DRAG_END_EVENT$1,DRAG:DRAG_EVENT$1,DRAG_START:DRAG_START_EVENT$1,PAUSE:PAUSE_EVENT$5,RESUME:RESUME_EVENT$5,SLEEP_END:SLEEP_END_EVENT,SLEEP_START:SLEEP_START_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Sleep={setSleepThreshold:function(e){if(e===undefined){e=60}this.body.sleepThreshold=e;return this},setSleepEvents:function(e,t){this.setSleepStartEvent(e);this.setSleepEndEvent(t);return this},setSleepStartEvent:function(e){if(e){var t=this.world;Events_1.on(this.body,"sleepStart",(function(e){t.emit(events$h.SLEEP_START,e,this)}))}else{Events_1.off(this.body,"sleepStart")}return this},setSleepEndEvent:function(e){if(e){var t=this.world;Events_1.on(this.body,"sleepEnd",(function(e){t.emit(events$h.SLEEP_END,e,this)}))}else{Events_1.off(this.body,"sleepEnd")}return this}};var Sleep_1=Sleep;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var _FLAG$6=4;var Transform$1={x:{get:function(){return this.body.position.x},set:function(e){this._tempVec2.set(e,this.y);Body_1$2.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(e){this._tempVec2.set(this.x,e);Body_1$2.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(e){var t=1/this._scaleX;var i=1/this._scaleY;this._scaleX=e;if(this._scaleX===0){this.renderFlags&=~_FLAG$6}else{this.renderFlags|=_FLAG$6}Body_1$2.scale(this.body,t,i);Body_1$2.scale(this.body,e,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(e){var t=1/this._scaleX;var i=1/this._scaleY;this._scaleY=e;if(this._scaleY===0){this.renderFlags&=~_FLAG$6}else{this.renderFlags|=_FLAG$6}Body_1$2.scale(this.body,t,i);Body_1$2.scale(this.body,this._scaleX,e)}},angle:{get:function(){return WrapDegrees_1(this.body.angle*_const$3.RAD_TO_DEG)},set:function(e){this.rotation=WrapDegrees_1(e)*_const$3.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(e){this._rotation=Wrap_1$1(e);Body_1$2.setAngle(this.body,this._rotation)}},setPosition:function(e,t){if(e===undefined){e=0}if(t===undefined){t=e}this._tempVec2.set(e,t);Body_1$2.setPosition(this.body,this._tempVec2);return this},setRotation:function(e){if(e===undefined){e=0}this._rotation=Wrap_1$1(e);Body_1$2.setAngle(this.body,e);return this},setFixedRotation:function(){Body_1$2.setInertia(this.body,Infinity);return this},setAngle:function(e){if(e===undefined){e=0}this.angle=e;Body_1$2.setAngle(this.body,this.rotation);return this},setScale:function(e,t,i){if(e===undefined){e=1}if(t===undefined){t=e}var r=1/this._scaleX;var n=1/this._scaleY;this._scaleX=e;this._scaleY=t;Body_1$2.scale(this.body,r,n,i);Body_1$2.scale(this.body,e,t,i);return this}};var Transform_1$1=Transform$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Velocity$2={setAngularVelocity:function(e){Body_1$2.setAngularVelocity(this.body,e);return this},setVelocityX:function(e){this._tempVec2.set(e,this.body.velocity.y);Body_1$2.setVelocity(this.body,this._tempVec2);return this},setVelocityY:function(e){this._tempVec2.set(this.body.velocity.x,e);Body_1$2.setVelocity(this.body,this._tempVec2);return this},setVelocity:function(e,t){this._tempVec2.set(e,t);Body_1$2.setVelocity(this.body,this._tempVec2);return this}};var Velocity_1$2=Velocity$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var components$3={Bounce:Bounce_1$2,Collision:Collision_1,Force:Force_1,Friction:Friction_1$2,Gravity:Gravity_1$2,Mass:Mass_1$1,Static:Static_1,Sensor:Sensor_1,SetBody:SetBody_1,Sleep:Sleep_1,Transform:Transform_1$1,Velocity:Velocity_1$2};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function hasGetterOrSetter$1(e){return!!e.get&&typeof e.get==="function"||!!e.set&&typeof e.set==="function"}var MatterGameObject=function(e,t,i){if(i===undefined){i={}}var r=t.x;var n=t.y;t.body={temp:true,position:{x:r,y:n}};var s=[components$3.Bounce,components$3.Collision,components$3.Force,components$3.Friction,components$3.Gravity,components$3.Mass,components$3.Sensor,components$3.SetBody,components$3.Sleep,components$3.Static,components$3.Transform,components$3.Velocity];s.forEach((function(e){for(var i in e){if(hasGetterOrSetter$1(e[i])){Object.defineProperty(t,i,{get:e[i].get,set:e[i].set})}else{Object.defineProperty(t,i,{value:e[i]})}}}));t.world=e;t._tempVec2=new Vector2_1(r,n);if(i.hasOwnProperty("type")&&i.type==="body"){t.setExistingBody(i,true)}else{var a=GetFastValue_1(i,"shape",null);if(!a){a="rectangle"}t.setBody(a,i)}return t};var MatterGameObject_1=MatterGameObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatterImage=new Class_1({Extends:Image_1$1,Mixins:[components$3.Bounce,components$3.Collision,components$3.Force,components$3.Friction,components$3.Gravity,components$3.Mass,components$3.Sensor,components$3.SetBody,components$3.Sleep,components$3.Static,components$3.Transform,components$3.Velocity,Pipeline_1],initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t.scene,"Image");this.setTexture(n,s);this.setSizeToFrame();this.setOrigin();this.world=t;this._tempVec2=new Vector2_1(i,r);var o=GetFastValue_1(a,"shape",null);if(o){this.setBody(o,a)}else{this.setRectangle(this.width,this.height,a)}this.setPosition(i,r);this.initPipeline("TextureTintPipeline")}});var MatterImage_1=MatterImage;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatterSprite=new Class_1({Extends:Sprite_1,Mixins:[components$3.Bounce,components$3.Collision,components$3.Force,components$3.Friction,components$3.Gravity,components$3.Mass,components$3.Sensor,components$3.SetBody,components$3.Sleep,components$3.Static,components$3.Transform,components$3.Velocity,Pipeline_1],initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t.scene,"Sprite");this.anims=new Animation_1$1(this);this.setTexture(n,s);this.setSizeToFrame();this.setOrigin();this.world=t;this._tempVec2=new Vector2_1(i,r);var o=GetFastValue_1(a,"shape",null);if(o){this.setBody(o,a)}else{this.setRectangle(this.width,this.height,a)}this.setPosition(i,r);this.initPipeline("TextureTintPipeline")}});var MatterSprite_1=MatterSprite;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatterTileBody=new Class_1({Mixins:[components$3.Bounce,components$3.Collision,components$3.Friction,components$3.Gravity,components$3.Mass,components$3.Sensor,components$3.Sleep,components$3.Static],initialize:function e(t,i,r){this.tile=i;this.world=t;if(i.physics.matterBody){i.physics.matterBody.destroy()}i.physics.matterBody=this;var n=GetFastValue_1(r,"body",null);var s=GetFastValue_1(r,"addToWorld",true);if(!n){var a=i.getCollisionGroup();var o=GetFastValue_1(a,"objects",[]);if(o.length>0){this.setFromTileCollision(r)}else{this.setFromTileRectangle(r)}}else{this.setBody(n,s)}},setFromTileRectangle:function(e){if(e===undefined){e={}}if(!HasValue_1(e,"isStatic")){e.isStatic=true}if(!HasValue_1(e,"addToWorld")){e.addToWorld=true}var t=this.tile.getBounds();var i=t.x+t.width/2;var r=t.y+t.height/2;var n=Bodies_1.rectangle(i,r,t.width,t.height,e);this.setBody(n,e.addToWorld);return this},setFromTileCollision:function(e){if(e===undefined){e={}}if(!HasValue_1(e,"isStatic")){e.isStatic=true}if(!HasValue_1(e,"addToWorld")){e.addToWorld=true}var t=this.tile.tilemapLayer.scaleX;var i=this.tile.tilemapLayer.scaleY;var r=this.tile.getLeft();var n=this.tile.getTop();var s=this.tile.getCollisionGroup();var a=GetFastValue_1(s,"objects",[]);var o=[];for(var l=0;l<a.length;l++){var h=a[l];var u=r+h.x*t;var c=n+h.y*i;var f=h.width*t;var d=h.height*i;var v=null;if(h.rectangle){v=Bodies_1.rectangle(u+f/2,c+d/2,f,d,e)}else if(h.ellipse){v=Bodies_1.circle(u+f/2,c+d/2,f/2,e)}else if(h.polygon||h.polyline){var p=h.polygon?h.polygon:h.polyline;var g=p.map((function(e){return{x:e.x*t,y:e.y*i}}));var m=Vertices_1.create(g);var _=Vertices_1.centre(m);u+=_.x;c+=_.y;v=Bodies_1.fromVertices(u,c,m,e)}if(v){o.push(v)}}if(o.length===1){this.setBody(o[0],e.addToWorld)}else if(o.length>1){e.parts=o;this.setBody(Body_1$2.create(e),e.addToWorld)}return this},setBody:function(e,t){if(t===undefined){t=true}if(this.body){this.removeBody()}this.body=e;this.body.gameObject=this;if(t){this.world.add(this.body)}return this},removeBody:function(){if(this.body){this.world.remove(this.body);this.body.gameObject=undefined;this.body=undefined}return this},destroy:function(){this.removeBody();this.tile.physics.matterBody=undefined}});var MatterTileBody_1=MatterTileBody;var SAT={};var SAT_1=SAT;(function(){SAT.collides=function(e,t,i){var r,n,s,a,o=false;if(i){var l=e.parent,h=t.parent,u=l.speed*l.speed+l.angularSpeed*l.angularSpeed+h.speed*h.speed+h.angularSpeed*h.angularSpeed;o=i&&i.collided&&u<.2;a=i}else{a={collided:false,bodyA:e,bodyB:t}}if(i&&o){var c=a.axisBody,f=c===e?t:e,d=[c.axes[i.axisNumber]];s=SAT._overlapAxes(c.vertices,f.vertices,d);a.reused=true;if(s.overlap<=0){a.collided=false;return a}}else{r=SAT._overlapAxes(e.vertices,t.vertices,e.axes);if(r.overlap<=0){a.collided=false;return a}n=SAT._overlapAxes(t.vertices,e.vertices,t.axes);if(n.overlap<=0){a.collided=false;return a}if(r.overlap<n.overlap){s=r;a.axisBody=e}else{s=n;a.axisBody=t}a.axisNumber=s.axisNumber}a.bodyA=e.id<t.id?e:t;a.bodyB=e.id<t.id?t:e;a.collided=true;a.depth=s.overlap;a.parentA=a.bodyA.parent;a.parentB=a.bodyB.parent;e=a.bodyA;t=a.bodyB;if(Vector_1.dot(s.axis,Vector_1.sub(t.position,e.position))<0){a.normal={x:s.axis.x,y:s.axis.y}}else{a.normal={x:-s.axis.x,y:-s.axis.y}}a.tangent=Vector_1.perp(a.normal);a.penetration=a.penetration||{};a.penetration.x=a.normal.x*a.depth;a.penetration.y=a.normal.y*a.depth;var v=SAT._findSupports(e,t,a.normal),p=[];if(Vertices_1.contains(e.vertices,v[0]))p.push(v[0]);if(Vertices_1.contains(e.vertices,v[1]))p.push(v[1]);if(p.length<2){var g=SAT._findSupports(t,e,Vector_1.neg(a.normal));if(Vertices_1.contains(t.vertices,g[0]))p.push(g[0]);if(p.length<2&&Vertices_1.contains(t.vertices,g[1]))p.push(g[1])}if(p.length<1)p=[v[0]];a.supports=p;return a};SAT._overlapAxes=function(e,t,i){var r=Vector_1._temp[0],n=Vector_1._temp[1],s={overlap:Number.MAX_VALUE},a,o;for(var l=0;l<i.length;l++){o=i[l];SAT._projectToAxis(r,e,o);SAT._projectToAxis(n,t,o);a=Math.min(r.max-n.min,n.max-r.min);if(a<=0){s.overlap=a;return s}if(a<s.overlap){s.overlap=a;s.axis=o;s.axisNumber=l}}return s};SAT._projectToAxis=function(e,t,i){var r=Vector_1.dot(t[0],i),n=r;for(var s=1;s<t.length;s+=1){var a=Vector_1.dot(t[s],i);if(a>n){n=a}else if(a<r){r=a}}e.min=r;e.max=n};SAT._findSupports=function(e,t,i){var r=Number.MAX_VALUE,n=Vector_1._temp[0],s=t.vertices,a=e.position,o,l,h,u;for(var c=0;c<s.length;c++){l=s[c];n.x=l.x-a.x;n.y=l.y-a.y;o=-Vector_1.dot(i,n);if(o<r){r=o;h=l}}var f=h.index-1>=0?h.index-1:s.length-1;l=s[f];n.x=l.x-a.x;n.y=l.y-a.y;r=-Vector_1.dot(i,n);u=l;var d=(h.index+1)%s.length;l=s[d];n.x=l.x-a.x;n.y=l.y-a.y;o=-Vector_1.dot(i,n);if(o<r){u=l}return[h,u]}})();var Pair={};var Pair_1=Pair;(function(){Pair.create=function(e,t){var i=e.bodyA,r=e.bodyB;var n={id:Pair.id(i,r),bodyA:i,bodyB:r,activeContacts:[],separation:0,isActive:true,confirmedActive:true,isSensor:i.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};Pair.update(n,e,t);return n};Pair.update=function(e,t,i){e.collision=t;if(t.collided){var r=t.supports,n=e.activeContacts,s=t.parentA,a=t.parentB;e.inverseMass=s.inverseMass+a.inverseMass;e.friction=Math.min(s.friction,a.friction);e.frictionStatic=Math.max(s.frictionStatic,a.frictionStatic);e.restitution=Math.max(s.restitution,a.restitution);e.slop=Math.max(s.slop,a.slop);for(var o=0;o<r.length;o++){n[o]=r[o].contact}var l=r.length;if(l<n.length){n.length=l}e.separation=t.depth;Pair.setActive(e,true,i)}else{if(e.isActive===true)Pair.setActive(e,false,i)}};Pair.setActive=function(e,t,i){if(t){e.isActive=true;e.timeUpdated=i}else{e.isActive=false;e.activeContacts.length=0}};Pair.id=function(e,t){if(e.id<t.id){return"A"+e.id+"B"+t.id}else{return"A"+t.id+"B"+e.id}}})();var Detector={};var Detector_1=Detector;(function(){Detector.collisions=function(e,t){var i=[],r=t.pairs.table;var n=t.metrics;for(var s=0;s<e.length;s++){var a=e[s][0],o=e[s][1];if((a.isStatic||a.isSleeping)&&(o.isStatic||o.isSleeping))continue;if(!Detector.canCollide(a.collisionFilter,o.collisionFilter))continue;n.midphaseTests+=1;if(Bounds_1.overlaps(a.bounds,o.bounds)){for(var l=a.parts.length>1?1:0;l<a.parts.length;l++){var h=a.parts[l];for(var u=o.parts.length>1?1:0;u<o.parts.length;u++){var c=o.parts[u];if(h===a&&c===o||Bounds_1.overlaps(h.bounds,c.bounds)){var f=Pair_1.id(h,c),d=r[f],v;if(d&&d.isActive){v=d.collision}else{v=null}var p=SAT_1.collides(h,c,v);n.narrowphaseTests+=1;if(p.reused)n.narrowReuseCount+=1;if(p.collided){i.push(p);n.narrowDetections+=1}}}}}}return i};Detector.canCollide=function(e,t){if(e.group===t.group&&e.group!==0)return e.group>0;return(e.mask&t.category)!==0&&(t.mask&e.category)!==0}})();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PointerConstraint=new Class_1({initialize:function e(t,i,r){if(r===undefined){r={}}var n={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},damping:0,length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=t;this.world=i;this.camera=null;this.pointer=null;this.active=true;this.position=new Vector2_1;this.body=null;this.part=null;this.constraint=Constraint_1.create(Merge_1(r,n));this.world.on(events$h.BEFORE_UPDATE,this.update,this);t.sys.input.on(events$a.POINTER_DOWN,this.onDown,this)},onDown:function(e){if(!this.pointer){if(this.getBody(e)){this.pointer=e;this.camera=e.camera}}},getBody:function(e){var t=this.position;var i=this.constraint;e.camera.getWorldPoint(e.x,e.y,t);var r=Composite_1.allBodies(this.world.localWorld);for(var n=0;n<r.length;n++){var s=r[n];if(!s.ignorePointer&&Bounds_1.contains(s.bounds,t)&&Detector_1.canCollide(s.collisionFilter,i.collisionFilter)){if(this.hitTestBody(s,t)){this.world.emit(events$h.DRAG_START,this.body,this.part,this);return true}}}return false},hitTestBody:function(e,t){var i=this.constraint;var r=e.parts.length>1?1:0;for(var n=r;n<e.parts.length;n++){var s=e.parts[n];if(Vertices_1.contains(s.vertices,t)){i.bodyB=e;i.pointA.x=t.x;i.pointA.y=t.y;i.pointB.x=t.x-e.position.x;i.pointB.y=t.y-e.position.y;i.angleB=e.angle;Sleeping_1.set(e,false);this.part=s;this.body=e;return true}}return false},update:function(){var e=this.body;var t=this.pointer;if(!this.active||!t||!e){return}if(t.isDown){var i=this.position;var r=this.constraint;this.camera.getWorldPoint(t.x,t.y,i);Sleeping_1.set(e,false);r.pointA.x=i.x;r.pointA.y=i.y;this.world.emit(events$h.DRAG,e,this)}else{this.stopDrag()}},stopDrag:function(){var e=this.body;var t=this.constraint;if(e){this.world.emit(events$h.DRAG_END,e,this);this.pointer=null;this.body=null;this.part=null;t.bodyB=null}},destroy:function(){this.world.removeConstraint(this.constraint);this.pointer=null;this.constraint=null;this.body=null;this.part=null;this.world.off(events$h.BEFORE_UPDATE,this.update);this.scene.sys.input.off(events$a.POINTER_DOWN,this.onDown,this)}});var PointerConstraint_1=PointerConstraint;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Factory$2=new Class_1({initialize:function e(t){this.world=t;this.scene=t.scene;this.sys=t.scene.sys},rectangle:function(e,t,i,r,n){var s=Bodies_1.rectangle(e,t,i,r,n);this.world.add(s);return s},trapezoid:function(e,t,i,r,n,s){var a=Bodies_1.trapezoid(e,t,i,r,n,s);this.world.add(a);return a},circle:function(e,t,i,r,n){var s=Bodies_1.circle(e,t,i,r,n);this.world.add(s);return s},polygon:function(e,t,i,r,n){var s=Bodies_1.polygon(e,t,i,r,n);this.world.add(s);return s},fromVertices:function(e,t,i,r,n,s,a){if(typeof i==="string"){i=Vertices_1.fromPath(i)}var o=Bodies_1.fromVertices(e,t,i,r,n,s,a);this.world.add(o);return o},imageStack:function(e,t,i,r,n,s,a,o,l){if(a===undefined){a=0}if(o===undefined){o=0}if(l===undefined){l={}}var h=this.world;var u=this.sys.displayList;l.addToWorld=false;var c=Composites_1.stack(i,r,n,s,a,o,(function(i,r){var n=new MatterImage_1(h,i,r,e,t,l);u.add(n);return n.body}));h.add(c);return c},stack:function(e,t,i,r,n,s,a){var o=Composites_1.stack(e,t,i,r,n,s,a);this.world.add(o);return o},pyramid:function(e,t,i,r,n,s,a){var o=Composites_1.pyramid(e,t,i,r,n,s,a);this.world.add(o);return o},chain:function(e,t,i,r,n,s){return Composites_1.chain(e,t,i,r,n,s)},mesh:function(e,t,i,r,n){return Composites_1.mesh(e,t,i,r,n)},newtonsCradle:function(e,t,i,r,n){var s=Composites_1.newtonsCradle(e,t,i,r,n);this.world.add(s);return s},car:function(e,t,i,r,n){var s=Composites_1.car(e,t,i,r,n);this.world.add(s);return s},softBody:function(e,t,i,r,n,s,a,o,l,h){var u=Composites_1.softBody(e,t,i,r,n,s,a,o,l,h);this.world.add(u);return u},joint:function(e,t,i,r,n){return this.constraint(e,t,i,r,n)},spring:function(e,t,i,r,n){return this.constraint(e,t,i,r,n)},constraint:function(e,t,i,r,n){if(r===undefined){r=1}if(n===undefined){n={}}n.bodyA=e.type==="body"?e:e.body;n.bodyB=t.type==="body"?t:t.body;if(!isNaN(i)){n.length=i}n.stiffness=r;var s=Constraint_1.create(n);this.world.add(s);return s},worldConstraint:function(e,t,i,r){if(i===undefined){i=1}if(r===undefined){r={}}r.bodyB=e.type==="body"?e:e.body;if(!isNaN(t)){r.length=t}r.stiffness=i;var n=Constraint_1.create(r);this.world.add(n);return n},mouseSpring:function(e){return this.pointerConstraint(e)},pointerConstraint:function(e){if(e===undefined){e={}}if(!e.hasOwnProperty("render")){e.render={visible:false}}var t=new PointerConstraint_1(this.scene,this.world,e);this.world.add(t.constraint);return t},image:function(e,t,i,r,n){var s=new MatterImage_1(this.world,e,t,i,r,n);this.sys.displayList.add(s);return s},tileBody:function(e,t){var i=new MatterTileBody_1(this.world,e,t);return i},sprite:function(e,t,i,r,n){var s=new MatterSprite_1(this.world,e,t,i,r,n);this.sys.displayList.add(s);this.sys.updateList.add(s);return s},gameObject:function(e,t){return MatterGameObject_1(this.world,e,t)},velocity:function(e,t){Body_1$2.setVelocity(e,t);return e},angularVelocity:function(e,t){Body_1$2.setAngularVelocity(e,t);return e},force:function(e,t,i){Body_1$2.applyForce(e,t,i);return e},destroy:function(){this.world=null;this.scene=null;this.sys=null}});var Factory_1$2=Factory$2;var Plugin={};var Plugin_1=Plugin;(function(){Plugin._registry={};Plugin.register=function(e){if(!Plugin.isPlugin(e)){Common_1.warn("Plugin.register:",Plugin.toString(e),"does not implement all required fields.")}if(e.name in Plugin._registry){var t=Plugin._registry[e.name],i=Plugin.versionParse(e.version).number,r=Plugin.versionParse(t.version).number;if(i>r){Common_1.warn("Plugin.register:",Plugin.toString(t),"was upgraded to",Plugin.toString(e));Plugin._registry[e.name]=e}else if(i<r){Common_1.warn("Plugin.register:",Plugin.toString(t),"can not be downgraded to",Plugin.toString(e))}else if(e!==t){Common_1.warn("Plugin.register:",Plugin.toString(e),"is already registered to different plugin object")}}else{Plugin._registry[e.name]=e}return e};Plugin.resolve=function(e){return Plugin._registry[Plugin.dependencyParse(e).name]};Plugin.toString=function(e){return typeof e==="string"?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")};Plugin.isPlugin=function(e){return e&&e.name&&e.version&&e.install};Plugin.isUsed=function(e,t){return e.used.indexOf(t)>-1};Plugin.isFor=function(e,t){var i=e.for&&Plugin.dependencyParse(e.for);return!e.for||t.name===i.name&&Plugin.versionSatisfies(t.version,i.range)};Plugin.use=function(e,t){e.uses=(e.uses||[]).concat(t||[]);if(e.uses.length===0){Common_1.warn("Plugin.use:",Plugin.toString(e),"does not specify any dependencies to install.");return}var i=Plugin.dependencies(e),r=Common_1.topologicalSort(i),n=[];for(var s=0;s<r.length;s+=1){if(r[s]===e.name){continue}var a=Plugin.resolve(r[s]);if(!a){n.push(" "+r[s]);continue}if(Plugin.isUsed(e,a.name)){continue}if(!Plugin.isFor(a,e)){Common_1.warn("Plugin.use:",Plugin.toString(a),"is for",a.for,"but installed on",Plugin.toString(e)+".");a._warned=true}if(a.install){a.install(e)}else{Common_1.warn("Plugin.use:",Plugin.toString(a),"does not specify an install function.");a._warned=true}if(a._warned){n.push(" "+Plugin.toString(a));delete a._warned}else{n.push(" "+Plugin.toString(a))}e.used.push(a.name)}if(n.length>0&&!a.silent){Common_1.info(n.join("  "))}};Plugin.dependencies=function(e,t){var i=Plugin.dependencyParse(e),r=i.name;t=t||{};if(r in t){return}e=Plugin.resolve(e)||e;t[r]=Common_1.map(e.uses||[],(function(t){if(Plugin.isPlugin(t)){Plugin.register(t)}var r=Plugin.dependencyParse(t),n=Plugin.resolve(t);if(n&&!Plugin.versionSatisfies(n.version,r.range)){Common_1.warn("Plugin.dependencies:",Plugin.toString(n),"does not satisfy",Plugin.toString(r),"used by",Plugin.toString(i)+".");n._warned=true;e._warned=true}else if(!n){Common_1.warn("Plugin.dependencies:",Plugin.toString(t),"used by",Plugin.toString(i),"could not be resolved.");e._warned=true}return r.name}));for(var n=0;n<t[r].length;n+=1){Plugin.dependencies(t[r][n],t)}return t};Plugin.dependencyParse=function(e){if(Common_1.isString(e)){var t=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;if(!t.test(e)){Common_1.warn("Plugin.dependencyParse:",e,"is not a valid dependency string.")}return{name:e.split("@")[0],range:e.split("@")[1]||"*"}}return{name:e.name,range:e.range||e.version}};Plugin.versionParse=function(e){var t=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;if(!t.test(e)){Common_1.warn("Plugin.versionParse:",e,"is not a valid version or range.")}var i=e.split("-");e=i[0];var r=isNaN(Number(e[0])),n=r?e.substr(1):e,s=Common_1.map(n.split("."),(function(e){return Number(e)}));return{isRange:r,version:n,range:e,operator:r?e[0]:"",parts:s,prerelease:i[1],number:s[0]*1e8+s[1]*1e4+s[2]}};Plugin.versionSatisfies=function(e,t){t=t||"*";var i=Plugin.versionParse(t),r=i.parts,n=Plugin.versionParse(e),s=n.parts;if(i.isRange){if(i.operator==="*"||e==="*"){return true}if(i.operator==="~"){return s[0]===r[0]&&s[1]===r[1]&&s[2]>=r[2]}if(i.operator==="^"){if(r[0]>0){return s[0]===r[0]&&n.number>=i.number}if(r[1]>0){return s[1]===r[1]&&s[2]>=r[2]}return s[2]===r[2]}}return e===t||e==="*"}})();var Matter={};var Matter_1=Matter;(function(){Matter.name="matter-js";Matter.version="0.14.2";Matter.uses=[];Matter.used=[];Matter.use=function(){Plugin_1.use(Matter,Array.prototype.slice.call(arguments))};Matter.before=function(e,t){e=e.replace(/^Matter./,"");return Common_1.chainPathBefore(Matter,e,t)};Matter.after=function(e,t){e=e.replace(/^Matter./,"");return Common_1.chainPathAfter(Matter,e,t)}})();var World$2={};var World_1$2=World$2;(function(){World$2.create=function(e){var t=Composite_1.create();var i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}};return Common_1.extend(t,i,e)}})();var Grid$1={};var Grid_1$1=Grid$1;(function(){Grid$1.create=function(e){var t={controller:Grid$1,detector:Detector_1.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return Common_1.extend(t,e)};Grid$1.update=function(e,t,i,r){var n,s,a,o=i.world,l=e.buckets,h,u,c=false;var f=i.metrics;f.broadphaseTests=0;for(n=0;n<t.length;n++){var d=t[n];if(d.isSleeping&&!r)continue;if(d.bounds.max.x<o.bounds.min.x||d.bounds.min.x>o.bounds.max.x||d.bounds.max.y<o.bounds.min.y||d.bounds.min.y>o.bounds.max.y)continue;var v=Grid$1._getRegion(e,d);if(!d.region||v.id!==d.region.id||r){f.broadphaseTests+=1;if(!d.region||r)d.region=v;var p=Grid$1._regionUnion(v,d.region);for(s=p.startCol;s<=p.endCol;s++){for(a=p.startRow;a<=p.endRow;a++){u=Grid$1._getBucketId(s,a);h=l[u];var g=s>=v.startCol&&s<=v.endCol&&a>=v.startRow&&a<=v.endRow;var m=s>=d.region.startCol&&s<=d.region.endCol&&a>=d.region.startRow&&a<=d.region.endRow;if(!g&&m){if(m){if(h)Grid$1._bucketRemoveBody(e,h,d)}}if(d.region===v||g&&!m||r){if(!h)h=Grid$1._createBucket(l,u);Grid$1._bucketAddBody(e,h,d)}}}d.region=v;c=true}}if(c)e.pairsList=Grid$1._createActivePairsList(e)};Grid$1.clear=function(e){e.buckets={};e.pairs={};e.pairsList=[]};Grid$1._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),r=Math.max(e.endCol,t.endCol),n=Math.min(e.startRow,t.startRow),s=Math.max(e.endRow,t.endRow);return Grid$1._createRegion(i,r,n,s)};Grid$1._getRegion=function(e,t){var i=t.bounds,r=Math.floor(i.min.x/e.bucketWidth),n=Math.floor(i.max.x/e.bucketWidth),s=Math.floor(i.min.y/e.bucketHeight),a=Math.floor(i.max.y/e.bucketHeight);return Grid$1._createRegion(r,n,s,a)};Grid$1._createRegion=function(e,t,i,r){return{id:e+","+t+","+i+","+r,startCol:e,endCol:t,startRow:i,endRow:r}};Grid$1._getBucketId=function(e,t){return"C"+e+"R"+t};Grid$1._createBucket=function(e,t){var i=e[t]=[];return i};Grid$1._bucketAddBody=function(e,t,i){for(var r=0;r<t.length;r++){var n=t[r];if(i.id===n.id||i.isStatic&&n.isStatic)continue;var s=Pair_1.id(i,n),a=e.pairs[s];if(a){a[2]+=1}else{e.pairs[s]=[i,n,1]}}t.push(i)};Grid$1._bucketRemoveBody=function(e,t,i){t.splice(Common_1.indexOf(t,i),1);for(var r=0;r<t.length;r++){var n=t[r],s=Pair_1.id(i,n),a=e.pairs[s];if(a)a[2]-=1}};Grid$1._createActivePairsList=function(e){var t,i,r=[];t=Common_1.keys(e.pairs);for(var n=0;n<t.length;n++){i=e.pairs[t[n]];if(i[2]>0){r.push(i)}else{delete e.pairs[t[n]]}}return r}})();var Pairs={};var Pairs_1=Pairs;(function(){Pairs._pairMaxIdleLife=1e3;Pairs.create=function(e){return Common_1.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)};Pairs.update=function(e,t,i){var r=e.list,n=e.table,s=e.collisionStart,a=e.collisionEnd,o=e.collisionActive,l,h,u,c;s.length=0;a.length=0;o.length=0;for(c=0;c<r.length;c++){r[c].confirmedActive=false}for(c=0;c<t.length;c++){l=t[c];if(l.collided){h=Pair_1.id(l.bodyA,l.bodyB);u=n[h];if(u){if(u.isActive){o.push(u)}else{s.push(u)}Pair_1.update(u,l,i);u.confirmedActive=true}else{u=Pair_1.create(l,i);n[h]=u;s.push(u);r.push(u)}}}for(c=0;c<r.length;c++){u=r[c];if(u.isActive&&!u.confirmedActive){Pair_1.setActive(u,false,i);a.push(u)}}};Pairs.removeOld=function(e,t){var i=e.list,r=e.table,n=[],s,a,o,l;for(l=0;l<i.length;l++){s=i[l];a=s.collision;if(a.bodyA.isSleeping||a.bodyB.isSleeping){s.timeUpdated=t;continue}if(t-s.timeUpdated>Pairs._pairMaxIdleLife){n.push(l)}}for(l=0;l<n.length;l++){o=n[l]-l;s=i[o];delete r[s.id];i.splice(o,1)}};Pairs.clear=function(e){e.table={};e.list.length=0;e.collisionStart.length=0;e.collisionActive.length=0;e.collisionEnd.length=0;return e}})();var Query={};var Query_1=Query;(function(){Query.collides=function(e,t){var i=[];for(var r=0;r<t.length;r++){var n=t[r];if(Bounds_1.overlaps(n.bounds,e.bounds)){for(var s=n.parts.length===1?0:1;s<n.parts.length;s++){var a=n.parts[s];if(Bounds_1.overlaps(a.bounds,e.bounds)){var o=SAT_1.collides(a,e);if(o.collided){i.push(o);break}}}}}return i};Query.ray=function(e,t,i,r){r=r||1e-100;var n=Vector_1.angle(t,i),s=Vector_1.magnitude(Vector_1.sub(t,i)),a=(i.x+t.x)*.5,o=(i.y+t.y)*.5,l=Bodies_1.rectangle(a,o,s,r,{angle:n}),h=Query.collides(l,e);for(var u=0;u<h.length;u+=1){var c=h[u];c.body=c.bodyB=c.bodyA}return h};Query.region=function(e,t,i){var r=[];for(var n=0;n<e.length;n++){var s=e[n],a=Bounds_1.overlaps(s.bounds,t);if(a&&!i||!a&&i)r.push(s)}return r};Query.point=function(e,t){var i=[];for(var r=0;r<e.length;r++){var n=e[r];if(Bounds_1.contains(n.bounds,t)){for(var s=n.parts.length===1?0:1;s<n.parts.length;s++){var a=n.parts[s];if(Bounds_1.contains(a.bounds,t)&&Vertices_1.contains(a.vertices,t)){i.push(n);break}}}}return i}})();var Resolver={};var Resolver_1=Resolver;(function(){Resolver._restingThresh=4;Resolver._restingThreshTangent=6;Resolver._positionDampen=.9;Resolver._positionWarming=.8;Resolver._frictionNormalMultiplier=5;Resolver.preSolvePosition=function(e){var t,i,r;for(t=0;t<e.length;t++){i=e[t];if(!i.isActive)continue;r=i.activeContacts.length;i.collision.parentA.totalContacts+=r;i.collision.parentB.totalContacts+=r}};Resolver.solvePosition=function(e,t,i){var r,n,s,a,o,l,h,u,c,f,d,v,p,g,m,_,y=i*Resolver._positionDampen;for(r=0;r<t.length;r++){var T=t[r];T.previousPositionImpulse.x=T.positionImpulse.x;T.previousPositionImpulse.y=T.positionImpulse.y}for(r=0;r<e.length;r++){a=e[r];if(!a.isActive||a.isSensor)continue;o=a.collision;l=o.parentA;h=o.parentB;u=o.normal;d=l.previousPositionImpulse;v=h.previousPositionImpulse;f=o.penetration;g=v.x-d.x+f.x;m=v.y-d.y+f.y;n=u.x;s=u.y;c=n*g+s*m;a.separation=c;_=(c-a.slop)*y;if(l.isStatic||h.isStatic)_*=2;if(!(l.isStatic||l.isSleeping)){p=_/l.totalContacts;l.positionImpulse.x+=n*p;l.positionImpulse.y+=s*p}if(!(h.isStatic||h.isSleeping)){p=_/h.totalContacts;h.positionImpulse.x-=n*p;h.positionImpulse.y-=s*p}}};Resolver.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.totalContacts=0;if(i.positionImpulse.x!==0||i.positionImpulse.y!==0){for(var r=0;r<i.parts.length;r++){var n=i.parts[r];Vertices_1.translate(n.vertices,i.positionImpulse);Bounds_1.update(n.bounds,n.vertices,i.velocity);n.position.x+=i.positionImpulse.x;n.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x;i.positionPrev.y+=i.positionImpulse.y;if(Vector_1.dot(i.positionImpulse,i.velocity)<0){i.positionImpulse.x=0;i.positionImpulse.y=0}else{i.positionImpulse.x*=Resolver._positionWarming;i.positionImpulse.y*=Resolver._positionWarming}}}};Resolver.preSolveVelocity=function(e){var t,i,r,n,s,a,o,l,h,u,c,f,d,v,p=Vector_1._temp[0],g=Vector_1._temp[1];for(t=0;t<e.length;t++){r=e[t];if(!r.isActive||r.isSensor)continue;n=r.activeContacts;s=r.collision;a=s.parentA;o=s.parentB;l=s.normal;h=s.tangent;for(i=0;i<n.length;i++){u=n[i];c=u.vertex;f=u.normalImpulse;d=u.tangentImpulse;if(f!==0||d!==0){p.x=l.x*f+h.x*d;p.y=l.y*f+h.y*d;if(!(a.isStatic||a.isSleeping)){v=Vector_1.sub(c,a.position,g);a.positionPrev.x+=p.x*a.inverseMass;a.positionPrev.y+=p.y*a.inverseMass;a.anglePrev+=Vector_1.cross(v,p)*a.inverseInertia}if(!(o.isStatic||o.isSleeping)){v=Vector_1.sub(c,o.position,g);o.positionPrev.x-=p.x*o.inverseMass;o.positionPrev.y-=p.y*o.inverseMass;o.anglePrev-=Vector_1.cross(v,p)*o.inverseInertia}}}}};Resolver.solveVelocity=function(e,t){var i=t*t,r=Vector_1._temp[0],n=Vector_1._temp[1],s=Vector_1._temp[2],a=Vector_1._temp[3],o=Vector_1._temp[4],l=Vector_1._temp[5];for(var h=0;h<e.length;h++){var u=e[h];if(!u.isActive||u.isSensor)continue;var c=u.collision,f=c.parentA,d=c.parentB,v=c.normal,p=c.tangent,g=u.activeContacts,m=1/g.length;f.velocity.x=f.position.x-f.positionPrev.x;f.velocity.y=f.position.y-f.positionPrev.y;d.velocity.x=d.position.x-d.positionPrev.x;d.velocity.y=d.position.y-d.positionPrev.y;f.angularVelocity=f.angle-f.anglePrev;d.angularVelocity=d.angle-d.anglePrev;for(var _=0;_<g.length;_++){var y=g[_],T=y.vertex,x=Vector_1.sub(T,f.position,n),E=Vector_1.sub(T,d.position,s),C=Vector_1.add(f.velocity,Vector_1.mult(Vector_1.perp(x),f.angularVelocity),a),S=Vector_1.add(d.velocity,Vector_1.mult(Vector_1.perp(E),d.angularVelocity),o),A=Vector_1.sub(C,S,l),b=Vector_1.dot(v,A);var w=Vector_1.dot(p,A),P=Math.abs(w),R=Common_1.sign(w);var O=(1+u.restitution)*b,M=Common_1.clamp(u.separation+b,0,1)*Resolver._frictionNormalMultiplier;var F=w,L=Infinity;if(P>u.friction*u.frictionStatic*M*i){L=P;F=Common_1.clamp(u.friction*R*i,-L,L)}var G=Vector_1.cross(x,v),V=Vector_1.cross(E,v),I=m/(f.inverseMass+d.inverseMass+f.inverseInertia*G*G+d.inverseInertia*V*V);O*=I;F*=I;if(b<0&&b*b>Resolver._restingThresh*i){y.normalImpulse=0}else{var D=y.normalImpulse;y.normalImpulse=Math.min(y.normalImpulse+O,0);O=y.normalImpulse-D}if(w*w>Resolver._restingThreshTangent*i){y.tangentImpulse=0}else{var B=y.tangentImpulse;y.tangentImpulse=Common_1.clamp(y.tangentImpulse+F,-L,L);F=y.tangentImpulse-B}r.x=v.x*O+p.x*F;r.y=v.y*O+p.y*F;if(!(f.isStatic||f.isSleeping)){f.positionPrev.x+=r.x*f.inverseMass;f.positionPrev.y+=r.y*f.inverseMass;f.anglePrev+=Vector_1.cross(x,r)*f.inverseInertia}if(!(d.isStatic||d.isSleeping)){d.positionPrev.x-=r.x*d.inverseMass;d.positionPrev.y-=r.y*d.inverseMass;d.anglePrev-=Vector_1.cross(E,r)*d.inverseInertia}}}}})();var Metrics={};var Metrics_1=Metrics;(function(){Metrics.create=function(e){var t={extended:false,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return Common_1.extend(t,false,e)};Metrics.reset=function(e){if(e.extended){e.narrowDetections=0;e.narrowphaseTests=0;e.narrowReuse=0;e.narrowReuseCount=0;e.midphaseTests=0;e.broadphaseTests=0;e.narrowEff=0;e.midEff=0;e.broadEff=0;e.collisions=0;e.buckets=0;e.pairs=0;e.bodies=0}};Metrics.update=function(e,t){if(e.extended){var i=t.world,r=Composite_1.allBodies(i);e.collisions=e.narrowDetections;e.pairs=t.pairs.list.length;e.bodies=r.length;e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2);e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2);e.broadEff=(1-e.broadphaseTests/(r.length||1)).toFixed(2);e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}}})();var Engine={};var Engine_1=Engine;(function(){Engine.create=function(e,t){t=Common_1.isElement(e)?t:e;e=Common_1.isElement(e)?e:null;t=t||{};if(e||t.render){Common_1.warn("Engine.create: engine.render is deprecated (see docs)")}var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:false,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:Grid_1$1}};var r=Common_1.extend(i,t);if(e||r.render){var n={element:e,controller:Render};r.render=Common_1.extend(n,r.render)}if(r.render&&r.render.controller){r.render=r.render.controller.create(r.render)}if(r.render){r.render.engine=r}r.world=t.world||World_1$2.create(r.world);r.pairs=Pairs_1.create();r.broadphase=r.broadphase.controller.create(r.broadphase);r.metrics=r.metrics||{extended:false};r.metrics=Metrics_1.create(r.metrics);return r};Engine.update=function(e,t,i){t=t||1e3/60;i=i||1;var r=e.world,n=e.timing,s=e.broadphase,a=[],o;n.timestamp+=t*n.timeScale;var l={timestamp:n.timestamp};Events_1.trigger(e,"beforeUpdate",l);var h=Composite_1.allBodies(r),u=Composite_1.allConstraints(r);Metrics_1.reset(e.metrics);if(e.enableSleeping)Sleeping_1.update(h,n.timeScale);Engine._bodiesApplyGravity(h,r.gravity);Engine._bodiesUpdate(h,t,n.timeScale,i,r.bounds);Constraint_1.preSolveAll(h);for(o=0;o<e.constraintIterations;o++){Constraint_1.solveAll(u,n.timeScale)}Constraint_1.postSolveAll(h);if(s.controller){if(r.isModified)s.controller.clear(s);s.controller.update(s,h,e,r.isModified);a=s.pairsList}else{a=h}if(r.isModified){Composite_1.setModified(r,false,false,true)}var c=s.detector(a,e);var f=e.pairs,d=n.timestamp;Pairs_1.update(f,c,d);Pairs_1.removeOld(f,d);if(e.enableSleeping)Sleeping_1.afterCollisions(f.list,n.timeScale);if(f.collisionStart.length>0)Events_1.trigger(e,"collisionStart",{pairs:f.collisionStart});Resolver_1.preSolvePosition(f.list);for(o=0;o<e.positionIterations;o++){Resolver_1.solvePosition(f.list,h,n.timeScale)}Resolver_1.postSolvePosition(h);Constraint_1.preSolveAll(h);for(o=0;o<e.constraintIterations;o++){Constraint_1.solveAll(u,n.timeScale)}Constraint_1.postSolveAll(h);Resolver_1.preSolveVelocity(f.list);for(o=0;o<e.velocityIterations;o++){Resolver_1.solveVelocity(f.list,n.timeScale)}if(f.collisionActive.length>0)Events_1.trigger(e,"collisionActive",{pairs:f.collisionActive});if(f.collisionEnd.length>0)Events_1.trigger(e,"collisionEnd",{pairs:f.collisionEnd});Metrics_1.update(e.metrics,e);Engine._bodiesClearForces(h);Events_1.trigger(e,"afterUpdate",l);return e};Engine.merge=function(e,t){Common_1.extend(e,t);if(t.world){e.world=t.world;Engine.clear(e);var i=Composite_1.allBodies(e.world);for(var r=0;r<i.length;r++){var n=i[r];Sleeping_1.set(n,false);n.id=Common_1.nextId()}}};Engine.clear=function(e){var t=e.world;Pairs_1.clear(e.pairs);var i=e.broadphase;if(i.controller){var r=Composite_1.allBodies(t);i.controller.clear(i);i.controller.update(i,r,e,true)}};Engine._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.force.x=0;i.force.y=0;i.torque=0}};Engine._bodiesApplyGravity=function(e,t){var i=typeof t.scale!=="undefined"?t.scale:.001;if(t.x===0&&t.y===0||i===0){return}for(var r=0;r<e.length;r++){var n=e[r];if(n.ignoreGravity||n.isStatic||n.isSleeping)continue;n.force.y+=n.mass*t.y*i;n.force.x+=n.mass*t.x*i}};Engine._bodiesUpdate=function(e,t,i,r,n){for(var s=0;s<e.length;s++){var a=e[s];if(a.isStatic||a.isSleeping)continue;Body_1$2.update(a,t,i,r)}}})();var Svg={};var Svg_1=Svg;(function(){Svg.pathToVertices=function(e,t){if(typeof window!=="undefined"&&!("SVGPathSeg"in window)){Common_1.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.")}var i,r,n,s,a,o,l,h,u,c,f=[],d,v,p=0,g=0,m=0;t=t||15;var _=function(e,t,i){var r=i%2===1&&i>1;if(!u||e!=u.x||t!=u.y){if(u&&r){d=u.x;v=u.y}else{d=0;v=0}var n={x:d+e,y:v+t};if(r||!u){u=n}f.push(n);g=d+e;m=v+t}};var y=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if(t==="Z")return;switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":g=e.x;m=e.y;break;case"H":g=e.x;break;case"V":m=e.y;break}_(g,m,e.pathSegType)};Svg._svgPathToAbsolute(e);n=e.getTotalLength();o=[];for(i=0;i<e.pathSegList.numberOfItems;i+=1)o.push(e.pathSegList.getItem(i));l=o.concat();while(p<n){c=e.getPathSegAtLength(p);a=o[c];if(a!=h){while(l.length&&l[0]!=a)y(l.shift());h=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=e.getPointAtLength(p);_(s.x,s.y,0);break}p+=t}for(i=0,r=l.length;i<r;++i)y(l[i]);return f};Svg._svgPathToAbsolute=function(e){var t,i,r,n,s,a,o=e.pathSegList,l=0,h=0,u=o.numberOfItems;for(var c=0;c<u;++c){var f=o.getItem(c),d=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d)){if("x"in f)l=f.x;if("y"in f)h=f.y}else{if("x1"in f)r=l+f.x1;if("x2"in f)s=l+f.x2;if("y1"in f)n=h+f.y1;if("y2"in f)a=h+f.y2;if("x"in f)l+=f.x;if("y"in f)h+=f.y;switch(d){case"m":o.replaceItem(e.createSVGPathSegMovetoAbs(l,h),c);break;case"l":o.replaceItem(e.createSVGPathSegLinetoAbs(l,h),c);break;case"h":o.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),c);break;case"v":o.replaceItem(e.createSVGPathSegLinetoVerticalAbs(h),c);break;case"c":o.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,h,r,n,s,a),c);break;case"s":o.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,h,s,a),c);break;case"q":o.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,h,r,n),c);break;case"t":o.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,h),c);break;case"a":o.replaceItem(e.createSVGPathSegArcAbs(l,h,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),c);break;case"z":case"Z":l=t;h=i;break}}if(d=="M"||d=="m"){t=l;i=h}}}})();
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */Matter_1.Body=Body_1$2;Matter_1.Composite=Composite_1;Matter_1.World=World_1$2;Matter_1.Detector=Detector_1;Matter_1.Grid=Grid_1$1;Matter_1.Pairs=Pairs_1;Matter_1.Pair=Pair_1;Matter_1.Query=Query_1;Matter_1.Resolver=Resolver_1;Matter_1.SAT=SAT_1;Matter_1.Constraint=Constraint_1;Matter_1.Common=Common_1;Matter_1.Engine=Engine_1;Matter_1.Events=Events_1;Matter_1.Sleeping=Sleeping_1;Matter_1.Plugin=Plugin_1;Matter_1.Bodies=Bodies_1;Matter_1.Composites=Composites_1;Matter_1.Axes=Axes_1;Matter_1.Bounds=Bounds_1;Matter_1.Svg=Svg_1;Matter_1.Vector=Vector_1;Matter_1.Vertices=Vertices_1;Matter_1.World.add=Matter_1.Composite.add;Matter_1.World.remove=Matter_1.Composite.remove;Matter_1.World.addComposite=Matter_1.Composite.addComposite;Matter_1.World.addBody=Matter_1.Composite.addBody;Matter_1.World.addConstraint=Matter_1.Composite.addConstraint;Matter_1.World.clear=Matter_1.Composite.clear;var CustomMain=Matter_1;var MatterAttractors={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.13.1",silent:true,install:function(e){e.after("Body.create",(function(){MatterAttractors.Body.init(this)}));e.before("Engine.update",(function(e){MatterAttractors.Engine.update(e)}))},Body:{init:function(e){e.plugin.attractors=e.plugin.attractors||[]}},Engine:{update:function(e){var t=e.world,i=CustomMain.Composite.allBodies(t);for(var r=0;r<i.length;r+=1){var n=i[r],s=n.plugin.attractors;if(s&&s.length>0){for(var a=r+1;a<i.length;a+=1){var o=i[a];for(var l=0;l<s.length;l+=1){var h=s[l],u=h;if(CustomMain.Common.isFunction(h)){u=h(n,o)}if(u){CustomMain.Body.applyForce(o,o.position,u)}}}}}}},Attractors:{gravityConstant:.001,gravity:function(e,t){var i=CustomMain.Vector.sub(t.position,e.position),r=CustomMain.Vector.magnitudeSquared(i)||1e-4,n=CustomMain.Vector.normalise(i),s=-MatterAttractors.Attractors.gravityConstant*(e.mass*t.mass/r),a=CustomMain.Vector.mult(n,s);CustomMain.Body.applyForce(e,e.position,CustomMain.Vector.neg(a));CustomMain.Body.applyForce(t,t.position,a)}}};var MatterAttractors_1=MatterAttractors;var MatterWrap={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.13.1",silent:true,install:function(e){e.after("Engine.update",(function(){MatterWrap.Engine.update(this)}))},Engine:{update:function(e){var t=e.world,i=CustomMain.Composite.allBodies(t),r=CustomMain.Composite.allComposites(t);for(var n=0;n<i.length;n+=1){var s=i[n];if(s.plugin.wrap){MatterWrap.Body.wrap(s,s.plugin.wrap)}}for(n=0;n<r.length;n+=1){var a=r[n];if(a.plugin.wrap){MatterWrap.Composite.wrap(a,a.plugin.wrap)}}}},Bounds:{wrap:function(e,t){var i=null,r=null;if(typeof t.min.x!=="undefined"&&typeof t.max.x!=="undefined"){if(e.min.x>t.max.x){i=t.min.x-e.max.x}else if(e.max.x<t.min.x){i=t.max.x-e.min.x}}if(typeof t.min.y!=="undefined"&&typeof t.max.y!=="undefined"){if(e.min.y>t.max.y){r=t.min.y-e.max.y}else if(e.max.y<t.min.y){r=t.max.y-e.min.y}}if(i!==null||r!==null){return{x:i||0,y:r||0}}}},Body:{wrap:function(e,t){var i=MatterWrap.Bounds.wrap(e.bounds,t);if(i){CustomMain.Body.translate(e,i)}return i}},Composite:{bounds:function(e){var t=CustomMain.Composite.allBodies(e),i=[];for(var r=0;r<t.length;r+=1){var n=t[r];i.push(n.bounds.min,n.bounds.max)}return CustomMain.Bounds.create(i)},wrap:function(e,t){var i=MatterWrap.Bounds.wrap(MatterWrap.Composite.bounds(e),t);if(i){CustomMain.Composite.translate(e,i)}return i}}};var MatterWrap_1=MatterWrap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatterBody=Body_1$2;var World$3=new Class_1({Extends:eventemitter3,initialize:function e(t,i){eventemitter3.call(this);this.scene=t;this.engine=Engine_1.create(i);this.localWorld=this.engine.world;var r=GetValue_1(i,"gravity",null);if(r){this.setGravity(r.x,r.y,r.scale)}this.walls={left:null,right:null,top:null,bottom:null};if(GetFastValue_1(i,"setBounds",false)){var n=i["setBounds"];if(typeof n==="boolean"){this.setBounds()}else{var s=GetFastValue_1(n,"x",0);var a=GetFastValue_1(n,"y",0);var o=GetFastValue_1(n,"width",t.sys.scale.width);var l=GetFastValue_1(n,"height",t.sys.scale.height);var h=GetFastValue_1(n,"thickness",64);var u=GetFastValue_1(n,"left",true);var c=GetFastValue_1(n,"right",true);var f=GetFastValue_1(n,"top",true);var d=GetFastValue_1(n,"bottom",true);this.setBounds(s,a,o,l,h,u,c,f,d)}}this.enabled=GetValue_1(i,"enabled",true);this.correction=GetValue_1(i,"correction",1);this.getDelta=GetValue_1(i,"getDelta",this.update60Hz);this.autoUpdate=GetValue_1(i,"autoUpdate",true);this.drawDebug=GetValue_1(i,"debug",false);this.defaults={debugShowBody:GetFastValue_1(i,"debugShowBody",true),debugShowStaticBody:GetFastValue_1(i,"debugShowStaticBody",true),debugShowVelocity:GetFastValue_1(i,"debugShowVelocity",true),bodyDebugColor:GetFastValue_1(i,"debugBodyColor",16711935),bodyDebugFillColor:GetFastValue_1(i,"debugBodyFillColor",14919651),staticBodyDebugColor:GetFastValue_1(i,"debugStaticBodyColor",255),velocityDebugColor:GetFastValue_1(i,"debugVelocityColor",65280),debugShowJoint:GetFastValue_1(i,"debugShowJoint",true),jointDebugColor:GetFastValue_1(i,"debugJointColor",0),debugWireframes:GetFastValue_1(i,"debugWireframes",true),debugShowInternalEdges:GetFastValue_1(i,"debugShowInternalEdges",false),debugShowConvexHulls:GetFastValue_1(i,"debugShowConvexHulls",false),debugConvexHullColor:GetFastValue_1(i,"debugConvexHullColor",11184810),debugShowSleeping:GetFastValue_1(i,"debugShowSleeping",false)};if(this.drawDebug){this.createDebugGraphic()}this.setEventsProxy()},setEventsProxy:function(){var e=this;var t=this.engine;Events_1.on(t,"beforeUpdate",(function(t){e.emit(events$h.BEFORE_UPDATE,t)}));Events_1.on(t,"afterUpdate",(function(t){e.emit(events$h.AFTER_UPDATE,t)}));Events_1.on(t,"collisionStart",(function(t){var i=t.pairs;var r;var n;if(i.length>0){r=i[0].bodyA;n=i[0].bodyB}e.emit(events$h.COLLISION_START,t,r,n)}));Events_1.on(t,"collisionActive",(function(t){var i=t.pairs;var r;var n;if(i.length>0){r=i[0].bodyA;n=i[0].bodyB}e.emit(events$h.COLLISION_ACTIVE,t,r,n)}));Events_1.on(t,"collisionEnd",(function(t){var i=t.pairs;var r;var n;if(i.length>0){r=i[0].bodyA;n=i[0].bodyB}e.emit(events$h.COLLISION_END,t,r,n)}))},setBounds:function(e,t,i,r,n,s,a,o,l){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=this.scene.sys.scale.width}if(r===undefined){r=this.scene.sys.scale.height}if(n===undefined){n=128}if(s===undefined){s=true}if(a===undefined){a=true}if(o===undefined){o=true}if(l===undefined){l=true}this.updateWall(s,"left",e-n,t-n,n,r+n*2);this.updateWall(a,"right",e+i,t-n,n,r+n*2);this.updateWall(o,"top",e,t-n,i,n);this.updateWall(l,"bottom",e,t+r,i,n);return this},updateWall:function(e,t,i,r,n,s){var a=this.walls[t];if(e){if(a){World_1$2.remove(this.localWorld,a)}i+=n/2;r+=s/2;this.walls[t]=this.create(i,r,n,s,{isStatic:true,friction:0,frictionStatic:0})}else{if(a){World_1$2.remove(this.localWorld,a)}this.walls[t]=null}},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=true;return e},disableGravity:function(){this.localWorld.gravity.x=0;this.localWorld.gravity.y=0;this.localWorld.gravity.scale=0;return this},setGravity:function(e,t,i){if(e===undefined){e=0}if(t===undefined){t=1}this.localWorld.gravity.x=e;this.localWorld.gravity.y=t;if(i!==undefined){this.localWorld.gravity.scale=i}return this},create:function(e,t,i,r,n){var s=Bodies_1.rectangle(e,t,i,r,n);World_1$2.add(this.localWorld,s);return s},add:function(e){World_1$2.add(this.localWorld,e);return this},remove:function(e,t){var i=e.body?e.body:e;Composite_1.remove(this.localWorld,i,t);return this},removeConstraint:function(e,t){Composite_1.remove(this.localWorld,e,t);return this},convertTilemapLayer:function(e,t){var i=e.layer;var r=e.getTilesWithin(0,0,i.width,i.height,{isColliding:true});this.convertTiles(r,t);return this},convertTiles:function(e,t){if(e.length===0){return this}for(var i=0;i<e.length;i++){new MatterTileBody_1(this,e[i],t)}return this},nextGroup:function(e){return MatterBody.nextGroup(e)},nextCategory:function(){return MatterBody.nextCategory()},pause:function(){this.enabled=false;this.emit(events$h.PAUSE);return this},resume:function(){this.enabled=true;this.emit(events$h.RESUME);return this},update:function(e,t){if(this.enabled&&this.autoUpdate){Engine_1.update(this.engine,this.getDelta(e,t),this.correction)}},step:function(e,t){Engine_1.update(this.engine,e,t)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},postUpdate:function(){if(!this.drawDebug){return}this.debugGraphic.clear();var e=Composite_1.allBodies(this.localWorld);if(this.defaults.debugWireframes){if(this.defaults.debugShowConvexHulls){this.renderConvexHulls(e)}this.renderWireframes(e)}else{this.renderBodies(e)}if(this.defaults.debugShowJoint){this.renderJoints()}},renderConvexHulls:function(e){var t=this.debugGraphic;t.lineStyle(1,this.defaults.debugConvexHullColor);t.beginPath();for(var i=0;i<e.length;i++){var r=e[i];if(!r.render.visible||r.parts.length===1){continue}t.moveTo(r.vertices[0].x,r.vertices[0].y);for(var n=1;n<r.vertices.length;n++){t.lineTo(r.vertices[n].x,r.vertices[n].y)}t.lineTo(r.vertices[0].x,r.vertices[0].y)}t.strokePath()},renderWireframes:function(e){var t=this.debugGraphic;var i=this.defaults.debugShowInternalEdges;t.lineStyle(1,this.defaults.bodyDebugColor);t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];if(!n.render.visible){continue}for(var s=n.parts.length>1?1:0;s<n.parts.length;s++){var a=n.parts[s];var o=a.vertices.length;t.moveTo(a.vertices[0].x,a.vertices[0].y);for(var l=1;l<o;l++){if(!a.vertices[l-1].isInternal||i){t.lineTo(a.vertices[l].x,a.vertices[l].y)}else{t.moveTo(a.vertices[l].x,a.vertices[l].y)}if(a.vertices[l].isInternal&&!i){t.moveTo(a.vertices[(l+1)%o].x,a.vertices[(l+1)%o].y)}}t.lineTo(a.vertices[0].x,a.vertices[0].y)}}t.strokePath()},renderBodies:function(e){var t=this.debugGraphic;var i=this.defaults.debugShowInternalEdges||!this.defaults.debugWireframes;var r=this.defaults.debugShowSleeping;var n=this.defaults.debugWireframes;var s;var a;var o;var l;for(o=0;o<e.length;o++){s=e[o];if(!s.render.visible){continue}for(l=s.parts.length>1?1:0;l<s.parts.length;l++){a=s.parts[l];if(!a.render.visible){continue}if(r&&s.isSleeping){t.lineStyle(1,this.defaults.bodyDebugColor,.5*a.render.opacity);t.fillStyle(this.defaults.bodyDebugColor,.5*a.render.opacity)}else{t.lineStyle(1,this.defaults.bodyDebugColor,a.render.opacity);t.fillStyle(this.defaults.bodyDebugColor,a.render.opacity)}if(a.circleRadius){t.beginPath();t.arc(a.position.x,a.position.y,a.circleRadius,0,2*Math.PI)}else{t.beginPath();t.moveTo(a.vertices[0].x,a.vertices[0].y);var h=a.vertices.length;for(var u=1;u<h;u++){if(!a.vertices[u-1].isInternal||i){t.lineTo(a.vertices[u].x,a.vertices[u].y)}else{t.moveTo(a.vertices[u].x,a.vertices[u].y)}if(a.vertices[u].isInternal&&!i){t.moveTo(a.vertices[(u+1)%a.vertices.length].x,a.vertices[(u+1)%a.vertices.length].y)}}t.lineTo(a.vertices[0].x,a.vertices[0].y);t.closePath()}if(!n){t.fillPath()}else{t.strokePath()}}}},renderJoints:function(){var e=this.debugGraphic;e.lineStyle(2,this.defaults.jointDebugColor);var t=Composite_1.allConstraints(this.localWorld);for(var i=0;i<t.length;i++){var r=t[i];if(!r.render.visible||!r.pointA||!r.pointB){continue}if(r.render.lineWidth){e.lineStyle(r.render.lineWidth,Common_1.colorToNumber(r.render.strokeStyle))}var n=r.bodyA;var s=r.bodyB;var a;var o;if(n){a=Vector_1.add(n.position,r.pointA)}else{a=r.pointA}if(r.render.type==="pin"){e.beginPath();e.arc(a.x,a.y,3,0,2*Math.PI);e.closePath()}else{if(s){o=Vector_1.add(s.position,r.pointB)}else{o=r.pointB}e.beginPath();e.moveTo(a.x,a.y);if(r.render.type==="spring"){var l=Vector_1.sub(o,a);var h=Vector_1.perp(Vector_1.normalise(l));var u=Math.ceil(Common_1.clamp(r.length/5,12,20));var c;for(var f=1;f<u;f+=1){c=f%2===0?1:-1;e.lineTo(a.x+l.x*(f/u)+h.x*c*4,a.y+l.y*(f/u)+h.y*c*4)}}e.lineTo(o.x,o.y)}if(r.render.lineWidth){e.strokePath()}if(r.render.anchors){e.fillStyle(Common_1.colorToNumber(r.render.strokeStyle));e.beginPath();e.arc(a.x,a.y,6,0,2*Math.PI);e.arc(o.x,o.y,6,0,2*Math.PI);e.closePath();e.fillPath()}}},fromPath:function(e,t){if(t===undefined){t=[]}var i=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi;e.replace(i,(function(e,i,r){t.push({x:parseFloat(i),y:parseFloat(r)})}));return t},resetCollisionIDs:function(){Body_1$2._nextCollidingGroupId=1;Body_1$2._nextNonCollidingGroupId=-1;Body_1$2._nextCategory=1;return this},shutdown:function(){Events_1.off(this.engine);this.removeAllListeners();World_1$2.clear(this.localWorld,false);Engine_1.clear(this.engine);if(this.drawDebug){this.debugGraphic.destroy()}},destroy:function(){this.shutdown()}});var World_1$3=World$3;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MatterPhysics=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.config=this.getConfig();this.verts=Vertices_1;this.body=Body_1$2;this.bodies=Bodies_1;if(GetValue_1(this.config,"plugins.attractors",false)){Plugin_1.register(MatterAttractors_1);Plugin_1.use(Matter_1,MatterAttractors_1)}if(GetValue_1(this.config,"plugins.wrap",false)){Plugin_1.register(MatterWrap_1);Plugin_1.use(Matter_1,MatterWrap_1)}t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.world=new World_1$3(this.scene,this.config);this.add=new Factory_1$2(this.world);this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){if(!this.world){this.world=new World_1$3(this.scene,this.config);this.add=new Factory_1$2(this.world)}var e=this.systems.events;e.on(events$7.UPDATE,this.world.update,this.world);e.on(events$7.POST_UPDATE,this.world.postUpdate,this.world);e.once(events$7.SHUTDOWN,this.shutdown,this)},getConfig:function(){var e=this.systems.game.config.physics;var t=this.systems.settings.physics;var i=Merge_1(GetFastValue_1(t,"matter",{}),GetFastValue_1(e,"matter",{}));return i},enableAttractorPlugin:function(){Plugin_1.register(MatterAttractors_1);Plugin_1.use(Matter_1,MatterAttractors_1);return this},enableWrapPlugin:function(){Plugin_1.register(MatterWrap_1);Plugin_1.use(Matter_1,MatterWrap_1);return this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){this.world.getDelta=this.world.update60Hz;this.world.autoUpdate=true;return this},set30Hz:function(){this.world.getDelta=this.world.update30Hz;this.world.autoUpdate=true;return this},step:function(e,t){this.world.step(e,t)},shutdown:function(){var e=this.systems.events;e.off(events$7.UPDATE,this.world.update,this.world);e.off(events$7.POST_UPDATE,this.world.postUpdate,this.world);e.off(events$7.SHUTDOWN,this.shutdown,this);this.add.destroy();this.world.destroy();this.add=null;this.world=null},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("MatterPhysics",MatterPhysics,"matterPhysics");var MatterPhysics_1=MatterPhysics;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var matterJs={Factory:Factory_1$2,Image:MatterImage_1,Matter:CustomMain,MatterPhysics:MatterPhysics_1,PolyDecomp:polyDecomp,Sprite:MatterSprite_1,TileBody:MatterTileBody_1,PhysicsEditorParser:PhysicsEditorParser_1,World:World_1$3};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var physics={Arcade:arcade,Impact:impact,Matter:matterJs};
/**
            * @author       Richard Davey <rich@photonstorm.com>
            * @copyright    2019 Photon Storm Ltd.
            * @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
            */var BasePlugin=new Class_1({initialize:function e(t){this.pluginManager=t;this.game=t.game},init:function(){},start:function(){},stop:function(){},boot:function(){},destroy:function(){this.pluginManager=null;this.game=null;this.scene=null;this.systems=null}});var BasePlugin_1=BasePlugin;
/**
            * @author       Richard Davey <rich@photonstorm.com>
            * @copyright    2019 Photon Storm Ltd.
            * @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
            */var ScenePlugin=new Class_1({Extends:BasePlugin_1,initialize:function e(t,i){BasePlugin_1.call(this,i);this.scene=t;this.systems=t.sys;t.sys.events.once(events$7.BOOT,this.boot,this)},boot:function(){}});var ScenePlugin_1=ScenePlugin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var plugins={BasePlugin:BasePlugin_1,DefaultPlugins:DefaultPlugins_1,PluginCache:PluginCache_1,PluginManager:PluginManager_1,ScenePlugin:ScenePlugin_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var canvas$1={CanvasRenderer:CanvasRenderer_1,GetBlendModes:GetBlendModes_1,SetTransform:SetTransform_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var snapshot={Canvas:CanvasSnapshot_1,WebGL:WebGLSnapshot_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var pipelines={BitmapMaskPipeline:BitmapMaskPipeline_1,ForwardDiffuseLightPipeline:ForwardDiffuseLightPipeline_1,TextureTintPipeline:TextureTintPipeline_1,ModelViewProjection:ModelViewProjection_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var webgl={Utils:Utils,WebGLPipeline:WebGLPipeline_1,WebGLRenderer:WebGLRenderer_1,Pipelines:pipelines,BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderer={Canvas:canvas$1,Snapshot:snapshot,WebGL:webgl};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Scale$1={Center:CENTER_CONST,Events:events$6,Orientation:ORIENTATION_CONST,ScaleManager:ScaleManager_1,ScaleModes:SCALE_MODE_CONST,Zoom:ZOOM_CONST};Scale$1=Extend_1(false,Scale$1,_const$5.CENTER);Scale$1=Extend_1(false,Scale$1,_const$5.ORIENTATION);Scale$1=Extend_1(false,Scale$1,_const$5.SCALE_MODE);Scale$1=Extend_1(false,Scale$1,_const$5.ZOOM);var scale=Scale$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ScenePlugin$1=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.settings=t.sys.settings;this.key=t.sys.settings.key;this.manager=t.sys.game.scene;this.transitionProgress=0;this._elapsed=0;this._target=null;this._duration=0;this._willSleep=false;this._willRemove=false;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.pluginStart,this)},boot:function(){this.systems.events.once(events$7.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null;this.systems.events.once(events$7.SHUTDOWN,this.shutdown,this)},start:function(e,t){if(e===undefined){e=this.key}this.manager.queueOp("stop",this.key);this.manager.queueOp("start",e,t);return this},restart:function(e){var t=this.key;this.manager.queueOp("stop",t);this.manager.queueOp("start",t,e);return this},transition:function(e){if(e===undefined){e={}}var t=GetFastValue_1(e,"target",false);var i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i)){return false}var r=GetFastValue_1(e,"duration",1e3);this._elapsed=0;this._target=i;this._duration=r;this._willSleep=GetFastValue_1(e,"sleep",false);this._willRemove=GetFastValue_1(e,"remove",false);var n=GetFastValue_1(e,"onUpdate",null);if(n){this._onUpdate=n;this._onUpdateScope=GetFastValue_1(e,"onUpdateScope",this.scene)}var s=GetFastValue_1(e,"allowInput",false);this.settings.transitionAllowInput=s;var a=i.sys.settings;a.isTransition=true;a.transitionFrom=this.scene;a.transitionDuration=r;a.transitionAllowInput=s;if(GetFastValue_1(e,"moveAbove",false)){this.manager.moveAbove(this.key,t)}else if(GetFastValue_1(e,"moveBelow",false)){this.manager.moveBelow(this.key,t)}if(i.sys.isSleeping()){i.sys.wake()}else{this.manager.start(t,GetFastValue_1(e,"data"))}this.systems.events.emit(events$7.TRANSITION_OUT,i,r);this.systems.events.on(events$7.UPDATE,this.step,this);return true},checkValidTransition:function(e){if(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning()){return false}return true},step:function(e,t){this._elapsed+=t;this.transitionProgress=Clamp_1(this._elapsed/this._duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.transitionProgress)}if(this._elapsed>=this._duration){this.transitionComplete()}},transitionComplete:function(){var e=this._target.sys;var t=this._target.sys.settings;this.systems.events.off(events$7.UPDATE,this.step,this);e.events.emit(events$7.TRANSITION_COMPLETE,this.scene);t.isTransition=false;t.transitionFrom=null;this._duration=0;this._target=null;this._onUpdate=null;this._onUpdateScope=null;if(this._willRemove){this.manager.remove(this.key)}else if(this._willSleep){this.systems.sleep()}else{this.manager.stop(this.key)}},add:function(e,t,i,r){return this.manager.add(e,t,i,r)},launch:function(e,t){if(e&&e!==this.key){this.manager.queueOp("start",e,t)}return this},run:function(e,t){if(e&&e!==this.key){this.manager.queueOp("run",e,t)}return this},pause:function(e,t){if(e===undefined){e=this.key}this.manager.queueOp("pause",e,t);return this},resume:function(e,t){if(e===undefined){e=this.key}this.manager.queueOp("resume",e,t);return this},sleep:function(e,t){if(e===undefined){e=this.key}this.manager.queueOp("sleep",e,t);return this},wake:function(e,t){if(e===undefined){e=this.key}this.manager.queueOp("wake",e,t);return this},switch:function(e){if(e!==this.key){this.manager.queueOp("switch",this.key,e)}return this},stop:function(e){if(e===undefined){e=this.key}this.manager.queueOp("stop",e);return this},setActive:function(e,t,i){if(t===undefined){t=this.key}var r=this.manager.getScene(t);if(r){r.sys.setActive(e,i)}return this},setVisible:function(e,t){if(t===undefined){t=this.key}var i=this.manager.getScene(t);if(i){i.sys.setVisible(e)}return this},isSleeping:function(e){if(e===undefined){e=this.key}return this.manager.isSleeping(e)},isActive:function(e){if(e===undefined){e=this.key}return this.manager.isActive(e)},isPaused:function(e){if(e===undefined){e=this.key}return this.manager.isPaused(e)},isVisible:function(e){if(e===undefined){e=this.key}return this.manager.isVisible(e)},swapPosition:function(e,t){if(t===undefined){t=this.key}if(e!==t){this.manager.swapPosition(e,t)}return this},moveAbove:function(e,t){if(t===undefined){t=this.key}if(e!==t){this.manager.moveAbove(e,t)}return this},moveBelow:function(e,t){if(t===undefined){t=this.key}if(e!==t){this.manager.moveBelow(e,t)}return this},remove:function(e){if(e===undefined){e=this.key}this.manager.remove(e);return this},moveUp:function(e){if(e===undefined){e=this.key}this.manager.moveUp(e);return this},moveDown:function(e){if(e===undefined){e=this.key}this.manager.moveDown(e);return this},bringToTop:function(e){if(e===undefined){e=this.key}this.manager.bringToTop(e);return this},sendToBack:function(e){if(e===undefined){e=this.key}this.manager.sendToBack(e);return this},get:function(e){return this.manager.getScene(e)},getIndex:function(e){if(e===undefined){e=this.key}return this.manager.getIndex(e)},shutdown:function(){var e=this.systems.events;e.off(events$7.SHUTDOWN,this.shutdown,this);e.off(events$7.POST_UPDATE,this.step,this);e.off(events$7.TRANSITION_OUT)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null;this.settings=null;this.manager=null}});PluginCache_1.register("ScenePlugin",ScenePlugin$1,"scenePlugin");var ScenePlugin_1$1=ScenePlugin$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Scene$1={Events:events$7,SceneManager:SceneManager_1,ScenePlugin:ScenePlugin_1$1,Settings:Settings_1,Systems:Systems_1};Scene$1=Extend_1(false,Scene$1,_const$7);var scene=Scene$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var structs={List:List_1,Map:_Map,ProcessQueue:ProcessQueue_1,RTree:RTree,Set:_Set,Size:Size_1$1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CONST$4={LINEAR:0,NEAREST:1};var _const$b=CONST$4;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Textures={CanvasTexture:CanvasTexture_1,Events:events$8,FilterMode:_const$b,Frame:Frame_1,Parsers:parsers,Texture:Texture_1$1,TextureManager:TextureManager_1,TextureSource:TextureSource_1};Textures=Extend_1(false,Textures,_const$b);var textures=Textures;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var IsInLayerBounds=function(e,t,i){return e>=0&&e<i.width&&t>=0&&t<i.height};var IsInLayerBounds_1=IsInLayerBounds;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTileAt=function(e,t,i,r){if(i===undefined){i=false}if(IsInLayerBounds_1(e,t,r)){var n=r.data[t][e]||null;if(n===null){return null}else if(n.index===-1){return i?n:null}else{return n}}else{return null}};var GetTileAt_1=GetTileAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CalculateFacesAt=function(e,t,i){var r=GetTileAt_1(e,t,true,i);var n=GetTileAt_1(e,t-1,true,i);var s=GetTileAt_1(e,t+1,true,i);var a=GetTileAt_1(e-1,t,true,i);var o=GetTileAt_1(e+1,t,true,i);var l=r&&r.collides;if(l){r.faceTop=true;r.faceBottom=true;r.faceLeft=true;r.faceRight=true}if(n&&n.collides){if(l){r.faceTop=false}n.faceBottom=!l}if(s&&s.collides){if(l){r.faceBottom=false}s.faceTop=!l}if(a&&a.collides){if(l){r.faceLeft=false}a.faceRight=!l}if(o&&o.collides){if(l){r.faceRight=false}o.faceLeft=!l}if(r&&!r.collides){r.resetFaces()}return r};var CalculateFacesAt_1=CalculateFacesAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTilesWithin=function(e,t,i,r,n,s){if(e===undefined){e=0}if(t===undefined){t=0}if(i===undefined){i=s.width}if(r===undefined){r=s.height}var a=GetFastValue_1(n,"isNotEmpty",false);var o=GetFastValue_1(n,"isColliding",false);var l=GetFastValue_1(n,"hasInterestingFace",false);if(e<0){i+=e;e=0}if(t<0){r+=t;t=0}if(e+i>s.width){i=Math.max(s.width-e,0)}if(t+r>s.height){r=Math.max(s.height-t,0)}var h=[];for(var u=t;u<t+r;u++){for(var c=e;c<e+i;c++){var f=s.data[u][c];if(f!==null){if(a&&f.index===-1){continue}if(o&&!f.collides){continue}if(l&&!f.hasInterestingFace){continue}h.push(f)}}}return h};var GetTilesWithin_1=GetTilesWithin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CalculateFacesWithin=function(e,t,i,r,n){var s=null;var a=null;var o=null;var l=null;var h=GetTilesWithin_1(e,t,i,r,null,n);for(var u=0;u<h.length;u++){var c=h[u];if(c){if(c.collides){s=GetTileAt_1(c.x,c.y-1,true,n);a=GetTileAt_1(c.x,c.y+1,true,n);o=GetTileAt_1(c.x-1,c.y,true,n);l=GetTileAt_1(c.x+1,c.y,true,n);c.faceTop=s&&s.collides?false:true;c.faceBottom=a&&a.collides?false:true;c.faceLeft=o&&o.collides?false:true;c.faceRight=l&&l.collides?false:true}else{c.resetFaces()}}}};var CalculateFacesWithin_1=CalculateFacesWithin;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Copy=function(e,t,i,r,n,s,a,o){if(e<0){e=0}if(t<0){t=0}if(a===undefined){a=true}var l=GetTilesWithin_1(e,t,i,r,null,o);var h=n-e;var u=s-t;for(var c=0;c<l.length;c++){var f=l[c].x+h;var d=l[c].y+u;if(f>=0&&f<o.width&&d>=0&&d<o.height){if(o.data[d][f]){o.data[d][f].copy(l[c])}}}if(a){CalculateFacesWithin_1(n-1,s-1,i+2,r+2,o)}};var Copy_1=Copy;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileToWorldX=function(e,t,i){var r=i.baseTileWidth;var n=i.tilemapLayer;var s=0;if(n){if(t===undefined){t=n.scene.cameras.main}s=n.x+t.scrollX*(1-n.scrollFactorX);r*=n.scaleX}return s+e*r};var TileToWorldX_1=TileToWorldX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileToWorldY=function(e,t,i){var r=i.baseTileHeight;var n=i.tilemapLayer;var s=0;if(n){if(t===undefined){t=n.scene.cameras.main}s=n.y+t.scrollY*(1-n.scrollFactorY);r*=n.scaleY}return s+e*r};var TileToWorldY_1=TileToWorldY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ReplaceByIndex=function(e,t,i,r,n,s,a){var o=GetTilesWithin_1(i,r,n,s,null,a);for(var l=0;l<o.length;l++){if(o[l]&&o[l].index===e){o[l].index=t}}};var ReplaceByIndex_1=ReplaceByIndex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CreateFromTiles=function(e,t,i,r,n,s){if(i===undefined){i={}}if(!Array.isArray(e)){e=[e]}var a=s.tilemapLayer;if(r===undefined){r=a.scene}if(n===undefined){n=r.cameras.main}var o=GetTilesWithin_1(0,0,s.width,s.height,null,s);var l=[];var h;for(h=0;h<o.length;h++){var u=o[h];if(e.indexOf(u.index)!==-1){i.x=TileToWorldX_1(u.x,n,s);i.y=TileToWorldY_1(u.y,n,s);var c=r.make.sprite(i);l.push(c)}}if(typeof t==="number"){for(h=0;h<e.length;h++){ReplaceByIndex_1(e[h],t,0,0,s.width,s.height,s)}}else if(Array.isArray(t)){for(h=0;h<e.length;h++){ReplaceByIndex_1(e[h],t[h],0,0,s.width,s.height,s)}}return l};var CreateFromTiles_1=CreateFromTiles;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var CullTiles=function(e,t,i,r){if(i===undefined){i=[]}if(r===undefined){r=0}i.length=0;var n=e.tilemapLayer.tilemap;var s=e.tilemapLayer;var a=e.data;var o=e.width;var l=e.height;var h=Math.floor(n.tileWidth*s.scaleX);var u=Math.floor(n.tileHeight*s.scaleY);var c=0;var f=o;var d=0;var v=l;if(!s.skipCull&&s.scrollFactorX===1&&s.scrollFactorY===1){var p=SnapFloor_1(t.worldView.x-s.x,h,0,true)-s.cullPaddingX;var g=SnapCeil_1(t.worldView.right-s.x,h,0,true)+s.cullPaddingX;var m=SnapFloor_1(t.worldView.y-s.y,u,0,true)-s.cullPaddingY;var _=SnapCeil_1(t.worldView.bottom-s.y,u,0,true)+s.cullPaddingY;c=Math.max(0,p);f=Math.min(o,g);d=Math.max(0,m);v=Math.min(l,_)}var y;var T;var x;if(r===0){for(T=d;T<v;T++){for(y=c;a[T]&&y<f;y++){x=a[T][y];if(!x||x.index===-1||!x.visible||x.alpha===0){continue}i.push(x)}}}else if(r===1){for(T=d;T<v;T++){for(y=f;a[T]&&y>=c;y--){x=a[T][y];if(!x||x.index===-1||!x.visible||x.alpha===0){continue}i.push(x)}}}else if(r===2){for(T=v;T>=d;T--){for(y=c;a[T]&&y<f;y++){x=a[T][y];if(!x||x.index===-1||!x.visible||x.alpha===0){continue}i.push(x)}}}else if(r===3){for(T=v;T>=d;T--){for(y=f;a[T]&&y>=c;y--){x=a[T][y];if(!x||x.index===-1||!x.visible||x.alpha===0){continue}i.push(x)}}}s.tilesDrawn=i.length;s.tilesTotal=o*l;return i};var CullTiles_1=CullTiles;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTileCollision=function(e,t){if(t){e.setCollision(true,true,true,true,false)}else{e.resetCollision(false)}};var SetTileCollision_1=SetTileCollision;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Fill=function(e,t,i,r,n,s,a){var o=a.collideIndexes.indexOf(e)!==-1;var l=GetTilesWithin_1(t,i,r,n,null,a);for(var h=0;h<l.length;h++){l[h].index=e;SetTileCollision_1(l[h],o)}if(s){CalculateFacesWithin_1(t-1,i-1,r+2,n+2,a)}};var Fill_1=Fill;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FilterTiles=function(e,t,i,r,n,s,a,o){var l=GetTilesWithin_1(i,r,n,s,a,o);return l.filter(e,t)};var FilterTiles_1=FilterTiles;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FindByIndex=function(e,t,i,r){if(t===undefined){t=0}if(i===undefined){i=false}var n=0;var s;var a;var o;if(i){for(a=r.height-1;a>=0;a--){for(s=r.width-1;s>=0;s--){o=r.data[a][s];if(o&&o.index===e){if(n===t){return o}else{n+=1}}}}}else{for(a=0;a<r.height;a++){for(s=0;s<r.width;s++){o=r.data[a][s];if(o&&o.index===e){if(n===t){return o}else{n+=1}}}}}return null};var FindByIndex_1=FindByIndex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FindTile=function(e,t,i,r,n,s,a,o){var l=GetTilesWithin_1(i,r,n,s,a,o);return l.find(e,t)||null};var FindTile_1=FindTile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ForEachTile=function(e,t,i,r,n,s,a,o){var l=GetTilesWithin_1(i,r,n,s,a,o);l.forEach(e,t)};var ForEachTile_1=ForEachTile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WorldToTileX=function(e,t,i,r){if(t===undefined){t=true}var n=r.baseTileWidth;var s=r.tilemapLayer;if(s){if(i===undefined){i=s.scene.cameras.main}e=e-(s.x+i.scrollX*(1-s.scrollFactorX));n*=s.scaleX}return t?Math.floor(e/n):e/n};var WorldToTileX_1=WorldToTileX;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WorldToTileY=function(e,t,i,r){if(t===undefined){t=true}var n=r.baseTileHeight;var s=r.tilemapLayer;if(s){if(i===undefined){i=s.scene.cameras.main}e=e-(s.y+i.scrollY*(1-s.scrollFactorY));n*=s.scaleY}return t?Math.floor(e/n):e/n};var WorldToTileY_1=WorldToTileY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTileAtWorldXY=function(e,t,i,r,n){var s=WorldToTileX_1(e,true,r,n);var a=WorldToTileY_1(t,true,r,n);return GetTileAt_1(s,a,i,n)};var GetTileAtWorldXY_1=GetTileAtWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TriangleToRectangle=function(e,t){return intersects$1.RectangleToTriangle(t,e)};var GetTilesWithinShape=function(e,t,i,r){if(e===undefined){return[]}var n=NOOP_1;if(e instanceof geom.Circle){n=intersects$1.CircleToRectangle}else if(e instanceof geom.Rectangle){n=intersects$1.RectangleToRectangle}else if(e instanceof geom.Triangle){n=TriangleToRectangle}else if(e instanceof geom.Line){n=intersects$1.LineToRectangle}var s=WorldToTileX_1(e.left,true,i,r);var a=WorldToTileY_1(e.top,true,i,r);var o=Math.ceil(WorldToTileX_1(e.right,false,i,r));var l=Math.ceil(WorldToTileY_1(e.bottom,false,i,r));var h=Math.max(o-s,1);var u=Math.max(l-a,1);var c=GetTilesWithin_1(s,a,h,u,t,r);var f=r.tileWidth;var d=r.tileHeight;if(r.tilemapLayer){f*=r.tilemapLayer.scaleX;d*=r.tilemapLayer.scaleY}var v=[];var p=new geom.Rectangle(0,0,f,d);for(var g=0;g<c.length;g++){var m=c[g];p.x=TileToWorldX_1(m.x,i,r);p.y=TileToWorldY_1(m.y,i,r);if(n(e,p)){v.push(m)}}return v};var GetTilesWithinShape_1=GetTilesWithinShape;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTilesWithinWorldXY=function(e,t,i,r,n,s,a){var o=WorldToTileX_1(e,true,s,a);var l=WorldToTileY_1(t,true,s,a);var h=Math.ceil(WorldToTileX_1(e+i,false,s,a));var u=Math.ceil(WorldToTileY_1(t+r,false,s,a));return GetTilesWithin_1(o,l,h-o,u-l,n,a)};var GetTilesWithinWorldXY_1=GetTilesWithinWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HasTileAt=function(e,t,i){if(IsInLayerBounds_1(e,t,i)){var r=i.data[t][e];return r!==null&&r.index>-1}else{return false}};var HasTileAt_1=HasTileAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HasTileAtWorldXY=function(e,t,i,r){var n=WorldToTileX_1(e,true,i,r);var s=WorldToTileY_1(t,true,i,r);return HasTileAt_1(n,s,r)};var HasTileAtWorldXY_1=HasTileAtWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Tile=new Class_1({Mixins:[components.Alpha,components.Flip,components.Visible],initialize:function e(t,i,r,n,s,a,o,l){this.layer=t;this.index=i;this.x=r;this.y=n;this.width=s;this.height=a;this.baseWidth=o!==undefined?o:s;this.baseHeight=l!==undefined?l:a;this.pixelX=0;this.pixelY=0;this.updatePixelXY();this.properties={};this.rotation=0;this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.faceLeft=false;this.faceRight=false;this.faceTop=false;this.faceBottom=false;this.collisionCallback=null;this.collisionCallbackContext=this;this.tint=16777215;this.physics={}},containsPoint:function(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function(e){this.index=e.index;this.alpha=e.alpha;this.properties=e.properties;this.visible=e.visible;this.setFlip(e.flipX,e.flipY);this.tint=e.tint;this.rotation=e.rotation;this.collideUp=e.collideUp;this.collideDown=e.collideDown;this.collideLeft=e.collideLeft;this.collideRight=e.collideRight;this.collisionCallback=e.collisionCallback;this.collisionCallbackContext=e.collisionCallbackContext;return this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(e){var t=this.tilemapLayer;return t?t.tileToWorldX(this.x,e):this.x*this.baseWidth},getRight:function(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function(e){var t=this.tilemapLayer;return t?t.tileToWorldY(this.y,e)-(this.height-this.baseHeight)*t.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function(e,t){if(t===undefined){t=new rectangle}t.x=this.getLeft();t.y=this.getTop();t.width=this.getRight()-t.x;t.height=this.getBottom()-t.y;return t},getCenterX:function(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function(e){return(this.getTop(e)+this.getBottom(e))/2},destroy:function(){this.collisionCallback=undefined;this.collisionCallbackContext=undefined;this.properties=undefined},intersects:function(e,t,i,r){return!(i<=this.pixelX||r<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function(e,t){if(e&&t){return this.canCollide||this.hasInterestingFace}else if(e){return this.collides}else if(t){return this.hasInterestingFace}return false},resetCollision:function(e){if(e===undefined){e=true}this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false;if(e){var t=this.tilemapLayer;if(t){this.tilemapLayer.calculateFacesAt(this.x,this.y)}}return this},resetFaces:function(){this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false;return this},setCollision:function(e,t,i,r,n){if(t===undefined){t=e}if(i===undefined){i=e}if(r===undefined){r=e}if(n===undefined){n=true}this.collideLeft=e;this.collideRight=t;this.collideUp=i;this.collideDown=r;this.faceLeft=e;this.faceRight=t;this.faceTop=i;this.faceBottom=r;if(n){var s=this.tilemapLayer;if(s){this.tilemapLayer.calculateFacesAt(this.x,this.y)}}return this},setCollisionCallback:function(e,t){if(e===null){this.collisionCallback=undefined;this.collisionCallbackContext=undefined}else{this.collisionCallback=e;this.collisionCallbackContext=t}return this},setSize:function(e,t,i,r){if(e!==undefined){this.width=e}if(t!==undefined){this.height=t}if(i!==undefined){this.baseWidth=i}if(r!==undefined){this.baseHeight=r}this.updatePixelXY();return this},updatePixelXY:function(){this.pixelX=this.x*this.baseWidth;this.pixelY=this.y*this.baseHeight;return this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t){return t}}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var e=this.tilemapLayer;return e?e.tilemap:null}}});var Tile_1=Tile;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PutTileAt=function(e,t,i,r,n){if(!IsInLayerBounds_1(t,i,n)){return null}if(r===undefined){r=true}var s=n.data[i][t];var a=s&&s.collides;if(e instanceof Tile_1){if(n.data[i][t]===null){n.data[i][t]=new Tile_1(n,e.index,t,i,e.width,e.height)}n.data[i][t].copy(e)}else{var o=e;if(n.data[i][t]===null){n.data[i][t]=new Tile_1(n,o,t,i,n.tileWidth,n.tileHeight)}else{n.data[i][t].index=o}}var l=n.data[i][t];var h=n.collideIndexes.indexOf(l.index)!==-1;SetTileCollision_1(l,h);if(r&&a!==l.collides){CalculateFacesAt_1(t,i,n)}return l};var PutTileAt_1=PutTileAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PutTileAtWorldXY=function(e,t,i,r,n,s){var a=WorldToTileX_1(t,true,n,s);var o=WorldToTileY_1(i,true,n,s);return PutTileAt_1(e,a,o,r,s)};var PutTileAtWorldXY_1=PutTileAtWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var PutTilesAt=function(e,t,i,r,n){if(!Array.isArray(e)){return null}if(r===undefined){r=true}if(!Array.isArray(e[0])){e=[e]}var s=e.length;var a=e[0].length;for(var o=0;o<s;o++){for(var l=0;l<a;l++){var h=e[o][l];PutTileAt_1(h,t+l,i+o,false,n)}}if(r){CalculateFacesWithin_1(t-1,i-1,a+2,s+2,n)}};var PutTilesAt_1=PutTilesAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Randomize=function(e,t,i,r,n,s){var a;var o=GetTilesWithin_1(e,t,i,r,null,s);if(n===undefined){n=[];for(a=0;a<o.length;a++){if(n.indexOf(o[a].index)===-1){n.push(o[a].index)}}}for(a=0;a<o.length;a++){o[a].index=GetRandom_1(n)}};var Randomize_1=Randomize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveTileAt=function(e,t,i,r,n){if(i===undefined){i=false}if(r===undefined){r=true}if(!IsInLayerBounds_1(e,t,n)){return null}var s=n.data[t][e];if(!s){return null}else{n.data[t][e]=i?null:new Tile_1(n,-1,e,t,s.width,s.height)}if(r&&s&&s.collides){CalculateFacesAt_1(e,t,n)}return s};var RemoveTileAt_1=RemoveTileAt;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var RemoveTileAtWorldXY=function(e,t,i,r,n,s){var a=WorldToTileX_1(e,true,n,s);var o=WorldToTileY_1(t,true,n,s);return RemoveTileAt_1(a,o,i,r,s)};var RemoveTileAtWorldXY_1=RemoveTileAtWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var defaultTileColor=new color(105,210,231,150);var defaultCollidingTileColor=new color(243,134,48,200);var defaultFaceColor=new color(40,39,37,150);var RenderDebug=function(e,t,i){if(t===undefined){t={}}var r=t.tileColor!==undefined?t.tileColor:defaultTileColor;var n=t.collidingTileColor!==undefined?t.collidingTileColor:defaultCollidingTileColor;var s=t.faceColor!==undefined?t.faceColor:defaultFaceColor;var a=GetTilesWithin_1(0,0,i.width,i.height,null,i);e.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y);e.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var o=0;o<a.length;o++){var l=a[o];var h=l.width;var u=l.height;var c=l.pixelX;var f=l.pixelY;var d=l.collides?n:r;if(d!==null){e.fillStyle(d.color,d.alpha/255);e.fillRect(c,f,h,u)}c+=1;f+=1;h-=2;u-=2;if(s!==null){e.lineStyle(1,s.color,s.alpha/255);if(l.faceTop){e.lineBetween(c,f,c+h,f)}if(l.faceRight){e.lineBetween(c+h,f,c+h,f+u)}if(l.faceBottom){e.lineBetween(c,f+u,c+h,f+u)}if(l.faceLeft){e.lineBetween(c,f,c,f+u)}}}};var RenderDebug_1=RenderDebug;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetLayerCollisionIndex=function(e,t,i){var r=i.collideIndexes.indexOf(e);if(t&&r===-1){i.collideIndexes.push(e)}else if(!t&&r!==-1){i.collideIndexes.splice(r,1)}};var SetLayerCollisionIndex_1=SetLayerCollisionIndex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCollision=function(e,t,i,r){if(t===undefined){t=true}if(i===undefined){i=true}if(!Array.isArray(e)){e=[e]}for(var n=0;n<e.length;n++){SetLayerCollisionIndex_1(e[n],t,r)}for(var s=0;s<r.height;s++){for(var a=0;a<r.width;a++){var o=r.data[s][a];if(o&&e.indexOf(o.index)!==-1){SetTileCollision_1(o,t)}}}if(i){CalculateFacesWithin_1(0,0,r.width,r.height,r)}};var SetCollision_1=SetCollision;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCollisionBetween=function(e,t,i,r,n){if(i===undefined){i=true}if(r===undefined){r=true}if(e>t){return}for(var s=e;s<=t;s++){SetLayerCollisionIndex_1(s,i,n)}for(var a=0;a<n.height;a++){for(var o=0;o<n.width;o++){var l=n.data[a][o];if(l){if(l.index>=e&&l.index<=t){SetTileCollision_1(l,i)}}}}if(r){CalculateFacesWithin_1(0,0,n.width,n.height,n)}};var SetCollisionBetween_1=SetCollisionBetween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCollisionByExclusion=function(e,t,i,r){if(t===undefined){t=true}if(i===undefined){i=true}if(!Array.isArray(e)){e=[e]}for(var n=0;n<r.height;n++){for(var s=0;s<r.width;s++){var a=r.data[n][s];if(a&&e.indexOf(a.index)===-1){SetTileCollision_1(a,t);SetLayerCollisionIndex_1(a.index,t,r)}}}if(i){CalculateFacesWithin_1(0,0,r.width,r.height,r)}};var SetCollisionByExclusion_1=SetCollisionByExclusion;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCollisionByProperty=function(e,t,i,r){if(t===undefined){t=true}if(i===undefined){i=true}for(var n=0;n<r.height;n++){for(var s=0;s<r.width;s++){var a=r.data[n][s];if(!a){continue}for(var o in e){if(!HasValue_1(a.properties,o)){continue}var l=e[o];if(!Array.isArray(l)){l=[l]}for(var h=0;h<l.length;h++){if(a.properties[o]===l[h]){SetTileCollision_1(a,t)}}}}}if(i){CalculateFacesWithin_1(0,0,r.width,r.height,r)}};var SetCollisionByProperty_1=SetCollisionByProperty;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetCollisionFromCollisionGroup=function(e,t,i){if(e===undefined){e=true}if(t===undefined){t=true}for(var r=0;r<i.height;r++){for(var n=0;n<i.width;n++){var s=i.data[r][n];if(!s){continue}var a=s.getCollisionGroup();if(a&&a.objects&&a.objects.length>0){SetTileCollision_1(s,e)}}}if(t){CalculateFacesWithin_1(0,0,i.width,i.height,i)}};var SetCollisionFromCollisionGroup_1=SetCollisionFromCollisionGroup;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTileIndexCallback=function(e,t,i,r){if(typeof e==="number"){r.callbacks[e]=t!==null?{callback:t,callbackContext:i}:undefined}else{for(var n=0,s=e.length;n<s;n++){r.callbacks[e[n]]=t!==null?{callback:t,callbackContext:i}:undefined}}};var SetTileIndexCallback_1=SetTileIndexCallback;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SetTileLocationCallback=function(e,t,i,r,n,s,a){var o=GetTilesWithin_1(e,t,i,r,null,a);for(var l=0;l<o.length;l++){o[l].setCollisionCallback(n,s)}};var SetTileLocationCallback_1=SetTileLocationCallback;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Shuffle$2=function(e,t,i,r,n){var s=GetTilesWithin_1(e,t,i,r,null,n);var a=s.map((function(e){return e.index}));Shuffle_1(a);for(var o=0;o<s.length;o++){s[o].index=a[o]}};var Shuffle_1$2=Shuffle$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var SwapByIndex=function(e,t,i,r,n,s,a){var o=GetTilesWithin_1(i,r,n,s,null,a);for(var l=0;l<o.length;l++){if(o[l]){if(o[l].index===e){o[l].index=t}else if(o[l].index===t){o[l].index=e}}}};var SwapByIndex_1=SwapByIndex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TileToWorldXY=function(e,t,i,r,n){if(i===undefined){i=new Vector2_1(0,0)}i.x=TileToWorldX_1(e,r,n);i.y=TileToWorldY_1(t,r,n);return i};var TileToWorldXY_1=TileToWorldXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WeightedRandomize=function(e,t,i,r,n,s){if(n===undefined){return}var a;var o=GetTilesWithin_1(e,t,i,r,null,s);var l=0;for(a=0;a<n.length;a++){l+=n[a].weight}if(l<=0){return}for(a=0;a<o.length;a++){var h=Math.random()*l;var u=0;var c=-1;for(var f=0;f<n.length;f++){u+=n[f].weight;if(h<=u){var d=n[f].index;c=Array.isArray(d)?d[Math.floor(Math.random()*d.length)]:d;break}}o[a].index=c}};var WeightedRandomize_1=WeightedRandomize;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var WorldToTileXY=function(e,t,i,r,n,s){if(r===undefined){r=new Vector2_1(0,0)}r.x=WorldToTileX_1(e,i,n,s);r.y=WorldToTileY_1(t,i,n,s);return r};var WorldToTileXY_1=WorldToTileXY;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var components$4={CalculateFacesAt:CalculateFacesAt_1,CalculateFacesWithin:CalculateFacesWithin_1,Copy:Copy_1,CreateFromTiles:CreateFromTiles_1,CullTiles:CullTiles_1,Fill:Fill_1,FilterTiles:FilterTiles_1,FindByIndex:FindByIndex_1,FindTile:FindTile_1,ForEachTile:ForEachTile_1,GetTileAt:GetTileAt_1,GetTileAtWorldXY:GetTileAtWorldXY_1,GetTilesWithin:GetTilesWithin_1,GetTilesWithinShape:GetTilesWithinShape_1,GetTilesWithinWorldXY:GetTilesWithinWorldXY_1,HasTileAt:HasTileAt_1,HasTileAtWorldXY:HasTileAtWorldXY_1,IsInLayerBounds:IsInLayerBounds_1,PutTileAt:PutTileAt_1,PutTileAtWorldXY:PutTileAtWorldXY_1,PutTilesAt:PutTilesAt_1,Randomize:Randomize_1,RemoveTileAt:RemoveTileAt_1,RemoveTileAtWorldXY:RemoveTileAtWorldXY_1,RenderDebug:RenderDebug_1,ReplaceByIndex:ReplaceByIndex_1,SetCollision:SetCollision_1,SetCollisionBetween:SetCollisionBetween_1,SetCollisionByExclusion:SetCollisionByExclusion_1,SetCollisionByProperty:SetCollisionByProperty_1,SetCollisionFromCollisionGroup:SetCollisionFromCollisionGroup_1,SetTileIndexCallback:SetTileIndexCallback_1,SetTileLocationCallback:SetTileLocationCallback_1,Shuffle:Shuffle_1$2,SwapByIndex:SwapByIndex_1,TileToWorldX:TileToWorldX_1,TileToWorldXY:TileToWorldXY_1,TileToWorldY:TileToWorldY_1,WeightedRandomize:WeightedRandomize_1,WorldToTileX:WorldToTileX_1,WorldToTileXY:WorldToTileXY_1,WorldToTileY:WorldToTileY_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var LayerData=new Class_1({initialize:function e(t){if(t===undefined){t={}}this.name=GetFastValue_1(t,"name","layer");this.x=GetFastValue_1(t,"x",0);this.y=GetFastValue_1(t,"y",0);this.width=GetFastValue_1(t,"width",0);this.height=GetFastValue_1(t,"height",0);this.tileWidth=GetFastValue_1(t,"tileWidth",0);this.tileHeight=GetFastValue_1(t,"tileHeight",0);this.baseTileWidth=GetFastValue_1(t,"baseTileWidth",this.tileWidth);this.baseTileHeight=GetFastValue_1(t,"baseTileHeight",this.tileHeight);this.widthInPixels=GetFastValue_1(t,"widthInPixels",this.width*this.baseTileWidth);this.heightInPixels=GetFastValue_1(t,"heightInPixels",this.height*this.baseTileHeight);this.alpha=GetFastValue_1(t,"alpha",1);this.visible=GetFastValue_1(t,"visible",true);this.properties=GetFastValue_1(t,"properties",{});this.indexes=GetFastValue_1(t,"indexes",[]);this.collideIndexes=GetFastValue_1(t,"collideIndexes",[]);this.callbacks=GetFastValue_1(t,"callbacks",[]);this.bodies=GetFastValue_1(t,"bodies",[]);this.data=GetFastValue_1(t,"data",[]);this.tilemapLayer=GetFastValue_1(t,"tilemapLayer",null)}});var LayerData_1=LayerData;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MapData=new Class_1({initialize:function e(t){if(t===undefined){t={}}this.name=GetFastValue_1(t,"name","map");this.width=GetFastValue_1(t,"width",0);this.height=GetFastValue_1(t,"height",0);this.infinite=GetFastValue_1(t,"infinite",false);this.tileWidth=GetFastValue_1(t,"tileWidth",0);this.tileHeight=GetFastValue_1(t,"tileHeight",0);this.widthInPixels=GetFastValue_1(t,"widthInPixels",this.width*this.tileWidth);this.heightInPixels=GetFastValue_1(t,"heightInPixels",this.height*this.tileHeight);this.format=GetFastValue_1(t,"format",null);this.orientation=GetFastValue_1(t,"orientation","orthogonal");this.renderOrder=GetFastValue_1(t,"renderOrder","right-down");this.version=GetFastValue_1(t,"version","1");this.properties=GetFastValue_1(t,"properties",{});this.layers=GetFastValue_1(t,"layers",[]);this.images=GetFastValue_1(t,"images",[]);this.objects=GetFastValue_1(t,"objects",{});this.collision=GetFastValue_1(t,"collision",{});this.tilesets=GetFastValue_1(t,"tilesets",[]);this.imageCollections=GetFastValue_1(t,"imageCollections",[]);this.tiles=GetFastValue_1(t,"tiles",[])}});var MapData_1=MapData;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Parse2DArray=function(e,t,i,r,n){var s=new LayerData_1({tileWidth:i,tileHeight:r});var a=new MapData_1({name:e,tileWidth:i,tileHeight:r,format:Formats.ARRAY_2D,layers:[s]});var o=[];var l=t.length;var h=0;for(var u=0;u<t.length;u++){o[u]=[];var c=t[u];for(var f=0;f<c.length;f++){var d=parseInt(c[f],10);if(isNaN(d)||d===-1){o[u][f]=n?null:new Tile_1(s,-1,f,u,i,r)}else{o[u][f]=new Tile_1(s,d,f,u,i,r)}}if(h===0){h=c.length}}a.width=s.width=h;a.height=s.height=l;a.widthInPixels=s.widthInPixels=h*i;a.heightInPixels=s.heightInPixels=l*r;s.data=o;return a};var Parse2DArray_1=Parse2DArray;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseCSV=function(e,t,i,r,n){var s=t.trim().split("\n").map((function(e){return e.split(",")}));var a=Parse2DArray_1(e,s,i,r,n);a.format=Formats.CSV;return a};var ParseCSV_1=ParseCSV;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Base64Decode=function(e){var t=window.atob(e);var i=t.length;var r=new Array(i/4);for(var n=0;n<i;n+=4){r[n/4]=(t.charCodeAt(n)|t.charCodeAt(n+1)<<8|t.charCodeAt(n+2)<<16|t.charCodeAt(n+3)<<24)>>>0}return r};var Base64Decode_1=Base64Decode;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var FLIPPED_HORIZONTAL=2147483648;var FLIPPED_VERTICAL=1073741824;var FLIPPED_ANTI_DIAGONAL=536870912;var ParseGID=function(e){var t=Boolean(e&FLIPPED_HORIZONTAL);var i=Boolean(e&FLIPPED_VERTICAL);var r=Boolean(e&FLIPPED_ANTI_DIAGONAL);e=e&~(FLIPPED_HORIZONTAL|FLIPPED_VERTICAL|FLIPPED_ANTI_DIAGONAL);var n=0;var s=false;if(t&&i&&r){n=Math.PI/2;s=true}else if(t&&i&&!r){n=Math.PI;s=false}else if(t&&!i&&r){n=Math.PI/2;s=false}else if(t&&!i&&!r){n=0;s=true}else if(!t&&i&&r){n=3*Math.PI/2;s=false}else if(!t&&i&&!r){n=Math.PI;s=true}else if(!t&&!i&&r){n=3*Math.PI/2;s=true}else if(!t&&!i&&!r){n=0;s=false}return{gid:e,flippedHorizontal:t,flippedVertical:i,flippedAntiDiagonal:r,rotation:n,flipped:s}};var ParseGID_1=ParseGID;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseTileLayers=function(e,t){var i=GetFastValue_1(e,"infinite",false);var r=[];for(var n=0;n<e.layers.length;n++){if(e.layers[n].type!=="tilelayer"){continue}var s=e.layers[n];if(s.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+s.name+"'");continue}else if(s.encoding&&s.encoding==="base64"){s.data=Base64Decode_1(s.data);delete s.encoding}var a;var o;var l;var h;var u=[];var c=0;if(i){var f=GetFastValue_1(s,"startx",0)+s.x;var d=GetFastValue_1(s,"starty",0)+s.y;a=new LayerData_1({name:s.name,x:f,y:d,width:s.width,height:s.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:s.opacity,visible:s.visible,properties:GetFastValue_1(s,"properties",{})});for(var v=0;v<s.height;v++){u.push([null]);for(var p=0;p<s.width;p++){u[v][p]=null}}for(v=0,b=s.chunks.length;v<b;v++){var g=s.chunks[v];var m=g.x-f;var _=g.y-d;var y=0;for(var T=0,x=g.data.length;T<x;T++){var E=c+m;var C=y+_;o=ParseGID_1(g.data[T]);if(o.gid>0){l=new Tile_1(a,o.gid,E,C,e.tilewidth,e.tileheight);l.rotation=o.rotation;l.flipX=o.flipped;u[C][E]=l}else{h=t?null:new Tile_1(a,-1,E,C,e.tilewidth,e.tileheight);u[C][E]=h}c++;if(c===g.width){y++;c=0}}}}else{a=new LayerData_1({name:s.name,x:GetFastValue_1(s,"offsetx",0)+s.x,y:GetFastValue_1(s,"offsety",0)+s.y,width:s.width,height:s.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:s.opacity,visible:s.visible,properties:GetFastValue_1(s,"properties",{})});var S=[];for(var A=0,b=s.data.length;A<b;A++){o=ParseGID_1(s.data[A]);if(o.gid>0){l=new Tile_1(a,o.gid,c,u.length,e.tilewidth,e.tileheight);l.rotation=o.rotation;l.flipX=o.flipped;S.push(l)}else{h=t?null:new Tile_1(a,-1,c,u.length,e.tilewidth,e.tileheight);S.push(h)}c++;if(c===s.width){u.push(S);c=0;S=[]}}}a.data=u;r.push(a)}return r};var ParseTileLayers_1=ParseTileLayers;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseImageLayers=function(e){var t=[];for(var i=0;i<e.layers.length;i++){if(e.layers[i].type!=="imagelayer"){continue}var r=e.layers[i];t.push({name:r.name,image:r.image,x:GetFastValue_1(r,"offsetx",0)+r.x,y:GetFastValue_1(r,"offsety",0)+r.y,alpha:r.opacity,visible:r.visible,properties:GetFastValue_1(r,"properties",{})})}return t};var ParseImageLayers_1=ParseImageLayers;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Tileset=new Class_1({initialize:function e(t,i,r,n,s,a,o,l){if(r===undefined||r<=0){r=32}if(n===undefined||n<=0){n=32}if(s===undefined){s=0}if(a===undefined){a=0}if(o===undefined){o={}}if(l===undefined){l={}}this.name=t;this.firstgid=i;this.tileWidth=r;this.tileHeight=n;this.tileMargin=s;this.tileSpacing=a;this.tileProperties=o;this.tileData=l;this.image=null;this.glTexture=null;this.rows=0;this.columns=0;this.total=0;this.texCoordinates=[]},getTileProperties:function(e){if(!this.containsTileIndex(e)){return null}return this.tileProperties[e-this.firstgid]},getTileData:function(e){if(!this.containsTileIndex(e)){return null}return this.tileData[e-this.firstgid]},getTileCollisionGroup:function(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function(e){if(!this.containsTileIndex(e)){return null}return this.texCoordinates[e-this.firstgid]},setImage:function(e){this.image=e;this.glTexture=e.get().source.glTexture;this.updateTileData(this.image.source[0].width,this.image.source[0].height);return this},setTileSize:function(e,t){if(e!==undefined){this.tileWidth=e}if(t!==undefined){this.tileHeight=t}if(this.image){this.updateTileData(this.image.source[0].width,this.image.source[0].height)}return this},setSpacing:function(e,t){if(e!==undefined){this.tileMargin=e}if(t!==undefined){this.tileSpacing=t}if(this.image){this.updateTileData(this.image.source[0].width,this.image.source[0].height)}return this},updateTileData:function(e,t){var i=(t-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing);var r=(e-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);if(i%1!==0||r%1!==0){console.warn("Image tile area not tile size multiple in: "+this.name)}i=Math.floor(i);r=Math.floor(r);this.rows=i;this.columns=r;this.total=i*r;this.texCoordinates.length=0;var n=this.tileMargin;var s=this.tileMargin;for(var a=0;a<this.rows;a++){for(var o=0;o<this.columns;o++){this.texCoordinates.push({x:n,y:s});n+=this.tileWidth+this.tileSpacing}n=this.tileMargin;s+=this.tileHeight+this.tileSpacing}return this}});var Tileset_1=Tileset;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ImageCollection=new Class_1({initialize:function e(t,i,r,n,s,a,o){if(r===undefined||r<=0){r=32}if(n===undefined||n<=0){n=32}if(s===undefined){s=0}if(a===undefined){a=0}this.name=t;this.firstgid=i|0;this.imageWidth=r|0;this.imageHeight=n|0;this.imageMargin=s|0;this.imageSpacing=a|0;this.properties=o||{};this.images=[];this.total=0},containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){this.images.push({gid:e,image:t});this.total++;return this}});var ImageCollection_1=ImageCollection;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Pick=function(e,t){var i={};for(var r=0;r<t.length;r++){var n=t[r];if(HasValue_1(e,n)){i[n]=e[n]}}return i};var Pick_1=Pick;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var copyPoints=function(e){return{x:e.x,y:e.y}};var commonObjectProps=["id","name","type","rotation","properties","visible","x","y","width","height"];var ParseObject=function(e,t,i){if(t===undefined){t=0}if(i===undefined){i=0}var r=Pick_1(e,commonObjectProps);r.x+=t;r.y+=i;if(e.gid){var n=ParseGID_1(e.gid);r.gid=n.gid;r.flippedHorizontal=n.flippedHorizontal;r.flippedVertical=n.flippedVertical;r.flippedAntiDiagonal=n.flippedAntiDiagonal}else if(e.polyline){r.polyline=e.polyline.map(copyPoints)}else if(e.polygon){r.polygon=e.polygon.map(copyPoints)}else if(e.ellipse){r.ellipse=e.ellipse;r.width=e.width;r.height=e.height}else if(e.text){r.width=e.width;r.height=e.height;r.text=e.text}else{r.rectangle=true;r.width=e.width;r.height=e.height}return r};var ParseObject_1=ParseObject;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseTilesets=function(e){var t=[];var i=[];var r=null;var n;for(var s=0;s<e.tilesets.length;s++){var a=e.tilesets[s];if(a.source){console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.")}else if(a.image){var o=new Tileset_1(a.name,a.firstgid,a.tilewidth,a.tileheight,a.margin,a.spacing);if(e.version>1){if(Array.isArray(a.tiles)){var l={};var h={};for(var u=0;u<a.tiles.length;u++){var c=a.tiles[u];if(c.properties){var f={};c.properties.forEach((function(e){f[e["name"]]=e["value"]}));h[c.id]=f}if(c.objectgroup){l[c.id]={objectgroup:c.objectgroup};if(c.objectgroup.objects){var d=c.objectgroup.objects.map((function(e){return ParseObject_1(e)}));l[c.id].objectgroup.objects=d}}if(c.animation){if(l.hasOwnProperty(c.id)){l[c.id].animation=c.animation}else{l[c.id]={animation:c.animation}}}}o.tileData=l;o.tileProperties=h}}else{if(a.tileproperties){o.tileProperties=a.tileproperties}if(a.tiles){o.tileData=a.tiles;for(n in o.tileData){var v=o.tileData[n].objectgroup;if(v&&v.objects){var p=v.objects.map((function(e){return ParseObject_1(e)}));o.tileData[n].objectgroup.objects=p}}}}o.updateTileData(a.imagewidth,a.imageheight);t.push(o)}else{var g=new ImageCollection_1(a.name,a.firstgid,a.tilewidth,a.tileheight,a.margin,a.spacing,a.properties);for(n in a.tiles){var m=a.tiles[n].image;var _=a.firstgid+parseInt(n,10);g.addImage(_,m)}i.push(g)}if(r){r.lastgid=a.firstgid-1}r=a}return{tilesets:t,imageCollections:i}};var ParseTilesets_1=ParseTilesets;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ObjectLayer=new Class_1({initialize:function e(t){if(t===undefined){t={}}this.name=GetFastValue_1(t,"name","object layer");this.opacity=GetFastValue_1(t,"opacity",1);this.properties=GetFastValue_1(t,"properties",{});this.propertyTypes=GetFastValue_1(t,"propertytypes",{});this.type=GetFastValue_1(t,"type","objectgroup");this.visible=GetFastValue_1(t,"visible",true);this.objects=GetFastValue_1(t,"objects",[])}});var ObjectLayer_1=ObjectLayer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseObjectLayers=function(e){var t=[];for(var i=0;i<e.layers.length;i++){if(e.layers[i].type!=="objectgroup"){continue}var r=e.layers[i];var n=GetFastValue_1(r,"offsetx",0);var s=GetFastValue_1(r,"offsety",0);var a=[];for(var o=0;o<r.objects.length;o++){var l=ParseObject_1(r.objects[o],n,s);a.push(l)}var h=new ObjectLayer_1(r);h.objects=a;t.push(h)}return t};var ParseObjectLayers_1=ParseObjectLayers;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var BuildTilesetIndex=function(e){var t=[];for(var i=0;i<e.tilesets.length;i++){var r=e.tilesets[i];var n=r.tileMargin;var s=r.tileMargin;var a=0;var o=0;var l=0;for(var h=r.firstgid;h<r.firstgid+r.total;h++){t[h]=[n,s,i];n+=r.tileWidth+r.tileSpacing;a++;if(a===r.total){break}o++;if(o===r.columns){n=r.tileMargin;s+=r.tileHeight+r.tileSpacing;o=0;l++;if(l===r.rows){break}}}}return t};var BuildTilesetIndex_1=BuildTilesetIndex;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var AssignTileProperties=function(e){var t;var i;var r;var n;var s;for(var a=0;a<e.layers.length;a++){t=e.layers[a];n=null;for(var o=0;o<t.data.length;o++){s=t.data[o];for(var l=0;l<s.length;l++){i=s[l];if(i===null||i.index<0){continue}r=e.tiles[i.index][2];n=e.tilesets[r];i.width=n.tileWidth;i.height=n.tileHeight;if(n.tileProperties&&n.tileProperties[i.index-n.firstgid]){i.properties=Extend_1(i.properties,n.tileProperties[i.index-n.firstgid])}}}}};var AssignTileProperties_1=AssignTileProperties;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseJSONTiled=function(e,t,i){if(t.orientation!=="orthogonal"){console.warn("Only orthogonal map types are supported in this version of Phaser");return null}var r=new MapData_1({width:t.width,height:t.height,name:e,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:t.orientation,format:Formats.TILED_JSON,version:t.version,properties:t.properties,renderOrder:t.renderorder,infinite:t.infinite});r.layers=ParseTileLayers_1(t,i);r.images=ParseImageLayers_1(t);var n=ParseTilesets_1(t);r.tilesets=n.tilesets;r.imageCollections=n.imageCollections;r.objects=ParseObjectLayers_1(t);r.tiles=BuildTilesetIndex_1(r);AssignTileProperties_1(r);return r};var ParseJSONTiled_1=ParseJSONTiled;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseTileLayers$1=function(e,t){var i=[];for(var r=0;r<e.layer.length;r++){var n=e.layer[r];var s=new LayerData_1({name:n.name,width:n.width,height:n.height,tileWidth:n.tilesize,tileHeight:n.tilesize,visible:n.visible===1});var a=[];var o=[];for(var l=0;l<n.data.length;l++){for(var h=0;h<n.data[l].length;h++){var u=n.data[l][h]-1;var c;if(u>-1){c=new Tile_1(s,u,h,l,n.tilesize,n.tilesize)}else{c=t?null:new Tile_1(s,-1,h,l,n.tilesize,n.tilesize)}a.push(c)}o.push(a);a=[]}s.data=o;i.push(s)}return i};var ParseTileLayers_1$1=ParseTileLayers$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseTilesets$1=function(e){var t=[];var i=[];for(var r=0;r<e.layer.length;r++){var n=e.layer[r];var s=n.tilesetName;if(s!==""&&i.indexOf(s)===-1){i.push(s);t.push(new Tileset_1(s,0,n.tilesize,n.tilesize,0,0))}}return t};var ParseTilesets_1$1=ParseTilesets$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseWeltmeister=function(e,t,i){if(t.layer.length===0){console.warn("No layers found in the Weltmeister map: "+e);return null}var r=0;var n=0;for(var s=0;s<t.layer.length;s++){if(t.layer[s].width>r){r=t.layer[s].width}if(t.layer[s].height>n){n=t.layer[s].height}}var a=new MapData_1({width:r,height:n,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:Formats.WELTMEISTER});a.layers=ParseTileLayers_1$1(t,i);a.tilesets=ParseTilesets_1$1(t);return a};var ParseWeltmeister_1=ParseWeltmeister;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Parse=function(e,t,i,r,n,s){var a;switch(t){case Formats.ARRAY_2D:a=Parse2DArray_1(e,i,r,n,s);break;case Formats.CSV:a=ParseCSV_1(e,i,r,n,s);break;case Formats.TILED_JSON:a=ParseJSONTiled_1(e,i,s);break;case Formats.WELTMEISTER:a=ParseWeltmeister_1(e,i,s);break;default:console.warn("Unrecognized tilemap data format: "+t);a=null}return a};var Parse_1=Parse;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var impact$1={ParseTileLayers:ParseTileLayers_1$1,ParseTilesets:ParseTilesets_1$1,ParseWeltmeister:ParseWeltmeister_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tiled={AssignTileProperties:AssignTileProperties_1,Base64Decode:Base64Decode_1,BuildTilesetIndex:BuildTilesetIndex_1,ParseGID:ParseGID_1,ParseImageLayers:ParseImageLayers_1,ParseJSONTiled:ParseJSONTiled_1,ParseObject:ParseObject_1,ParseObjectLayers:ParseObjectLayers_1,ParseTileLayers:ParseTileLayers_1,ParseTilesets:ParseTilesets_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var parsers$1={Parse:Parse_1,Parse2DArray:Parse2DArray_1,ParseCSV:ParseCSV_1,Impact:impact$1,Tiled:tiled};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicTilemapLayerWebGLRenderer=function(e,t,i,r){t.cull(r);var n=t.culledTiles;var s=n.length;var a=r.alpha*t.alpha;if(s===0||a<=0){return}var o=t.gidMap;var l=t.pipeline;var h=Utils.getTintAppendFloatAlpha;var u=t.scrollFactorX;var c=t.scrollFactorY;var f=t.x;var d=t.y;var v=t.scaleX;var p=t.scaleY;var g=t.tileset;for(var m=0;m<g.length;m++){var _=g[m];var y=_.glTexture;for(var T=0;T<s;T++){var x=n[T];var E=o[x.index];if(E!==_){continue}var C=E.getTileTextureCoordinates(x.index);if(C===null){continue}var S=x.width;var A=x.height;var b=C.x;var w=C.y;var P=x.width*.5;var R=x.height*.5;var O=h(x.tint,a*x.alpha);l.batchTexture(t,y,y.width,y.height,f+(P+x.pixelX)*v,d+(R+x.pixelY)*p,x.width,x.height,v,p,x.rotation,x.flipX,x.flipY,u,c,P,R,b,w,S,A,O,O,O,O,false,0,0,r,null,true)}}};var DynamicTilemapLayerWebGLRenderer_1=DynamicTilemapLayerWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicTilemapLayerCanvasRenderer=function(e,t,i,r,n){t.cull(r);var s=t.culledTiles;var a=s.length;if(a===0){return}var o=e._tempMatrix1;var l=e._tempMatrix2;var h=e._tempMatrix3;l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);o.copyFrom(r.matrix);var u=e.currentContext;var c=t.gidMap;u.save();if(n){o.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);l.e=t.x;l.f=t.y;o.multiply(l,h);h.copyToContext(u)}else{l.e-=r.scrollX*t.scrollFactorX;l.f-=r.scrollY*t.scrollFactorY;l.copyToContext(u)}var f=r.alpha*t.alpha;for(var d=0;d<a;d++){var v=s[d];var p=c[v.index];if(!p){continue}var g=p.image.getSourceImage();var m=p.getTileTextureCoordinates(v.index);if(m){var _=v.width/2;var y=v.height/2;u.save();u.translate(v.pixelX+_,v.pixelY+y);if(v.rotation!==0){u.rotate(v.rotation)}if(v.flipX||v.flipY){u.scale(v.flipX?-1:1,v.flipY?-1:1)}u.globalAlpha=f*v.alpha;u.drawImage(g,m.x,m.y,v.width,v.height,-_,-y,v.width,v.height);u.restore()}}u.restore()};var DynamicTilemapLayerCanvasRenderer_1=DynamicTilemapLayerCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$q=NOOP_1;var renderCanvas$q=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$q=DynamicTilemapLayerWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$q=DynamicTilemapLayerCanvasRenderer_1}var DynamicTilemapLayerRender={renderWebGL:renderWebGL$q,renderCanvas:renderCanvas$q};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var DynamicTilemapLayer=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Depth,components.Flip,components.GetBounds,components.Origin,components.Pipeline,components.Transform,components.Visible,components.ScrollFactor,DynamicTilemapLayerRender],initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t,"DynamicTilemapLayer");this.isTilemap=true;this.tilemap=i;this.layerIndex=r;this.layer=i.layers[r];this.layer.tilemapLayer=this;this.tileset=[];this.culledTiles=[];this.skipCull=false;this.tilesDrawn=0;this.tilesTotal=this.layer.width*this.layer.height;this.cullPaddingX=1;this.cullPaddingY=1;this.cullCallback=components$4.CullTiles;this._renderOrder=0;this.gidMap=[];this.setTilesets(n);this.setAlpha(this.layer.alpha);this.setPosition(s,a);this.setOrigin();this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height);this.initPipeline("TextureTintPipeline")},setTilesets:function(e){var t=[];var i=[];var r=this.tilemap;if(!Array.isArray(e)){e=[e]}for(var n=0;n<e.length;n++){var s=e[n];if(typeof s==="string"){s=r.getTileset(s)}if(s){i.push(s);var a=s.firstgid;for(var o=0;o<s.total;o++){t[a+o]=s}}}this.gidMap=t;this.tileset=i},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];if(typeof e==="string"){e=t.indexOf(e)}if(e>=0&&e<4){this._renderOrder=e}return this},calculateFacesAt:function(e,t){components$4.CalculateFacesAt(e,t,this.layer);return this},calculateFacesWithin:function(e,t,i,r){components$4.CalculateFacesWithin(e,t,i,r,this.layer);return this},createFromTiles:function(e,t,i,r,n){return components$4.CreateFromTiles(e,t,i,r,n,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function(e,t,i,r,n,s,a){components$4.Copy(e,t,i,r,n,s,a,this.layer);return this},destroy:function(e){if(e===undefined){e=true}if(!this.tilemap){return}if(this.layer.tilemapLayer===this){this.layer.tilemapLayer=undefined}if(e){this.tilemap.removeLayer(this)}this.tilemap=undefined;this.layer=undefined;this.culledTiles.length=0;this.cullCallback=null;this.gidMap=[];this.tileset=[];GameObject_1.prototype.destroy.call(this)},fill:function(e,t,i,r,n,s){components$4.Fill(e,t,i,r,n,s,this.layer);return this},filterTiles:function(e,t,i,r,n,s,a){return components$4.FilterTiles(e,t,i,r,n,s,a,this.layer)},findByIndex:function(e,t,i){return components$4.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,n,s,a){return components$4.FindTile(e,t,i,r,n,s,a,this.layer)},forEachTile:function(e,t,i,r,n,s,a){components$4.ForEachTile(e,t,i,r,n,s,a,this.layer);return this},getTileAt:function(e,t,i){return components$4.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return components$4.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,n){return components$4.GetTilesWithin(e,t,i,r,n,this.layer)},getTilesWithinShape:function(e,t,i){return components$4.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,n,s){return components$4.GetTilesWithinWorldXY(e,t,i,r,n,s,this.layer)},hasTileAt:function(e,t){return components$4.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return components$4.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function(e,t,i,r){return components$4.PutTileAt(e,t,i,r,this.layer)},putTileAtWorldXY:function(e,t,i,r,n){return components$4.PutTileAtWorldXY(e,t,i,r,n,this.layer)},putTilesAt:function(e,t,i,r){components$4.PutTilesAt(e,t,i,r,this.layer);return this},randomize:function(e,t,i,r,n){components$4.Randomize(e,t,i,r,n,this.layer);return this},removeTileAt:function(e,t,i,r){return components$4.RemoveTileAt(e,t,i,r,this.layer)},removeTileAtWorldXY:function(e,t,i,r,n){return components$4.RemoveTileAtWorldXY(e,t,i,r,n,this.layer)},renderDebug:function(e,t){components$4.RenderDebug(e,t,this.layer);return this},replaceByIndex:function(e,t,i,r,n,s){components$4.ReplaceByIndex(e,t,i,r,n,s,this.layer);return this},setSkipCull:function(e){if(e===undefined){e=true}this.skipCull=e;return this},setCullPadding:function(e,t){if(e===undefined){e=1}if(t===undefined){t=1}this.cullPaddingX=e;this.cullPaddingY=t;return this},setCollision:function(e,t,i){components$4.SetCollision(e,t,i,this.layer);return this},setCollisionBetween:function(e,t,i,r){components$4.SetCollisionBetween(e,t,i,r,this.layer);return this},setCollisionByProperty:function(e,t,i){components$4.SetCollisionByProperty(e,t,i,this.layer);return this},setCollisionByExclusion:function(e,t,i){components$4.SetCollisionByExclusion(e,t,i,this.layer);return this},setCollisionFromCollisionGroup:function(e,t){components$4.SetCollisionFromCollisionGroup(e,t,this.layer);return this},setTileIndexCallback:function(e,t,i){components$4.SetTileIndexCallback(e,t,i,this.layer);return this},setTileLocationCallback:function(e,t,i,r,n,s){components$4.SetTileLocationCallback(e,t,i,r,n,s,this.layer);return this},shuffle:function(e,t,i,r){components$4.Shuffle(e,t,i,r,this.layer);return this},swapByIndex:function(e,t,i,r,n,s){components$4.SwapByIndex(e,t,i,r,n,s,this.layer);return this},tileToWorldX:function(e,t){return components$4.TileToWorldX(e,t,this.layer)},tileToWorldY:function(e,t){return components$4.TileToWorldY(e,t,this.layer)},tileToWorldXY:function(e,t,i,r){return components$4.TileToWorldXY(e,t,i,r,this.layer)},weightedRandomize:function(e,t,i,r,n){components$4.WeightedRandomize(e,t,i,r,n,this.layer);return this},worldToTileX:function(e,t,i){return components$4.WorldToTileX(e,t,i,this.layer)},worldToTileY:function(e,t,i){return components$4.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function(e,t,i,r,n){return components$4.WorldToTileXY(e,t,i,r,n,this.layer)}});var DynamicTilemapLayer_1=DynamicTilemapLayer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaticTilemapLayerWebGLRenderer=function(e,t,i,r){var n=t.tileset;var s=t.pipeline;var a=s.vertexBuffer;e.setPipeline(s);s.modelIdentity();s.modelTranslate(t.x-r.scrollX*t.scrollFactorX,t.y-r.scrollY*t.scrollFactorY,0);s.modelScale(t.scaleX,t.scaleY,1);s.viewLoad2D(r.matrix.matrix);for(var o=0;o<n.length;o++){t.upload(r,o);if(t.vertexCount[o]>0){if(e.currentPipeline&&e.currentPipeline.vertexCount>0){e.flush()}s.vertexBuffer=t.vertexBuffer[o];e.setPipeline(s);e.setTexture2D(n[o].glTexture,0);e.gl.drawArrays(s.topology,0,t.vertexCount[o])}}s.vertexBuffer=a;s.viewIdentity();s.modelIdentity()};var StaticTilemapLayerWebGLRenderer_1=StaticTilemapLayerWebGLRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaticTilemapLayerCanvasRenderer=function(e,t,i,r,n){t.cull(r);var s=t.culledTiles;var a=s.length;if(a===0){return}var o=e._tempMatrix1;var l=e._tempMatrix2;var h=e._tempMatrix3;l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);o.copyFrom(r.matrix);var u=e.currentContext;var c=t.gidMap;u.save();if(n){o.multiplyWithOffset(n,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);l.e=t.x;l.f=t.y;o.multiply(l,h);h.copyToContext(u)}else{l.e-=r.scrollX*t.scrollFactorX;l.f-=r.scrollY*t.scrollFactorY;l.copyToContext(u)}var f=r.alpha*t.alpha;u.globalAlpha=r.alpha*t.alpha;for(var d=0;d<a;d++){var v=s[d];var p=c[v.index];if(!p){continue}var g=p.image.getSourceImage();var m=p.getTileTextureCoordinates(v.index);if(m){var _=p.tileWidth;var y=p.tileHeight;var T=_/2;var x=y/2;u.save();u.translate(v.pixelX+T,v.pixelY+x);if(v.rotation!==0){u.rotate(v.rotation)}if(v.flipX||v.flipY){u.scale(v.flipX?-1:1,v.flipY?-1:1)}u.globalAlpha=f*v.alpha;u.drawImage(g,m.x,m.y,_,y,-T,-x,_,y);u.restore()}}u.restore()};var StaticTilemapLayerCanvasRenderer_1=StaticTilemapLayerCanvasRenderer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var renderWebGL$r=NOOP_1;var renderCanvas$r=NOOP_1;if(typeof WEBGL_RENDERER){renderWebGL$r=StaticTilemapLayerWebGLRenderer_1}if(typeof CANVAS_RENDERER){renderCanvas$r=StaticTilemapLayerCanvasRenderer_1}var StaticTilemapLayerRender={renderWebGL:renderWebGL$r,renderCanvas:renderCanvas$r};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaticTilemapLayer=new Class_1({Extends:GameObject_1,Mixins:[components.Alpha,components.BlendMode,components.ComputedSize,components.Depth,components.Flip,components.GetBounds,components.Origin,components.Pipeline,components.Transform,components.Visible,components.ScrollFactor,StaticTilemapLayerRender],initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t,"StaticTilemapLayer");this.isTilemap=true;this.tilemap=i;this.layerIndex=r;this.layer=i.layers[r];this.layer.tilemapLayer=this;this.tileset=[];this.culledTiles=[];this.skipCull=false;this.tilesDrawn=0;this.tilesTotal=this.layer.width*this.layer.height;this.cullPaddingX=1;this.cullPaddingY=1;this.cullCallback=components$4.CullTiles;this.renderer=t.sys.game.renderer;this.vertexBuffer=[];this.bufferData=[];this.vertexViewF32=[];this.vertexViewU32=[];this.dirty=[];this.vertexCount=[];this._renderOrder=0;this._tempMatrix=new TransformMatrix_1;this.gidMap=[];this.setTilesets(n);this.setAlpha(this.layer.alpha);this.setPosition(s,a);this.setOrigin();this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height);this.updateVBOData();this.initPipeline("TextureTintPipeline");t.sys.game.events.on(events$1.CONTEXT_RESTORED,(function(){this.updateVBOData()}),this)},setTilesets:function(e){var t=[];var i=[];var r=this.tilemap;if(!Array.isArray(e)){e=[e]}for(var n=0;n<e.length;n++){var s=e[n];if(typeof s==="string"){s=r.getTileset(s)}if(s){i.push(s);var a=s.firstgid;for(var o=0;o<s.total;o++){t[a+o]=s}}}this.gidMap=t;this.tileset=i},updateVBOData:function(){for(var e=0;e<this.tileset.length;e++){this.dirty[e]=true;this.vertexCount[e]=0;this.vertexBuffer[e]=null;this.bufferData[e]=null;this.vertexViewF32[e]=null;this.vertexViewU32[e]=null}return this},upload:function(e,t){var i=this.renderer;var r=i.gl;var n=i.pipelines.TextureTintPipeline;if(this.dirty[t]){var s=this.tileset[t];var a=this.layer.width;var o=this.layer.height;var l=s.image.source[0].width;var h=s.image.source[0].height;var u=this.layer.data;var c;var f;var d;var v=this._renderOrder;var p=s.firstgid;var g=s.firstgid+s.total;var m=this.vertexBuffer[t];var _=this.bufferData[t];var y=-1;var T=a*o*n.vertexSize*6;this.vertexCount[t]=0;if(_===null){_=new ArrayBuffer(T);this.bufferData[t]=_;this.vertexViewF32[t]=new Float32Array(_);this.vertexViewU32[t]=new Uint32Array(_)}if(v===0){for(f=0;f<o;f++){for(d=0;d<a;d++){c=u[f][d];if(!c||c.index<p||c.index>g||!c.visible){continue}y=this.batchTile(y,c,s,l,h,e,t)}}}else if(v===1){for(f=0;f<o;f++){for(d=a-1;d>=0;d--){c=u[f][d];if(!c||c.index<p||c.index>g||!c.visible){continue}y=this.batchTile(y,c,s,l,h,e,t)}}}else if(v===2){for(f=o-1;f>=0;f--){for(d=0;d<a;d++){c=u[f][d];if(!c||c.index<p||c.index>g||!c.visible){continue}y=this.batchTile(y,c,s,l,h,e,t)}}}else if(v===3){for(f=o-1;f>=0;f--){for(d=a-1;d>=0;d--){c=u[f][d];if(!c||c.index<p||c.index>g||!c.visible){continue}y=this.batchTile(y,c,s,l,h,e,t)}}}this.dirty[t]=false;if(m===null){m=i.createVertexBuffer(_,r.STATIC_DRAW);this.vertexBuffer[t]=m}else{i.setVertexBuffer(m);r.bufferSubData(r.ARRAY_BUFFER,0,_)}}return this},batchTile:function(e,t,i,r,n,s,a){var o=i.getTileTextureCoordinates(t.index);if(!o){return e}var l=i.tileWidth;var h=i.tileHeight;var u=l/2;var c=h/2;var f=o.x/r;var d=o.y/n;var v=(o.x+l)/r;var p=(o.y+h)/n;var g=this._tempMatrix;var m=-u;var _=-c;if(t.flipX){l*=-1;m+=i.tileWidth}if(t.flipY){h*=-1;_+=i.tileHeight}var y=m+l;var T=_+h;g.applyITRS(u+t.pixelX,c+t.pixelY,t.rotation,1,1);var x=Utils.getTintAppendFloatAlpha(16777215,s.alpha*this.alpha*t.alpha);var E=g.getX(m,_);var C=g.getY(m,_);var S=g.getX(m,T);var A=g.getY(m,T);var b=g.getX(y,T);var w=g.getY(y,T);var P=g.getX(y,_);var R=g.getY(y,_);if(s.roundPixels){E=Math.round(E);C=Math.round(C);S=Math.round(S);A=Math.round(A);b=Math.round(b);w=Math.round(w);P=Math.round(P);R=Math.round(R)}var O=this.vertexViewF32[a];var M=this.vertexViewU32[a];O[++e]=E;O[++e]=C;O[++e]=f;O[++e]=d;O[++e]=0;M[++e]=x;O[++e]=S;O[++e]=A;O[++e]=f;O[++e]=p;O[++e]=0;M[++e]=x;O[++e]=b;O[++e]=w;O[++e]=v;O[++e]=p;O[++e]=0;M[++e]=x;O[++e]=E;O[++e]=C;O[++e]=f;O[++e]=d;O[++e]=0;M[++e]=x;O[++e]=b;O[++e]=w;O[++e]=v;O[++e]=p;O[++e]=0;M[++e]=x;O[++e]=P;O[++e]=R;O[++e]=v;O[++e]=d;O[++e]=0;M[++e]=x;this.vertexCount[a]+=6;return e},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];if(typeof e==="string"){e=t.indexOf(e)}if(e>=0&&e<4){this._renderOrder=e;for(var i=0;i<this.tileset.length;i++){this.dirty[i]=true}}return this},calculateFacesAt:function(e,t){components$4.CalculateFacesAt(e,t,this.layer);return this},calculateFacesWithin:function(e,t,i,r){components$4.CalculateFacesWithin(e,t,i,r,this.layer);return this},createFromTiles:function(e,t,i,r,n){return components$4.CreateFromTiles(e,t,i,r,n,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles)},setSkipCull:function(e){if(e===undefined){e=true}this.skipCull=e;return this},setCullPadding:function(e,t){if(e===undefined){e=1}if(t===undefined){t=1}this.cullPaddingX=e;this.cullPaddingY=t;return this},findByIndex:function(e,t,i){return components$4.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,n,s,a){return components$4.FindTile(e,t,i,r,n,s,a,this.layer)},filterTiles:function(e,t,i,r,n,s,a){return components$4.FilterTiles(e,t,i,r,n,s,a,this.layer)},forEachTile:function(e,t,i,r,n,s,a){components$4.ForEachTile(e,t,i,r,n,s,a,this.layer);return this},getTileAt:function(e,t,i){return components$4.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return components$4.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,n){return components$4.GetTilesWithin(e,t,i,r,n,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,n,s){return components$4.GetTilesWithinWorldXY(e,t,i,r,n,s,this.layer)},getTilesWithinShape:function(e,t,i){return components$4.GetTilesWithinShape(e,t,i,this.layer)},hasTileAt:function(e,t){return components$4.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return components$4.HasTileAtWorldXY(e,t,i,this.layer)},renderDebug:function(e,t){components$4.RenderDebug(e,t,this.layer);return this},setCollision:function(e,t,i){components$4.SetCollision(e,t,i,this.layer);return this},setCollisionBetween:function(e,t,i,r){components$4.SetCollisionBetween(e,t,i,r,this.layer);return this},setCollisionByProperty:function(e,t,i){components$4.SetCollisionByProperty(e,t,i,this.layer);return this},setCollisionByExclusion:function(e,t,i){components$4.SetCollisionByExclusion(e,t,i,this.layer);return this},setTileIndexCallback:function(e,t,i){components$4.SetTileIndexCallback(e,t,i,this.layer);return this},setCollisionFromCollisionGroup:function(e,t){components$4.SetCollisionFromCollisionGroup(e,t,this.layer);return this},setTileLocationCallback:function(e,t,i,r,n,s){components$4.SetTileLocationCallback(e,t,i,r,n,s,this.layer);return this},tileToWorldX:function(e,t){return components$4.TileToWorldX(e,t,this.layer)},tileToWorldY:function(e,t){return components$4.TileToWorldY(e,t,this.layer)},tileToWorldXY:function(e,t,i,r){return components$4.TileToWorldXY(e,t,i,r,this.layer)},worldToTileX:function(e,t,i){return components$4.WorldToTileX(e,t,i,this.layer)},worldToTileY:function(e,t,i){return components$4.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function(e,t,i,r,n){return components$4.WorldToTileXY(e,t,i,r,n,this.layer)},destroy:function(e){if(e===undefined){e=true}if(!this.tilemap){return}if(this.layer.tilemapLayer===this){this.layer.tilemapLayer=undefined}if(e){this.tilemap.removeLayer(this)}this.tilemap=undefined;this.layer=undefined;this.culledTiles.length=0;this.cullCallback=null;for(var t=0;t<this.tileset.length;t++){this.dirty[t]=true;this.vertexCount[t]=0;this.vertexBuffer[t]=null;this.bufferData[t]=null;this.vertexViewF32[t]=null;this.vertexViewU32[t]=null}this.gidMap=[];this.tileset=[];GameObject_1.prototype.destroy.call(this)}});var StaticTilemapLayer_1=StaticTilemapLayer;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Tilemap=new Class_1({initialize:function e(t,i){this.scene=t;this.tileWidth=i.tileWidth;this.tileHeight=i.tileHeight;this.width=i.width;this.height=i.height;this.orientation=i.orientation;this.renderOrder=i.renderOrder;this.format=i.format;this.version=i.version;this.properties=i.properties;this.widthInPixels=i.widthInPixels;this.heightInPixels=i.heightInPixels;this.imageCollections=i.imageCollections;this.images=i.images;this.layers=i.layers;this.tilesets=i.tilesets;this.objects=i.objects;this.currentLayerIndex=0},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];if(typeof e==="number"){e=t[e]}if(t.indexOf(e)>-1){this.renderOrder=e}return this},addTilesetImage:function(e,t,i,r,n,s,a){if(e===undefined){return null}if(t===undefined||t===null){t=e}if(!this.scene.sys.textures.exists(t)){console.warn("Invalid Tileset Image: "+t);return null}var o=this.scene.sys.textures.get(t);var l=this.getTilesetIndex(e);if(l===null&&this.format===Formats.TILED_JSON){console.warn("No data found for Tileset: "+e);return null}var h=this.tilesets[l];if(h){h.setTileSize(i,r);h.setSpacing(n,s);h.setImage(o);return h}if(i===undefined){i=this.tileWidth}if(r===undefined){r=this.tileHeight}if(n===undefined){n=0}if(s===undefined){s=0}if(a===undefined){a=0}h=new Tileset_1(e,a,i,r,n,s);h.setImage(o);this.tilesets.push(h);return h},convertLayerToStatic:function(e){e=this.getLayer(e);if(e===null){return null}var t=e.tilemapLayer;if(!t||!(t instanceof DynamicTilemapLayer_1)){return null}var i=new StaticTilemapLayer_1(t.scene,t.tilemap,t.layerIndex,t.tileset,t.x,t.y);this.scene.sys.displayList.add(i);t.destroy();return i},copy:function(e,t,i,r,n,s,a,o){o=this.getLayer(o);if(this._isStaticCall(o,"copy")){return this}if(o!==null){components$4.Copy(e,t,i,r,n,s,a,o);return this}else{return null}},createBlankDynamicLayer:function(e,t,i,r,n,s,a,o){if(i===undefined){i=0}if(r===undefined){r=0}if(n===undefined){n=this.width}if(s===undefined){s=this.height}if(a===undefined){a=this.tileWidth}if(o===undefined){o=this.tileHeight}var l=this.getLayerIndex(e);if(l!==null){console.warn("Invalid Tilemap Layer ID: "+e);return null}var h=new LayerData_1({name:e,tileWidth:a,tileHeight:o,width:n,height:s});var u;for(var c=0;c<s;c++){u=[];for(var f=0;f<n;f++){u.push(new Tile_1(h,-1,f,c,a,o,this.tileWidth,this.tileHeight))}h.data.push(u)}this.layers.push(h);this.currentLayerIndex=this.layers.length-1;var d=new DynamicTilemapLayer_1(this.scene,this,this.currentLayerIndex,t,i,r);d.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(d);return d},createDynamicLayer:function(e,t,i,r){var n=this.getLayerIndex(e);if(n===null){console.warn("Invalid Tilemap Layer ID: "+e);return null}var s=this.layers[n];if(s.tilemapLayer){console.warn("Tilemap Layer ID already exists:"+e);return null}this.currentLayerIndex=n;if(i===undefined){i=s.x}if(r===undefined){r=s.y}var a=new DynamicTilemapLayer_1(this.scene,this,n,t,i,r);a.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(a);return a},createFromObjects:function(e,t,i,r){if(i===undefined){i={}}if(r===undefined){r=this.scene}var n=this.getObjectLayer(e);if(!n){console.warn("Cannot create from object. Invalid objectgroup name given: "+e);return}var s=n.objects;var a=[];for(var o=0;o<s.length;o++){var l=false;var h=s[o];if(h.gid!==undefined&&typeof t==="number"&&h.gid===t||h.id!==undefined&&typeof t==="number"&&h.id===t||h.name!==undefined&&typeof t==="string"&&h.name===t){l=true}if(l){var u=Extend_1({},i,h.properties);u.x=h.x;u.y=h.y;var c=r.make.sprite(u);c.name=h.name;if(h.width){c.displayWidth=h.width}if(h.height){c.displayHeight=h.height}var f={x:c.originX*c.displayWidth,y:(c.originY-1)*c.displayHeight};if(h.rotation){var d=DegToRad_1(h.rotation);Rotate_1$1(f,d);c.rotation=d}c.x+=f.x;c.y+=f.y;if(h.flippedHorizontal!==undefined||h.flippedVertical!==undefined){c.setFlip(h.flippedHorizontal,h.flippedVertical)}if(!h.visible){c.visible=false}for(var v in h.properties){if(c.hasOwnProperty(v)){continue}c.setData(v,h.properties[v])}a.push(c)}}return a},createFromTiles:function(e,t,i,r,n,s){s=this.getLayer(s);if(s===null){return null}return components$4.CreateFromTiles(e,t,i,r,n,s)},createStaticLayer:function(e,t,i,r){var n=this.getLayerIndex(e);if(n===null){console.warn("Invalid Tilemap Layer ID: "+e);return null}var s=this.layers[n];if(s.tilemapLayer){console.warn("Tilemap Layer ID already exists:"+e);return null}this.currentLayerIndex=n;if(i===undefined&&this.layers[n].x){i=this.layers[n].x}if(r===undefined&&this.layers[n].y){r=this.layers[n].y}var a=new StaticTilemapLayer_1(this.scene,this,n,t,i,r);a.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(a);return a},destroy:function(){this.removeAllLayers();this.tilesets.length=0;this.objects.length=0;this.scene=undefined},fill:function(e,t,i,r,n,s,a){a=this.getLayer(a);if(a===null){return null}if(this._isStaticCall(a,"fill")){return this}components$4.Fill(e,t,i,r,n,s,a);return this},filterObjects:function(e,t,i){if(typeof e==="string"){var r=e;e=this.getObjectLayer(e);if(!e){console.warn("No object layer found with the name: "+r);return null}}return e.objects.filter(t,i)},filterTiles:function(e,t,i,r,n,s,a,o){o=this.getLayer(o);if(o===null){return null}return components$4.FilterTiles(e,t,i,r,n,s,a,o)},findByIndex:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.FindByIndex(e,t,i,r)},findObject:function(e,t,i){if(typeof e==="string"){var r=e;e=this.getObjectLayer(e);if(!e){console.warn("No object layer found with the name: "+r);return null}}return e.objects.find(t,i)||null},findTile:function(e,t,i,r,n,s,a,o){o=this.getLayer(o);if(o===null){return null}return components$4.FindTile(e,t,i,r,n,s,a,o)},forEachTile:function(e,t,i,r,n,s,a,o){o=this.getLayer(o);if(o===null){return null}components$4.ForEachTile(e,t,i,r,n,s,a,o);return this},getImageIndex:function(e){return this.getIndex(this.images,e)},getIndex:function(e,t){for(var i=0;i<e.length;i++){if(e[i].name===t){return i}}return null},getLayer:function(e){var t=this.getLayerIndex(e);return t!==null?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return t!==null?this.objects[t]:null},getLayerIndex:function(e){if(e===undefined){return this.currentLayerIndex}else if(typeof e==="string"){return this.getLayerIndexByName(e)}else if(typeof e==="number"&&e<this.layers.length){return e}else if(e instanceof StaticTilemapLayer_1||e instanceof DynamicTilemapLayer_1){return e.layerIndex}else{return null}},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.GetTileAt(e,t,i,r)},getTileAtWorldXY:function(e,t,i,r,n){n=this.getLayer(n);if(n===null){return null}return components$4.GetTileAtWorldXY(e,t,i,r,n)},getTilesWithin:function(e,t,i,r,n,s){s=this.getLayer(s);if(s===null){return null}return components$4.GetTilesWithin(e,t,i,r,n,s)},getTilesWithinShape:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.GetTilesWithinShape(e,t,i,r)},getTilesWithinWorldXY:function(e,t,i,r,n,s,a){a=this.getLayer(a);if(a===null){return null}return components$4.GetTilesWithinWorldXY(e,t,i,r,n,s,a)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return t!==null?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){i=this.getLayer(i);if(i===null){return null}return components$4.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.HasTileAtWorldXY(e,t,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,r,n){n=this.getLayer(n);if(this._isStaticCall(n,"putTileAt")){return null}if(n===null){return null}return components$4.PutTileAt(e,t,i,r,n)},putTileAtWorldXY:function(e,t,i,r,n,s){s=this.getLayer(s);if(this._isStaticCall(s,"putTileAtWorldXY")){return null}if(s===null){return null}return components$4.PutTileAtWorldXY(e,t,i,r,n,s)},putTilesAt:function(e,t,i,r,n){n=this.getLayer(n);if(this._isStaticCall(n,"putTilesAt")){return this}if(n===null){return null}components$4.PutTilesAt(e,t,i,r,n);return this},randomize:function(e,t,i,r,n,s){s=this.getLayer(s);if(this._isStaticCall(s,"randomize")){return this}if(s===null){return null}components$4.Randomize(e,t,i,r,n,s);return this},calculateFacesAt:function(e,t,i){i=this.getLayer(i);if(i===null){return null}components$4.CalculateFacesAt(e,t,i);return this},calculateFacesWithin:function(e,t,i,r,n){n=this.getLayer(n);if(n===null){return null}components$4.CalculateFacesWithin(e,t,i,r,n);return this},removeLayer:function(e){var t=this.getLayerIndex(e);if(t!==null){SpliceOne_1(this.layers,t);if(this.currentLayerIndex===t){this.currentLayerIndex=0}return this}else{return null}},destroyLayer:function(e){var t=this.getLayerIndex(e);if(t!==null){e=this.layers[t];e.destroy();SpliceOne_1(this.layers,t);if(this.currentLayerIndex===t){this.currentLayerIndex=0}return this}else{return null}},removeAllLayers:function(){var e=this.layers;for(var t=0;t<e.length;t++){if(e[t].tilemapLayer){e[t].tilemapLayer.destroy(false)}}e.length=0;this.currentLayerIndex=0;return this},removeTile:function(e,t,i){if(t===undefined){t=-1}if(i===undefined){i=true}var r=[];if(!Array.isArray(e)){e=[e]}for(var n=0;n<e.length;n++){var s=e[n];r.push(this.removeTileAt(s.x,s.y,true,i,s.tilemapLayer));if(t>-1){this.putTileAt(t,s.x,s.y,i,s.tilemapLayer)}}return r},removeTileAt:function(e,t,i,r,n){n=this.getLayer(n);if(this._isStaticCall(n,"removeTileAt")){return null}if(n===null){return null}return components$4.RemoveTileAt(e,t,i,r,n)},removeTileAtWorldXY:function(e,t,i,r,n,s){s=this.getLayer(s);if(this._isStaticCall(s,"removeTileAtWorldXY")){return null}if(s===null){return null}return components$4.RemoveTileAtWorldXY(e,t,i,r,n,s)},renderDebug:function(e,t,i){i=this.getLayer(i);if(i===null){return null}components$4.RenderDebug(e,t,i);return this},renderDebugFull:function(e,t){var i=this.layers;for(var r=0;r<i.length;r++){components$4.RenderDebug(e,t,i[r])}return this},replaceByIndex:function(e,t,i,r,n,s,a){a=this.getLayer(a);if(this._isStaticCall(a,"replaceByIndex")){return this}if(a===null){return null}components$4.ReplaceByIndex(e,t,i,r,n,s,a);return this},setCollision:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}components$4.SetCollision(e,t,i,r);return this},setCollisionBetween:function(e,t,i,r,n){n=this.getLayer(n);if(n===null){return null}components$4.SetCollisionBetween(e,t,i,r,n);return this},setCollisionByProperty:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}components$4.SetCollisionByProperty(e,t,i,r);return this},setCollisionByExclusion:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}components$4.SetCollisionByExclusion(e,t,i,r);return this},setCollisionFromCollisionGroup:function(e,t,i){i=this.getLayer(i);if(i===null){return null}components$4.SetCollisionFromCollisionGroup(e,t,i);return this},setTileIndexCallback:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}components$4.SetTileIndexCallback(e,t,i,r);return this},setTileLocationCallback:function(e,t,i,r,n,s,a){a=this.getLayer(a);if(a===null){return null}components$4.SetTileLocationCallback(e,t,i,r,n,s,a);return this},setLayer:function(e){var t=this.getLayerIndex(e);if(t!==null){this.currentLayerIndex=t}return this},setBaseTileSize:function(e,t){this.tileWidth=e;this.tileHeight=t;this.widthInPixels=this.width*e;this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e;this.layers[i].baseTileHeight=t;var r=this.layers[i].data;var n=this.layers[i].width;var s=this.layers[i].height;for(var a=0;a<s;a++){for(var o=0;o<n;o++){var l=r[a][o];if(l!==null){l.setSize(undefined,undefined,e,t)}}}}return this},setLayerTileSize:function(e,t,i){i=this.getLayer(i);if(i===null){return this}i.tileWidth=e;i.tileHeight=t;var r=i.data;var n=i.width;var s=i.height;for(var a=0;a<s;a++){for(var o=0;o<n;o++){var l=r[a][o];if(l!==null){l.setSize(e,t)}}}return this},shuffle:function(e,t,i,r,n){n=this.getLayer(n);if(this._isStaticCall(n,"shuffle")){return this}if(n===null){return null}components$4.Shuffle(e,t,i,r,n);return this},swapByIndex:function(e,t,i,r,n,s,a){a=this.getLayer(a);if(this._isStaticCall(a,"swapByIndex")){return this}if(a===null){return null}components$4.SwapByIndex(e,t,i,r,n,s,a);return this},tileToWorldX:function(e,t,i){i=this.getLayer(i);if(i===null){return null}return components$4.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){i=this.getLayer(i);if(i===null){return null}return components$4.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,r,n){n=this.getLayer(n);if(n===null){return null}return components$4.TileToWorldXY(e,t,i,r,n)},weightedRandomize:function(e,t,i,r,n,s){s=this.getLayer(s);if(this._isStaticCall(s,"weightedRandomize")){return this}if(s===null){return null}components$4.WeightedRandomize(e,t,i,r,n,s);return this},worldToTileX:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.WorldToTileX(e,t,i,r)},worldToTileY:function(e,t,i,r){r=this.getLayer(r);if(r===null){return null}return components$4.WorldToTileY(e,t,i,r)},worldToTileXY:function(e,t,i,r,n,s){s=this.getLayer(s);if(s===null){return null}return components$4.WorldToTileXY(e,t,i,r,n,s)},_isStaticCall:function(e,t){if(e.tilemapLayer instanceof StaticTilemapLayer_1){console.warn(t+": You cannot change the tiles in a static tilemap layer");return true}else{return false}}});var Tilemap_1=Tilemap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ParseToTilemap=function(e,t,i,r,n,s,a,o){if(i===undefined){i=32}if(r===undefined){r=32}if(n===undefined){n=10}if(s===undefined){s=10}if(o===undefined){o=false}var l=null;if(Array.isArray(a)){var h=t!==undefined?t:"map";l=Parse_1(h,Formats.ARRAY_2D,a,i,r,o)}else if(t!==undefined){var u=e.cache.tilemap.get(t);if(!u){console.warn("No map data found for key "+t)}else{l=Parse_1(t,u.format,u.data,i,r,o)}}if(l===null){l=new MapData_1({tileWidth:i,tileHeight:r,width:n,height:s})}return new Tilemap_1(e,l)};var ParseToTilemap_1=ParseToTilemap;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectCreator_1.register("tilemap",(function(e){var t=e!==undefined?e:{};return ParseToTilemap_1(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)}));var TilemapCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */GameObjectFactory_1.register("tilemap",(function(e,t,i,r,n,s,a){if(e===null){e=undefined}if(t===null){t=undefined}if(i===null){i=undefined}if(r===null){r=undefined}if(n===null){n=undefined}return ParseToTilemap_1(this.scene,e,t,i,r,n,s,a)}));var TilemapFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var tilemaps={Components:components$4,Parsers:parsers$1,Formats:Formats,ImageCollection:ImageCollection_1,ParseToTilemap:ParseToTilemap_1,Tile:Tile_1,Tilemap:Tilemap_1,TilemapCreator:TilemapCreator,TilemapFactory:TilemapFactory,Tileset:Tileset_1,LayerData:LayerData_1,MapData:MapData_1,ObjectLayer:ObjectLayer_1,DynamicTilemapLayer:DynamicTilemapLayer_1,StaticTilemapLayer:StaticTilemapLayer_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TimerEvent=new Class_1({initialize:function e(t){this.delay=0;this.repeat=0;this.repeatCount=0;this.loop=false;this.timeScale=1;this.startAt=0;this.elapsed=0;this.paused=false;this.hasDispatched=false;this.reset(t)},reset:function(e){this.delay=GetFastValue_1(e,"delay",0);this.repeat=GetFastValue_1(e,"repeat",0);this.loop=GetFastValue_1(e,"loop",false);this.callback=GetFastValue_1(e,"callback",undefined);this.callbackScope=GetFastValue_1(e,"callbackScope",this.callback);this.args=GetFastValue_1(e,"args",[]);this.timeScale=GetFastValue_1(e,"timeScale",1);this.startAt=GetFastValue_1(e,"startAt",0);this.paused=GetFastValue_1(e,"paused",false);this.elapsed=this.startAt;this.hasDispatched=false;this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat;return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var e=this.delay+this.delay*this.repeat;var t=this.elapsed+this.delay*(this.repeat-this.repeatCount);return t/e}else{return this.getProgress()}},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},remove:function(e){if(e===undefined){e=false}this.elapsed=this.delay;this.hasDispatched=!e;this.repeatCount=0},destroy:function(){this.callback=undefined;this.callbackScope=undefined;this.args=[]}});var TimerEvent_1=TimerEvent;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Clock=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.now=0;this.timeScale=1;this.paused=false;this._active=[];this._pendingInsertion=[];this._pendingRemoval=[];t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time;this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(events$7.PRE_UPDATE,this.preUpdate,this);e.on(events$7.UPDATE,this.update,this);e.once(events$7.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t=new TimerEvent_1(e);this._pendingInsertion.push(t);return t},delayedCall:function(e,t,i,r){return this.addEvent({delay:e,callback:t,args:i,callbackScope:r})},clearPendingEvents:function(){this._pendingInsertion=[];return this},removeAllEvents:function(){this._pendingRemoval=this._pendingRemoval.concat(this._active);return this},preUpdate:function(){var e=this._pendingRemoval.length;var t=this._pendingInsertion.length;if(e===0&&t===0){return}var i;var r;for(i=0;i<e;i++){r=this._pendingRemoval[i];var n=this._active.indexOf(r);if(n>-1){this._active.splice(n,1)}r.destroy()}for(i=0;i<t;i++){r=this._pendingInsertion[i];this._active.push(r)}this._pendingRemoval.length=0;this._pendingInsertion.length=0},update:function(e,t){this.now=e;if(this.paused){return}t*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(r.paused){continue}r.elapsed+=t*r.timeScale;if(r.elapsed>=r.delay){var n=r.elapsed-r.delay;r.elapsed=r.delay;if(!r.hasDispatched&&r.callback){r.hasDispatched=true;r.callback.apply(r.callbackScope,r.args)}if(r.repeatCount>0){r.repeatCount--;r.elapsed=n;r.hasDispatched=false}else{this._pendingRemoval.push(r)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++){this._pendingInsertion[e].destroy()}for(e=0;e<this._active.length;e++){this._active[e].destroy()}for(e=0;e<this._pendingRemoval.length;e++){this._pendingRemoval[e].destroy()}this._active.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;var t=this.systems.events;t.off(events$7.PRE_UPDATE,this.preUpdate,this);t.off(events$7.UPDATE,this.update,this);t.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("Clock",Clock,"time");var Clock_1=Clock;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var time={Clock:Clock_1,TimerEvent:TimerEvent_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetNewValue=function(e,t,i){var r;if(e.hasOwnProperty(t)){var n=typeof e[t];if(n==="function"){r=function(i,r,n,s,a,o){return e[t](i,r,n,s,a,o)}}else{r=function(){return e[t]}}}else if(typeof i==="function"){r=i}else{r=function(){return i}}return r};var GetNewValue_1=GetNewValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var ReservedProps=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"];
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetProps=function(e){var t;var i=[];if(e.hasOwnProperty("props")){for(t in e.props){if(t.substr(0,1)!=="_"){i.push({key:t,value:e.props[t]})}}}else{for(t in e){if(ReservedProps.indexOf(t)===-1&&t.substr(0,1)!=="_"){i.push({key:t,value:e[t]})}}}return i};var GetProps_1=GetProps;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTargets=function(e){var t=GetValue_1(e,"targets",null);if(t===null){return t}if(typeof t==="function"){t=t.call()}if(!Array.isArray(t)){t=[t]}return t};var GetTargets_1=GetTargets;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetTweens=function(e){var t=GetValue_1(e,"tweens",null);if(t===null){return[]}else if(typeof t==="function"){t=t.call()}if(!Array.isArray(t)){t=[t]}return t};var GetTweens_1=GetTweens;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */function hasGetActive(e){return!!e.getActive&&typeof e.getActive==="function"}function hasGetStart(e){return!!e.getStart&&typeof e.getStart==="function"}function hasGetEnd(e){return!!e.getEnd&&typeof e.getEnd==="function"}function hasGetters(e){return hasGetStart(e)||hasGetEnd(e)||hasGetActive(e)}var GetValueOp=function(e,t){var i;var r=function(e,t,i){return i};var n=function(e,t,i){return i};var s=null;var a=typeof t;if(a==="number"){r=function(){return t}}else if(a==="string"){var o=t[0];var l=parseFloat(t.substr(2));switch(o){case"+":r=function(e,t,i){return i+l};break;case"-":r=function(e,t,i){return i-l};break;case"*":r=function(e,t,i){return i*l};break;case"/":r=function(e,t,i){return i/l};break;default:r=function(){return parseFloat(t)}}}else if(a==="function"){r=t}else if(a==="object"){if(hasGetters(t)){if(hasGetActive(t)){s=t.getActive}if(hasGetEnd(t)){r=t.getEnd}if(hasGetStart(t)){n=t.getStart}}else if(t.hasOwnProperty("value")){i=GetValueOp(e,t.value)}else{var h=t.hasOwnProperty("to");var u=t.hasOwnProperty("from");var c=t.hasOwnProperty("start");if(h&&(u||c)){i=GetValueOp(e,t.to);if(c){var f=GetValueOp(e,t.start);i.getActive=f.getEnd}if(u){var d=GetValueOp(e,t.from);i.getStart=d.getEnd}}}}if(!i){i={getActive:s,getEnd:r,getStart:n}}return i};var GetValueOp_1=GetValueOp;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_DEFAULTS={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:false,flipX:false,flipY:false};var Defaults=TWEEN_DEFAULTS;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_COMPLETE_EVENT="complete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_LOOP_EVENT="loop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_PAUSE_EVENT="pause";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_RESUME_EVENT="resume";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_START_EVENT="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TIMELINE_UPDATE_EVENT="update";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_ACTIVE_EVENT="active";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_COMPLETE_EVENT="complete";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_LOOP_EVENT="loop";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_REPEAT_EVENT="repeat";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_START_EVENT="start";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_UPDATE_EVENT="update";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TWEEN_YOYO_EVENT="yoyo";
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var events$i={TIMELINE_COMPLETE:TIMELINE_COMPLETE_EVENT,TIMELINE_LOOP:TIMELINE_LOOP_EVENT,TIMELINE_PAUSE:TIMELINE_PAUSE_EVENT,TIMELINE_RESUME:TIMELINE_RESUME_EVENT,TIMELINE_START:TIMELINE_START_EVENT,TIMELINE_UPDATE:TIMELINE_UPDATE_EVENT,TWEEN_ACTIVE:TWEEN_ACTIVE_EVENT,TWEEN_COMPLETE:TWEEN_COMPLETE_EVENT,TWEEN_LOOP:TWEEN_LOOP_EVENT,TWEEN_REPEAT:TWEEN_REPEAT_EVENT,TWEEN_START:TWEEN_START_EVENT,TWEEN_UPDATE:TWEEN_UPDATE_EVENT,TWEEN_YOYO:TWEEN_YOYO_EVENT};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Tween=new Class_1({Extends:eventemitter3,initialize:function e(t,i,r){eventemitter3.call(this);this.parent=t;this.parentIsTimeline=t.hasOwnProperty("isTimeline");this.data=i;this.totalData=i.length;this.targets=r;this.totalTargets=r.length;this.useFrames=false;this.timeScale=1;this.loop=0;this.loopDelay=0;this.loopCounter=0;this.startDelay=0;this.hasStarted=false;this.isSeeking=false;this.completeDelay=0;this.countdown=0;this.offset=0;this.calculatedOffset=0;this.state=_const$4.PENDING_ADD;this._pausedState=_const$4.INIT;this.paused=false;this.elapsed=0;this.totalElapsed=0;this.duration=0;this.progress=0;this.totalDuration=0;this.totalProgress=0;this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null}},getValue:function(){return this.data[0].current},setTimeScale:function(e){this.timeScale=e;return this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===_const$4.ACTIVE},isPaused:function(){return this.state===_const$4.PAUSED},hasTarget:function(e){return this.targets.indexOf(e)!==-1},updateTo:function(e,t,i){if(i===undefined){i=false}for(var r=0;r<this.totalData;r++){var n=this.data[r];if(n.key===e){n.end=t;if(i){n.start=n.current}break}}return this},restart:function(){this.elapsed=0;this.progress=0;this.totalElapsed=0;this.totalProgress=0;if(this.state===_const$4.ACTIVE){return this.seek(0)}else if(this.state===_const$4.REMOVED){this.seek(0);this.parent.makeActive(this);return this}else if(this.state===_const$4.PENDING_ADD){return this}else{return this.play()}},calcDuration:function(){var e=0;var t=Number.MAX_SAFE_INTEGER;var i=this.data;for(var r=0;r<this.totalData;r++){var n=i[r];n.t1=n.duration+n.hold;if(n.yoyo){n.t1+=n.duration}n.t2=n.t1+n.repeatDelay;n.totalDuration=n.delay+n.t1;if(n.repeat===-1){n.totalDuration+=n.t2*999999999999}else if(n.repeat>0){n.totalDuration+=n.t2*n.repeat}if(n.totalDuration>e){e=n.totalDuration}if(n.delay<t){t=n.delay}}this.duration=Math.max(e,.001);this.loopCounter=this.loop===-1?999999999999:this.loop;if(this.loopCounter>0){this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter}else{this.totalDuration=this.duration+this.completeDelay}this.startDelay=t},init:function(){if(this.paused&&!this.parentIsTimeline){this.state=_const$4.PENDING_ADD;this._pausedState=_const$4.INIT;return false}var e=this.data;var t=this.totalTargets;for(var i=0;i<this.totalData;i++){var r=e[i];var n=r.target;var s=r.gen;var a=r.key;var o=r.index;r.delay=s.delay(n,a,0,o,t,this);r.duration=Math.max(s.duration(n,a,0,o,t,this),.001);r.hold=s.hold(n,a,0,o,t,this);r.repeat=s.repeat(n,a,0,o,t,this);r.repeatDelay=s.repeatDelay(n,a,0,o,t,this)}this.calcDuration();this.progress=0;this.totalProgress=0;this.elapsed=0;this.totalElapsed=0;this.state=_const$4.INIT;return true},makeActive:function(){this.parent.makeActive(this);this.dispatchTweenEvent(events$i.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){if(this.loopCounter>0){this.elapsed=0;this.progress=0;this.loopCounter--;this.resetTweenData(true);if(this.loopDelay>0){this.countdown=this.loopDelay;this.state=_const$4.LOOP_DELAY}else{this.state=_const$4.ACTIVE;this.dispatchTweenEvent(events$i.TWEEN_LOOP,this.callbacks.onLoop)}}else if(this.completeDelay>0){this.state=_const$4.COMPLETE_DELAY;this.countdown=this.completeDelay}else{this.state=_const$4.PENDING_REMOVE;this.dispatchTweenEvent(events$i.TWEEN_COMPLETE,this.callbacks.onComplete)}},pause:function(){if(this.state===_const$4.PAUSED){return this}this.paused=true;this._pausedState=this.state;this.state=_const$4.PAUSED;return this},play:function(e){if(e===undefined){e=false}var t=this.state;if(t===_const$4.INIT&&!this.parentIsTimeline){this.resetTweenData(false);this.state=_const$4.ACTIVE;return this}else if(t===_const$4.ACTIVE||t===_const$4.PENDING_ADD&&this._pausedState===_const$4.PENDING_ADD){return this}else if(!this.parentIsTimeline&&(t===_const$4.PENDING_REMOVE||t===_const$4.REMOVED)){this.seek(0);this.parent.makeActive(this);return this}if(this.parentIsTimeline){this.resetTweenData(e);if(this.calculatedOffset===0){this.state=_const$4.ACTIVE}else{this.countdown=this.calculatedOffset;this.state=_const$4.OFFSET_DELAY}}else if(this.paused){this.paused=false;this.makeActive()}else{this.resetTweenData(e);this.state=_const$4.ACTIVE;this.makeActive()}return this},resetTweenData:function(e){var t=this.data;var i=this.totalData;var r=this.totalTargets;for(var n=0;n<i;n++){var s=t[n];var a=s.target;var o=s.key;var l=s.index;s.progress=0;s.elapsed=0;s.repeatCounter=s.repeat===-1?999999999999:s.repeat;if(e){s.start=s.getStartValue(a,o,s.start,l,r,this);s.end=s.getEndValue(a,o,s.end,l,r,this);s.current=s.start;s.state=_const$4.PLAYING_FORWARD}else{s.state=_const$4.PENDING_RENDER}if(s.delay>0){s.elapsed=s.delay;s.state=_const$4.DELAY}if(s.getActiveValue){a[o]=s.getActiveValue(s.target,s.key,s.start)}}},resume:function(){if(this.state===_const$4.PAUSED){this.paused=false;this.state=this._pausedState}else{this.play()}return this},seek:function(e,t){if(t===undefined){t=16.6}if(this.totalDuration>=36e5){console.warn("Tween.seek duration too long");return this}if(this.state===_const$4.REMOVED){this.makeActive()}this.elapsed=0;this.progress=0;this.totalElapsed=0;this.totalProgress=0;var i=this.data;var r=this.totalTargets;for(var n=0;n<this.totalData;n++){var s=i[n];var a=s.target;var o=s.gen;var l=s.key;var h=s.index;s.progress=0;s.elapsed=0;s.repeatCounter=s.repeat===-1?999999999999:s.repeat;s.delay=o.delay(a,l,0,h,r,this);s.duration=Math.max(o.duration(a,l,0,h,r,this),.001);s.hold=o.hold(a,l,0,h,r,this);s.repeat=o.repeat(a,l,0,h,r,this);s.repeatDelay=o.repeatDelay(a,l,0,h,r,this);s.current=s.start;s.state=_const$4.PLAYING_FORWARD;this.updateTweenData(this,s,0,h,r);if(s.delay>0){s.elapsed=s.delay;s.state=_const$4.DELAY}}this.calcDuration();var u=false;if(this.state===_const$4.PAUSED){u=true;this.state=_const$4.ACTIVE}this.isSeeking=true;do{this.update(0,t)}while(this.totalProgress<e);this.isSeeking=false;if(u){this.state=_const$4.PAUSED}return this},setCallback:function(e,t,i,r){this.callbacks[e]={func:t,scope:r,params:i};return this},complete:function(e){if(e===undefined){e=0}if(e){this.state=_const$4.COMPLETE_DELAY;this.countdown=e}else{this.state=_const$4.PENDING_REMOVE;this.dispatchTweenEvent(events$i.TWEEN_COMPLETE,this.callbacks.onComplete)}return this},remove:function(){this.parent.remove(this);return this},stop:function(e){if(this.state===_const$4.ACTIVE){if(e!==undefined){this.seek(e)}}if(this.state!==_const$4.REMOVED){if(this.state===_const$4.PAUSED||this.state===_const$4.PENDING_ADD){if(this.parentIsTimeline){this.parent.manager._destroy.push(this);this.parent.manager._toProcess++}else{this.parent._destroy.push(this);this.parent._toProcess++}}this.removeAllListeners();this.state=_const$4.PENDING_REMOVE}return this},update:function(e,t){if(this.state===_const$4.PAUSED){return false}if(this.useFrames){t=1*this.parent.timeScale}t*=this.timeScale;this.elapsed+=t;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=t;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case _const$4.ACTIVE:if(!this.hasStarted&&!this.isSeeking){this.startDelay-=t;if(this.startDelay<=0){this.hasStarted=true;this.dispatchTweenEvent(events$i.TWEEN_START,this.callbacks.onStart)}}var i=false;for(var r=0;r<this.totalData;r++){var n=this.data[r];if(this.updateTweenData(this,n,t)){i=true}}if(!i){this.nextState()}break;case _const$4.LOOP_DELAY:this.countdown-=t;if(this.countdown<=0){this.state=_const$4.ACTIVE;this.dispatchTweenEvent(events$i.TWEEN_LOOP,this.callbacks.onLoop)}break;case _const$4.OFFSET_DELAY:this.countdown-=t;if(this.countdown<=0){this.state=_const$4.ACTIVE}break;case _const$4.COMPLETE_DELAY:this.countdown-=t;if(this.countdown<=0){this.state=_const$4.PENDING_REMOVE;this.dispatchTweenEvent(events$i.TWEEN_COMPLETE,this.callbacks.onComplete)}break}return this.state===_const$4.PENDING_REMOVE},dispatchTweenDataEvent:function(e,t,i){if(!this.isSeeking){this.emit(e,this,i.key,i.target);if(t){t.params[1]=i.target;t.func.apply(t.scope,t.params)}}},dispatchTweenEvent:function(e,t){if(!this.isSeeking){this.emit(e,this,this.targets);if(t){t.params[1]=this.targets;t.func.apply(t.scope,t.params)}}},setStateFromEnd:function(e,t,i){if(t.yoyo){t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}this.dispatchTweenDataEvent(events$i.TWEEN_YOYO,e.callbacks.onYoyo,t);t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e);return _const$4.PLAYING_BACKWARD}else if(t.repeatCounter>0){t.repeatCounter--;t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e);t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e);if(t.repeatDelay>0){t.elapsed=t.repeatDelay-i;t.current=t.start;t.target[t.key]=t.current;return _const$4.REPEAT_DELAY}else{this.dispatchTweenDataEvent(events$i.TWEEN_REPEAT,e.callbacks.onRepeat,t);return _const$4.PLAYING_FORWARD}}return _const$4.COMPLETE},setStateFromStart:function(e,t,i){if(t.repeatCounter>0){t.repeatCounter--;t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e);if(t.repeatDelay>0){t.elapsed=t.repeatDelay-i;t.current=t.start;t.target[t.key]=t.current;return _const$4.REPEAT_DELAY}else{this.dispatchTweenDataEvent(events$i.TWEEN_REPEAT,e.callbacks.onRepeat,t);return _const$4.PLAYING_FORWARD}}return _const$4.COMPLETE},updateTweenData:function(e,t,i){var r=t.target;switch(t.state){case _const$4.PLAYING_FORWARD:case _const$4.PLAYING_BACKWARD:if(!r){t.state=_const$4.COMPLETE;break}var n=t.elapsed;var s=t.duration;var a=0;n+=i;if(n>s){a=n-s;n=s}var o=t.state===_const$4.PLAYING_FORWARD;var l=n/s;t.elapsed=n;t.progress=l;if(l===1){if(o){t.current=t.end;r[t.key]=t.end;if(t.hold>0){t.elapsed=t.hold-a;t.state=_const$4.HOLD_DELAY}else{t.state=this.setStateFromEnd(e,t,a)}}else{t.current=t.start;r[t.key]=t.start;t.state=this.setStateFromStart(e,t,a)}}else{var h=o?t.ease(l):t.ease(1-l);t.current=t.start+(t.end-t.start)*h;r[t.key]=t.current}this.dispatchTweenDataEvent(events$i.TWEEN_UPDATE,e.callbacks.onUpdate,t);break;case _const$4.DELAY:t.elapsed-=i;if(t.elapsed<=0){t.elapsed=Math.abs(t.elapsed);t.state=_const$4.PENDING_RENDER}break;case _const$4.REPEAT_DELAY:t.elapsed-=i;if(t.elapsed<=0){t.elapsed=Math.abs(t.elapsed);t.state=_const$4.PLAYING_FORWARD;this.dispatchTweenDataEvent(events$i.TWEEN_REPEAT,e.callbacks.onRepeat,t)}break;case _const$4.HOLD_DELAY:t.elapsed-=i;if(t.elapsed<=0){t.state=this.setStateFromEnd(e,t,Math.abs(t.elapsed))}break;case _const$4.PENDING_RENDER:if(r){t.start=t.getStartValue(r,t.key,r[t.key],t.index,e.totalTargets,e);t.end=t.getEndValue(r,t.key,t.start,t.index,e.totalTargets,e);t.current=t.start;r[t.key]=t.start;t.state=_const$4.PLAYING_FORWARD}else{t.state=_const$4.COMPLETE}break}return t.state!==_const$4.COMPLETE}});Tween.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"];GameObjectFactory_1.register("tween",(function(e){return this.scene.sys.tweens.add(e)}));GameObjectCreator_1.register("tween",(function(e){return this.scene.sys.tweens.create(e)}));var Tween_1=Tween;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TweenData=function(e,t,i,r,n,s,a,o,l,h,u,c,f,d,v){return{target:e,index:t,key:i,getActiveValue:s,getEndValue:r,getStartValue:n,ease:a,duration:0,totalDuration:0,delay:0,yoyo:h,hold:0,repeat:0,repeatDelay:0,flipX:d,flipY:v,progress:0,elapsed:0,repeatCounter:0,start:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:l,hold:u,repeat:c,repeatDelay:f},state:0}};var TweenData_1=TweenData;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var NumberTweenBuilder=function(e,t,i){if(i===undefined){i=Defaults}var r=GetValue_1(t,"from",0);var n=GetValue_1(t,"to",1);var s=[{value:r}];var a=GetNewValue_1(t,"delay",i.delay);var o=GetNewValue_1(t,"duration",i.duration);var l=GetValue_1(t,"easeParams",i.easeParams);var h=GetEaseFunction_1(GetValue_1(t,"ease",i.ease),l);var u=GetNewValue_1(t,"hold",i.hold);var c=GetNewValue_1(t,"repeat",i.repeat);var f=GetNewValue_1(t,"repeatDelay",i.repeatDelay);var d=GetBoolean_1(t,"yoyo",i.yoyo);var v=[];var p=GetValueOp_1("value",n);var g=TweenData_1(s[0],0,"value",p.getEnd,p.getStart,p.getActive,h,a,o,d,u,c,f,false,false);g.start=r;g.current=r;g.to=n;v.push(g);var m=new Tween_1(e,v,s);m.offset=GetAdvancedValue_1(t,"offset",null);m.completeDelay=GetAdvancedValue_1(t,"completeDelay",0);m.loop=Math.round(GetAdvancedValue_1(t,"loop",0));m.loopDelay=Math.round(GetAdvancedValue_1(t,"loopDelay",0));m.paused=GetBoolean_1(t,"paused",false);m.useFrames=GetBoolean_1(t,"useFrames",false);var _=GetValue_1(t,"callbackScope",m);var y=[m,null];var T=Tween_1.TYPES;for(var x=0;x<T.length;x++){var E=T[x];var C=GetValue_1(t,E,false);if(C){var S=GetValue_1(t,E+"Scope",_);var A=GetValue_1(t,E+"Params",[]);m.setCallback(E,C,y.concat(A),S)}}return m};var NumberTweenBuilder_1=NumberTweenBuilder;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TweenBuilder=function(e,t,i){if(i===undefined){i=Defaults}var r=i.targets?i.targets:GetTargets_1(t);var n=GetProps_1(t);var s=GetNewValue_1(t,"delay",i.delay);var a=GetNewValue_1(t,"duration",i.duration);var o=GetValue_1(t,"easeParams",i.easeParams);var l=GetEaseFunction_1(GetValue_1(t,"ease",i.ease),o);var h=GetNewValue_1(t,"hold",i.hold);var u=GetNewValue_1(t,"repeat",i.repeat);var c=GetNewValue_1(t,"repeatDelay",i.repeatDelay);var f=GetBoolean_1(t,"yoyo",i.yoyo);var d=GetBoolean_1(t,"flipX",i.flipX);var v=GetBoolean_1(t,"flipY",i.flipY);var p=[];for(var g=0;g<n.length;g++){var m=n[g].key;var _=n[g].value;for(var y=0;y<r.length;y++){var T=GetValueOp_1(m,_);var x=TweenData_1(r[y],y,m,T.getEnd,T.getStart,T.getActive,GetEaseFunction_1(GetValue_1(_,"ease",l),o),GetNewValue_1(_,"delay",s),GetNewValue_1(_,"duration",a),GetBoolean_1(_,"yoyo",f),GetNewValue_1(_,"hold",h),GetNewValue_1(_,"repeat",u),GetNewValue_1(_,"repeatDelay",c),GetBoolean_1(_,"flipX",d),GetBoolean_1(_,"flipY",v));p.push(x)}}var E=new Tween_1(e,p,r);E.offset=GetAdvancedValue_1(t,"offset",null);E.completeDelay=GetAdvancedValue_1(t,"completeDelay",0);E.loop=Math.round(GetAdvancedValue_1(t,"loop",0));E.loopDelay=Math.round(GetAdvancedValue_1(t,"loopDelay",0));E.paused=GetBoolean_1(t,"paused",false);E.useFrames=GetBoolean_1(t,"useFrames",false);var C=GetValue_1(t,"callbackScope",E);var S=[E,null];var A=Tween_1.TYPES;for(var b=0;b<A.length;b++){var w=A[b];var P=GetValue_1(t,w,false);if(P){var R=GetValue_1(t,w+"Scope",C);var O=GetValue_1(t,w+"Params",[]);E.setCallback(w,P,S.concat(O),R)}}return E};var TweenBuilder_1=TweenBuilder;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Timeline=new Class_1({Extends:eventemitter3,initialize:function e(t){eventemitter3.call(this);this.manager=t;this.isTimeline=true;this.data=[];this.totalData=0;this.useFrames=false;this.timeScale=1;this.loop=0;this.loopDelay=0;this.loopCounter=0;this.completeDelay=0;this.countdown=0;this.state=_const$4.PENDING_ADD;this._pausedState=_const$4.PENDING_ADD;this.paused=false;this.elapsed=0;this.totalElapsed=0;this.duration=0;this.progress=0;this.totalDuration=0;this.totalProgress=0;this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null}},dispatchTimelineEvent:function(e,t){this.emit(e,this,this.targets);if(t){t.params[1]=this.targets;t.func.apply(t.scope,t.params)}},setTimeScale:function(e){this.timeScale=e;return this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===_const$4.ACTIVE},add:function(e){return this.queue(TweenBuilder_1(this,e))},queue:function(e){if(!this.isPlaying()){e.parent=this;e.parentIsTimeline=true;this.data.push(e);this.totalData=this.data.length}return this},hasOffset:function(e){return e.offset!==null},isOffsetAbsolute:function(e){return typeof e==="number"},isOffsetRelative:function(e){var t=typeof e;if(t==="string"){var i=e[0];if(i==="-"||i==="+"){return true}}return false},getRelativeOffset:function(e,t){var i=e[0];var r=parseFloat(e.substr(2));var n=t;switch(i){case"+":n+=r;break;case"-":n-=r;break}return Math.max(0,n)},calcDuration:function(){var e=0;var t=0;var i=0;for(var r=0;r<this.totalData;r++){var n=this.data[r];n.init();if(this.hasOffset(n)){if(this.isOffsetAbsolute(n.offset)){n.calculatedOffset=n.offset;if(n.offset===0){i=0}}else if(this.isOffsetRelative(n.offset)){n.calculatedOffset=this.getRelativeOffset(n.offset,e)}}else{n.calculatedOffset=i}e=n.totalDuration+n.calculatedOffset;t+=n.totalDuration;i+=n.totalDuration}this.duration=t;this.loopCounter=this.loop===-1?999999999999:this.loop;if(this.loopCounter>0){this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter}else{this.totalDuration=this.duration+this.completeDelay}},init:function(){this.calcDuration();this.progress=0;this.totalProgress=0;if(this.paused){this.state=_const$4.PAUSED;return false}else{return true}},resetTweens:function(e){for(var t=0;t<this.totalData;t++){var i=this.data[t];i.play(e)}},setCallback:function(e,t,i,r){if(Timeline.TYPES.indexOf(e)!==-1){this.callbacks[e]={func:t,scope:r,params:i}}return this},makeActive:function(e){return this.manager.makeActive(e)},play:function(){if(this.state===_const$4.ACTIVE){return}if(this.paused){this.paused=false;this.manager.makeActive(this);return}else{this.resetTweens(false);this.state=_const$4.ACTIVE}this.dispatchTimelineEvent(events$i.TIMELINE_START,this.callbacks.onStart)},nextState:function(){if(this.loopCounter>0){this.elapsed=0;this.progress=0;this.loopCounter--;this.resetTweens(true);if(this.loopDelay>0){this.countdown=this.loopDelay;this.state=_const$4.LOOP_DELAY}else{this.state=_const$4.ACTIVE;this.dispatchTimelineEvent(events$i.TIMELINE_LOOP,this.callbacks.onLoop)}}else if(this.completeDelay>0){this.state=_const$4.COMPLETE_DELAY;this.countdown=this.completeDelay}else{this.state=_const$4.PENDING_REMOVE;this.dispatchTimelineEvent(events$i.TIMELINE_COMPLETE,this.callbacks.onComplete)}},update:function(e,t){if(this.state===_const$4.PAUSED){return}if(this.useFrames){t=1*this.manager.timeScale}t*=this.timeScale;this.elapsed+=t;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=t;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case _const$4.ACTIVE:var i=this.totalData;for(var r=0;r<this.totalData;r++){var n=this.data[r];if(n.update(e,t)){i--}}this.dispatchTimelineEvent(events$i.TIMELINE_UPDATE,this.callbacks.onUpdate);if(i===0){this.nextState()}break;case _const$4.LOOP_DELAY:this.countdown-=t;if(this.countdown<=0){this.state=_const$4.ACTIVE;this.dispatchTimelineEvent(events$i.TIMELINE_LOOP,this.callbacks.onLoop)}break;case _const$4.COMPLETE_DELAY:this.countdown-=t;if(this.countdown<=0){this.state=_const$4.PENDING_REMOVE;this.dispatchTimelineEvent(events$i.TIMELINE_COMPLETE,this.callbacks.onComplete)}break}return this.state===_const$4.PENDING_REMOVE},stop:function(){this.state=_const$4.PENDING_REMOVE},pause:function(){if(this.state===_const$4.PAUSED){return}this.paused=true;this._pausedState=this.state;this.state=_const$4.PAUSED;this.emit(events$i.TIMELINE_PAUSE,this);return this},resume:function(){if(this.state===_const$4.PAUSED){this.paused=false;this.state=this._pausedState;this.emit(events$i.TIMELINE_RESUME,this)}return this},hasTarget:function(e){for(var t=0;t<this.data.length;t++){if(this.data[t].hasTarget(e)){return true}}return false},destroy:function(){for(var e=0;e<this.data.length;e++){this.data[e].stop()}}});Timeline.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];var Timeline_1=Timeline;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TimelineBuilder=function(e,t){var i=new Timeline_1(e);var r=GetTweens_1(t);if(r.length===0){i.paused=true;return i}var n=Clone_1(Defaults);n.targets=GetTargets_1(t);var s=GetAdvancedValue_1(t,"totalDuration",0);if(s>0){n.duration=Math.floor(s/r.length)}else{n.duration=GetNewValue_1(t,"duration",n.duration)}n.delay=GetNewValue_1(t,"delay",n.delay);n.easeParams=GetValue_1(t,"easeParams",n.easeParams);n.ease=GetEaseFunction_1(GetValue_1(t,"ease",n.ease),n.easeParams);n.hold=GetNewValue_1(t,"hold",n.hold);n.repeat=GetNewValue_1(t,"repeat",n.repeat);n.repeatDelay=GetNewValue_1(t,"repeatDelay",n.repeatDelay);n.yoyo=GetBoolean_1(t,"yoyo",n.yoyo);n.flipX=GetBoolean_1(t,"flipX",n.flipX);n.flipY=GetBoolean_1(t,"flipY",n.flipY);for(var a=0;a<r.length;a++){i.queue(TweenBuilder_1(i,r[a],n))}i.completeDelay=GetAdvancedValue_1(t,"completeDelay",0);i.loop=Math.round(GetAdvancedValue_1(t,"loop",0));i.loopDelay=Math.round(GetAdvancedValue_1(t,"loopDelay",0));i.paused=GetBoolean_1(t,"paused",false);i.useFrames=GetBoolean_1(t,"useFrames",false);var o=GetValue_1(t,"callbackScope",i);var l=[i];var h=GetValue_1(t,"onStart",false);if(h){var u=GetValue_1(t,"onStartScope",o);var c=GetValue_1(t,"onStartParams",[]);i.setCallback("onStart",h,l.concat(c),u)}var f=GetValue_1(t,"onUpdate",false);if(f){var d=GetValue_1(t,"onUpdateScope",o);var v=GetValue_1(t,"onUpdateParams",[]);i.setCallback("onUpdate",f,l.concat(v),d)}var p=GetValue_1(t,"onLoop",false);if(p){var g=GetValue_1(t,"onLoopScope",o);var m=GetValue_1(t,"onLoopParams",[]);i.setCallback("onLoop",p,l.concat(m),g)}var _=GetValue_1(t,"onYoyo",false);if(_){var y=GetValue_1(t,"onYoyoScope",o);var T=GetValue_1(t,"onYoyoParams",[]);i.setCallback("onYoyo",_,l.concat(null,T),y)}var x=GetValue_1(t,"onComplete",false);if(x){var E=GetValue_1(t,"onCompleteScope",o);var C=GetValue_1(t,"onCompleteParams",[]);i.setCallback("onComplete",x,l.concat(C),E)}return i};var TimelineBuilder_1=TimelineBuilder;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var builders={GetBoolean:GetBoolean_1,GetEaseFunction:GetEaseFunction_1,GetNewValue:GetNewValue_1,GetProps:GetProps_1,GetTargets:GetTargets_1,GetTweens:GetTweens_1,GetValueOp:GetValueOp_1,NumberTweenBuilder:NumberTweenBuilder_1,TimelineBuilder:TimelineBuilder_1,TweenBuilder:TweenBuilder_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var StaggerBuilder=function(e,t){if(t===undefined){t={}}var i;var r=GetValue_1(t,"start",0);var n=GetValue_1(t,"ease",null);var s=GetValue_1(t,"grid",null);var a=GetValue_1(t,"from",0);var o=a==="first";var l=a==="center";var h=a==="last";var u=typeof a==="number";var c=Array.isArray(e);var f=c?parseFloat(e[0]):parseFloat(e);var d=c?parseFloat(e[1]):0;var v=Math.max(f,d);if(c){r+=f}if(s){var p=s[0];var g=s[1];var m=0;var _=0;var y=0;var T=0;var x=[];if(h){m=p-1;_=g-1}else if(u){m=a%p;_=Math.floor(a/p)}else if(l){m=(p-1)/2;_=(g-1)/2}var E=Number.MIN_SAFE_INTEGER;for(var C=0;C<g;C++){x[C]=[];for(var S=0;S<p;S++){y=m-S;T=_-C;var A=Math.sqrt(y*y+T*T);if(A>E){E=A}x[C][S]=A}}}var b=n?GetEaseFunction_1(n):null;if(s){i=function(e,t,i,n){var s=0;var a=n%p;var o=Math.floor(n/p);if(a>=0&&a<p&&o>=0&&o<g){s=x[o][a]}var l;if(c){var h=d-f;if(b){l=s/E*h*b(s/E)}else{l=s/E*h}}else if(b){l=s*f*b(s/E)}else{l=s*f}return l+r}}else{i=function(e,t,i,n,s){s--;var p;if(o){p=n}else if(l){p=Math.abs(s/2-n)}else if(h){p=s-n}else if(u){p=Math.abs(a-n)}var g;if(c){var m;if(l){m=(d-f)/s*(p*2)}else{m=(d-f)/s*p}if(b){g=m*b(p/s)}else{g=m}}else if(b){g=s*v*b(p/s)}else{g=p*f}return g+r}}return i};var StaggerBuilder_1=StaggerBuilder;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var TweenManager=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.timeScale=1;this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;t.sys.events.once(events$7.BOOT,this.boot,this);t.sys.events.on(events$7.START,this.start,this)},boot:function(){this.systems.events.once(events$7.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(events$7.PRE_UPDATE,this.preUpdate,this);e.on(events$7.UPDATE,this.update,this);e.once(events$7.SHUTDOWN,this.shutdown,this);this.timeScale=1},createTimeline:function(e){return TimelineBuilder_1(this,e)},timeline:function(e){var t=TimelineBuilder_1(this,e);if(!t.paused){this._add.push(t);this._toProcess++}return t},create:function(e){return TweenBuilder_1(this,e)},add:function(e){var t=TweenBuilder_1(this,e);this._add.push(t);this._toProcess++;return t},existing:function(e){this._add.push(e);this._toProcess++;return this},addCounter:function(e){var t=NumberTweenBuilder_1(this,e);this._add.push(t);this._toProcess++;return t},stagger:function(e,t){return StaggerBuilder_1(e,t)},preUpdate:function(){if(this._toProcess===0){return}var e=this._destroy;var t=this._active;var i=this._pending;var r;var n;for(r=0;r<e.length;r++){n=e[r];var s=t.indexOf(n);if(s===-1){s=i.indexOf(n);if(s>-1){n.state=_const$4.REMOVED;i.splice(s,1)}}else{n.state=_const$4.REMOVED;t.splice(s,1)}}e.length=0;e=this._add;for(r=0;r<e.length;r++){n=e[r];if(n.state===_const$4.PENDING_ADD){if(n.init()){n.play();this._active.push(n)}else{this._pending.push(n)}}}e.length=0;this._toProcess=0},update:function(e,t){var i=this._active;var r;t*=this.timeScale;for(var n=0;n<i.length;n++){r=i[n];if(r.update(e,t)){this._destroy.push(r);this._toProcess++}}},remove:function(e){Remove_1(this._add,e);Remove_1(this._pending,e);Remove_1(this._active,e);Remove_1(this._destroy,e);e.state=_const$4.REMOVED;return this},makeActive:function(e){if(this._add.indexOf(e)!==-1||this._active.indexOf(e)!==-1){return this}var t=this._pending.indexOf(e);if(t!==-1){this._pending.splice(t,1)}this._add.push(e);e.state=_const$4.PENDING_ADD;this._toProcess++;return this},each:function(e,t){var i=[null];for(var r=1;r<arguments.length;r++){i.push(arguments[r])}for(var n in this.list){i[0]=this.list[n];e.apply(t,i)}},getAllTweens:function(){var e=this._active;var t=[];for(var i=0;i<e.length;i++){t.push(e[i])}return t},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(e){var t=this._active;var i;var r=[];var n;if(Array.isArray(e)){for(n=0;n<t.length;n++){i=t[n];for(var s=0;s<e.length;s++){if(i.hasTarget(e[s])){r.push(i)}}}}else{for(n=0;n<t.length;n++){i=t[n];if(i.hasTarget(e)){r.push(i)}}}return r},isTweening:function(e){var t=this._active;var i;for(var r=0;r<t.length;r++){i=t[r];if(i.hasTarget(e)&&i.isPlaying()){return true}}return false},killAll:function(){var e=this.getAllTweens();for(var t=0;t<e.length;t++){e[t].stop()}return this},killTweensOf:function(e){var t=this.getTweensOf(e);for(var i=0;i<t.length;i++){t[i].stop()}return this},pauseAll:function(){var e=this._active;for(var t=0;t<e.length;t++){e[t].pause()}return this},resumeAll:function(){var e=this._active;for(var t=0;t<e.length;t++){e[t].resume()}return this},setGlobalTimeScale:function(e){this.timeScale=e;return this},shutdown:function(){this.killAll();this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;var e=this.systems.events;e.off(events$7.PRE_UPDATE,this.preUpdate,this);e.off(events$7.UPDATE,this.update,this);e.off(events$7.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(events$7.START,this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("TweenManager",TweenManager,"tweens");var TweenManager_1=TweenManager;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Tweens={Builders:builders,Events:events$i,TweenManager:TweenManager_1,Tween:Tween_1,TweenData:TweenData_1,Timeline:Timeline_1};Tweens=Extend_1(false,Tweens,_const$4);var tweens=Tweens;
/**
             * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var ArrayBufferToBase64=function(e,t){var i=new Uint8Array(e);var r=i.length;var n=t?"data:"+t+";base64,":"";for(var s=0;s<r;s+=3){n+=chars$1[i[s]>>2];n+=chars$1[(i[s]&3)<<4|i[s+1]>>4];n+=chars$1[(i[s+1]&15)<<2|i[s+2]>>6];n+=chars$1[i[s+2]&63]}if(r%3===2){n=n.substring(0,n.length-1)+"="}else if(r%3===1){n=n.substring(0,n.length-2)+"=="}return n};var ArrayBufferToBase64_1=ArrayBufferToBase64;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var base64={ArrayBufferToBase64:ArrayBufferToBase64_1,Base64ToArrayBuffer:Base64ToArrayBuffer_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var GetMinMaxValue=function(e,t,i,r,n){if(n===undefined){n=i}var s=GetValue_1(e,t,n);return Clamp_1(s,i,r)};var GetMinMaxValue_1=GetMinMaxValue;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var HasAll=function(e,t){for(var i=0;i<t.length;i++){if(!e.hasOwnProperty(t[i])){return false}}return true};var HasAll_1=HasAll;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var MergeRight=function(e,t){var i=Clone_1(e);for(var r in t){if(i.hasOwnProperty(r)){i[r]=t[r]}}return i};var MergeRight_1=MergeRight;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var object={Clone:Clone_1,Extend:Extend_1,GetAdvancedValue:GetAdvancedValue_1,GetFastValue:GetFastValue_1,GetMinMaxValue:GetMinMaxValue_1,GetValue:GetValue_1,HasAll:HasAll_1,HasAny:HasAny_1,HasValue:HasValue_1,IsPlainObject:IsPlainObject_1,Merge:Merge_1,MergeRight:MergeRight_1,Pick:Pick_1,SetValue:SetValue_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Format=function(e,t){return e.replace(/%([0-9]+)/g,(function(e,i){return t[Number(i)-1]}))};var Format_1=Format;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Reverse$2=function(e){return e.split("").reverse().join("")};var Reverse_1$2=Reverse$2;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var string={Format:Format_1,Pad:Pad_1,Reverse:Reverse_1$2,UppercaseFirst:UppercaseFirst_1,UUID:UUID_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var utils={Array:array,Base64:base64,Objects:object,String:string};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var sound={SoundManagerCreator:SoundManagerCreator_1,Events:events$c,BaseSound:BaseSound_1,BaseSoundManager:BaseSoundManager_1,WebAudioSound:WebAudioSound_1,WebAudioSoundManager:WebAudioSoundManager_1,HTML5AudioSound:HTML5AudioSound_1,HTML5AudioSoundManager:HTML5AudioSoundManager_1,NoAudioSound:NoAudioSound_1,NoAudioSoundManager:NoAudioSoundManager_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var Sprite3D=new Class_1({Extends:GameObject_1,initialize:function e(t,i,r,n,s,a){GameObject_1.call(this,t,"Sprite3D");this.gameObject=new Sprite_1(t,0,0,s,a);this.position=new Vector4_1(i,r,n);this.size=new Vector2_1(this.gameObject.width,this.gameObject.height);this.scale=new Vector2_1(1,1);this.adjustScaleX=true;this.adjustScaleY=true;this._visible=true},project:function(e){var t=this.position;var i=this.gameObject;e.project(t,i);e.getPointSize(t,this.size,this.scale);if(this.scale.x<=0||this.scale.y<=0){i.setVisible(false)}else{if(!i.visible){i.setVisible(true)}if(this.adjustScaleX){i.scaleX=this.scale.x}if(this.adjustScaleY){i.scaleY=this.scale.y}i.setDepth(i.z*-1)}},setVisible:function(e){this.visible=e;return this},visible:{get:function(){return this._visible},set:function(e){this._visible=e;this.gameObject.visible=e}},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},z:{get:function(){return this.position.z},set:function(e){this.position.z=e}}});var Sprite3D_1=Sprite3D;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var tmpVec3$1=new Vector3_1;var tmpVec4=new Vector4_1;var dirvec=new Vector3_1;var rightvec=new Vector3_1;var billboardMatrix=new Matrix4_1;var Camera$1=new Class_1({initialize:function e(t){this.scene=t;this.displayList=t.sys.displayList;this.updateList=t.sys.updateList;this.name="";this.direction=new Vector3_1(0,0,-1);this.up=new Vector3_1(0,1,0);this.position=new Vector3_1;this.pixelScale=128;this.projection=new Matrix4_1;this.view=new Matrix4_1;this.combined=new Matrix4_1;this.invProjectionView=new Matrix4_1;this.near=1;this.far=100;this.ray={origin:new Vector3_1,direction:new Vector3_1};this.viewportWidth=0;this.viewportHeight=0;this.billboardMatrixDirty=true;this.children=new _Set},setPosition:function(e,t,i){this.position.set(e,t,i);return this.update()},setScene:function(e){this.scene=e;return this},setPixelScale:function(e){this.pixelScale=e;return this.update()},add:function(e){this.children.set(e);this.displayList.add(e.gameObject);this.updateList.add(e.gameObject);this.updateChildren();return e},remove:function(e){this.displayList.remove(e.gameObject);this.updateList.remove(e.gameObject);this.children.delete(e);return this},clear:function(){var e=this.getChildren();for(var t=0;t<e.length;t++){this.remove(e[t])}return this},getChildren:function(){return this.children.entries},create:function(e,t,i,r,n,s){if(s===undefined){s=true}var a=new Sprite3D_1(this.scene,e,t,i,r,n);this.displayList.add(a.gameObject);this.updateList.add(a.gameObject);a.visible=s;this.children.set(a);this.updateChildren();return a},createMultiple:function(e,t,i,r){if(r===undefined){r=true}var n=[];for(var s=0;s<e;s++){var a=new Sprite3D_1(this.scene,0,0,0,t,i);this.displayList.add(a.gameObject);this.updateList.add(a.gameObject);a.visible=r;this.children.set(a);n.push(a)}return n},createRect:function(e,t,i,r){if(typeof e==="number"){e={x:e,y:e,z:e}}if(typeof t==="number"){t={x:t,y:t,z:t}}var n=e.x*e.y*e.z;var s=this.createMultiple(n,i,r);var a=0;for(var o=.5-e.z/2;o<e.z/2;o++){for(var l=.5-e.y/2;l<e.y/2;l++){for(var h=.5-e.x/2;h<e.x/2;h++){var u=h*t.x;var c=l*t.y;var f=o*t.z;s[a].position.set(u,c,f);a++}}}this.update();return s},randomSphere:function(e,t){if(t===undefined){t=this.getChildren()}for(var i=0;i<t.length;i++){RandomXYZ_1(t[i].position,e)}return this.update()},randomCube:function(e,t){if(t===undefined){t=this.getChildren()}for(var i=0;i<t.length;i++){RandomXYZW_1(t[i].position,e)}return this.update()},translateChildren:function(e,t){if(t===undefined){t=this.getChildren()}for(var i=0;i<t.length;i++){t[i].position.add(e)}return this.update()},transformChildren:function(e,t){if(t===undefined){t=this.getChildren()}for(var i=0;i<t.length;i++){t[i].position.transformMat4(e)}return this.update()},setViewport:function(e,t){this.viewportWidth=e;this.viewportHeight=t;return this.update()},translate:function(e,t,i){if(typeof e==="object"){this.position.x+=e.x||0;this.position.y+=e.y||0;this.position.z+=e.z||0}else{this.position.x+=e||0;this.position.y+=t||0;this.position.z+=i||0}return this.update()},lookAt:function(e,t,i){var r=this.direction;var n=this.up;if(typeof e==="object"){r.copy(e)}else{r.set(e,t,i)}r.subtract(this.position).normalize();tmpVec3$1.copy(r).cross(n).normalize();n.copy(tmpVec3$1).cross(r).normalize();return this.update()},rotate:function(e,t){RotateVec3_1(this.direction,t,e);RotateVec3_1(this.up,t,e);return this.update()},rotateAround:function(e,t,i){tmpVec3$1.copy(e).subtract(this.position);this.translate(tmpVec3$1);this.rotate(t,i);this.translate(tmpVec3$1.negate());return this.update()},project:function(e,t){if(t===undefined){t=new Vector4_1}var i=this.viewportWidth;var r=this.viewportHeight;var n=Camera$1.NEAR_RANGE;var s=Camera$1.FAR_RANGE;tmpVec4.set(e.x,e.y,e.z,1);tmpVec4.transformMat4(this.combined);if(tmpVec4.w===0){tmpVec4.w=1}tmpVec4.x=tmpVec4.x/tmpVec4.w;tmpVec4.y=tmpVec4.y/tmpVec4.w;tmpVec4.z=tmpVec4.z/tmpVec4.w;t.x=i/2*tmpVec4.x+(0+i/2);t.y=r/2*tmpVec4.y+(0+r/2);t.z=(s-n)/2*tmpVec4.z+(s+n)/2;if(t.w===0||t.w){t.w=1/tmpVec4.w}return t},unproject:function(e,t){if(t===undefined){t=new Vector3_1}var i=tmpVec4.set(0,0,this.viewportWidth,this.viewportHeight);return t.copy(e).unproject(i,this.invProjectionView)},getPickRay:function(e,t){var i=this.ray.origin.set(e,t,0);var r=this.ray.direction.set(e,t,1);var n=tmpVec4.set(0,0,this.viewportWidth,this.viewportHeight);var s=this.invProjectionView;i.unproject(n,s);r.unproject(n,s);r.subtract(i).normalize();return this.ray},updateChildren:function(){var e=this.children.entries;for(var t=0;t<e.length;t++){e[t].project(this)}return this},update:function(){return this.updateChildren()},updateBillboardMatrix:function(){var e=dirvec.set(this.direction).negate();var t=rightvec.set(this.up).cross(e).normalize();var i=tmpVec3$1.set(e).cross(t).normalize();var r=billboardMatrix.val;r[0]=t.x;r[1]=t.y;r[2]=t.z;r[3]=0;r[4]=i.x;r[5]=i.y;r[6]=i.z;r[7]=0;r[8]=e.x;r[9]=e.y;r[10]=e.z;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;this.billboardMatrixDirty=false},getPointSize:function(e,t,i){if(i===undefined){i=new Vector2_1}if(this.billboardMatrixDirty){this.updateBillboardMatrix()}var r=tmpVec3$1;var n=t.x/this.pixelScale/2;var s=t.y/this.pixelScale/2;r.set(-n,-s,0).transformMat4(billboardMatrix).add(e);this.project(r,r);var a=r.x;var o=r.y;r.set(n,s,0).transformMat4(billboardMatrix).add(e);this.project(r,r);var l=r.x;var h=r.y;var u=l-a;var c=h-o;return i.set(u,c)},destroy:function(){this.children.clear();this.scene=undefined;this.children=undefined},setX:function(e){this.position.x=e;return this.update()},setY:function(e){this.position.y=e;return this.update()},setZ:function(e){this.position.z=e;return this.update()},x:{get:function(){return this.position.x},set:function(e){this.position.x=e;this.update()}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e;this.update()}},z:{get:function(){return this.position.z},set:function(e){this.position.z=e;this.update()}}});Camera$1.FAR_RANGE=1;Camera$1.NEAR_RANGE=0;var Camera_1$1=Camera$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var tmpVec3$2=new Vector3_1;var OrthographicCamera=new Class_1({Extends:Camera_1$1,initialize:function e(t,i,r){if(i===undefined){i=0}if(r===undefined){r=0}Camera_1$1.call(this,t);this.viewportWidth=i;this.viewportHeight=r;this._zoom=1;this.near=0;this.update()},setToOrtho:function(e,t,i){if(t===undefined){t=this.viewportWidth}if(i===undefined){i=this.viewportHeight}var r=this.zoom;this.up.set(0,e?-1:1,0);this.direction.set(0,0,e?1:-1);this.position.set(r*t/2,r*i/2,0);this.viewportWidth=t;this.viewportHeight=i;return this.update()},update:function(){var e=this.viewportWidth;var t=this.viewportHeight;var i=Math.abs(this.near);var r=Math.abs(this.far);var n=this.zoom;if(e===0||t===0){return this}this.projection.ortho(n*-e/2,n*e/2,n*-t/2,n*t/2,i,r);tmpVec3$2.copy(this.position).add(this.direction);this.view.lookAt(this.position,tmpVec3$2,this.up);this.combined.copy(this.projection).multiply(this.view);this.invProjectionView.copy(this.combined).invert();this.billboardMatrixDirty=true;this.updateChildren();return this},zoom:{get:function(){return this._zoom},set:function(e){this._zoom=e;this.update()}}});var OrthographicCamera_1=OrthographicCamera;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var tmpVec3$3=new Vector3_1;var PerspectiveCamera=new Class_1({Extends:Camera_1$1,initialize:function e(t,i,r,n){if(i===undefined){i=80}if(r===undefined){r=0}if(n===undefined){n=0}Camera_1$1.call(this,t);this.viewportWidth=r;this.viewportHeight=n;this.fieldOfView=i*Math.PI/180;this.update()},setFOV:function(e){this.fieldOfView=e*Math.PI/180;return this},update:function(){var e=this.viewportWidth/this.viewportHeight;this.projection.perspective(this.fieldOfView,e,Math.abs(this.near),Math.abs(this.far));tmpVec3$3.copy(this.position).add(this.direction);this.view.lookAt(this.position,tmpVec3$3,this.up);this.combined.copy(this.projection).multiply(this.view);this.invProjectionView.copy(this.combined).invert();this.billboardMatrixDirty=true;this.updateChildren();return this}});var PerspectiveCamera_1=PerspectiveCamera;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var CameraManager$1=new Class_1({initialize:function e(t){this.scene=t;this.systems=t.sys;this.cameras=[];t.sys.events.once("boot",this.boot,this);t.sys.events.on("start",this.start,this)},boot:function(){this.systems.events.once("destroy",this.destroy,this)},start:function(){var e=this.systems.events;e.on("update",this.update,this);e.once("shutdown",this.shutdown,this)},add:function(e,t,i){return this.addPerspectiveCamera(e,t,i)},addOrthographicCamera:function(e,t){var i=this.scene.sys.game.config;if(e===undefined){e=i.width}if(t===undefined){t=i.height}var r=new OrthographicCamera_1(this.scene,e,t);this.cameras.push(r);return r},addPerspectiveCamera:function(e,t,i){var r=this.scene.sys.game.config;if(e===undefined){e=80}if(t===undefined){t=r.width}if(i===undefined){i=r.height}var n=new PerspectiveCamera_1(this.scene,e,t,i);this.cameras.push(n);return n},getCamera:function(e){for(var t=0;t<this.cameras.length;t++){if(this.cameras[t].name===e){return this.cameras[t]}}return null},removeCamera:function(e){var t=this.cameras.indexOf(e);if(t!==-1){this.cameras.splice(t,1)}},removeAll:function(){while(this.cameras.length>0){var e=this.cameras.pop();e.destroy()}return this.main},update:function(e,t){for(var i=0,r=this.cameras.length;i<r;++i){this.cameras[i].update(e,t)}},shutdown:function(){var e=this.systems.events;e.off("update",this.update,this);e.off("shutdown",this.shutdown,this);this.removeAll()},destroy:function(){this.shutdown();this.scene.sys.events.off("start",this.start,this);this.scene=null;this.systems=null}});PluginCache_1.register("CameraManager3D",CameraManager$1,"cameras3d");var CameraManager_1$1=CameraManager$1;
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */var src={Camera:Camera_1$1,CameraManager:CameraManager_1$1,OrthographicCamera:OrthographicCamera_1,PerspectiveCamera:PerspectiveCamera_1};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */GameObjectFactory_1.register("sprite3D",(function(e,t,i,r,n){var s=new Sprite3D_1(this.scene,e,t,i,r,n);this.displayList.add(s.gameObject);this.updateList.add(s.gameObject);return s}));var Sprite3DFactory={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2018 Photon Storm Ltd.
             * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
             */GameObjectCreator_1.register("sprite3D",(function(e,t){if(e===undefined){e={}}var i=GetAdvancedValue_1(e,"key",null);var r=GetAdvancedValue_1(e,"frame",null);var n=new Sprite3D_1(this.scene,0,0,i,r);if(t!==undefined){e.add=t}BuildGameObject_1(this.scene,n,e);BuildGameObjectAnimation_1(n,e);return n}));var Sprite3DCreator={};
/**
             * @author       Richard Davey <rich@photonstorm.com>
             * @copyright    2019 Photon Storm Ltd.
             * @license      {@link https://opensource.org/licenses/MIT|MIT License}
             */var Phaser={Actions:actions,Animations:animations,BlendModes:BlendModes,Cache:cache,Cameras:cameras,Core:core,Class:Class_1,Create:create,Curves:curves,Data:data,Display:display,DOM:dom,Events:events$9,Game:Game_1,GameObjects:gameobjects,Geom:geom,Input:input,Loader:loader,Math:math,Physics:physics,Plugins:plugins,Renderer:renderer,Scale:scale,ScaleModes:ScaleModes_1,Scene:Scene_1,Scenes:scene,Structs:structs,Textures:textures,Tilemaps:tilemaps,Time:time,Tweens:tweens,Utils:utils};if(typeof FEATURE_SOUND){Phaser.Sound=sound}if(typeof PLUGIN_CAMERA3D){Phaser.Cameras.Sprite3D=src;Phaser.GameObjects.Sprite3D=Sprite3D_1;Phaser.GameObjects.Factories.Sprite3D=Sprite3DFactory;Phaser.GameObjects.Creators.Sprite3D=Sprite3DCreator}if(typeof PLUGIN_FBINSTANT){Phaser.FacebookInstantGamesPlugin=FacebookInstantGamesPlugin_1}Phaser=Extend_1(false,Phaser,_const);var phaser=Phaser;commonjsGlobal.Phaser=Phaser;var phaser_1=phaser.Game;var ionPhaserCss="ion-phaser{display:block}";var IonPhaser=exports("ion_phaser",function(){function e(e){var t=this;registerInstance(this,e);this.initialize=true;this.initializeGame=function(e){if(e===void 0){e=t.game}if(e===null||e===undefined)return;if(e.instance!==undefined&&e.instance!==null){throw new Error("A Phaser game already exist")}e.parent=e.parent||t.el;e.instance=new phaser_1(e)}}e.prototype.onGameChange=function(e){if(this.initialize&&!this.hasInitialized()){this.initializeGame(e)}};e.prototype.onInitialize=function(e,t){if(e&&!t){this.initializeGame()}};e.prototype.getInstance=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){e=(this.game||{}).instance;return[2,Promise.resolve(e)]}))}))};e.prototype.destroy=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.hasInitialized()){this.game.instance.destroy(true);this.game.instance=null}return[2]}))}))};e.prototype.componentWillLoad=function(){if(!this.hasInitialized()&&this.initialize){this.initializeGame()}};e.prototype.componentDidUnload=function(){this.destroy()};e.prototype.hasInitialized=function(){return this.game&&this.game.instance!==undefined&&this.game.instance!==null};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{game:["onGameChange"],initialize:["onInitialize"]}},enumerable:true,configurable:true});return e}());IonPhaser.style=ionPhaserCss}}}));